%!PS-Adobe-2.0
%%Creator: dvips(k) 5.86 Copyright 1999 Radical Eye Software
%%Title: guts.dvi
%%Pages: 209
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%DocumentFonts: Times-Roman Times-Bold Times-Italic
%%EndComments
%DVIPSWebPage: (www.radicaleye.com)
%DVIPSCommandLine: dvips -o guts.ps guts.dvi
%DVIPSParameters: dpi=600, compressed
%DVIPSSource:  TeX output 1999.11.15:1618
%%BeginProcSet: texc.pro
%!
/TeXDict 300 dict def TeXDict begin/N{def}def/B{bind def}N/S{exch}N/X{S
N}B/A{dup}B/TR{translate}N/isls false N/vsize 11 72 mul N/hsize 8.5 72
mul N/landplus90{false}def/@rigin{isls{[0 landplus90{1 -1}{-1 1}ifelse 0
0 0]concat}if 72 Resolution div 72 VResolution div neg scale isls{
landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div hsize
mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul TR[
matrix currentmatrix{A A round sub abs 0.00001 lt{round}if}forall round
exch round exch]setmatrix}N/@landscape{/isls true N}B/@manualfeed{
statusdict/manualfeed true put}B/@copies{/#copies X}B/FMat[1 0 0 -1 0 0]
N/FBB[0 0 0 0]N/nn 0 N/IEn 0 N/ctr 0 N/df-tail{/nn 8 dict N nn begin
/FontType 3 N/FontMatrix fntrx N/FontBBox FBB N string/base X array
/BitMaps X/BuildChar{CharBuilder}N/Encoding IEn N end A{/foo setfont}2
array copy cvx N load 0 nn put/ctr 0 N[}B/sf 0 N/df{/sf 1 N/fntrx FMat N
df-tail}B/dfs{div/sf X/fntrx[sf 0 0 sf neg 0 0]N df-tail}B/E{pop nn A
definefont setfont}B/Cw{Cd A length 5 sub get}B/Ch{Cd A length 4 sub get
}B/Cx{128 Cd A length 3 sub get sub}B/Cy{Cd A length 2 sub get 127 sub}
B/Cdx{Cd A length 1 sub get}B/Ci{Cd A type/stringtype ne{ctr get/ctr ctr
1 add N}if}B/id 0 N/rw 0 N/rc 0 N/gp 0 N/cp 0 N/G 0 N/CharBuilder{save 3
1 roll S A/base get 2 index get S/BitMaps get S get/Cd X pop/ctr 0 N Cdx
0 Cx Cy Ch sub Cx Cw add Cy setcachedevice Cw Ch true[1 0 0 -1 -.1 Cx
sub Cy .1 sub]/id Ci N/rw Cw 7 add 8 idiv string N/rc 0 N/gp 0 N/cp 0 N{
rc 0 ne{rc 1 sub/rc X rw}{G}ifelse}imagemask restore}B/G{{id gp get/gp
gp 1 add N A 18 mod S 18 idiv pl S get exec}loop}B/adv{cp add/cp X}B
/chg{rw cp id gp 4 index getinterval putinterval A gp add/gp X adv}B/nd{
/cp 0 N rw exit}B/lsh{rw cp 2 copy get A 0 eq{pop 1}{A 255 eq{pop 254}{
A A add 255 and S 1 and or}ifelse}ifelse put 1 adv}B/rsh{rw cp 2 copy
get A 0 eq{pop 128}{A 255 eq{pop 127}{A 2 idiv S 128 and or}ifelse}
ifelse put 1 adv}B/clr{rw cp 2 index string putinterval adv}B/set{rw cp
fillstr 0 4 index getinterval putinterval adv}B/fillstr 18 string 0 1 17
{2 copy 255 put pop}for N/pl[{adv 1 chg}{adv 1 chg nd}{1 add chg}{1 add
chg nd}{adv lsh}{adv lsh nd}{adv rsh}{adv rsh nd}{1 add adv}{/rc X nd}{
1 add set}{1 add clr}{adv 2 chg}{adv 2 chg nd}{pop nd}]A{bind pop}
forall N/D{/cc X A type/stringtype ne{]}if nn/base get cc ctr put nn
/BitMaps get S ctr S sf 1 ne{A A length 1 sub A 2 index S get sf div put
}if put/ctr ctr 1 add N}B/I{cc 1 add D}B/bop{userdict/bop-hook known{
bop-hook}if/SI save N @rigin 0 0 moveto/V matrix currentmatrix A 1 get A
mul exch 0 get A mul add .99 lt{/QV}{/RV}ifelse load def pop pop}N/eop{
SI restore userdict/eop-hook known{eop-hook}if showpage}N/@start{
userdict/start-hook known{start-hook}if pop/VResolution X/Resolution X
1000 div/DVImag X/IEn 256 array N 2 string 0 1 255{IEn S A 360 add 36 4
index cvrs cvn put}for pop 65781.76 div/vsize X 65781.76 div/hsize X}N
/p{show}N/RMat[1 0 0 -1 0 0]N/BDot 260 string N/Rx 0 N/Ry 0 N/V{}B/RV/v{
/Ry X/Rx X V}B statusdict begin/product where{pop false[(Display)(NeXT)
(LaserWriter 16/600)]{A length product length le{A length product exch 0
exch getinterval eq{pop true exit}if}{pop}ifelse}forall}{false}ifelse
end{{gsave TR -.1 .1 TR 1 1 scale Rx Ry false RMat{BDot}imagemask
grestore}}{{gsave TR -.1 .1 TR Rx Ry scale 1 1 false RMat{BDot}
imagemask grestore}}ifelse B/QV{gsave newpath transform round exch round
exch itransform moveto Rx 0 rlineto 0 Ry neg rlineto Rx neg 0 rlineto
fill grestore}B/a{moveto}B/delta 0 N/tail{A/delta X 0 rmoveto}B/M{S p
delta add tail}B/b{S p tail}B/c{-4 M}B/d{-3 M}B/e{-2 M}B/f{-1 M}B/g{0 M}
B/h{1 M}B/i{2 M}B/j{3 M}B/k{4 M}B/w{0 rmoveto}B/l{p -4 w}B/m{p -3 w}B/n{
p -2 w}B/o{p -1 w}B/q{p 1 w}B/r{p 2 w}B/s{p 3 w}B/t{p 4 w}B/x{0 S
rmoveto}B/y{3 2 roll p a}B/bos{/SS save N}B/eos{SS restore}B end

%%EndProcSet
%%BeginProcSet: 8r.enc
% @@psencodingfile@{
%   author = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry",
%   version = "0.6",
%   date = "22 June 1996",
%   filename = "8r.enc",
%   email = "kb@@mail.tug.org",
%   address = "135 Center Hill Rd. // Plymouth, MA 02360",
%   codetable = "ISO/ASCII",
%   checksum = "119     662    4424",
%   docstring = "Encoding for TrueType or Type 1 fonts to be used with TeX."
% @}
% 
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% 
% (4) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available.
% 
% (5) hyphen appears twice for compatibility with both ASCII and Windows.
% 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /.notdef /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /.notdef
  /breve /minus /.notdef 
% These are the only two remaining unencoded characters, so may as
% well include them.
  /Zcaron /zcaron 
% 0x10
 /caron /dotlessi 
% (unusual TeX characters available in, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl 
 /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef
 % very contentious; it's so painful not having quoteleft and quoteright
 % at 96 and 145 that we move the things normally found there down to here.
 /grave /quotesingle 
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /.notdef /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /.notdef /.notdef /.notdef
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /.notdef /.notdef /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def

%%EndProcSet
%%BeginProcSet: texps.pro
%!
TeXDict begin/rf{findfont dup length 1 add dict begin{1 index/FID ne 2
index/UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type/integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics/Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont/setfont cvx]cvx def}def/ObliqueSlant{
dup sin S cos div neg}B/SlantFont{4 index mul add}def/ExtendFont{3 -1
roll mul exch}def/ReEncodeFont{CharStrings rcheck{/Encoding false def
dup[exch{dup CharStrings exch known not{pop/.notdef/Encoding true def}
if}forall Encoding{]exch pop}{cleartomark}ifelse}if/Encoding exch def}
def end

%%EndProcSet
%%BeginProcSet: special.pro
%!
TeXDict begin/SDict 200 dict N SDict begin/@SpecialDefaults{/hs 612 N
/vs 792 N/ho 0 N/vo 0 N/hsc 1 N/vsc 1 N/ang 0 N/CLIP 0 N/rwiSeen false N
/rhiSeen false N/letter{}N/note{}N/a4{}N/legal{}N}B/@scaleunit 100 N
/@hscale{@scaleunit div/hsc X}B/@vscale{@scaleunit div/vsc X}B/@hsize{
/hs X/CLIP 1 N}B/@vsize{/vs X/CLIP 1 N}B/@clip{/CLIP 2 N}B/@hoffset{/ho
X}B/@voffset{/vo X}B/@angle{/ang X}B/@rwi{10 div/rwi X/rwiSeen true N}B
/@rhi{10 div/rhi X/rhiSeen true N}B/@llx{/llx X}B/@lly{/lly X}B/@urx{
/urx X}B/@ury{/ury X}B/magscale true def end/@MacSetUp{userdict/md known
{userdict/md get type/dicttype eq{userdict begin md length 10 add md
maxlength ge{/md md dup length 20 add dict copy def}if end md begin
/letter{}N/note{}N/legal{}N/od{txpose 1 0 mtx defaultmatrix dtransform S
atan/pa X newpath clippath mark{transform{itransform moveto}}{transform{
itransform lineto}}{6 -2 roll transform 6 -2 roll transform 6 -2 roll
transform{itransform 6 2 roll itransform 6 2 roll itransform 6 2 roll
curveto}}{{closepath}}pathforall newpath counttomark array astore/gc xdf
pop ct 39 0 put 10 fz 0 fs 2 F/|______Courier fnt invertflag{PaintBlack}
if}N/txpose{pxs pys scale ppr aload pop por{noflips{pop S neg S TR pop 1
-1 scale}if xflip yflip and{pop S neg S TR 180 rotate 1 -1 scale ppr 3
get ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg TR}if xflip
yflip not and{pop S neg S TR pop 180 rotate ppr 3 get ppr 1 get neg sub
neg 0 TR}if yflip xflip not and{ppr 1 get neg ppr 0 get neg TR}if}{
noflips{TR pop pop 270 rotate 1 -1 scale}if xflip yflip and{TR pop pop
90 rotate 1 -1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0 get
neg sub neg TR}if xflip yflip not and{TR pop pop 90 rotate ppr 3 get ppr
1 get neg sub neg 0 TR}if yflip xflip not and{TR pop pop 270 rotate ppr
2 get ppr 0 get neg sub neg 0 S TR}if}ifelse scaleby96{ppr aload pop 4
-1 roll add 2 div 3 1 roll add 2 div 2 copy TR .96 dup scale neg S neg S
TR}if}N/cp{pop pop showpage pm restore}N end}if}if}N/normalscale{
Resolution 72 div VResolution 72 div neg scale magscale{DVImag dup scale
}if 0 setgray}N/psfts{S 65781.76 div N}N/startTexFig{/psf$SavedState
save N userdict maxlength dict begin/magscale true def normalscale
currentpoint TR/psf$ury psfts/psf$urx psfts/psf$lly psfts/psf$llx psfts
/psf$y psfts/psf$x psfts currentpoint/psf$cy X/psf$cx X/psf$sx psf$x
psf$urx psf$llx sub div N/psf$sy psf$y psf$ury psf$lly sub div N psf$sx
psf$sy scale psf$cx psf$sx div psf$llx sub psf$cy psf$sy div psf$ury sub
TR/showpage{}N/erasepage{}N/copypage{}N/p 3 def @MacSetUp}N/doclip{
psf$llx psf$lly psf$urx psf$ury currentpoint 6 2 roll newpath 4 copy 4 2
roll moveto 6 -1 roll S lineto S lineto S lineto closepath clip newpath
moveto}N/endTexFig{end psf$SavedState restore}N/@beginspecial{SDict
begin/SpecialSave save N gsave normalscale currentpoint TR
@SpecialDefaults count/ocount X/dcount countdictstack N}N/@setspecial{
CLIP 1 eq{newpath 0 0 moveto hs 0 rlineto 0 vs rlineto hs neg 0 rlineto
closepath clip}if ho vo TR hsc vsc scale ang rotate rwiSeen{rwi urx llx
sub div rhiSeen{rhi ury lly sub div}{dup}ifelse scale llx neg lly neg TR
}{rhiSeen{rhi ury lly sub div dup scale llx neg lly neg TR}if}ifelse
CLIP 2 eq{newpath llx lly moveto urx lly lineto urx ury lineto llx ury
lineto closepath clip}if/showpage{}N/erasepage{}N/copypage{}N newpath}N
/@endspecial{count ocount sub{pop}repeat countdictstack dcount sub{end}
repeat grestore SpecialSave restore end}N/@defspecial{SDict begin}N
/@fedspecial{end}B/li{lineto}B/rl{rlineto}B/rc{rcurveto}B/np{/SaveX
currentpoint/SaveY X N 1 setlinecap newpath}N/st{stroke SaveX SaveY
moveto}N/fil{fill SaveX SaveY moveto}N/ellipse{/endangle X/startangle X
/yrad X/xrad X/savematrix matrix currentmatrix N TR xrad yrad scale 0 0
1 startangle endangle arc savematrix setmatrix}N end

%%EndProcSet
TeXDict begin 40258431 52099146 1000 600 600 (guts.dvi)
@start /Fa 157[25 25 97[{TeXBase1Encoding ReEncodeFont}2
49.8132 /Times-Italic rf /Fb 157[29 29 97[{
TeXBase1Encoding ReEncodeFont}2 58.1154 /Times-Italic
rf
%DVIPSBitmapFont: Fc cmr7 7 6
/Fc 6 57 df<13381378EA01F8121F12FE12E01200B3AB487EB512F8A215267BA521>49
D<13FF000313E0380E03F0381801F8486C7E48137E00787F12FC6C1480A2141FA2127CC7
123F1500A2147EA25C5C495A495A495A49C7FC131E131C5B903860018013C0EA01803903
00030012065A001FB5FC5A485BB5FCA219267DA521>I<13FF000713E0380F01F8381C00
FC0030137E123C007E7FA35C123CC7127EA25C495A495AEB0FC048B4C7FCA2380003E0EB
00F0147C147EA2801580A21238127C12FEA21500485B0078137E0070137C6C5B381F03F0
3807FFC0C690C7FC19277DA521>I<0018130C001F137CEBFFF85C5C5C91C7FCEA18F090
C8FCA6137F3819FFE0381B81F0381E0078001C7F0008133EC7FC80A21580A21230127C12
FCA3150012F00060133E127000305B001C5B380F03E03803FFC0C648C7FC19277DA521>
53 D<EB0FE0EB3FF8EBF81C3801E0063803C01F48485AEA0F005A121E003E131E91C7FC
5AA21304EB3FC038FCFFF038FDC078EB003CB4133E48131E141FA2481480A4127CA4003C
1400123E001E131E143E6C133C6C6C5A3803C1F03801FFC06C6CC7FC19277DA521>I<13
7F3803FFE0380781F8380E007C48131E5A801278A3127C007E131EEA3F80EBE03C6C6C5A
380FFCF03807FFC06C5BC613E0487F38079FFC380F07FEEA1E0348C67E48133FEC1F8048
130FA21407A315001278140E6C5B6C5B380F80F03803FFE0C66CC7FC19277DA521>56
D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fd cmr10 10 3
/Fd 3 51 df<EB03F8EB1FFF90387E0FC09038F803E03901E000F0484813780007147C48
487FA248C77EA2481580A3007EEC0FC0A600FE15E0B3007E15C0A4007F141F6C1580A36C
15006D5B000F143EA26C6C5B6C6C5B6C6C485A6C6C485A90387E0FC0D91FFFC7FCEB03F8
233A7DB72A>48 D<EB01C013031307131F13FFB5FCA2131F1200B3B3A8497E007FB512F0
A31C3879B72A>I<EB0FF0EB7FFE48B57E3903E03FC03907000FE0000E6D7E00186D7E00
386D7E00308048130081007C80B41580A27FA36CC7FCA2121CC81300A25D5DA24A5AA24A
5A5D4A5A4A5A5D4AC7FC143E5C5C5C495A495A49C8FC130E49EB01805B5B491303491400
485A48C7FC00065C000FB6FC5A5A485CB6FCA321387CB72A>I E
%EndDVIPSBitmapFont
/Fe 134[37 37 55 37 42 23 32 32 1[42 42 42 60 23 37 1[23
42 42 23 37 42 37 42 42 50[21 28 21 2[28 28 37[42 2[{
TeXBase1Encoding ReEncodeFont}29 83.022 /Times-Italic
rf
%DVIPSBitmapFont: Ff cmtt10 10 48
/Ff 48 122 df<121FEA3F80EA7FC0EAFFE0A5EA7FC0EA3F80EA1F00C7FCAE121FEA3F80
EA7FC0EAFFE0A5EA7FC0EA3F80EA1F000B2470A32C>58 D<14FE497EA4497FA214EFA213
0781A214C7A2010F7FA490381F83F0A590383F01F8A490387E00FCA549137E90B512FEA3
4880A29038F8003FA34848EB1F80A4000715C049130FD83FFCEB7FF8486CEBFFFCB54813
FE6C486C13FC6C48EB7FF827347EB32C>65 D<003FB512E04814F8B612FE6C806C15C039
03F0003FED0FE0ED07F01503A2ED01F8A6ED03F0A21507ED0FE0ED1FC0EDFF8090B61200
5D5D15FF16C09039F0001FE0ED07F0ED03F81501ED00FCA216FE167EA616FE16FC1501ED
03F8150FED3FF0003FB612E04815C0B712806CECFE006C14F027337FB22C>I<02FF1370
0107EBE0F84913F9013F13FD4913FFEBFF813901FE003FD803F8131F49130F4848130712
0F491303485A150148C7FCA25A007EEC00F01600A212FE5AAB7E127EA3007F15F06CEC01
F8A26C7EA26C6C13036D14F012076C6CEB07E06D130FD801FEEB3FC03A00FF81FF806DB5
12006D5B010F13F86D5B0100138025357DB32C>I<007FB5FCB612C015F0816C803907E0
03FEEC00FFED7F80153FED1FC0ED0FE0A2150716F0150316F81501A4ED00FCACED01F8A3
150316F0A2150716E0150FED1FC0153FED7F80EDFF00EC03FE007FB55AB65A5D15C06C91
C7FC26337EB22C>I<003FB612F04815F8B7FC7E7E3903F00001A7ED00F01600A4EC01E0
4A7EA490B5FCA5EBF003A46E5A91C8FCA5163C167EA8003FB612FE5AB7FC7E6C15FC2733
7EB22C>I<007FB612F8B712FCA37ED803F0C7FCA716781600A515F04A7EA490B5FCA5EB
F001A46E5A92C7FCAD387FFFC0B57E805C6C5B26337EB22C>I<903901FC038090390FFF
87C04913CF4913EF4913FFEBFF073801FC013903F0007F485A000F143F49131F121F5B00
3F140F90C7FCA2127EED078092C7FCA212FE5AA8913801FFF04A13F84A13FC6C6D13F800
7E6D13F09138000FC0A36C141FA27F121F6D133F120F6D137F12076C6C13FF3801FC0138
00FF076DB5FC6D13EF6D13CF6DEB0780D901FCC7FC26357DB32C>I<D87FFEEBFFFCB548
13FEA36C486C13FCD807E0EB0FC0B190B6FCA59038E0000FB3D87FFEEBFFFCB54813FEA3
6C486C13FC27337EB22C>I<007FB512F8B612FCA36C14F839000FC000B3B3A5007FB512
F8B612FCA36C14F81E3379B22C>I<387FFFC0B57E805C6C5BD803F0C8FCB3AE16F0ED01
F8A8007FB6FCB7FCA36C15F025337DB22C>76 D<D87FE0EB0FFC486CEB1FFEA26D133F00
7F15FC000F15E001BC137BA401BE13FB019E13F3A2EB9F01A2018F13E3A21483A2018713
C314C7A201831383A214EFA201811303A214FFEB80FEA3147C14381400ACD87FF0EB1FFC
486CEB3FFEA36C48EB1FFC27337EB22C>I<D87FF0EB7FFC486CEBFFFEA27F007FEC7FFC
D807FEEB07C013DEA213DF13CFA2148013C714C0A213C314E0A213C114F0A213C014F8A2
147CA3143EA2141E141FA2140F1587A2140715C7A2140315E71401A215F71400A215FFD8
7FFC137F487E153FA26C48EB1F8027337EB22C>I<EB7FFF0003B512E0000F14F8488048
80EBE003EB800048C7127FA2007E80A300FE158048141FB3A86C143FA2007E1500A3007F
5CA26C6C13FEEBF00790B5FC6C5C6C5C000314E0C66C90C7FC21357BB32C>I<003FB512
C04814F8B67E6C14FF6C15802603F00013C0153FED0FE0ED07F0A2150316F81501A61503
16F01507A2ED0FE0ED3FC015FF90B61280160015FC5D15C001F0C8FCB0EA3FFF487FB57E
6C5B6C90C8FC25337EB22C>I<387FFFFCB67E15E015F86C803907E007FE1401EC007F6F
7E151FA26F7EA64B5AA2153F4BC7FCEC01FE140790B55A5D15E081819038E007FC1401EC
007E157F81A81606160FEE1F80A4D87FFEEB1FBFB5ECFF006F5A15076C486D5AC8EA01F0
29347EB22C>82 D<90381FF80790B5EA0F8048148F4814FF5A380FF01F381FC00348C7FC
48147F127E00FE143F5A151FA46CEC0F00007E91C7FC127F7FEA3FE0EA1FFC380FFFC06C
13FC6CEBFFC06C806C6C13F801077F9038007FFEEC07FF02001380153FED1FC0150F16E0
A200381407127C12FCA46CEC0FC0A26CEC1F806D133F01E0EB7F009038FE01FE90B55A5D
00F95CD8F83F13C0D8700790C7FC23357CB32C>I<003FB612FC4815FEB7FCA33AFC007E
007EA70078153CC71400B3AF90381FFFF8497F497F6D5B6D5B27337EB22C>I<D83FFF90
381FFF80486D4813C0B56C4813E06C496C13C06C496C1380D803F0903801F800B3AF6D13
0300015DA26D130700005D6D130F017F495A6D6C485A90261FE0FFC7FC6DB45A6D5B6D5B
6D5B9038003F802B3480B22C>I<D87FF8EB3FFC486CEB7FFE6D13FF49137F6C48EB3FFC
D80FC0EB07E06D130F000715C0A36D131F00031580A36D133F00011500A36D5B0000147E
A4017E5BA46D485AA490381F83F0A4010F5B14C7A301075BA214EFA201035BA214FFA26D
90C7FCA46D5A27347EB22C>I<D87FF0EB07FF486C491380A36C486D1300001FC8127CA4
6C6C5CA76C6C495AA4143E147FA33A03E0FF83E0A214F7A201E113C3A3000101E35BA201
F113C701F313E7A314C1A200005DA201F713F71480A301FF13FF017F91C7FC4A7EA4013E
133E29347FB22C>I<3A1FFE03FFE0486C4813F04813876C13076C486C13E03A01F800FE
007F0000495A13FE017E5BEB7F03013F5B1487011F5B14CF010F5B14FF6D5BA26D90C7FC
A26D5AA26D5AA2497EA2497EA2497F81EB0FCF81EB1FC7EC87F0EB3F83EC03F8EB7F0101
7E7FEBFE00497F0001147E49137F000380491480151FD83FFCEB7FF8486CEBFFFCB54813
FE6C486C13FC6C48EB7FF827337EB22C>I<D87FFCEB7FFC486CEBFFFEA36C48EB7FFCD8
07F0EB0FC0151F000315806D133F12016DEB7F0012006D137E017E13FE017F5BEB3F01EC
81F8131FEC83F0EB0FC314C7903807E7E0A2903803EFC014FF6D5BA292C7FC7F5C147EB0
903807FFE0497FA36D5B27337EB22C>I<007FB6FCA2B71280A26C1500A221067B7D2C>
95 D<3801FFF0000713FE486D7E488048809038C01FF0EC03F86C486C7E6CC7FC000680
C8127EA3ECFFFE131F90B5FC12035A48EB807E381FF800EA3FC048C7FC12FE5AA47E007E
14FE387F8003383FE01F6CB612FC6C15FE6C149F0001EBFE0F3A003FF007FC27247CA32C
>97 D<EA3FF0487E12FF127F123F1201AAEC1FE0ECFFF801F913FE01FB7F90B612809138
F07FC09138800FE091380007F049130349EB01F816FC491300A216FE167EA816FE6D14FC
A2ED01F86D130316F06D13079138801FE09138E07FC091B5128001FB140001F913FCD800
F85B9038703FC027337FB22C>I<903803FFE0011F13F8017F7F90B57E48804848C6FCEA
07F04848137ED81F80133C003F141890C9FC5A127EA25AA8127EA2127F6C140F6DEB1F80
121FD80FE0133F6C6CEB7F003903FE03FE6CB55A6C5C6D5B011F5B010390C7FC21247AA3
2C>I<EC07FE4A7E5C8080EC003FAAEB07F8EB3FFE90387FFFBF48B6FC5A3807FC0F380F
F003381FC0005B003F8090C7FC007E80A212FE5AA87E007E5CA2007F5C7E6C6C5A13C038
0FE0073807FC1F6CB612F86CECBFFC6CEC3FFED93FFC13FC90390FF01FF827337DB22C>
I<EB03FE90381FFFC0017F13F090B57E48803903FE03FE3907F000FF4848EB3F80D81F80
131F003F15C090C7120F5A007E15E015075AB7FCA416C000FCC9FC7E127EA2127F6CEC03
C06DEB07E06C7E6C6C130FD807F8EB1FC06CB4EBFF806C90B512006C5C013F5B010F13F0
0101138023247CA32C>I<EC0FF8EC3FFCECFFFE497F491480ECFC7FEB07F090390FE03F
00ECC01E92C7FCA6003FB512FE4880B7FCA26C5C26000FC0C7FCB3A8003FB512F04880A3
6C5C21337DB22C>I<ED03F0903907F80FFC90391FFE3FFE017FB6FC90B7FC48ECFE7F39
03FC0FF82607F003133E3A0FE001FC1CD9C0001300001F8049137EA66D13FE000F5CEBE0
016C6C485A3903FC0FF048B55A5D485CD99FFEC7FCEB87F80180C8FCA37F6C7E90B512F0
6C14FE48ECFF804815C04815F03A3FC0001FF890C71203007EEC00FC007C157C00FC157E
48153EA46C157E007E15FC6C6CEB03F8D81FE0EB0FF0D80FFCEB7FE06CB612C06C1580C6
ECFE00013F13F8010713C028387EA42C>I<EA3FF0487E12FF127F123F1201AAEC1FE0EC
7FF89038F9FFFC01FB7F90B6FC9138F03F80ECC01F02007F49130FA25BA25BB33A3FFFC0
7FFE486DB5FCB500F114806C01E014006C496C5A29337FB22C>I<1307497E497E497EA3
6D5A6D5A6DC7FC90C8FCA7383FFFC0487FB5FC7E7EEA0007B3A8007FB512F8B612FC15FE
15FC6C14F81F3479B32C>I<140E141FEC3F80EC7FC0A3EC3F80EC1F00140E91C7FCA790
B512804814C05A7E7EEB000FB3B3A2141F003C1480007E133FB414005CEB01FEEBFFFC6C
5B6C5B6C13C0000790C7FC1A467CB32C>I<383FFFE0487FB5FC7E7EEA0003B3B3A5003F
B6FC481580B712C06C15806C150022337BB22C>108 D<3A3F83F007E03A7FCFF81FF03A
FFDFFC3FF86CB46C487E6C90B57E3A07FE1FFC3E01F8EBF03F496C487EA201E013C0A301
C01380B33B3FF81FF03FE03B7FFC3FF87FF03BFFFE7FFCFFF83B7FFC3FF87FF03B3FF81F
F03FE02D2481A32C>I<393FF01FE0397FF87FF839FFF9FFFCD87FFB7F6CB6FC00019038
F03F80ECC01F02007F49130FA25BA25BB33A3FFFC07FFE486DB5FCB500F114806C01E014
006C496C5A29247FA32C>I<EB07FCEB1FFF017F13C048B512F048803907FC07FC390FF0
01FE48486C7E0180133F003F158090C7121F007EEC0FC0A348EC07E0A76C140F007E15C0
A2007F141F6C15806D133F6C6CEB7F006D5B6C6C485A3907FC07FC6CB55A6C5C6C6C13C0
011F90C7FCEB07FC23247CA32C>I<393FF01FE0397FF8FFF8D8FFF913FED87FFB7F6CB6
128000019038F07FC09138800FE091380007F049130349EB01F816FC491300A216FE167E
A816FE6D14FCA2ED01F86D130316F06D13079138801FE09138E07FC091B5128001FB1400
01F913FC01F85BEC3FC091C8FCAD383FFFC0487FB57E6C5B6C5B27367FA32C>I<903903
FC078090391FFF0FC0017F13CF90B512EF4814FF3803FE073807F001390FE0007FEA1F80
003F143F90C7FC48141F127E150F5AA87E007E141FA26C143F7F001F147F6D13FF380FF0
013807FC0F6CB512EF6C14CF6C6C138F6D130FEB07F890C7FCAD0203B5FC4A1480A36E14
0029367DA32C>I<D83FFEEB3FC03A7FFF01FFF0B5000713F86C4913FC6C5B39003F3FE1
EC7F019138FC00F84A13704A13005C5CA25CA391C8FCAF003FB512E04880B6FC7E6C5C26
247EA32C>I<90387FF8700003B512F85A121F5A387FC00F387E00034813015AA36CEB00
F0007F140013F0383FFFC06C13FE6CEBFF80000314E0C66C13F0010113F890380007FCEC
00FE0038143F127C00FC141F7EA26C143F153E01C013FE9038F007FC90B512F815F015E0
00F8148039701FFC0020247AA32C>I<130E131F5BA8003FB6FC481580B7FCA26C1500D8
003FC8FCB1ED03C0ED07E0A5EC800F011FEB1FC0ECE07F6DB512806D14006D5B6D13F890
38003FE0232E7EAD2C>I<3A3FF001FF80486C487F00FF5B007F7F003F7F0001EB000FB3
A3151FA2153F6D137F3900FE03FF90B612FE6D806D01EF1380010F01CF1300903903FE07
FE29247FA32C>I<D87FFEEBFFFCB54813FE148314016C486C13FCD803E0EB0F80A26D13
1F00011500A26D5B0000143EA26D137E017C137CA2017E13FC013E5BA2EB3F01011F5BA2
1483010F5BA214C701075BA214EF01035BA214FF6D90C7FCA26D5A147C27247EA32C>I<
D83FFFEB7FFE486DB5FCB515806C16006C496C5AD807C0EB01F0A66C6C495AA3143E147F
A2D801F0495AECFF87A214F701F113C7A200005D9038F9E3CFA201FB13EFA3D97BC190C7
FC017F13FFA21480A2013F5B90381F007C29247FA32C>I<3A3FFF03FFF048018713F8A3
6C010313F03A00FC007E005D90387E01F8013F5BEB1F83EC87E090380FCFC0903807EF80
EB03FF6D90C7FC5C6D5A147C14FE130180903803EF80903807CFC0EB0FC7EC83E090381F
01F0013F7FEB7E00017C137C49137E0001803A3FFE01FFF8486C4813FCB5008313FE6C01
0313FC6C486C13F827247EA32C>I<D83FFEEBFFFC486C4813FEB512836C13016C486C13
FCD803E0EB0F806C7E151F6D140012005D6D133E137C017E137E013E137CA2013F13FC6D
5BA2EB0F815DA2EB07C1ECC3E0A2EB03E3ECE7C0130114F75DEB00FFA292C7FC80A2143E
A2147E147CA214FC5CA2EA0C01003F5BEA7F83EB87E0EA7E0F495A387FFF806C90C8FC6C
5A6C5AEA07E027367EA32C>I E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fg cmsltt10 10.95 5
/Fg 5 116 df<ED07FF4B13804B13C0A281819238003F80A4167FA21700A491387FC0FF
903803FFF049EBFCFE011F13FE4913FF5B9038FFE07F48EB001F48486D5AD807F8130748
4813035B121F485A495C127FA290C7FC15075A485DA4150FA25E151F7E6C143F157F6D13
FF6C6C485BEBE007261FF81F13FF6CB7FC6C16806C14BF6C021F13006CEBFC0FD91FE0C8
FC2A397AB730>100 D<EC1FE0ECFFFC010313FF010F1480013F14C04914E09038FFE03F
489038800FF03A03FE0007F8484813035B485A4848EB01FC5B123F5B127F90C7FC90B6FC
A2B712F8A316F048C9FCA37E7EED03C06DEB07E0003FEC0FF07F6C6CEB1FE06C6CEB7FC0
9038FE01FF6CB612806C15006C14FC6C6C5B011F13C0D903FEC7FC262A79A830>I<ED03
FE903A3FFC1FFF80017F017F13E0496CB57E91B67E6D816D9038FE07FE0101EBF0019238
C000FF4B7F92C713804A143F5C13035C18C0171FA2173F010716805CA3177F1800130F5F
5F16014C5A6E495A011F140F6E495A6EEB7FE09139FF83FFC092B55A94C7FCD93FDF13FC
028F5B028313E0028090C8FC92C9FC137FA291CAFCA45BA25BA4387FFFF0B57E80A25C6C
5B323C82A730>112 D<EE3FE03B01FFFC01FFF048020F13F8486D4813FC037F13FE6C91
B5FC6C90B512E1D80001EC01FC9238FC00F803F013704B13001580A24990C8FC5CA25CA2
5C13075CA5130F5CA5131F5CA2007FB512FCB6FC81A25D7E2F287DA730>114
D<91387FF838903903FFFE7C011FEBFFFC5B5B90B6FC48EBC01F3903FC00074913034848
14F85BA216F0ED01E06D90C7FCEA03FEEBFFF06CEBFF806C14F06D13FC011F13FF010714
80D9007F13C0020113E0EC001F000FEC07F0487E003F1403A27FA21507486C14E0150F6D
EB3FC09039FC03FF8090B612005DB65A00FC5CD8783F13E0263007FEC7FC262A79A830>
I E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fh cmr10 10.95 1
/Fh 1 62 df<007FB912E0BA12F0A26C18E0CDFCAE007FB912E0BA12F0A26C18E03C167B
A147>61 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fi cmmi10 10.95 2
/Fi 2 63 df<1818187CEF01FCEF07F8EF1FE0EF7F80933801FE00EE07F8EE1FE0EE7F80
DB01FEC7FCED07F8ED1FE0ED7F80DA01FEC8FCEC07F8EC1FE0EC7F80D901FEC9FCEB07F8
EB1FE0EB7F80D801FECAFCEA07F8EA1FE0EA7F8000FECBFCA2EA7F80EA1FE0EA07F8EA01
FE38007F80EB1FE0EB07F8EB01FE9038007F80EC1FE0EC07F8EC01FE9138007F80ED1FE0
ED07F8ED01FE9238007F80EE1FE0EE07F8EE01FE9338007F80EF1FE0EF07F8EF01FCEF00
7C1818363678B147>60 D<126012F812FEEA7F80EA1FE0EA07F8EA01FE38007F80EB1FE0
EB07F8EB01FE9038007F80EC1FE0EC07F8EC01FE9138007F80ED1FE0ED07F8ED01FE9238
007F80EE1FE0EE07F8EE01FE9338007F80EF1FE0EF07F8EF01FCA2EF07F8EF1FE0EF7F80
933801FE00EE07F8EE1FE0EE7F80DB01FEC7FCED07F8ED1FE0ED7F80DA01FEC8FCEC07F8
EC1FE0EC7F80D901FEC9FCEB07F8EB1FE0EB7F80D801FECAFCEA07F8EA1FE0EA7F8000FE
CBFC12F81260363678B147>62 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fj cmtt12 14.4 8
/Fj 8 116 df<903807FFC0017F13F848B512FE486E7E4815E04881823A1FF8007FFC15
0F6F7EED01FF6C487F836C48147FC97F163FA64AB5FC143F49B6FC130F137F90B7FC0003
ECC03F48EBF000481380D81FFCC7FCEA3FF05B485A5B12FF90C8FCA56D147F127F6D14FF
6C6C130301F8010F7FD81FFE017FEBFFF06CB812F818FC6C15CF000115076CDAFC0113F8
013F9039E0007FF0010390C9FC363679B43E>97 D<923803FFF04B7F835D81A281ED0003
AEEC0FF0ECFFFE0103EBFF83010F14E34914F3017F14FB90B7FC48EBF807ECC0014890C7
FC4848143F4848141F49140F485A491407123F491403127F5BA312FF90C8FCA97F127FA2
16077F123F6D140FA26C6C141F000F153F6D147F6C6C14FF6CB45B6E5A6CD9F01FEBFFFC
6C90B500FB13FE6D14F36D02E313FF010F02C313FE6D14010100D9FC0013FCDA1FE090C7
FC384A7CC83E>100 D<EC1FF891B57E010314E04914F8011F80498049809026FFF80F13
8048D9C00113C04890C7EA7FE04848143F49EC1FF04848140F484815F8491407123F49EC
03FCA2485AA2EE01FE12FF90C8FC90B7FCA517FC17F890CAFCA26C7EA37F123F17786C6C
15FC6DEC01FE120F6D14036C6C15FC6C6C14076C6C6CEB1FF802E0137F6C9039FC03FFF0
6DB612E0011F15C06D15806DECFE00010114F8D9003F13E0020790C7FC2F3679B43E>I<
141C147F4A7EA2497FA36D5BA26EC8FC141C91C9FCAC001FB5FC48804880A37E7EC7123F
B3B3003FB7FC481680B812C0A36C16806C16002A4A76C93E>105
D<EC1FF0ECFFFE01036D7E010F14E04980017F14FC90B67E489038F01FFFECC00748D900
01138048486D13C04848EC7FE049143F4848EC1FF049140F003F16F8491407A24848EC03
FCA448C8EA01FEAA6D1403007F16FCA26D1407A2003F16F86D140F6C6CEC1FF0A26C6CEC
3FE06D147F6C6CECFFC06D5B6CD9C00713806CD9F01F13006C90B55A6D5C6D5C010F14E0
01031480010049C7FCEC1FF02F3679B43E>111 D<ED07FCD83FFF90383FFF80486DB512
E002C314F8B500CF806C01DF8091B7FC6CDAF00F1380D8003FD9C00113C092C713E04A14
3F4AEC1FF04A140F4A15F84AEC07FCA217034A15FE1701A318FF83A95F18FEA280170318
FC6E140718F86E140FEF1FF06E143F6EEC7FE06EECFFC0DBC0031380EDF01F92B6120002
DF14FC02CF5C02C35C02C114C0DAC07F90C7FCED0FF092C9FCB3003FB512C04880A2B67E
6C5CA26C5C384F7FB33E>I<EE07FC263FFFF090383FFF80486D48B512C0B5D8FC0714E0
4B14F04B14F86C5C6C91387FF81FD80003EBFFC002FD9038000FF0ECFFFE03F8EB07E04B
90C7FC5DA25D5DA292C9FCA25CA45CB3A3003FB612F84881B77EA36C5D6C5D35347CB33E
>114 D<903901FFE00F011FEBFE1F90B6EABF80000315FF5A5A5A393FFE001F01E01307
4848130190C8FC5A48157FA46CED3F00A2D87FC091C7FC13F0EA3FFC381FFFF06CEBFFC0
6C14FC6CECFF80C615E0011F14F8010380D9001F7F9138007FFF03031380030013C0003E
ED3FE0007E151FB4150F17F06D1407A37FA26D140F17E06D141F01FCEC3FC06D14FF9026
FFC00F138091B612005E485D013F5C6D14E0D87C0391C7FC3978007FF82C3677B43E>I
E
%EndDVIPSBitmapFont
/Fk 171[49 5[53 69 49 2[28 4[53 68[{TeXBase1Encoding ReEncodeFont}6
72.7272 /Times-Bold rf
%DVIPSBitmapFont: Fl cmitt10 10.95 32
/Fl 32 126 df<130FEB1F80EB3FC0EB7FE014F0A3133F131F130714E0A3130F14C0131F
1480133FEB7F0013FE485A1203EA0FF8EA3FF0485AEAFF806CC7FC123E1218141D69B730
>39 D<15FE913807FFC0021F7F4A7F91B57E4980903803FE07903907F803FE90380FF001
49486C7E49487F495A91C7EA3F8013FE485AA2485A485AA2485AA25B121FA2485AA348C8
EA7F00A44815FE5AA24B5AA24B5AA215075E150F5E4B5A153F6C5D4BC7FC6C5C6D485A4A
5A6C6C485A6D485A391FF07FE090B55A6C5C6C49C8FC6C5B6C13F038003F80293A76B830
>48 D<130FEB3F80EB7FC0EBFFE0A25AA314C06C1380EB7F00133E90C7FCAFEA07C0487E
487E123F487EA212FF5B6C5A5B6C5A6CC7FC13276DA630>58 D<0003B712E04816F05A17
F817F07E6C16E0CBFCA7003FB612FE4881B81280A36C16006C5D2D1578A530>61
D<0103B57E49804980A26D5C6D5C9026003FC0C7FC5DA2147FA292C8FCA25CA25CA21301
A25CA21303A25CA21307A25CA2130FA25CA2131FA25CA2133FA25CEE01E0017FEC03F016
0791C7FCA249140F17E05BA20001151F007FB712C0B8FCA317806C16002C387DB730>76
D<903B03FFE001FFFC496D5A494A13FEA26D6E13FC6D80903B007FF8003F00147EA202FE
5C177E14FCA2010115FE5F14F8A20103EBFC015F14F0A2010714035F14E0A2010FEB7C07
5F14C0A2011F140F5FEC807EA2013F141F5F1400A249143F94C7FC017E133EA201FE5C16
7E5BA2000115FE5E5BA20003143FD87FFF6D5A1480B512C0A26C01805B4A6C5A37387DB7
30>78 D<260FFFF890B512806E15C0486D4814E0A26C496C14C04A1580C690C7380FE000
5BA20001151F5F5BA20003153F5F5BA20007157F94C7FC5BA2000F5D5E5BA2001F14015E
5BA2003F14035E5BA2007F1407A290C75BA2150F485D5A151F5E153F5E157F4BC8FC007F
495A14036D485A393FC01FF8391FE07FF090B55A6C5C6C5C6C49C9FCC613F8EB1FC03339
76B730>85 D<003FB612E04815F0B7FC16F816F07E6C15E025077C7D30>95
D<14FE903803FF804913C7011FEBEF8049EBFFC05BEBFFC74801031380EBFC01EA03F812
0748486C13005B121F5B003F5C5B1401127F01005BA214035A485C0207137016F8EDF9FC
EC0FF1141FA2EC3FF36C90387FE3F86C13FF4913E7D83F87EBF7F090B6FC6C01F713E06C
01E313C06C01C113806C018013003900FC007E262975A730>97 D<EA7FFE7FB5FCA27EA2
C6FC5BA21201A25BA21203A25B147F3907F9FFC090B57E81814880ECC1FE1400497F4848
7F5B5B49EB3F80123F5BA25B007F147F160090C7FCA25D485C5A14015D14035D14075D6C
130F6C495A4A5A6D485A263FC3FFC7FC6CB45A5C6C5B6C5B000113C06C90C8FC213974B7
30>I<EC1FE0ECFFF801037F497F011F7F49148090387FF07F9039FFC03FC0481300485A
01F8EB7F8012074848EB3F0049131E001F140C484890C7FC5BA2127F90C9FCA35A5AA57E
7E15036DEB0F80003FEC1FC06DEB7FE03A1FF007FFC06CB612806C15006C5C6C14F86C14
E0013F90C7FC232974A730>I<EDFFF816FC5CA280A2150316F8A21507A216F0A2150FA2
16E014FE903803FF9F4913DF011FEBFFC05B5BEBFFC74801031380EBFC01EA03F8120748
486C13005B121F5B003F5C5B1401127F01005BA214035A485C0207137016F8EDF9FCEC0F
F1141FA2EC3FF36C90387FE3F86C13FF4913E7D83F87EBF7F090B6FC6C01F713E06C01E3
13C06C01C113806C018013003900FC007E263975B730>I<EC1FE0ECFFF8010313FE497F
011F14805B90397FF07FC09038FFC01F481300EA03FC485A5B120F4848133F49EB7F8000
3F903801FF00EB803F90B55A485C15F05D92C7FCB512F048C9FCA57E7E15036DEB0F8000
3FEC1FC06DEB7FE03A1FF007FFC06CB612806C15006C5C6C14F86C14E0013F90C7FC2329
74A730>I<16FF030313C04B13E04B13F04B13F85D1683ED7F871607A2EE03F09238FF01
E04BC7FCA414015D0103B6FC491580A46D150090260003F8C7FCA314075DA5140F5DA414
1FA25DA4143F5DA5147F92C8FCA45C5CA31301A25CA21303A25C123CEA7E0700FF5B130F
5CEAFE1FB55A5C6C90C9FC6C5A6C5AEA07F02D4E7BB830>I<EC01FCEC07FF021F13874A
EBCF804AEBFFC091B6FC491307902603FC03138049487EEB0FF0EB1FE0D93FC014004A7E
137F91C7FC495C5B15011201495CA215031203495C1507A2150F5E6D131F0001143F157F
4B5A6C6C5AEBFF076DB5FC6D5C7F7F6D133FD901FC5B90C7FC157FA293C7FCA25DA25D14
01A2001C495A003E5C007F130F6D485A00FFEBFFE090B55A6C5C4AC8FC6C5B6C13F00007
13802A3D7AA730>I<3807FFC0805AA27EA2EA001F5CA3133F5CA3137F91C9FCEC07F8EC
3FFE49487E91B57E82A2489038FC1FE0ECF00F14C014805A14005B151F48485CA25B153F
48485CA349137F001F92C7FCA249EBFF0EEDFE1F003FED3F80EB800115FC0203137F007F
02F81300130016FEA248ECF9FC4814FF5E6E5B486D5B6F5A00786EC7FC293978B730>I<
EC03C0EC07E0EC0FF0A315E0EC07C0EC038091C7FCA9EB1FC0EB7FE0497E487F487F487F
EA0FF0EA1FE013C0EA3F80A2EA7F015CEAFF035C127EEA00075C130F5CA2131F5CA2013F
1370EC80F890387F81FC1401A2EBFF0301FE13F8140715F0140FEC3FE090B512C06D1380
15006D5A6D5AEB07F01E3A73B830>I<380FFFC0805AA27EA2EA001F5CA3133F5CA3137F
91C8FCED03F0ED0FF849EB3FFC49EB7FFE15FF4A13FF0001903803FE7F9038FC07F8EC0F
E091381FC0FF000390383F81FE9038F87F0114FE9039F9FC00FC2607FBF81378D9FFF013
005C5C487F14F88080487F01C77F9039C07FC01C021F133E003FECE07FEB800FA2021F13
FF007F15FE010013C015C1EDE1FC4890380FE3F84814FF6E13F016E0486D13C06E138000
789038007E00283977B730>107 D<383FFFC04813E0B5FCA27E7EEA001F14C0A2133FA2
1480A2137FA21400A25BA25BA21201A25BA21203A25BA21207A25BA2120FA25BA2121FA2
5B141C003F133E147F1380A2007F13FF14FE13001301EB81FC383FC3F813FF6C13F06C13
E06C13C06C13803800FE0018396EB730>I<91390FC007E0903A1C7FE01FF8903A3EFFF0
3FFC017F9038F87FFEEDFCFF90B8FC02F8EBFC3F9138E07FF802C013F048018013E016C0
1400491480000302FF137F49EC007EA25D2607F80114FE17FC01F05B1601000F010314F8
01E013F81603001F010714F001C013F0160717E0003F130F018013E0160F17C0007F131F
010013C017E017F048013FEB07F848EC8003EE01F0007C6DC712E00038010E140030297C
A730>I<01F813FE3A03FC07FF80486C487F486C487F02BF7F4890B5FCED87F8393F9FFE
0314FC387FBFF8EB3FF0A214E0D8FF7F130702C05B127E0000138001FF130F02005BA348
48131F5EA249EB3FC70003ED8F80EE9FC049137F161F0007153F03FF13804913FE167F00
0F16005E496D5A5E6F5A496D5A496D5A6CC76C5A2A2979A730>I<EC3FC0903801FFF049
7F010F7F497F497FD97FE013809038FF803F2601FE0013C04848131F485A5B120F4848EB
0FE05B123F5BED1FC0127F90C7FCA2153F4815805A157F16005D5D14016C495A6C5C1407
6D485A003FEB3FE09038E0FFC06CB55A6C91C7FC6C5B6C13F86C13E038007F80232975A7
30>I<903903E003F890390FF80FFE496C487E90263FFE7F138091B612C04915E06E131F
01FE9038FC0FF091383FF007EC7FE0EA01FC9238C003F81580000313FF15006C5AC75A01
01140717F05CA20103140F17E05C161F010715C0A2EE3F80167F010F15005E6E485A4B5A
011F495A9138FE1FF091B55A5E495C02DF90C7FCEC8FFEEC83F0D97F80C8FCA291C9FCA2
5BA25BA21201A25BA21203387FFFF0B5FC80A25C7E2D3C7FA730>I<017EEB1FF048B4EB
FFFE4801C17F4801E314804801E714C091B612E0D81FC79038F03FF0EDC007D83F831380
01871300007F49130F13075C484848EB07E0EE03C0007E92C7FC00005B131F5CA3495AA3
5C137FA291C9FCA25BA25BA21201A25BA35B5B6C5A2C2978A730>114
D<EC1FF8ECFFFE01037F4914804914C04914E090393FF01FF0EC800790387F000F137E01
FE14E05BED07C0ED03006D90C7FCEB7FC014FE90383FFFE06D13F86D7F6D7F01007F0207
1380EC007FED1FC0150F121C123E127F151F481580153F48EC7F006C495A397FE00FFE90
B55A6C5C6C5C6C14C0000391C7FC38007FF8242977A730>I<1438147C14FC1301A41303
5CA313075CA3130F5CA2003FB512F05AB612F8A26C14F0A239003F8000A3137F91C7FCA3
5B5BA312015BA312035B157015F80007EB01FC13F0140315F8000F130701E013F0140FEC
3FE09038F0FFC06CB512806C14005C6C13F86C6C5AEB3F801E3A72B830>I<133ED9FF80
1370486D13F8486D487E5A48EBF003D81FE75C13C7123F01871307D87F8F5CEB0FE0A2D8
FF1F130F02C05BEA7E3F00001380151F017F5C1400A2153F495C5B168792387F8F800001
ED1FC05B15FF163FDA01FE1380A21403D9FE07EB7F000000131F90B7FC6D5C6DEBBFFC6D
EB1FF890390FFC0FF0903903F007E02A2979A730>I<D91F80131CD97FC0133E496C133F
486DEB7F80487F486D133FEA0FF1EA1FE1EA3FC113811383387F03F8A2D8FF07147F4A14
00127EEA000F4A5B5E131F5C1501013F5C1480A24B5A137F4A485AA34B5A6E485A133F4B
5ADAE0FFC7FC6DB5FC6D5B6D5B6D13F06D5B9038007F80292979A730>I<903907F003F8
90393FFC0FFC90397FFE3FFE48B5487E4891B512804816C03A0FFC3FFE1F9038F01FF8D8
1FC001F013E0003F130F0180EC3FC0007F14E0130048011FEB1F80EE0F00007E4AC7FCC7
FC143F5DA3147F92C8FCA216074AEB0F80001C49EB1FC0123E127F0181143F00FF168001
01147FD8FE03ECFF00496C485A6C48EB87FC6CB65A5E6C01DF5B6C018F5B260FFE0790C7
FC3903F801FC2B2979A730>120 D<133FD9FFC01307486DEB0F80486DEB1FC05A486D13
3F01E31580EA1FC3123F0183147FD87F871500EB07F0A2D8FF0F5C4A5B127EEA001FECC0
015E133F14801503017F5C14001507A2495C49130FA2151F5E153F6D137F6D13FF02835B
6DB5FCA27F6D5C6D13BF903800FE3FEC007F93C7FCA25D5D38038001D807C05B380FE003
01F05B001F495AEBE00F49485AEC7FC09038E1FF806CB5C8FC5C6C5B6C13F06C5B6C6CC9
FC2A3D79A730>I<EE3FF0923803FFF8150F153F4B13F092B512E04AEBF0004A90C7FC15
FC4A5A5DA2140FA25DA2141FA25DA2143FA25DA2147FA292C8FCA25C495A1307EB3FFC38
3FFFF8485BB512C05CA26C7F6C7FEA003FEB0FF01307A3130FA25CA2131FA25CA2133FA2
5CA2137FA291C9FCA35BA27F14F0ECFFE06D7F6D7F13076D5B9038003FE02D4774BE30>
123 D<EC3FE0EC7FFC91B5FC82826E7F9138007FF0150F1507A4150F5EA3151F5EA3153F
5EA3157F93C7FCA58216E092383FFFE06F13F06F13F8A2153F4B13F092B512E04AEBC000
4A48C7FC5D4A5A5D140F5DA3141F5DA3143F5DA3147F92C8FCA35C5C1301EB07FC137F38
7FFFF8B55A5C148049C9FCEA7FE02D477CBE30>125 D E
%EndDVIPSBitmapFont
/Fm 135[33 4[29 9[21 105[{TeXBase1Encoding ReEncodeFont}3
74.7198 /Times-Italic rf /Fn 167[43 3[37 33 40 1[33 43
43 53 37 2[20 3[37 43 40 40 43 65[{TeXBase1Encoding ReEncodeFont}15
59.7758 /Times-Roman rf
%DVIPSBitmapFont: Fo cmtt9 9 36
/Fo 36 123 df<007FB512F8A2B612FCA26C14F8A21E067C9927>45
D<121E123FEA7F80EAFFC0A4EA7F80EA3F00121E0A0A728927>I<1538157815FCA21401
15F8140315F0140715E0140F15C0141F1580143F1500A25C147E14FE5C13015C13035C13
075C130F5CA2131F5C133F91C7FC5B137E13FE5B12015B12035BA212075B120F5B121F5B
123F90C8FC5A127E12FE5AA21278A21E3A7CB327>I<121E123FEA7F80EAFFC0A4EA7F80
EA3F00121EC7FCAC121E123FEA7F80EAFFC0A4EA7F80EA3F00121E0A20729F27>58
D<903803F80E90381FFE1F90383FFFBF4913FF90B6FC3801FE0F3803F8033807E001000F
7F5B4848137FA248C7123FA25A127E151E150012FE5AAA7E127EA2151E007F143F7EA26C
7E157F6C6C137E7F000714FC3803F8033901FE0FF86CB512F06D13E06D13C06D1300EB03
F820307DAE27>67 D<003FB512C04814E0B612F06C14E06C14C039001F8000B3B2003FB5
12C04814E0B612F06C14E06C14C01C2E7BAD27>73 D<D83FE0EB7FC0486CEBFFE000FF15
F06C6C4813E0003F15C0000F150001B813DFEBBC03A3EBBE07019E139FA3EB9F0FA2018F
131FA2149FA2EB879EA4EB839C14FCA3EB81F8A2EB80F01400AAD83FE0EB7FC0486CEBFF
E0486C4813F06C486C13E06C48EB7FC0242E7FAD27>77 D<3A3FF001FFC0486C4813E000
FF4913F06C6C6C13E0003F6D13C000079038003E0013DEA313CFA3148013C714C0A213C3
14E0A213C114F0A3EBC0F8A31478147CA2143C143EA2141E141F140FA3EC07BEA3EC03FE
EA3FF8EA7FFC38FFFE01EA7FFC6C486C5A242E7FAD27>I<383FFFF04813FEB67E6C806C
803907E01FF014076E7E1401811400A514015D14034A5A141F90B55A5D5D92C7FC819038
E01FC0EC07E0A26E7EA816F0EDF1F8A4393FFC01FBD87FFEEBFFF0B57E6C48EB7FE06C48
EB3FC0C8EA1F00252F7FAD27>82 D<90387FC0E03901FFF1F04813FF5A5AEA1FE0383F00
1F007E130F140712FE5A1403A3EC01E06C90C7FC127E127FEA3FC013F86CB47E6C13F86C
13FE00017F6C1480010F13C0010013E0EC0FF0EC03F8A2140115FC14001238127C12FCA3
6CEB01F8A26C130390388007F09038F01FE090B512C01580150000F85B38701FF81E307C
AE27>I<003FB612804815C0B7FCA339FC03F00FA60078EC0780000091C7FCB3AB90387F
FF8090B57E48806C5C6D5B222E7EAD27>I<3A7FFE01FFF8B54813FCA36C486C13F83A07
E0001F80B3AB6D133F00031500A26D5B0001147E6D13FE6C6C485A90387F87F86DB45A6D
5B6D5B6D5BD901FEC7FC262F80AD27>I<007FB512F8A2B612FCA26C14F8A21E067C7E27>
95 D<3803FFC0000F13F04813FC487F8001807FEC1FC0381F000F00046D7EC7FCA2EB0F
FF137F0003B5FC5A121F383FFC07EA7FC0130012FE5AA46C130F007F131F383FC0FF6CB6
12806C15C06C13FB6C13F1C69038807F8022207C9F27>97 D<EB0FFF017F13C090B512E0
000314F05A380FF807EA1FE090388003E048C71280481400127EA212FE5AA67E127EA200
7F14F06CEB01F8EA1F80EBE003390FF80FF06CB512E06C14C0C614806D1300EB0FF81D20
7B9F27>99 D<EC3FF04A7EA3143F1401A9EB0FE1EB7FF990B5FC12035A380FF83F381FE0
0FEB8007383F00035A007E1301A212FE5AA67E007E1303A2127F6C13071380381FC00F38
0FF03F6CB612C06C15E06C13FD38007FF9D91FE013C0232E7EAD27>I<EB0FF8EB3FFE90
B512804814C04814E03907FC0FF0390FE003F8381FC001393F8000FC48C7FC127E157E12
FEB612FEA415FC00FCC8FC7E127EA26C143C6D137E6C7ED80FF013FE3907FC07FC6CB512
F86C14F06C14E0013F13C0903807FE001F207D9F27>I<EC1FF0EC7FF8903801FFFC4913
FE5BEB0FF0ECC07C011F1338EC8000A6003FB512F04814F8B6FCA26C14F039001F8000B3
A4003FB512C04814E0A36C14C01F2E7EAD27>I<153F90391FC0FF80D97FF313C048B612
E05A4814EF3A0FF07F87C03A1FC01FC3809039800FC000A248486C7EA66C6C485AA2EBC0
1F390FF07F8090B5C7FC5C485BEB7FF0EB1FC090C9FCA27F6CB5FC6C14E015F848804880
393F8001FF007EC7EA3F80007C140F00FC15C0481407A46C140F007C1580007E141F6C6C
EB7F00391FF807FE6CB55A6C5C6C5CC614C0D90FFCC7FC23337EA027>I<EA7FE0487EA3
127F1203A9147F9038F1FFC001F77F90B57E8114C1EC01FCEBFC00A25BA25BB03A7FFF81
FFE0B500C313F014C714C36C018113E0242E7FAD27>I<130F497E497EA46D5A6DC7FC90
C8FCA7383FFF80487FA37EEA000FB3A4003FB512E04814F0B612F86C14F06C14E01D2F7B
AE27>I<EA3FE0487E12FF127F123F1201A991383FFF804A13C016E016C06E1380913803
F0004A5A4A5A4A5A4AC7FC147E5CEBF1F813F3EBF7FCEBFFFE14BE143F496C7E496C7EEB
F80701F07F6E7E6E7E6E7EA2157E3A3FFF81FFE04801C313F0B500E313F86C01C313F06C
018113E0252E80AD27>107 D<387FFF80B57EA37EEA000FB3B2007FB512F8B612FCA36C
14F81E2E7CAD27>I<397F07C01F3AFF9FF07FC09039FFF9FFE091B57E7E3A0FFC7FF1F8
9038F03FC001E0138001C01300A3EB803EB03A7FF07FC1FF27FFF8FFE3138001F913E701
F813E3277FF07FC113002920819F27>I<387FE07F39FFF1FFC001F77F90B57E6C800003
13C1EC01FCEBFC00A25BA25BB03A7FFF81FFE0B500C313F014C714C36C018113E024207F
9F27>I<EB1FE0EB7FF83801FFFE487F481480390FF03FC0391FC00FE0393F8007F0EB00
034814F8007E1301A248EB00FCA76C1301007E14F8A2007F1303393F8007F0A2391FE01F
E0390FF03FC06CB512806C14006C5B38007FF8EB1FE01E207C9F27>I<387FE0FFD8FFF3
13C001F713F090B57E6C800003EB81FE9038FE007F49EB3F8049131F16C049130FA216E0
1507A6150F16C07F151F6D1480ED3F006D13FF9038FF83FEECFFFC5D01F713E001F35BD9
F0FEC7FC91C8FCAC387FFF80B57EA36C5B23317F9F27>I<393FFC03FC397FFE0FFF00FF
013F1380007F4913C0003F90B5FC39007FFE1F14F89138E00F809138C0020092C7FC5CA2
91C8FCA2137EAD003FB57E4880B6FC7E6C5C22207E9F27>114 D<9038FFF3800007EBFF
C05A5A5A387F803F38FC000F5AA2EC07806C90C7FCEA7F8013FC383FFFF06C13FC000713
FF00011480D8000F13C09038003FE014070038EB03F0007C130112FC7E14036CEB07E0EB
E01F90B512C01580150000FB13FC38707FF01C207B9F27>I<131C133E137EA7003FB512
F04814F8B6FCA26C14F0D8007EC7FCAE1518153C157EA315FE6D13FC148390381FFFF86D
13F06D13E06D13C0010013001F297EA827>I<397FE01FF8486C487EA3007F131F000313
00B21401A21403EBFC0F6CB612E06C15F07F6D5A90390FF87FE024207F9F27>I<3A7FFC
0FFF80486C4813C0A36C486C13803A07C000F800EBE00100035CA2EBF00300015CA2EBF8
0700005CA390387C0F80A36D48C7FCA3EB3F3FEB1F3EA214FE6D5AA36D5AA26D5A22207E
9F27>I<3A3FFC03FFC0486C4813E0B54813F06C486C13E06C486C13C03A0F80001F00A3
6D5B0007143EA414F0EBC1F83903E3FC7CA4EBE79EA200011478A301F713F8A2EBFF0F6C
5CA3EBFE0790387C03E024207F9F27>I<393FFC0FFE486C487E4A13806E13006C486C5A
3901F807E06C6C485A4A5A017E90C7FC6D5AEB1F7E5C6D5A13076D5A5C80497E130F497E
143EEB3E3FEB7E1F90387C0F8001F87F00016D7E3803F003393FFC0FFF486C481380B548
13C06C486C13806C486C130022207E9F27>I<3A7FFC0FFF80486C4813C0A36C486C1380
3A07E000F800000313015D13F00001130301F85B1200A26D485A137CA290387E0F80133E
A2011F90C7FC5CA2EB0F9F149E14BE130714FC1303A25C1301A25CA213035CA213075C12
08EA3E0F007F5B131FD87E7FC8FCEA7FFE6C5A5B6C5AEA07C022317E9F27>I<000FB512
FE4814FF5AA390380001FCEC03F8EC07F0EC0FE0001EEB1FC0C7EA3F80EC7F0014FE495A
495A495A495A495A495A49C7FC13FE4848131E4848133F485A485A485A485AB7FCA46C14
FE20207E9F27>I E
%EndDVIPSBitmapFont
/Fp 107[33 33 24[33 37 37 54 37 37 21 29 25 37 37 37
37 58 21 37 21 21 37 37 25 33 37 33 37 33 25 8[71 1[54
46 42 50 1[42 54 1[66 1[54 1[25 2[42 1[54 50 50 54 1[33
4[21 1[37 2[37 37 37 37 37 1[21 19 25 19 2[25 25 25 5[25
29[42 42 2[{TeXBase1Encoding ReEncodeFont}62 74.7198
/Times-Roman rf /Fq 200[25 25 25 25 25 25 25 49[{
TeXBase1Encoding ReEncodeFont}7 49.8132 /Times-Roman
rf /Fr 173[44 1[37 48 48 1[41 2[22 4[48 44 44 48 9[33
33 33 33 33 33 33 49[{TeXBase1Encoding ReEncodeFont}17
66.4176 /Times-Roman rf
%DVIPSBitmapFont: Fs cmsy10 10.95 2
/Fs 2 107 df<EB07F8EB1FFE90387FFF8048B512E04880488048804880A24880A24815
80A2B712C0A86C1580A26C1500A26C5CA26C5C6C5C6C5C6C5C6C6C1380D91FFEC7FCEB07
F822227BA72D>15 D<126012F0B3B3B3B3B11260045B76C319>106
D E
%EndDVIPSBitmapFont
/Ft 133[53 60 1[86 60 66 40 47 53 1[66 60 66 100 33 66
1[33 66 60 40 53 66 53 66 60 9[120 1[86 80 66 86 1[73
93 86 113 80 93 1[47 93 93 73 80 86 86 80 86 1[60 5[60
60 60 60 60 60 60 60 60 60 1[30 1[30 2[40 40 37[66 2[{
TeXBase1Encoding ReEncodeFont}59 119.552 /Times-Bold
rf /Fu 107[51 51 24[35 40 40 61 40 45 25 35 35 45 45
45 45 66 25 40 25 25 45 45 25 40 45 40 45 45 9[76 1[66
51 45 56 1[56 66 61 76 51 2[30 66 1[56 56 66 61 56 56
6[30 11[23 30 23 2[30 30 30 5[30 29[45 45 2[{
TeXBase1Encoding ReEncodeFont}56 90.9091 /Times-Italic
rf /Fv 167[53 2[53 44 40 49 1[40 53 53 65 44 2[24 1[53
1[44 53 49 49 53 65[{TeXBase1Encoding ReEncodeFont}17
72.7272 /Times-Roman rf /Fw 139[57 1[76 1[96 7[96 2[76
3[86 16[105 6[67 5[124 9[86 86 86 86 86 86 86 86 86 86
48[{TeXBase1Encoding ReEncodeFont}19 172.188 /Times-Bold
rf /Fx 165[56 66 66 86 66 66 56 51 61 1[51 66 66 81 56
66 35 30 66 66 51 56 66 61 61 66 7[45 45 45 45 45 45
45 45 45 45 25 23 1[23 51 1[30 30 40[{
.167 SlantFont TeXBase1Encoding ReEncodeFont}41 90.9091
/Times-Roman rf
%DVIPSBitmapFont: Fy cmtt10 10.95 93
/Fy 93 127 df<121C123E127FEAFF80B2EA7F00B1123E121CC7FCA8121C127FA2EAFF80
A3EA7F00A2121C09396DB830>33 D<00101304007C131F00FEEB3F80A26C137FA248133F
B2007E1400007C7F003C131E00101304191C75B830>I<903903800380496C487E496C48
7EA8011F131F02C05BA4003FB612FE4881B81280A36C16006C5D3A003F803F80017F137F
020090C7FCA9495B495B003FB612FE4881B81280A36C16006C5D2701FC01FCC7FCA30003
130301F85BA86C486C5A6C486C5A29387DB730>I<D803C0EB01C0486C497E486C497E48
7E486C130F486C5CEA7E7ED8FE7F131F5E487E153F5E157F93C7FCA26C485B5DEA7E7E38
7FFE01D83FFC5B381FF803D80FF05BEA07E03803C007C75BA2140F5D141F5DA2143F5DA2
147F92C8FC5C5CA213015CA213035C13075CED01E0010F497E4A487E4B7E011F497E4A48
7E013F143F1480037F1380017FEB7E1F1400A25B5B12015BED7F3F0003023F13005B16FF
00076E5A496D5A6F5A6C486D5A6C486D5A29477DBE30>37 D<EB03C0EB1FF8497E137F80
90B5FC3801FC3F13F8810003131F13F0A6143F92C8FC91387F0FFF9038F87E1F000101FE
1480EBF9FC02F8140001FB7FD9FFF013C06C13E0151F02C05BEB7F809038FF003F4892C7
FC485C48EB807E5A15FE391FDFC0FC383F8FE0EB87E1397F07F1F8EB03F300FEEBFBF0EB
01FF5D7F91387FC006160F91393F801F80A26CEB7FC06CEBFFE049EBF83F018701FC1300
263FFFFBB5FC6C01F15B14E06C9038C03FFC00039038001FF8D800F8EB03E0293A7DB830
>I<EA03C0EA07E0EA0FF0EA1FF813FCA2EA0FFE12071203EA007EA513FE13FCA2120113
F8120313F01207EA1FE0EA3FC0EA7F80EAFF005A127C12380F1D70B730>I<141E143F14
FF5BEB03FEEB07F8EB0FF0EB1FE0EB3F80137FEBFF005B485A12035B485AA2485AA2485A
A2123F5BA2127F90C7FCA412FEAD127FA47F123FA27F121FA26C7EA26C7EA26C7E7F1201
6C7E7FEB7F80133FEB1FE0EB0FF0EB07F8EB03FEEB01FF7F143F141E184771BE30>I<12
38127CB4FC6C7E6C7E6C7E6C7E6C7EEA01FC7F6C7E7FEB3F8014C0131FEB0FE0A2EB07F0
A2EB03F8A214FC1301A214FE1300A4147FAD14FEA4130114FCA2130314F8A2EB07F0A2EB
0FE0A2EB1FC0133F1480EB7F005B485A5BEA07F8485A485A485A485A48C7FC127C123818
4778BE30>I<14E0497E497EA60038EC0380007EEC0FC0D8FF83EB3FE001C3137F9038F3
F9FF267FFBFB13C06CB61280000FECFE00000314F86C5C6C6C13C0011F90C7FC017F13C0
48B512F04880000F14FE003FECFF80267FFBFB13C026FFF3F913E09038C3F87F0183133F
D87E03EB0FC00038EC0380000091C7FCA66D5A6D5A23277AAE30>I<141C143E147FAF00
3FB612FE4881B81280A36C16006C5DC76CC8FCAF143E141C29297DAF30>I<EA03E0EA0F
F0EA1FF813FCEA3FFEA213FFA27EA27E1203EA007FA2137E13FEEA01FC1203EA07F8EA3F
F0EA7FE0EAFFC0EA7F80EA3F00121C1019708B30>I<003FB612E04815F0B712F8A36C15
F06C15E025077B9E30>I<120FEA1F80EA3FC0EA7FE0EAFFF0A4EA7FE0EA3FC0EA1F80EA
0F000C0C6E8B30>I<16E0ED01F0ED03F8A2150716F0150F16E0151F16C0153F1680A215
7F16005D5D14015D14035D14075D140F5D141F5DA2143F5D147F92C7FC5C5C13015C1303
5C13075C130F5C131F5CA2133F5C137F91C8FC5B5B12015B12035B12075B120F5BA2121F
5B123F5B127F90C9FC5A5AA2127C123825477BBE30>I<14FE903807FFC0497F013F13F8
497F90B57E48EB83FF4848C6138049137F4848EB3FC04848EB1FE049130F001F15F04913
07A24848EB03F8A290C712014815FCA400FEEC00FEAD6C14016C15FCA36D1303003F15F8
A26D1307001F15F0A26D130F6C6CEB1FE0A26C6CEB3FC06C6CEB7F806D13FF2601FF8313
006CEBFFFE6D5B6D5B010F13E06D5BD900FEC7FC273A7CB830>I<EB03C0130780130FA2
131FA2133F137F13FF1203123F5AB5FC13EF138FEA7E0F1200B3B0003FB512F84814FCB6
12FEA26C14FC6C14F81F3977B830>I<EB07FC90383FFFC090B512F0488048804880390F
F80FFF261FE00113803A3FC0007FC04848EB1FE090C7120F16F04814075A6C15F81503A2
127E123C1218C8FCA2150716F0150F16E0151F16C0153FED7F8016005D4A5A4A5A4A5A4A
5A4A5A4A5AECFF804948C7FC495A495A495A495A495A495A49C8FCD803FCEB01F0485A48
48EB03F8485A48B6FC5AB7FCA26C15F07E25397BB830>I<EB03FF013F13E04913F848B5
7E4814FF481580380FFE019039F0003FC04848EB1FE0150F16F01507A26C5A6C5AC8FC15
0F16E0A2151F16C0ED3F8015FF02071300903807FFFE495B5D81816DEBFF80D9000113C0
9138003FE0ED0FF0ED07F8150316FC150116FE1500A21218123C127EB4FC150116FC4814
036C15F86C6C13076DEB0FF0D83FF0EB3FE03A1FFE01FFC06CB612806C15006C5CC65C01
3F13F001031380273A7CB830>I<EC03FC4A7E140F141FA2143F147F157E14FEA2EB01FC
EB03F8A2EB07F0A2EB0FE0EB1FC0A2EB3F80A2EB7F0013FEA2485A485AA2485AA2485A48
5AA2485AA248C7FC12FEB8FCA21780A26C1600A2C8007EC7FCAA91387FFFFEA291B6FCA2
6E5BA229397DB830>I<000FB612805A4815C0A21680A20180C8FCAEEB81FF019F13C090
B512F08115FE81D9FE0313809038F0007F49EB3FC00180EB1FE06CC7120F000E15F0C812
07A216F81503A31218123C127EB4FC150716F048140F6C15E06C141F6DEB3FC0003F147F
9039E001FF80261FFC0F13006CB55A6C5C6C14F0C65C6D1380D90FFCC7FC25397BB730>
I<EC0FF8EC7FFF49B51280010714C04914E04914F090383FF80F90397FC007F8EBFF8038
01FE00485A485A4848EB03F049EB01E0001F91C7FC5B123F5BA2127FEB000C903803FFE0
010F13F8D8FF3F13FE48487F90B61280B712C09039FE007FE001F8EB1FF001E0130F49EB
07F849EB03FCA290C7120116FE1500A37EA46C7E15016D14FC121F15036C6CEB07F86D14
F06C6C131F6C6CEB3FE09039FF81FFC06C90B512806C15006D5B011F13F8010713E00101
1380273A7CB830>I<127C007FB612FCB7FC16FEA216FCA248C7EA0FF816F0007CEC1FE0
ED3FC0C8EA7F80160015FE14015D4A5A14075D4A5AA24A5AA24A5AA24AC7FCA25C5C1301
5CA213035CA213075CA4495AA6131F5CA96D5A6DC8FC273A7CB830>I<49B4FC011F13F0
017F13FC90B57E0003ECFF804815C048010113E03A1FF8003FF049131FD83FC0EB07F8A2
4848EB03FC90C71201A56D1303003F15F86D13076C6CEB0FF06C6CEB1FE0D807FCEB7FC0
3A03FF83FF806C90B512006C6C13FC011F13F0497F90B512FE48802607FE0013C0D80FF8
EB3FE0D81FE0EB0FF04848EB07F8491303007F15FC90C712014815FE481400A66C14016C
15FC6D1303003F15F86D1307D81FF0EB1FF06D133F3A0FFF01FFE06C90B512C06C1580C6
ECFE006D5B011F13F0010190C7FC273A7CB830>I<49B4FC010F13E0013F7F4913FC48B5
7E488048010113803A0FFC007FC0D81FF0131F4914E04848EB0FF04848130790C7FCED03
F85A4815FC1501A416FEA37E7E6D1303A26C6C13076C6C130F6D133FD80FFC13FF6CB6FC
6C14FE6C14FC6C14F9013FEBE1FC010F138190380060011400ED03F8A2150716F0150F00
0F15E0486C131F486CEB3FC01680157F913801FF00EC07FE391FF01FFC90B55A6C5C6C14
C06C5CC649C7FCEB3FF0273A7CB830>I<120FEA1F80EA3FC0EA7FE0EAFFF0A4EA7FE0EA
3FC0EA1F80EA0F00C7FCAF120FEA1F80EA3FC0EA7FE0EAFFF0A4EA7FE0EA3FC0EA1F80EA
0F000C276EA630>I<EA03C0EA07E0EA0FF0EA1FF8EA3FFCA4EA1FF8EA0FF0EA07E0EA03
C0C7FCAFEA03C0EA0FE0EA1FF013F8123F13FCA3121FA2120F12031200120113F8120313
F01207EA0FE0EA3FC0127FEAFF80EA7F00123C12180E3470A630>I<16E0ED01F0ED07F8
150F153FEDFFF04A13E0020713C04A1300EC3FFEEC7FF8903801FFE0495B010F90C7FC49
5AEB7FF8495A000313C0485BD81FFEC8FC485AEA7FF0485A138013E06C7EEA3FFC6C7E38
07FF806C7FC613F06D7EEB1FFE6D7E010313C06D7F9038007FF8EC3FFEEC0FFF6E13C002
0113E06E13F0ED3FF8150F1507ED01F0ED00E0252F7BB230>I<003FB612FE4881B81280
A36C16006C5DCBFCA7003FB612FE4881B81280A36C16006C5D29157DA530>I<1238127C
B4FC7F13E0EA7FF86C7E6CB4FC00077F6C13E0C67FEB3FFC6D7E903807FF806D7F010013
F06E7EEC1FFE6E7E020313C06E13E09138007FF0ED3FF8150F153FED7FF0913801FFE04A
13C0020F13004A5AEC7FF84A5A010313C0495BD91FFEC7FC495AEBFFF000035B48138000
1F90C8FCEA3FFC485AEAFFE0138090C9FC127C1238252F7BB230>I<EB1FFE90B512E000
0314F8488048804880263FF80313803A7FC0007FC048C7121F16E0150FA3127E003C141F
0018EC3FC0C8EAFF805C4A1300EC0FFEEC1FF84A5A15C04A5A4AC7FC495A5C13035CA213
075CA76D5A6D5A90C9FCA8EB01C0EB07F0A2497EA36D5AA2EB01C023397AB830>I<EC1F
E0ECFFF8010313FE497F011F14804914C090397FF03FE09038FF800F3A01FE0007F04848
13039039F801FBF83907F007FF48485A494813FC001F5B495A003FEBFF0F903800FC0301
0114FE007FEBF801EA7E03ECF000A2EAFE0700FC49137EAA00FE6D13FED87E0314FCA2EC
F801D87F0114F8003FEBFC03010014F0903880FF0F001F90387FFFE06D6C13C0000F6D13
806D6C13006C6C6C5A3903F801F86DC7127C6C6C14FE3900FF800390387FF01F6DB512FC
6D14F0010714E06D14C00100EBFE00EC1FF0273A7CB830>I<147F4A7EA2497FA4497F14
F7A401077F14E3A3010F7FA314C1A2011F7FA490383F80FEA590387F007FA4498049133F
90B6FCA34881A39038FC001F00038149130FA4000781491307A2D87FFFEB7FFFB515806E
B5FCA24A7E6C160029397DB830>I<007FB512F015FEB77E826C81823A03F8001FF81507
6F7E1501A26F7EA615015EA24B5A1507ED1FF0ED7FE090B65A5E4BC7FC6F7E16E0829039
F8000FF8ED03FC6F7E1500167FA3EE3F80A6167F1700A25E4B5A1503ED1FFC007FB6FC5E
B75A16C06C5D03FCC7FC29387EB730>I<91387F801C903903FFF03E49EBFC7E011F13FE
49EBFFFE5B9038FFE07F48EB801F3903FE000F491307485A484813035B001F14015B123F
491300A2127F90C8FC167C16005A5AAC7E7EA2167C6D14FE123FA27F121F6D1301000F15
FC7F6C6CEB03F86C6C13076D14F03901FF801F6C9038E07FE06DB512C06D14806DEBFE00
01075B6D13F09038007FC0273A7CB830>I<003FB512E04814FCB67E6F7E6C816C813A03
F8007FF0ED1FF8150F6F7E6F7E15016F7EA2EE7F80A2163F17C0161FA4EE0FE0AC161F17
C0A3163F1780A2167F17005E4B5A15034B5A150F4B5AED7FF0003FB65A485DB75A93C7FC
6C14FC6C14E02B387FB730>I<007FB7FCB8FC1780A37ED803F8C7123FA7EE1F00A293C7
FCA4157CA215FEA390B5FCA6EBF800A3157CA292C8FCA5EE07C0A2EE0FE0A8007FB7FCB8
FCA317C07E2B387EB730>I<003FB712805AB812C0A27E7ED801FCC7121FA7EE0F80A293
C7FCA5153EA2157FA390B6FCA69038FC007FA3153EA292C8FCAE383FFFF8487FB5FCA27E
6C5B2A387EB730>I<02FF13700103EBC0F8010F13F14913F94913FF5BEBFFC148EB007F
D803FC133F4848131F49130F120F491307121F5B123F491303A2127F90C7FC6F5A92C8FC
5A5AA892B5FC4A14805CA26C7F6C6D1400ED03F8A27F003F1407A27F121F6D130F120F7F
0007141F7F6C6C133F6CB4137F6CEBC1FF6DB5FC7F6D13FB6D13F30103EBC1F0010090C8
FC293A7DB830>I<3B3FFF800FFFE0486D4813F0B56C4813F8A26C496C13F06C496C13E0
D803F8C7EAFE00B290B6FCA601F8C7FCB3A23B3FFF800FFFE0486D4813F0B56C4813F8A2
6C496C13F06C496C13E02D387FB730>I<007FB6FCB71280A46C1500260007F0C7FCB3B3
A8007FB6FCB71280A46C1500213879B730>I<49B512F04914F85BA27F6D14F090C7EAFE
00B3B3123C127EB4FCA24A5A4813036C6C485A387FE01F6CB55A5D6C5C00075C000149C7
FC38003FE025397AB730>I<D83FFF90380FFF80486D4813C0B56C5AA26C497E6C496C13
80D803F0903803F8004B5A4B5A4B5AA24B5A4BC7FC15FE14015D4A5A4A5A4A5A141F5D4A
5A4AC8FC5CA201F17F13F301F77F90B57E14E7ECC7F01483EC03F8140101FE7FEBFC0049
7F49137F8182151F82150F826F7E1503821501821500D83FFF903803FFC0486D4813E0B5
6C5AA26C497E6C496C13C02B387FB730>I<383FFFF8487FB57EA26C5B6C5BD801FCC9FC
B3B0EE0F80A2EE1FC0A8003FB7FC5AB8FCA26C16807E2A387EB730>I<D83FF8ECFFE048
6C4913F0486C4913F8A2007F16F06C6C4913E00007160001EF14BFEC800FA3ECC01F01E7
143FA3ECE03F01E3133EA2ECF07EA201E1137CA2ECF8FCA201E013F8A214FDEC7DF0A314
7FEC3FE0A3EC1FC0A2EC070091C7FCADD83FFC903801FFE0486C4913F0B54913F8A26C48
6D13F06C486D13E02D387FB730>I<D83FFC90381FFF80486C4913C0B54913E0A26C6D6C
13C06C6E13800003913801F800EBF7C0A3EBF3E0A314F013F1A214F8A213F014FCA2147C
147EA2143E143FA2141FA21581A2140F15C1A2140715E1A2140315F1A21401A215F91400
A3157DA3153FEA3FFF481380B5EAC01FA26C496C5A6CEB00072B387EB730>I<90383FFF
E048B512FC000714FF4815804815C04815E0EBF80001E0133FD87F80EB0FF0A290C71207
A44815F8481403B3A96C1407A26C15F0A36D130FA26D131F6C6CEB3FE001F813FF90B6FC
6C15C06C15806C1500000114FCD8003F13E0253A7BB830>I<007FB512F0B612FE6F7E16
E0826C813903F8003FED0FFCED03FE15016F7EA2821780163FA6167F17005EA24B5A1503
ED0FFCED3FF890B6FC5E5E16804BC7FC15F001F8C9FCB0387FFFC0B57EA46C5B29387EB7
30>I<90383FFFE048B512FC000714FF4815804815C04815E0EBF80001E0133F4848EB1F
F049130F90C71207A44815F8481403B3A8147E14FE6CEBFF076C15F0EC7F87A2EC3FC701
8013CF9038C01FFFD83FE014E0EBF80F90B6FC6C15C06C15806C1500000114FCD8003F7F
EB00016E7EA21680157F16C0153F16E0151F16F0150FED07E025467BB830>I<003FB57E
4814F0B612FC15FF6C816C812603F8017F9138003FF0151F6F7E15071503821501A51503
5E1507150F4B5A153F4AB45A90B65A5E93C7FC5D8182D9F8007F153F6F7E150F821507A8
17F8EEF1FCA53A3FFF8003FB4801C0EBFFF8B56C7E17F06C496C13E06C49EB7FC0C9EA1F
002E397FB730>I<90390FF801C090397FFF03E090B512C7000314F74814FF5A381FF80F
383FE001EB8000007F147F90C7123F48141F5AA2150FA37EED07C06C91C7FC7F7FEA3FF0
EA1FFE380FFFF06C13FF6C14E06C14F86C80011F7F01037FD9003F1380020113C0913800
7FE0151FED0FF0A2ED07F8A2003C1403127E12FEA46C140716F07FED0FE001E0131F01F8
EB3FC001FFEBFF8091B512005D00FD5CD8FC7F5BD8F81F5BD870011380253A7BB830>I<
003FB712C05AB812E0A43AFE003F800FA7007CED07C0A2C791C7FCB3B1011FB5FC4980A4
6D91C7FC2B387EB730>I<3B7FFFC007FFFCB56C4813FEA46C496C13FCD803F8C7EA3F80
B3B16D147F00011600A36C6C14FEA2017F495AEC800390393FE00FF86D6C485A6DB55A6D
5C6D5C6D91C7FC9038007FFCEC0FE02F3980B730>I<D87FFE90380FFFC0B54913E06E5A
A24A7E6C486D13C0D807F0903801FC00A26D130300035DA46C6C495AA46C6C495AA46D13
1F6D5CA3EC803F013F5CA46D6C48C7FCA490380FE0FEA401075B14F1A301035BA314FB01
015BA314FFA26D5BA46E5A6E5A2B397EB730>I<D83FFC903801FFE0486C4913F000FF16
F8A2007F16F06C486D13E0D81FC09038001FC0000F1680A76D143F00071600A700039038
0F803E9039F01FC07EEC3FE0A3EC7FF0A2147D0001157CA29039F8FDF8FCA314F8A30000
5D01F913FCA2ECF07CA201FD137DA2017D5CECE03DA3017F133FA2ECC01FA2013F5CA2EC
800F6D486C5A2D397FB730>I<3A3FFF01FFF84801837F02C77FA202835B6C01015B3A01
FC007F806D91C7FC00005C6D5BEB7F01EC81FCEB3F8314C3011F5B14E7010F5B14FF6D5B
A26D5BA26D5BA26D90C8FCA4497FA2497FA2815B81EB0FE781EB1FC381EB3F8181EB7F00
81497F49800001143F49800003141F49800007140FD87FFEEB7FFFB515806EB5FCA24A7E
6C48150029387DB730>I<D87FFF90381FFFC06E5AB515E0A26C16C04A7ED803F8903803
F8006D1307A26C6C495AA26C6C495AA26D5CEC803F013F5CECC07F011F91C7FCA290380F
E0FEA214F101075BA2903803FBF8A201015B14FF6D5BA26E5AA36E5AB1903803FFF8497F
497FA26D5B6D5B2B387EB730>I<001FB612FC4815FE5AA316FC90C71203ED07F816F015
0FED1FE016C0153F003EEC7F801600C85A4A5A5D14034A5A5D140F4A5A5D143F4A5A92C7
FC5C495A5C1303495A5C130F495A5C133F495A91C8FC5B4848147C5B000315FE485A5B12
0F485A5B123F485A90B6FCB7FCA316FC7E27387CB730>I<007FB5FCA2B61280A21500A2
48C8FCB3B3B3A5B6FCA21580A26C1400A219476DBE30>I<1238127C12FEA27E7E7F123F
7F121F7F120FA27F12077F12037F12017F12007F7F80133F80131FA280130F8013078013
03801301801300808081143F81141FA281140F8114078114038114018114008181168015
3FA216C0151F16E0150F16F0150716F81503A2ED01F0ED00E025477BBE30>I<007FB5FC
A2B61280A27EA2C7123FB3B3B3A5007FB5FCA2B6FCA26C1400A219477DBE30>I<1307EB
1FC0EB7FF0497E000313FE000FEBFF80003F14E0D87FFD13F039FFF07FF8EBC01FEB800F
397E0003F0007C13011D0D77B730>I<003FB612E04815F0B712F8A36C15F06C15E02507
7B7D30>I<1338137C13FE1201EA03FCEA07F8EA0FF0EA1FC01380123F13005A127EA212
FE5AA5EAFF8013C013E0EA7FF0A2123FEA1FE0EA0FC0EA07800F1D70BE30>I<EB7FF800
03B5FC48804814E0488048809038E01FFC9038C003FE14016E7E6C487F6CC77FC8123FA4
91B5FC130F137F48B6FC12075A48EB803F383FF800EA7FE0138048C7FC5AA4157F7E6C14
FFEBC003263FF01FEBFF806CB7FC6C16C06C14CF6C028713806C49C6FC26003FE090C7FC
2A2A7BA830>I<EA3FFC127F487EA2127F123F1200AAEC03FE91381FFF804A13E091B57E
90B67E829138FE07FE9138F001FFDAC00013804A137FEE3FC091C7121F17E049140FA217
F01607A8160FA217E07F161F6E14C0163F6EEB7F806EEBFF00ECF0039138FC0FFE91B55A
5E495CD97C3F13C0D93C1F90C7FC90380003FC2C3980B730>I<ECFFE0010713FC011F7F
017F7F90B612804815C048EB807F3907FC003F485A13E0001FEC1F804848EB0F004990C7
FC127F90C9FCA25A5AA87E7EA27F003FEC07C06DEB0FE06C7E6D131F6C6C14C0D807FE13
3F3A03FFC0FF806C90B512006C5C6D5B011F5B01075B01011380232A7AA830>I<913801
FFE05C4A7FA28080EC0007AAEB03FE90381FFF874913E790B512F74814FF5A481303380F
FC0001F0133F4848131F4848130F5B007F140790C7FCA25AA25AA87E6C140FA27F003F14
1F7F6C6C133F6D137F390FF801FF2607FE07EBFFC06CB712E06C02F713F06C14E76D01C3
13E0011F010313C0D907FCC8FC2C397DB730>I<14FF010713E0011F13F8017F7F90B57E
488048010113803A07FC007FC04848133FD81FE0EB1FE049130F003F15F0491307127F90
C7FCED03F85A5AB7FCA416F0A248C9FC7E7EA27F003FEC01F07F6C6CEB03F86C7E6D1307
D807FEEB1FF03A03FF807FE06C90B5FC6C15C0013F14806DEBFE00010313F89038007FC0
252A7CA830>I<EDFF80020713C0021F13E04A13F04A13F891B5FC491387903903FC03F0
9138F801E00107EB00C04A1300A8003FB612C05AB712E0A26C15C0A2260007F0C7FCB3A9
003FB512FE4880B71280A26C15006C5C25397DB830>I<D903FC13FF90261FFF87138049
01DF13C04990B512E090B7FC5A2603FE07EB8FC03B07F801FE078048486C6CC7FC497FA2
001F8149133FA56D137F000F92C7FCA26D5B6C6C485A3903FE07FC48B55A5D485C5D01DF
5BD9C3FCC8FC01C0C9FCA413F06CB512F06C14FF16C04815F0488148813A3FE0001FFE01
80130148C8127F007E8100FE168048151FA56C153F007E1600007F5DD83FC0EB01FED81F
F0EB07FC6CB4EB7FF86C90B55A6C5D6C5D6C6C91C7FC011F13FC010113C02B3E7DA730>
I<EA3FFC127F487EA2127F123F1200AAEC01FE91380FFF80023F13E04A7F90B67EA29138
FE07FCECF00102E07F14C0EC8000A291C7FCA25BB3A23B3FFFF81FFFF84801FC14FCB56C
4813FEA26C496C13FC6C01F814F82F3880B730>I<14E0EB03F8A2497EA36D5AA2EB00E0
91C8FCA9381FFFF85A487FA27E7EEA0001B3A9003FB612C05AB712E0A26C15C07E23397A
B830>I<EC01C0EC07F0A2EC0FF8A3EC07F0A2EC01C091C7FCA990B512F05A15F8A37EEB
0003B3B3A5EC07F0A2123C007EEB0FE0B4131FEC3FC0147F90B512806C14005C6C5B000F
13F0000113801D4E7CB830>I<EA7FF8A2487EA2127FA21200AB0203B512804A14C017E0
A217C06E14809139001FE0004B5A4B5A4BC7FC4A5A4A5AEC0FF84A5A4A5A4A5A4A5A01FD
7F90B57E8114F7ECE3F8ECC1FCEC80FE4A7E497F496D7E6F7E6F7EA26F7E6F7E6F7E3B7F
FFF81FFFE017F0B56C4813F8A26C496C13F017E02D387FB730>I<387FFFF8B5FC80A37E
EA0001B3B3A8007FB612F0B712F8A46C15F025387BB730>I<02FC137E3B7FC3FF01FF80
01CF01877FB600CF7F15DF6C91B57E020F13873B07FC07FE03F8A29039F803FC01A201F0
13F8A301E013F0B3A23C7FFE0FFF07FF804A5BB5028F13C0A2D87FFE020F13806E7F3228
81A730>I<EC01FE3A3FFC0FFF80007F013F13E0486C487F90B67E7E6C9038FE07FCC6EB
F00102E07F14C0EC8000A291C7FCA25BB3A23B3FFFF81FFFF84801FC14FCB56C4813FEA2
6C496C13FC6C01F814F82F2880A730>I<49B4FC010F13E0013F13F8497F90B57E0003EC
FF8014013A07FC007FC04848EB3FE0D81FE0EB0FF0A24848EB07F8491303007F15FC90C7
1201A300FEEC00FEA86C14016C15FCA26D1303003F15F86D13076D130F6C6CEB1FF06C6C
EB3FE06D137F3A07FF01FFC06C90B512806C15006C6C13FC6D5B010F13E0010190C7FC27
2A7CA830>I<EC03FE3A3FFC1FFF80007F4913E0486CB57E90B67E6C816C9038FE07FEC6
9038F001FFDAC00013804A137FEE3FC091C7121F17E049140FA217F01607A8160FA217E0
7F161F6E14C0163F6EEB7F806EEBFF00ECF0039138FC0FFE91B55A5E495C023F13C06E90
C7FCEC03FC91C9FCAD383FFFF8487FB57EA26C5B6C5B2C3C80A730>I<49B413F8010F13
C0013FEBF1FC4913F990B512FD4814FF4813813907FC003F4848131FD81FE0130F491307
123F491303127F90C7FC15015A5AA77E7E15037FA26C6C1307150F6C7E6C6C131FD807FC
137F9038FF01FF6C90B5FC6C14FD6C6C13F96D13F1010F13C1903803FE0190C7FCAD92B5
12F8A24A14FCA26E14F8A22E3C7DA730>I<ED07F83A3FFF803FFE4891B5FCB500C31480
02C714C06C13CF6C9038DFFC3F39001FFFE09238801F809139FE000F004A90C7FCA25C5C
A25CA45CAF003FB512FC4880B7FCA26C5C6C5C2A287EA730>I<90381FFC0E48B5129F00
0714FF5A5A5A387FF007EB000100FE7F4880A46C143E007F91C7FC13E06CB4FC6C13FC6C
EBFF806C14E0000114F86C6C7F01037F9038000FFF02001380003C143F007EEC1FC012FE
150F7EA27F151F6D14806D137F9039FC03FF0090B55A5D00FD5C00FC5CD8F83F13C02670
0FFEC7FC222A79A830>I<EB0780130F497EA9003FB612E05AB712F0A26C15E0A226001F
C0C7FCB216F8A2ED01FCA4ECE003010F14F8ECF0079138FC1FF06DB512E06D14C06D1480
6D1400EC7FFCEC1FF026337EB130>I<D83FFCEB3FFC007F147F486C497EA2007F147F00
3F143F00001400B3A41501A21503A26D130F903A7FC07FFFF891B612FC6D15FE7F6D9038
FE7FFC6D01F813F8010001C0C7FC2F2880A630>I<3B3FFFC07FFF804816C0B56CB512E0
A26C496C13C06C16803B01F80003F000A26D130700005DA26D130F017E5CA2017F131F6D
5CA2EC803F011F91C7FCA26E5A010F137EA2ECE0FE01075BA214F101035BA3903801FBF0
A314FF6D5BA36E5A6E5A2B277EA630>I<3B3FFFC01FFFE0486D4813F0B515F8A26C16F0
6C496C13E0D807E0C7EA3F00A26D5C0003157EA56D14FE00015DEC0F80EC1FC0EC3FE0A3
3A00FC7FF1F8A2147DA2ECFDF9017C5C14F8A3017E13FBA290393FF07FE0A3ECE03FA201
1F5C90390F800F802D277FA630>I<3A3FFF81FFFC4801C37FB580A26C5D6C01815BC648
C66CC7FC137FEC80FE90383F81FC90381FC3F8EB0FE3ECE7F06DB45A6D5B7F6D5B92C8FC
147E147F5C497F81903803F7E0EB07E790380FE3F0ECC1F890381F81FC90383F80FE9038
7F007E017E137F01FE6D7E48486D7E267FFF80B5FCB512C102E31480A202C114006C1380
29277DA630>I<3B3FFFC07FFF804801E014C0B590B512E0A26C6E13C06C01C014803B01
FC0003F000A2000014076D5C137E150F017F5C7F151FD91F805BA214C0010F49C7FCA214
E00107137EA2EB03F0157C15FCEB01F85D14F91300ECFDF0147D147FA26E5AA36E5AA35D
A2143F92C8FCA25C147EA2000F13FE486C5AEA3FC1EBC3F81387EB8FF0EBFFE06C5B5C6C
90C9FC6C5AEA01F02B3C7EA630>I<001FB612FC4815FE5AA316FC90C7EA0FF8ED1FF0ED
3FE0ED7FC0003EECFF804A1300C7485A4A5A4A5A4A5A4A5A4A5A4A5A4990C7FC495A495A
495A495A495A495A4948133E4890C7FC4848147F485A485A485A485A48B7FCB8FCA316FE
7E28277DA630>I<ED3FF0913803FFF8140F5C5C4A13F09138FFF00092C7FC495A5CB3A2
1303495A133F383FFFF0485BB55A91C8FC14C06C7F6C7F38003FF813076D7E1301B3A280
6D7E15F091387FFFF06E13F8808014039138003FF025477BBE30>I<1238127C12FEB3B3
B3AD127C123807476CBE30>I<EA3FE0EA7FFEB57E80806C7FC66C7E13076D7E1301B3A2
806D7E15E091387FFFE06E13F06E13F81407141F4A13F04A13E09138FFE00092C7FC495A
5CB3A21303495A137F387FFFF0B55A5C5C6C48C8FCEA3FE025477BBE30>I<013C133848
B4137C48EB80FE48138148EBC3FC4813EF397FEFFFF0018713E0D8FF0313C000FE1480D8
7C011300383800781F0C78B730>I E
%EndDVIPSBitmapFont
/Fz 105[45 1[45 45 24[40 45 45 66 45 51 30 35 40 51 51
45 51 76 25 51 30 25 51 45 30 40 51 40 51 45 9[91 66
66 61 51 66 71 56 71 66 86 61 2[35 71 71 56 61 66 66
61 66 5[30 1[45 45 45 45 45 45 45 45 45 45 25 23 30 23
52 1[30 30 30 35[51 51 2[{TeXBase1Encoding ReEncodeFont}71
90.9091 /Times-Bold rf /FA 133[44 50 50 72 50 55 33 39
44 55 55 50 55 83 28 55 1[28 55 50 33 44 55 44 55 50
8[72 1[72 72 66 55 72 1[61 78 72 94 66 78 1[39 78 78
61 66 72 72 66 72 7[50 50 50 50 50 50 50 50 50 50 28
25 2[57 1[33 33 37[55 2[{TeXBase1Encoding ReEncodeFont}62
99.6264 /Times-Bold rf /FB 134[103 103 2[115 69 80 92
1[115 103 115 172 57 115 69 57 115 103 69 92 115 92 115
103 12[138 115 149 1[126 161 149 195 138 2[80 1[161 126
138 1[149 138 149 17[57 3[118 1[69 69 40[{TeXBase1Encoding ReEncodeFont}
41 206.559 /Times-Bold rf /FC 104[91 45 1[40 40 10[30
13[40 45 45 66 45 45 25 35 30 45 45 45 45 71 25 45 25
25 45 45 30 40 45 40 45 40 30 2[30 1[30 2[66 86 66 66
56 51 61 1[51 66 66 81 56 66 35 30 66 66 51 56 66 61
61 66 1[40 1[51 1[25 25 45 45 45 45 45 45 45 45 45 45
25 23 30 23 51 45 30 30 30 71 76 1[45 1[30 29[51 51 2[{
TeXBase1Encoding ReEncodeFont}86 90.9091 /Times-Roman
rf
%DVIPSBitmapFont: FD cmsy10 10 2
/FD 2 14 df<007FB81280B912C0A26C17803204799641>0 D<4BB47E031F13F892B6FC
020315C0913A0FFE007FF0DA3FE0EB07FC4AC87ED901FCED3F80D903F0ED0FC049486F7E
D90F80ED01F049CA7E013E177C4983498349834848EF0780000319C04917034848EF01E0
A248CC12F0A2001E1978A248193CA348191EA548190FAC0078191EA56C193CA36C1978A2
6C19F0A26C6CEF01E0A26C6CEF03C06D1707000119806C6CEF0F006D5F017C173E6D5F6D
5F6D6C4B5AD907E0ED07E06D6C4B5AD901FCED3F80D9007F03FEC7FCDA3FE0EB07FCDA0F
FEEB7FF00203B612C0020092C8FC031F13F803011380484E7BBB53>13
D E
%EndDVIPSBitmapFont
/FE 134[42 1[60 42 42 23 32 28 1[42 42 42 65 23 42 1[23
42 42 28 37 42 37 42 37 11[60 51 3[46 2[74 8[60 55 9[42
42 42 42 1[42 42 42 42 2[21 28 21 2[28 28 36[46 46 2[{
TeXBase1Encoding ReEncodeFont}43 83.022 /Times-Roman
rf
%DVIPSBitmapFont: FF cmtt12 12 22
/FF 22 121 df<120FEA1F80EA3FC0EA7FE0EAFFF0A4EA7FE0EA3FC0EA1F80EA0F000C0C
6D8B33>46 D<167016F8ED01FCA2150316F8150716F0A2150F16E0151F16C0153F168015
7F1600A25D5D14015D14035D14075DA2140F5D141F5D143F5D147F92C7FCA25C5C13015C
13035CA213075C130F5C131F5C133F5CA2137F91C8FC5B5B12015B12035BA212075B120F
5B121F5B123F5BA2127F90C9FC5A5AA2127C1238264D7AC433>I<120FEA1F80EA3FC0EA
7FE0EAFFF0A4EA7FE0EA3FC0EA1F80EA0F00C7FCB3120FEA1F80EA3FC0EA7FE0EAFFF0A4
EA7FE0EA3FC0EA1F80EA0F000C2B6DAA33>58 D<EC07F8EC3FFF91B57E01038049804980
90393FFC0FF890397FE003FC9038FF800149C77E4848147E4848EB7E7F3A07F001FFBF49
4813FF000F491480495A001F5B9038803FC3003F49C6FCD9007EEB7FC014FE4849133FEA
7E014A131FA212FEEAFC034A130FA96E131FD8FE011580127EA26E133FD87F0015006C6D
5B027E137ED9807F13FE001F90383FC3FC6D6CB45A000F6D5B6D6C5B00076D5B6D6C5B27
03F8007EC7FC6C6C9038000F806C6CEC1FC06D6C133FD97FE013FF90263FFC071380010F
B612006D14FC6D5C01005C023F1380DA07FCC7FC2A3F7CBD33>64
D<EB1FFC90B57E000314E04880488048809038F007FE9038E001FF6E6C7E153F6C48806C
48131FC87F150FA5EC0FFF49B5FC131F137F48B6FC48140F000F13C0381FFC00EA3FF013
C0485A48C7FC5AA56C141F7E6D133F6C6C13FFD9F807EBFFF06CB7FC6C02F713F86C14E3
6C02C113F0C6EC003FD91FF090C7FC2D2E7BAC33>97 D<ECFFF0010713FE49EBFF80013F
14C04914E090B612F048EBC01F3903FE000FEA07F8485A49EB07E0001FEC03C0484890C7
FC5BA2127F90C9FCA25A5AA97E7EA27F003FEC01F06DEB03F86C7E15076C6C14F0D807FC
130F6CB4EB1FE06CEBE07F6C90B512C06D14806D14006D13FC01075B010013C0252E79AC
33>99 D<ED7FF815FF4A7FA280157F1501ABEB01FF010713C1011F13F1017F13F990B512
FD4814FF4813813907FE003FD80FF8131F49130F48481307491303123F491301127F90C7
FCA25A5AA97E7E15037F123F15077F6C6C130F000F141F01F8133F6C6C137F2603FF81B5
12F06CD9FFFD13F86C02F913FC6D13F16D01E013F8010F018013F0D901FEC8FC2E3E7DBC
33>I<147F903803FFF0011F13FC497F90B6FC48158048018013C09039FE003FE0D807F8
130F4848EB07F0484814F8491303003F15FC491301127F90C7FC16FE15005A5AB7FCA416
FCA248C9FC7E7EA36C7E167C6C7E6D14FE6C7E6D13016C6CEB03FC6CB4EB0FF86CEBC03F
6C90B512F06D14E06D14C0010F1400010313FC9038003FE0272E7BAC33>I<ED3FE09138
01FFF8020713FC4A13FE4A13FF5CEC7FC04AC6FC4948137E4A133C010314005CA8003FB6
12F85AB712FCA26C15F8A2260003F8C7FCB3AD003FB612804815C0A46C1580283E7DBD33
>I<D901FEEB1FE0903A0FFFC0FFF04901E313F8017F90B512FC90B7FC5A480103EBE1F8
D9FC00EB00F0484890387F8060484890383FC00049131FA2001F8149130FA66D131F000F
5DA26D133F6C6C495A6C6C49C7FCEBFF03ECFFFE485C5D01DF13E0D80FCF5BD981FEC8FC
0180C9FCA27FA26C7E7F90B512FC6CECFFC06C15F04815FC48814881271FE000071380D8
3F809038007FC090C8EA1FE048150F007E150700FE16F0481503A56C1507007E16E0007F
150F6C6CEC1FC001E0147FD81FF8903801FF80270FFF801F13006C90B55A000115F86C5D
013F14C0010F91C7FC010013F02E447DAB33>I<EA3FFC127F487EA2127F123F1200AB4A
B4FC020713C0021F7F4A7F4A7F91B57E90B5EA07FEECF801ECE0004A7F825CA291C7FCA3
5BB3A43B3FFFF80FFFFC486D4813FEB56C4813FFA26C496C13FE6C496C13FC303D7FBC33
>I<14E0EB03F8A2497EA36D5AA2EB00E091C8FCAA383FFFF85A80A37EEA0001B3AD007F
B612C016E0B712F0A26C15E016C0243E78BD33>I<EA7FF812FF7FA3127F1200AC4AB512
C04A14E04A14F0A26E14E06E14C09139000FF0004B5A4B5A4B5A4BC7FC4A5A4A5A4A5A4A
5A4A5A4A5A4A5A4A7E01FD7F90B5FC81ECF3F814E3ECC1FCEC80FEEC007F5B496D7E6F7E
6F7EA26F7E6F7E1501826F7E3B7FFFF80FFFF0B56C4813F817FCA217F86C496C13F02E3D
7EBC33>107 D<383FFFFC5AB57EA27E7EC7FCB3B3AD003FB612F84815FCB712FEA26C15
FC6C15F8273D7ABC33>I<4AB4FC263FFC0713C0007F011F7F486C487F4A7F007F90B57E
6CB5EA07FEC6EBF801ECE0004A7F825CA291C7FCA35BB3A43B3FFFF80FFFFC486D4813FE
B56C4813FFA26C496C13FE6C496C13FC302C7FAB33>110 D<EC01FE3A3FFC0FFFC0007F
4913F026FFFE7F7F91B57E6CB67E6C9038FE07FFC6D9F800138002E0EB7FC04A131F4A14
E0EE0FF091C71207A24915F81603A217FC1601A9160317F8A26D140717F06E130F17E06E
131FEE3FC06EEB7F809138F001FFDAFE07130091B55A495C6E13F06E5B020F1380DA03FE
C7FC91C9FCAF383FFFF8487FB57EA26C5B6C5B2E427FAB33>112
D<ED03FE3B7FFF801FFF80B5017F13C06EB512E002C314F014C76C9038CFFE0F39001FDF
F09139FFC007E092380003C04A90C7FC5CA25CA25CA25CA35CB2007FB512FEB6FC81A25D
7E2C2C7DAB33>114 D<90381FFE0790B5EA8F80000314FF5A5A5A383FF007387F800000
7EC7127F12FE5A153FA37E007FEC1F0001C090C7FCEA3FF8381FFFC06C13FF6C14E06C14
F8C680011F7F01007F020713809138007FC0ED1FE0003C140F007EEC07F000FE1403A27E
A27F15076D14E0150F01F0EB3FC09038FE01FF90B61280160000FD5CD8FC7F13F8486C13
E0D8700790C7FC242E79AC33>I<EB03C01307497EAA003FB612FC5AB77EA26C5DA22600
0FE0C8FCB3A3161FA2EE3F80A4167F6E140013076E485A9138FE07FE6DB55A6D5C6D5C6E
13C0021F5BDA07FCC7FC29387EB633>I<D83FFCEB1FFE007F143F486C497EA2007F8000
3F800000EC007FB3A75EA35D6D5B6D130FDAE03F13FC6DB612FE17FF6D806D9038FC3FFE
010301F813FC010001C0C7FC302C7FAA33>I<3B7FFF8007FFF8B56C4813FC6E5AA24A7E
6C496C13F8D80FC0C7EA0FC06D141F00071680A56D143F00031600A3EC0FC0EC1FE0A23A
01F83FF07EA3EC7FF8147CA20000157C9039FCFCFCFCA3ECF87CA2017C5C017D137EECF0
3EA2017F133FA26D486C5AA3ECC00F90390F8007C02E2B7EAA33>119
D<3B3FFFC07FFF80486DB512C0B500F114E0A26C01E014C06C496C13803B00FE000FE000
017F495AEB3F804B5A6D6C48C7FC90380FE07E903807F0FEECF1FC903803FBF8EB01FF6D
5B5D6E5A143F6E5A143F814A7E14FF903801FBF0ECF9F8903803F1FCEB07E0157E90380F
C07F011F6D7E90383F801F02007F496D7E01FE6D7E484813033B7FFFC03FFFE0B54913F0
14E0A214C06C6E13E02C2B7DAA33>I E
%EndDVIPSBitmapFont
/FG 134[50 50 1[50 50 28 39 33 1[50 50 50 78 28 2[28
50 1[33 44 1[44 50 44 11[72 1[55 66 3[72 6[72 55 1[72
66 9[50 7[50 49[{TeXBase1Encoding ReEncodeFont}29 99.6264
/Times-Roman rf /FH 135[72 2[72 40 56 48 1[72 72 72 112
40 72 1[40 72 72 1[64 1[64 72 64 10[104 1[88 3[80 2[128
88 104 1[48 2[80 1[104 96 8[40 7[72 72 2[36 6[48 39[{
TeXBase1Encoding ReEncodeFont}33 143.462 /Times-Roman
rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin

%%EndSetup
%%Page: 1 1
1 0 bop 861 772 a FH(Flick:)43 b(The)35 b(Fle)n(xible)f(IDL)h(Compiler)
f(Kit)1623 955 y(V)-16 b(ersion)34 b(2.1)1307 1331 y(Programmer')-8
b(s)32 b(Manual)1524 1720 y FG(Flux)25 b(Research)h(Group)1282
1836 y(Department)e(of)h(Computer)f(Science)1578 1952
y(Uni)n(v)o(ersity)f(of)i(Utah)1232 2158 y FF(http://www.cs.utah.edu/f)
q(lux/)1514 2275 y(flick@cs.utah.edu)1629 2522 y FG(No)o(v)o(ember)f
(1999)0 4888 y FE(Cop)o(yright)380 4885 y(c)357 4888
y FD(\015)d FE(1997,)d(1998,)h(1999)g(The)h(Uni)n(v)o(ersity)f(of)h
(Utah.)25 b(Permission)19 b(is)j(granted)c(to)j(mak)o(e)f(and)f
(distrib)n(ute)h(v)o(erbatim)f(copies)0 5001 y(of)31
b(this)h(document)d(pro)o(vided)f(the)k(cop)o(yright)d(notice)h(and)h
(this)h(permission)e(notice)g(are)h(preserv)o(ed)f(on)g(all)i(copies.)
58 b(Modi\002ed)0 5114 y(v)o(ersions)19 b(of)g(this)i(document)c(may)j
(be)f(copied)g(and)g(distrib)n(uted)g(with)h(the)g(additional)e
(condition)g(that)i(the)g(entire)f(resulting)g(deri)n(v)o(ed)0
5227 y(w)o(ork)h(is)h(distrib)n(uted)e(under)g(the)h(terms)g(of)g(a)h
(permission)e(notice)g(identical)h(to)g(this)h(one.)p
eop
%%Page: 2 2
2 1 bop 0 -165 a FC(2)p eop
%%Page: 3 3
3 2 bop 0 763 a FB(Contents)0 1215 y FA(I)99 b(Intr)n(oduction)3173
b(7)0 1433 y Fz(1)91 b(Intr)n(oduction)3181 b(11)136
1555 y FC(1.1)96 b(What)24 b(is)f(Flick?)35 b(.)45 b(.)g(.)h(.)f(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)82 b(11)136 1677 y(1.2)96 b(Or)n(ganization)27 b(of)c(this)h
(Document)53 b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)g(.)82 b(12)0 1895 y Fz(2)91 b(An)22 b(Outline)h(of)g(the)g(Sour)n
(ce)h(Code)2485 b(15)136 2017 y FC(2.1)96 b(Flick)24
b(Programs,)g(Files,)f(and)h(Libraries)76 b(.)45 b(.)h(.)f(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)g(.)82 b(15)136 2138 y(2.2)96 b(Or)n(ganization)27
b(of)c(the)h(Source)g(Code)52 b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)g(.)82 b(18)136 2260 y(2.3)96 b(Coding)25
b(Style)87 b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)82 b(25)345 2382
y(2.3.1)110 b(Files)29 b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)82
b(25)345 2503 y(2.3.2)110 b(Aesthetics)33 b(.)46 b(.)f(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)82
b(26)345 2625 y(2.3.3)110 b(Storage)25 b(Allocation)68
b(.)46 b(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g
(.)82 b(27)345 2747 y(2.3.4)110 b(T)-7 b(ags)36 b(.)45
b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)g(.)82 b(28)136 2868 y(2.4)96
b(Summary)24 b(and)g(Comments)49 b(.)c(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)82 b(29)0 3200 y
FA(II)99 b(The)26 b(Intermediate)g(Repr)n(esentations)2171
b(31)0 3419 y Fz(3)91 b(Metadata)25 b(\(MET)-8 b(A\))22
b(Repr)n(esentation)2341 b(33)136 3540 y FC(3.1)96 b(MET)-8
b(A)21 b(Ov)o(ervie)n(w)74 b(.)46 b(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)82 b(33)136
3662 y(3.2)96 b(MET)-8 b(A)21 b(Data)j(Structures)72
b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)g(.)82 b(33)345 3784 y(3.2.1)110 b(Files)29 b(.)45
b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)g(.)82 b(34)345 3905 y(3.2.2)110
b(Channels)73 b(.)46 b(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)82 b(35)136 4027
y(3.3)96 b(The)24 b(MET)-8 b(A)20 b(Library)62 b(.)45
b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)g(.)82 b(36)136 4148 y(3.4)96 b(Summary)24 b(and)g(Comments)49
b(.)c(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)82 b(40)0 4367 y Fz(4)91 b(Abstract)24 b(Object)g(Interface)h(\(A)l
(OI\))e(Repr)n(esentation)1812 b(41)136 4488 y FC(4.1)96
b(A)-5 b(OI)23 b(Ov)o(ervie)n(w)30 b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)82
b(41)136 4610 y(4.2)96 b(A)-5 b(OI)23 b(Data)g(Structures)29
b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)g(.)82 b(42)345 4732 y(4.2.1)110 b(De\002nitions)76
b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)g(.)82 b(42)345 4853 y(4.2.2)110 b(Fields)52
b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)82 b(43)345 4975 y(4.2.3)110
b(T)-7 b(ypes)59 b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)82 b(43)136
5097 y(4.3)96 b(The)24 b(A)-5 b(OI)22 b(Library)85 b(.)46
b(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)g(.)82 b(54)136 5218 y(4.4)96 b Fy(aoid)p
FC(,)22 b(the)i(A)-5 b(OI)22 b(Printing)j(Utility)76
b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)82
b(56)136 5340 y(4.5)96 b(Summary)24 b(and)g(Comments)49
b(.)c(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)82 b(56)1927 5568 y(3)p eop
%%Page: 4 4
4 3 bop 0 -165 a FC(4)3380 b Fx(CONTENTS)0 91 y Fz(5)91
b(Message)25 b(Interface)g(\(MINT\))e(Repr)n(esentation)2028
b(59)136 204 y FC(5.1)96 b(MINT)22 b(Ov)o(ervie)n(w)91
b(.)46 b(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)g(.)82 b(59)136 317 y(5.2)96 b(MINT)22
b(Data)i(Structures)89 b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)82 b(61)345 431 y(5.2.1)110
b(T)-7 b(ype)24 b(De\002nitions)77 b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)82 b(62)345 544
y(5.2.2)110 b(Constants)53 b(.)46 b(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)82 b(68)345
657 y(5.2.3)110 b(Dif)n(ferences)26 b(Between)e(A)-5
b(OI)22 b(and)i(MINT)e(T)-7 b(ypes)49 b(.)c(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)82
b(70)136 770 y(5.3)96 b(The)24 b(MINT)e(Library)78 b(.)45
b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)g(.)82 b(71)136 883 y(5.4)96 b(Summary)24 b(and)g(Comments)49
b(.)c(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)82 b(74)0 1087 y Fz(6)91 b(C)23 b(Abstract)h(Syntax)f(T)-7
b(r)n(ee)24 b(\(CAST\))e(Repr)n(esentation)1824 b(77)136
1200 y FC(6.1)96 b(CAST)22 b(Ov)o(ervie)n(w)90 b(.)46
b(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)g(.)82 b(77)136 1313 y(6.2)96 b(CAST)22 b(Data)h
(Structures)89 b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)g(.)82 b(77)345 1426 y(6.2.1)110
b(Scoped)25 b(Names)71 b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)82 b(77)345 1539 y(6.2.2)110
b(T)-7 b(ypes)59 b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)82 b(79)345
1652 y(6.2.3)110 b(Expressions)42 b(.)j(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)82 b(86)345
1765 y(6.2.4)110 b(Statements)81 b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)82
b(90)345 1879 y(6.2.5)110 b(De\002nitions)25 b(and)f(Declarations)54
b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)82
b(95)136 1992 y(6.3)96 b(The)24 b(CAST)d(Library)78 b(.)45
b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)g(.)82 b(98)136 2105 y(6.4)96 b(Summary)24 b(and)g(Comments)49
b(.)c(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)37 b(100)0 2309 y Fz(7)91 b(Pr)n(esentation)25 b(in)e(C/C++)f
(\(PRES)p 1298 2309 28 4 v 31 w(C\))h(Repr)n(esentation)1734
b(101)136 2422 y FC(7.1)96 b(PRES)p 569 2422 V 31 w(C)23
b(Ov)o(ervie)n(w)81 b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37 b(101)345 2535
y(7.1.1)110 b(Stubs)72 b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37
b(101)345 2648 y(7.1.2)110 b(Presentation)27 b(Attrib)n(utes)55
b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37
b(105)345 2761 y(7.1.3)110 b(Marshaling)26 b(and)e(Unmarshaling)56
b(.)46 b(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37 b(105)345
2874 y(7.1.4)110 b(Memory)24 b(Allocation)i(and)e(Deallocation)74
b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37 b(106)345 2987 y(7.1.5)110
b(Exceptions)77 b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37 b(108)136 3100
y(7.2)96 b(PRES)p 569 3100 V 31 w(C)23 b(Data)g(Structures)79
b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)g(.)37 b(108)345 3214 y(7.2.1)110 b(Stub)24 b(T)-7
b(ypes)74 b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)g(.)37 b(109)345 3327 y(7.2.2)110
b(Presentation)27 b(Attrib)n(ute)e(T)-7 b(ypes)55 b(.)45
b(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37 b(112)345
3440 y(7.2.3)110 b(Inline)25 b(T)-7 b(ypes)29 b(.)45
b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)g(.)37 b(114)345 3553 y(7.2.4)110 b(Mapping)25
b(T)-7 b(ypes)49 b(.)c(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)g(.)37 b(121)345 3666 y(7.2.5)110
b(Allocation)26 b(T)-7 b(ypes)61 b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37 b(128)136
3779 y(7.3)96 b(The)24 b(PRES)p 734 3779 V 31 w(C)e(Library)68
b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)g(.)37 b(129)136 3892 y(7.4)96 b Fy(presd)p
FC(,)22 b(the)h(PRES)p 987 3892 V 31 w(C)g(Printing)h(Utility)79
b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37
b(139)0 4096 y Fz(8)91 b(Sour)n(ce)24 b(Code)f(Markup)f(Language)h
(\(SCML\))2038 b(141)136 4209 y FC(8.1)96 b(The)24 b(Language)43
b(.)i(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)g(.)37 b(141)345 4322 y(8.1.1)110
b(Introduction)33 b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37 b(141)345 4435
y(8.1.2)110 b(T)-7 b(ypes)59 b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37
b(142)345 4548 y(8.1.3)110 b(V)-10 b(alues)32 b(.)45
b(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)g(.)37 b(142)345 4662 y(8.1.4)110
b(Commands)65 b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37 b(143)345 4775 y(8.1.5)110
b(Lar)n(ger)25 b(Example)j(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37 b(145)136 4888
y(8.2)96 b(The)24 b(SCML)d(interpreter)27 b(.)45 b(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37
b(146)345 5001 y(8.2.1)110 b(Introduction)33 b(.)45 b(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37
b(146)345 5114 y(8.2.2)110 b(scml)p 812 5114 V 34 w(stream)32
b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)g(.)37 b(146)345 5227 y(8.2.3)110 b(scml)p
812 5227 V 34 w(string)68 b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37 b(147)345
5340 y(8.2.4)110 b(scml)p 812 5340 V 34 w(tok)o(en)74
b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)g(.)37 b(148)p eop
%%Page: 5 5
5 4 bop 0 -165 a Fx(CONTENTS)3377 b FC(5)345 91 y(8.2.5)110
b(scml)p 812 91 28 4 v 34 w(tok)o(en)p 1045 91 V 35 w(sequence)50
b(.)45 b(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37
b(152)345 205 y(8.2.6)110 b(scml)p 812 205 V 34 w(tok)o(en)p
1045 205 V 35 w(stack)58 b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37 b(153)345 318 y(8.2.7)110
b(scml)p 812 318 V 34 w(stream)p 1087 318 V 34 w(pos)77
b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)g(.)37 b(153)345 432 y(8.2.8)110 b(scml)p 812 432
V 34 w(parser)53 b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37 b(154)345 546
y(8.2.9)110 b(scml)p 812 546 V 34 w(handler)71 b(.)45
b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)g(.)37 b(155)345 659 y(8.2.10)65 b(scml)p 812 659
V 34 w(handler)p 1116 659 V 35 w(table)g(.)46 b(.)f(.)g(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37 b(155)345
773 y(8.2.11)65 b(scml)p 812 773 V 34 w(cmd)p 1002 773
V 33 w(de\002nition)79 b(.)45 b(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)g(.)37 b(155)345 886 y(8.2.12)65 b(scml)p
812 886 V 34 w(escape/scml)p 1282 886 V 36 w(escape)p
1558 886 V 35 w(table)32 b(.)46 b(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)37 b(155)345 1000 y(8.2.13)65 b(scml)p 812 1000 V
34 w(scope)j(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)g(.)37 b(156)345 1113 y(8.2.14)65
b(scml)p 812 1113 V 34 w(conte)o(xt)77 b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37
b(156)345 1227 y(8.2.15)65 b(Command)24 b(Handler)g(Functions)86
b(.)46 b(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37 b(159)345
1341 y(8.2.16)65 b(Miscellaneous)27 b(Functions)51 b(.)45
b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37
b(160)0 1659 y FA(III)99 b(The)26 b(Pr)n(ograms)f(and)g(Libraries)2317
b(163)0 1864 y Fz(9)91 b(Libcompiler)3149 b(165)136 1978
y FC(9.1)96 b(Errors)24 b(and)g(W)-7 b(arnings)89 b(.)45
b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)g(.)37 b(165)136 2091 y(9.2)96 b(Memory)24 b(and)g(Strings)91
b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)g(.)37 b(165)136 2205 y(9.3)96 b(Files)47
b(.)e(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37 b(166)136
2318 y(9.4)96 b(Command)24 b(Line)f(Ar)n(guments)50 b(.)c(.)f(.)g(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37
b(167)136 2432 y(9.5)96 b(Stacks)55 b(.)46 b(.)f(.)g(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)g(.)37 b(168)136 2545 y(9.6)96 b(Hash)24 b(T)-7
b(ables)52 b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37 b(169)136
2659 y(9.7)96 b(Link)o(ed)25 b(Lists)40 b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)37 b(169)0 2864 y Fz(10)46 b(Fr)n(ont)24 b(Ends)3186
b(171)136 2977 y FC(10.1)51 b(Front)24 b(End)f(Libraries)54
b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)g(.)37 b(171)136 3091 y(10.2)51 b(CORB)m(A)21
b(Front)j(End)70 b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37 b(172)136 3205
y(10.3)51 b(ONC)22 b(RPC)g(\(Sun\))h(Front)h(End)41 b(.)46
b(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37
b(172)136 3318 y(10.4)51 b(MIG)23 b(Front)h(End)66 b(.)45
b(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)g(.)37 b(176)136 3432 y(10.5)51 b(Summary)24
b(and)g(Comments)49 b(.)c(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)g(.)37 b(176)0 3637 y Fz(11)46 b(Pr)n(esentation)25
b(Generators)2680 b(179)136 3750 y FC(11.1)51 b(Presentation)27
b(of)c(an)h(Interf)o(ace)42 b(.)k(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)g(.)37 b(179)345 3864 y(11.1.1)65
b(Standard)25 b(RPC)d(Presentation)36 b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)g(.)37 b(179)345 3977 y(11.1.2)65
b(Decomposed)26 b(Stubs)e(Presentation)59 b(.)45 b(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)g(.)37 b(180)136 4091 y(11.2)51 b(A)-5 b(OI)23
b(to)g(PRES)p 842 4091 V 31 w(C)g(T)m(ranslation)j(.)46
b(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37
b(181)345 4204 y(11.2.1)65 b(Ov)o(ervie)n(w)24 b(of)f(the)h(T)m
(ranslation)i(Algorithm)79 b(.)46 b(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37
b(182)345 4318 y(11.2.2)65 b(Naming)49 b(.)c(.)h(.)f(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37
b(182)345 4431 y(11.2.3)65 b(Operations)82 b(.)45 b(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37
b(182)345 4545 y(11.2.4)65 b(Data)24 b(T)-7 b(ypes)23
b(and)h(T)-7 b(ype)24 b(Collections)k(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)g(.)37 b(183)345 4659 y(11.2.5)65 b(Metadata)25
b(Associations)65 b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)g(.)37 b(186)136 4772 y(11.3)51 b(Flick)24 b(Presentation)i
(Generator)f(Architecture)68 b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)
37 b(186)345 4886 y(11.3.1)65 b(Base)24 b(Presentation)i(Generator)f
(Library)35 b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37 b(187)345
4999 y(11.3.2)65 b(CORB)m(A)21 b(C)h(Presentation)27
b(Generator)46 b(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37
b(187)345 5113 y(11.3.3)65 b(CORB)m(A)21 b(C++)i(Presentation)j
(Generator)80 b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37 b(187)345
5226 y(11.3.4)65 b(ONC)22 b(RPC)g(\()p Fy(rpcgen)p FC(\))f
(Presentation)26 b(Generator)93 b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37 b(188)345
5340 y(11.3.5)65 b(Fluk)o(e)24 b(Presentation)i(Generator)j(.)45
b(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37 b(188)p
eop
%%Page: 6 6
6 5 bop 0 -165 a FC(6)3380 b Fx(CONTENTS)345 91 y FC(11.3.6)65
b(MIG)23 b(Presentation)j(Generator)58 b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)g(.)37 b(189)136 204 y(11.4)51 b(Summary)24
b(and)g(Comments)49 b(.)c(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)g(.)37 b(192)0 408 y Fz(12)46 b(Back)23
b(Ends)3210 b(193)136 521 y FC(12.1)51 b(The)24 b(Back)f(End)g(Library)
91 b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)g(.)37 b(193)345 634 y(12.1.1)65 b(Back)24 b(End)f(State)54
b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)g(.)37 b(193)345 747 y(12.1.2)65 b(Stub)24 b(Generators)k(.)45
b(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)37 b(194)345 860 y(12.1.3)65 b(mu)p 757 860 28 4
v 33 w(state)27 b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37 b(195)345
973 y(12.1.4)65 b(client)p 841 973 V 35 w(mu)p 992 973
V 33 w(state)24 b(and)g(tar)n(get)p 1571 973 V 35 w(mu)p
1722 973 V 33 w(state)85 b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37
b(198)345 1086 y(12.1.5)65 b(mem)p 823 1086 V 33 w(mu)p
972 1086 V 33 w(state)85 b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37 b(198)345 1198
y(12.1.6)65 b(mu)p 757 1198 V 33 w(state)p 955 1198 V
35 w(ar)n(glist)42 b(.)j(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)g(.)37 b(199)345 1311 y(12.1.7)65
b(mu)p 757 1311 V 33 w(abort)p 975 1311 V 35 w(block)45
b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)g(.)37 b(199)345 1424 y(12.1.8)65 b(mu)p 757 1424
V 33 w(msg)p 941 1424 V 34 w(span)47 b(.)e(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37 b(201)345
1537 y(12.1.9)65 b(Implementing)26 b(Presentation)g(Functions)71
b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37 b(203)136 1650 y(12.2)51
b(Speci\002c)24 b(Back)g(Ends)62 b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37
b(203)345 1763 y(12.2.1)65 b(The)23 b(Basics)78 b(.)45
b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)g(.)37 b(204)345 1876 y(12.2.2)65 b(Decomposed)26
b(Stubs)e(in)f(IIOP)f(and)i(Khazana)84 b(.)45 b(.)g(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37
b(204)345 1989 y(12.2.3)65 b(Presentation)27 b(Implementation)f(in)d
(IIOPXX)k(.)46 b(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37 b(204)136 2102
y(12.3)51 b(Summary)24 b(and)g(Comments)49 b(.)c(.)h(.)f(.)g(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37 b(205)0
2306 y Fz(13)46 b(Runtime)3289 b(207)136 2418 y FC(13.1)51
b(Flick)24 b(Runtimes)75 b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37
b(207)136 2531 y(13.2)51 b(Khazana,)25 b(Fluk)o(e)63
b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)g(.)37 b(207)136 2644 y(13.3)51
b(The)24 b(A)l(CE)d(ORB)h(\(T)-8 b(A)j(O\))27 b(.)45
b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)g(.)37 b(208)136 2757 y(13.4)51 b(Logical)25 b(Runtime)f(and)g
(Header)g(Separation)i(for)d(Flick)58 b(.)45 b(.)g(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)37
b(208)345 2870 y(13.4.1)65 b(De\002nitions)76 b(.)45
b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)g(.)37 b(208)345 2983 y(13.4.2)65 b(Presentation)27
b(Issues)57 b(.)46 b(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)g(.)37 b(208)345 3096 y(13.4.3)65 b(Link)24
b(Layer)g(Issues)32 b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)g(.)37 b(209)345 3209 y(13.4.4)65
b(Message)25 b(F)o(ormat)e(Issues)42 b(.)j(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)g(.)37 b(209)p eop
%%Page: 7 7
7 6 bop 1733 1840 a Fw(P)n(art)45 b(I)1390 2255 y FB(Intr)l(oduction)
1927 5568 y FC(7)p eop
%%Page: 8 8
8 7 bop eop
%%Page: 9 9
9 8 bop 0 756 a FB(Pr)l(eface)0 1200 y FC(This)22 b(manual)g(describes)
j(the)d(implementation)j(details)e(of)f(Flick,)g(the)g(Fle)o(xible)j
Fv(I)t(D)t(L)g FC(Compiler)d(Kit.)28 b(People)23 b(interested)0
1313 y(in)f(studying,)i(modifying,)g(or)e(e)o(xtending)i(Flick)e
(should)h(consult)h(this)e(manual)h(as)e(a)h(starting)i(point.)29
b(Those)22 b(who)f(simply)0 1426 y(w)o(ant)f(to)g Fu(use)g
FC(Flick)h(do)f(not)g(need)h(to)f(read)h(this)f(document:)30
b(use)20 b(of)g(the)g(Flick)h(compiler)g(tools)g(is)f(described)j(in)d
(a)f(separate)0 1539 y(user')-5 b(s)25 b(manual.)1927
5568 y(9)p eop
%%Page: 10 10
10 9 bop 0 -165 a FC(10)p eop
%%Page: 11 11
11 10 bop 0 714 a Fw(Chapter)44 b(1)0 1130 y FB(Intr)l(oduction)0
1575 y Fu(This)18 b(guide)h(assumes)g(that)g(the)g(r)m(eader)g(is)f
(familiar)h(with)f(the)g(basics)i(of)e(distrib)n(uted)j(application)h
(pr)l(o)o(gr)o(amming:)28 b(RPCs,)0 1688 y(RMIs,)21 b(IDLs,)g(and)h
(the)g(various)i(distrib)n(uted)h(computing)f(standar)m(ds)g(suc)o(h)e
(as)g(CORB)n(A)c(and)23 b(ONC)c(RPC.)27 b(Reader)o(s)22
b(who)0 1801 y(ar)m(e)e(unfamiliar)j(with)d(distrib)n(uted)k(computing)
e(should)g(r)m(e)o(vie)o(w)e(these)h(terms)g(befor)m(e)g(pr)l(oceeding)
i(thr)l(ough)g(this)e(manual.)0 2095 y Ft(1.1)119 b(What)29
b(is)h(Flick?)0 2302 y FC(Flick)f(is)g(a)f(\003e)o(xible)i(and)f
(optimizing)i(compiler)f(for)f(interf)o(ace)i(de\002nition)g(languages)
h(\()r Fv(I)t(D)t(L)r FC(s\).)46 b(The)29 b(name)g(\223Flick\224)g(is)0
2415 y(an)g(acron)o(ym)h(for)g(\223Fle)o(xible)i Fv(I)t(D)t(L)g
FC(Compiler)e(Kit.)-6 b(\224)45 b(Lik)o(e)29 b(a)g(traditional)34
b Fv(I)t(D)t(L)e FC(compiler)l(,)g(Flick)d(can)g(read)h(a)f(high-le)n
(v)o(el)0 2528 y(speci\002cation)35 b(describing)h(an)c(interf)o(ace)j
(to)d(a)g(softw)o(are)i(component)h(or)d(module,)k(and)d(from)f(that,)j
(produce)g(special)0 2641 y(functions)j(called)f Fu(stubs)f
FC(that)g(implement)h(the)f(interf)o(ace)h(in)f(the)f(C)g(or)g(C++)g
(programming)i(language.)67 b(The)35 b(stubs)0 2754 y(implement)c
(remote)f(procedure)i(call)e(\()r Fv(R)t(P)t(C)r FC(\))h(or)e(remote)h
(method)h(in)l(v)n(ocation)i(\()r Fv(R)t(M)t(I)r FC(\))d(semantics)i
(and)e(allo)n(w)f(separate)0 2867 y(client)k(and)g(serv)o(er)g
(processes)h(to)e(communicate)j(through)f(what)e(appear)h(to)f(be)g
(ordinary)-6 b(,)37 b(local)c(procedure)h(calls)f(or)0
2980 y(method)24 b(in)l(v)n(ocations.)141 3093 y(Unlik)o(e)k
(traditional)j Fv(I)t(D)t(L)f FC(compilers,)f(ho)n(we)n(v)o(er)l(,)e
(Flick)g(is)g(implemented)h(as)f(a)f(set)h(of)f(programs,)j(each)f
(handling)h(a)0 3206 y(single)21 b(phase)g(of)f(compilation.)30
b(These)21 b(separate)g(programs)h(allo)n(w)e(Flick)g(to)g(support)h
(features)h(be)o(yond)g(the)e(capabilities)0 3319 y(of)j(ordinary)28
b Fv(I)t(D)t(L)f FC(compilers:)136 3533 y Fs(\017)46
b Fu(Multiple)28 b Fv(I)t(D)t(L)r Fu(s.)34 b FC(Most)27
b Fv(R)t(P)t(C)g FC(and)e(distrib)n(uted)j(object)e(systems,)g
(including)k Fv(C)t(O)t(R)t(B)r(A)25 b FC(and)i Fv(O)t(N)t(C)h(R)t(P)t
(C)f FC(\(Sun)g Fv(R)t(P)t(C)r FC(\),)227 3646 y(specify)h
Fu(an)f Fv(I)t(D)t(L)i FC(and)d(from)f(then)i(on)e(refer)i(to)e(it)g
(as)h Fu(the)i Fv(I)t(D)t(L)r FC(.)35 b(Flick,)26 b(ho)n(we)n(v)o(er)l
(,)h(does)f(not)g(introduce)i(a)d(ne)n(w)i Fv(I)t(D)t(L)227
3759 y FC(b)n(ut)e(instead)g(supports)h(a)e(number)g(of)g(e)o(xisting)i
(ones)e(side-by-side.)33 b(An)o(y)25 b Fv(I)t(D)t(L)i
FC(supported)g(by)c(Flick)h(can)h(be)e(used)227 3871
y(to)28 b(generate)j(stubs)e(for)f(an)o(y)h(en)l(vironment)i(\(with)d
(some)h(limitations\).)45 b(Supporting)31 b(multiple)g
Fv(I)t(D)t(L)r FC(s)e(allo)n(ws)g(for)227 3984 y(backw)o(ard)c
(compatibility)g(and)f(migration)g(of)f(e)o(xisting)h(programs,)g(and)f
(also)h(allo)n(ws)f(de)n(v)o(elopers)i(to)e(choose)h(the)227
4097 y(best)i Fv(I)t(D)t(L)h FC(for)d(the)f(task)i(at)e(hand.)136
4286 y Fs(\017)46 b Fu(Fle)n(xible)28 b(langua)o(g)o(e)i(mappings)e
(\(a.k.a.)f(\223pr)m(esentations\224\).)42 b FC(Flick)27
b(is)f(designed)j(to)e(allo)n(w)g(the)g(appearance)j(and)227
4399 y(beha)n(vior)h(of)d(generated)i(stubs)f(to)f(be)g(altered)i(to)e
(suit)g(the)h(needs)g(of)f(the)g(particular)j(client)e(or)f(serv)o(er)h
(in)f(which)227 4512 y(those)g(stubs)h(are)e(used,)i(without)f
(altering)h(the)e(\223on-the-wire\224)j(protocol)g(between)e(client)g
(and)g(serv)o(er)-5 b(.)40 b(In)27 b(other)227 4625 y(w)o(ords,)22
b(Flick)f(pro)o(vides)h(a)f(frame)n(w)o(ork)g(for)g(creating)i(and)f
(modifying)g(language)i(mappings)e(from)h Fv(I)t(D)t(L)r
FC(s)f(to)f(tar)n(get)227 4738 y(programming)26 b(languages)g
(\(currently)-6 b(,)26 b(C)d(and)h(C++\).)227 4888 y(A)c(language)k
(mapping)e(is)f(implemented)j(by)d(what)g(Flick)g(calls)h(a)f
Fu(pr)m(esentation)k(g)o(ener)o(ator)p FC(.)30 b(The)21
b(current)i(frame-)227 5001 y(w)o(ork)e(allo)n(ws)h(Flick)f(users)h(to)
f(tweak)g(a)f(language)k(mapping)e(through)h(command)f(line)f(options)i
(to)e(a)g(presentation)227 5114 y(generator)l(,)38 b(e.g.,)c(to)f
(change)i(the)e(patterns)i(used)e(to)g(b)n(uild)h(names,)i(or)c(to)h
(tell)g(the)h(presentation)i(generator)f(to)227 5227
y(create)f(\223decomposed\224)i(stubs)e(instead)g(of)f(ordinary)h
(stubs)g(\(as)f(described)i(in)d(Section)i(11.1.2\).)57
b(Lar)n(ge-scale)227 5340 y(modi\002cations,)36 b(ho)n(we)n(v)o(er)l(,)
e(currently)g(require)f(a)e(Flick)g(programmer)j(to)d(write)h(C++)e
(code)j(to)e(implement)i(the)1905 5568 y(11)p eop
%%Page: 12 12
12 11 bop 0 -165 a FC(12)2571 b Fx(CHAPTER)20 b(1.)51
b(INTR)l(ODUCTION)227 91 y FC(modi\002ed)25 b(language)i(mapping)e
(\(as)g(a)f(ne)n(w)g(presentation)k(generator\).)33 b(In)25
b(the)f(future,)i(we)d(hope)j(to)e(mak)o(e)g(it)g(pos-)227
204 y(sible)29 b(for)f(\223ordinary)j(users\224)e(to)f(mak)o(e)g(more)g
(and)h(more)f(complicated)i(changes)g(to)e(language)i(mappings,)h
(e.g.,)227 317 y(through)26 b(some)d(sort)i(of)e(special-purpose)28
b(\223presentation)g(de\002nition)d(language.)-6 b(\224)136
505 y Fs(\017)46 b Fu(Sophisticated)26 b(code)d(g)o(ener)o(ation)i(and)
e(optimization.)31 b FC(Flick)22 b(w)o(as)g(originally)i(tar)n(geted)h
(to)n(w)o(ard)d(communication)227 618 y(in)32 b(microk)o(ernel-based)k
(systems.)54 b(In)31 b(that)h(en)l(vironment,)37 b(Flick)31
b(pro)o(vides)j(the)d(user)n(-le)n(v)o(el)j(glue)e(between)h(the)227
731 y(microk)o(ernel')-5 b(s)25 b(primiti)n(v)o(e)f Fv(I)t(P)t(C)g
FC(f)o(acilities)g(and)d(user)n(-le)n(v)o(el)j(application)g(code.)29
b(This)21 b(tar)n(get)i(en)l(vironment)h(implies)227
843 y(that)c(Flick-generated)j(stubs)d(must)g(be)f Fu(very)h(fast)r
FC(:)27 b(good)20 b(microk)o(ernels)i(al)o(w)o(ays)f(ha)n(v)o(e)e(e)o
(xtremely)i(f)o(ast)f(and)g(tightly)227 956 y(optimized)38
b(primiti)n(v)o(e)h Fv(I)t(P)t(C)g FC(paths,)h(so)35
b(inef)n(\002cient)j(stubs)f(could)g(easily)g(raise)g(the)f(ef)n(fecti)
n(v)o(e)k Fv(I)t(P)t(C)e FC(time)e(by)g(an)227 1069 y(order)26
b(of)f(magnitude.)36 b(T)-7 b(oday)h(,)25 b(Flick)g(produces)j
(optimized)f(code)f(for)f Fu(all)g FC(of)g(its)h(supported)h(transport)
h(f)o(acilities)227 1182 y(including)g Fv(T)t(C)t(P)r
FC(-based)f(transports)g(and)d(lo)n(wer)n(-le)n(v)o(el,)g(microk)o
(ernel-based)31 b Fv(I)t(P)t(C)r FC(.)136 1370 y Fs(\017)46
b Fu(Multiple)23 b(bac)n(k)g(ends.)29 b FC(Finally)-6
b(,)23 b(while)f(man)o(y)h Fv(R)t(P)t(C)h FC(and)f(distrib)n(uted)i
(object)e(systems)g(claim)f(to)f(support)j(multiple)227
1483 y(transport)29 b(protocols,)g(the)e(protocols)i(the)o(y)e(support)
h(are)f(generally)i(only)e(slight)g(v)n(ariations)i(of)e(each)g(other)
-5 b(.)38 b(F)o(or)227 1596 y(e)o(xample,)c Fv(O)t(N)t(C)e(R)t(P)t(C)g
FC(supports)f(multiple)g(transports)h(in)d(the)h(sense)g(that)g(it)g
(can)f(pass)h(messages)h(across)g(either)229 1708 y Fv(T)t(C)t(P)j
FC(or)e Fv(U)t(D)t(P)g FC(links.)50 b(Ho)n(we)n(v)o(er)l(,)31
b(the)g(basic)g(data)g(encoding)i(scheme)e(used)g(\()r
Fv(X)t(D)t(R)r FC(\))f(is)g(the)g(same)h(in)f(each)h(case,)227
1821 y(as)25 b(are)h(the)g(stubs)g(generated)i(by)d(the)j
Fv(I)t(D)t(L)g FC(compiler)-5 b(.)35 b(The)25 b(multiple)h(protocol)i
(support)f(is)e(really)i(just)f(a)e(stream-)227 1934
y(based)k(abstraction)h(layer)e(in)f(the)i Fv(R)t(P)t(C)g
FC(runtime)f(support)h(library)-6 b(.)38 b(There)27 b(is)e(little)i
(hope,)h(for)e(e)o(xample,)h(that)g(the)229 2047 y Fv(O)t(N)t(C)g(R)t
(P)t(C)e FC(system)f(could)h(easily)g(be)e(made)h(to)f(support)i(the)h
Fv(C)t(O)t(R)t(B)r(A)e FC(Internet)h(Inter)n(-)r Fv(O)t(R)t(B)i
FC(Protocol)e(\()r Fv(I)t(I)t(O)t(P)r FC(\))g(e)n(v)o(en)227
2160 y(though)h(both)e(are)g(based)g(on)i Fv(T)t(C)t(P)r
FC(.)227 2310 y(Flick,)36 b(on)e(the)g(other)h(hand,)i(aggressi)n(v)o
(ely)g(supports)f(multiple)f(protocols)h(by)e(allo)n(wing)h(dif)n
(ferent)h(stub)e(code)227 2423 y(generators)27 b(\(back)f(ends\))f(to)f
(be)g(used)h(interchangeably)-6 b(.)36 b(Each)24 b(back)h(end)f(has)h
(complete)h(control)f(o)o(v)o(er)g(the)h Fv(R)t(P)t(C)227
2536 y FC(protocols)e(that)e(it)f(implements:)29 b(the)22
b(back)g(end)f(determines)j(not)d(only)h(the)g(underlying)i(transport)f
(protocol)h(\(e.g.,)229 2649 y Fv(T)t(C)t(P)r FC(,)29
b Fv(U)t(D)t(P)r FC(,)d(Mach)g(3)f(messages,)j(direct)f(function)h
(call,)e(etc.\))g(b)n(ut)g(also)g(the)g(data)h(encoding)h(scheme)e
(used)h(\(e.g.,)227 2762 y(Sun')-5 b(s)34 b Fv(X)t(D)t(R)r
FC(,)h Fv(D)t(C)t(E)r FC(')-5 b(s)35 b Fv(N)t(D)t(R)r
FC(,)g Fv(C)t(O)t(R)t(B)r(A)r FC(')-5 b(s)33 b Fv(C)t(D)t(R)r
FC(,)g(\223dumb\224)f(architecture-speci)q(\002c)37 b(encoding,)f
(etc.\))c(and)g(the)g(high-)227 2875 y(le)n(v)o(el)f
Fv(R)t(P)t(C)g FC(protocol)f(layered)h(abo)o(v)o(e)e(the)g(lo)n(w-le)n
(v)o(el)g(stream)g(or)f(message)i(protocol)h(\(e.g.,)g
Fv(O)t(N)t(C)h(R)t(P)t(C)r FC(,)f Fv(C)t(O)t(R)t(B)r(A)229
2988 y(I)t(I)t(O)t(P)r FC(,)k(Mach)d(3')-5 b(s)33 b Fv(M)t(I)t(G)h
FC(protocol,)h(etc.\).)53 b(Flick)31 b(contains)j(se)n(v)o(eral)e(back)
h(ends)f(supporting)i(e)o(xtremely)f(di)n(v)o(erse)227
3101 y(protocol)26 b(combinations.)141 3313 y(Flick)f(is)f(being)h(de)n
(v)o(eloped)i(as)d(part)h(of)f(the)h(Flux)f(Operating)i(Systems)f
(Project)g(at)f(the)h(Uni)n(v)o(ersity)h(of)e(Utah.)31
b(Ho)n(w-)0 3426 y(e)n(v)o(er)l(,)24 b(Flick)f(is)h(intended)h(to)f(be)
f(an)h(open)g(\223kit\224)h(that)f(others)h(will)e(e)o(xtend)i(and)f
(adapt)g(for)g(their)h(o)n(wn)e(projects.)0 3719 y Ft(1.2)119
b(Or)o(ganization)30 b(of)g(this)g(Document)0 3926 y
FC(P)o(art)19 b(I)g(of)g(this)h(manual,)h(which)f(you)g(are)g(reading)h
(no)n(w)-6 b(,)20 b(introduces)i(Flick.)28 b(Chapter)21
b(2)e(contains)i(an)f(o)o(v)o(ervie)n(w)g(of)f(Flick')-5
b(s)0 4039 y(components,)27 b(a)d(catalog)i(of)e(the)g(directories)j
(in)e(the)f(Flick)h(source)g(tree,)g(and)g(a)f(summary)g(of)h(the)f
(coding)i(style)f(used)g(in)0 4151 y(the)f(Flick)f(sources.)141
4264 y(P)o(art)f(II)h(of)g(this)h(manual)g(describes)h(the)f(data)f
(structures)j(that)e(Flick)f(uses)h(at)f(dif)n(ferent)i(stages)f(of)h
Fv(I)t(D)t(L)h FC(compilation.)0 4377 y(These)e(data)g(structures)i
(are)e(the)g(intermediate)i(\223languages\224)h(used)d(by)g(dif)n
(ferent)h(parts)g(of)e(Flick)h(and)g(include:)136 4590
y Fs(\017)48 b Fv(M)t(E)t(T)m(A)r FC(,)25 b(for)f(k)o(eeping)h(track)g
(of)e(the)h(\002les)f(that)h(Flick)g(reads)h(and)f(writes)g(\(Chapter)g
(3\);)136 4777 y Fs(\017)48 b Fv(AO)t(I)r FC(,)23 b(to)h(represent)k
Fv(I)t(D)t(L)e FC(speci\002cations)h(\(Chapter)e(4\);)136
4965 y Fs(\017)48 b Fv(M)t(I)t(N)t(T)r FC(,)25 b(to)e(represent)j(the)e
(abstract)h(structure)h(of)d(on-the-wire)j(messages)f(\(Chapter)g(5\);)
136 5152 y Fs(\017)48 b Fv(C)t(A)t(S)t(T)r FC(,)25 b(to)e(describe)j(C)
c(and)i(C++)f(code)h(\(Chapter)h(6\);)136 5340 y Fs(\017)48
b Fv(P)t(R)t(E)t(S)p 421 5340 28 4 v 40 w(C)r FC(,)22
b(to)i(represent)i(the)d(beha)n(vior)j(of)e(generated)i(stubs)f(and)f
(sk)o(eletons)i(\(Chapter)f(7\);)e(and)p eop
%%Page: 13 13
13 12 bop 0 -165 a Fx(1.2.)51 b(ORGANIZA)-10 b(TION)20
b(OF)i(THIS)f(DOCUMENT)2036 b FC(13)136 91 y Fs(\017)48
b Fv(S)t(C)t(M)t(L)r FC(,)27 b(to)e(de\002ne)g(templates)i(for)f(other)
g(functions)h(that)f(Flick)f(must)h(generate)h(as)e(part)h(of)f(an)g
(interf)o(ace)i(presen-)227 204 y(tation)e(\(Chapter)g(8\).)0
417 y(Understanding)31 b(these)d(intermediate)i(languages)g(\227)c(and)
h(the)h(associated)i(libraries)f(for)f(using)g(them)f(\227)f(is)h
(critical)i(to)0 530 y(understanding)f(Flick)23 b(o)o(v)o(erall.)141
643 y(In)32 b(P)o(art)g(III,)j(this)e(manual)g(describes)i(the)d(inner)
i(w)o(orkings)g(of)e(Flick')-5 b(s)34 b(front)f(ends)g(\(Chapter)h
(10\),)h(presentation)0 756 y(generators)c(\(Chapter)d(11\),)h(and)f
(back)h(ends)f(\(Chapter)h(12\).)42 b(The)27 b(chapters)j(in)e(this)g
(part)g(of)g(the)g(manual)g(describe)i(the)0 868 y(indi)n(vidual)g
(implementations)g(of)d(each)h(compiler)h(stage,)g(as)e(well)g(as)g
(the)g(libraries)j(that)d(are)h(common)f(to)h(each)f(stage.)0
981 y(The)d(guide)i(concludes)h(with)d(a)g(summary)h(of)g(the)f
(runtime)i(libraries)g(that)f(pro)o(vide)h(support)h(to)d(the)h(code)g
(generated)i(by)0 1094 y(Flick')-5 b(s)24 b(v)n(arious)h(back)g(ends)f
(\(Chapter)h(13\).)141 1207 y(In)36 b(summary)-6 b(,)39
b(this)d(document)i(is)d(intended)j(to)e(be)f(a)h(programmer')-5
b(s)38 b(guide)f(to)e(the)h(inner)h(w)o(orkings)g(of)f(Flick:)0
1320 y(the)c(o)o(v)o(erall)g(architecture,)k(the)c(intermediate)i(data)
e(structures,)j(and)d(the)g(indi)n(vidual)i(Flick)d(compiler)i
(programs)g(and)0 1433 y(libraries.)40 b(This)27 b(\223road)g(map\224)g
(can)g(only)h(tak)o(e)f(you)g(so)g(f)o(ar)l(,)h(ho)n(we)n(v)o(er)l(,)f
(and)g(it)g(is)f(not)h(a)g(substitute)i(for)e(actually)h(reading)0
1546 y(and)d(w)o(orking)h(through)h(the)e(Flick)g(source)i(code.)33
b(Flick)25 b(is)g(comple)o(x)g(b)n(ut)h(not)f(obscure)i(\227)d(don')n
(t)i(be)f(afraid)h(to)e(read)i(the)0 1659 y(code!)p eop
%%Page: 14 14
14 13 bop 0 -165 a FC(14)2571 b Fx(CHAPTER)20 b(1.)51
b(INTR)l(ODUCTION)p eop
%%Page: 15 15
15 14 bop 0 715 a Fw(Chapter)44 b(2)0 1130 y FB(An)52
b(Outline)f(of)h(the)f(Sour)l(ce)g(Code)0 1576 y FC(This)25
b(chapter)j(describes)g(the)e(o)o(v)o(erall)g(or)n(ganization)j(of)d
(Flick')-5 b(s)26 b(source)h(code)g(and)f(pro)o(vides)h(some)f
(insights)i(into)e(why)0 1689 y(things)k(are)e(strucutured)k(as)c(the)o
(y)h(are.)43 b(Programmers)29 b(should)h(read)f(this)g(chapter)h
(thoroughly)h(before)f(proceeding)h(to)0 1801 y(later)24
b(parts)h(of)e(the)h(manual.)0 2097 y Ft(2.1)119 b(Flick)31
b(Pr)n(ograms,)d(Files,)i(and)h(Libraries)0 2305 y FC(Flick)c(w)o(orks)
g(in)g(three)h(phases,)h(each)e(implemented)i(as)e(a)f(separate)j
(program:)37 b(the)27 b(front)h(end,)g(the)f(presentation)j(gen-)0
2418 y(erator)l(,)36 b(and)d(the)g(back)g(end.)56 b(These)33
b(steps)h(are)e(illustrated)k(in)c(Figure)h(2.1.)56 b(A)31
b(Flick)i(front)g(end)g(is)g(simply)g(a)f(parser)0 2531
y(that)26 b(translates)i(some)f Fv(I)t(D)t(L)h FC(input)f(into)f(an)f
(intermediate)j(representation)h(called)e(an)g Fv(AO)t(I)h
FC(\(Abstract)e(Object)g(Interf)o(ace,)0 2644 y(`)p Fy(.aoi)p
FC('\))i(\002le.)45 b(Ne)o(xt,)30 b(a)e(presentation)33
b(generator)e(determines)h(ho)n(w)c(the)h(constructs)j(in)d(the)j
Fv(AO)t(I)f FC(\002le)d(\(the)i(parsed)i Fv(I)t(D)t(L)0
2757 y FC(\002le\))26 b(are)h(to)f(be)g(mapped)i(onto)f(type)g(and)g
(function)i(de\002nitions)f(in)f(the)f(C)f(or)i(C++)f(programming)i
(language.)40 b(In)26 b(other)0 2870 y(w)o(ords,)21 b(the)g
(presentation)i(generator)g(determines)f(ho)n(w)e(the)h(generated)h
(stubs)g(will)e(appear)h(\227)f(e.g.,)g(the)g(stubs')i(function)0
2983 y(prototypes)30 b(\227)c(and)h(ho)n(w)g(the)o(y)g(will)g(interact)
i(with)d(user)i(code)g(\227)e(e.g.,)h(the)g(stubs')h(parameter)h
(passing)g(con)l(v)o(entions.)0 3096 y(This)h(information)i(about)f
(the)f(stubs)h(is)f(written)h(into)f(a)i Fv(P)t(R)t(E)t(S)p
2047 3096 28 4 v 39 w(C)g FC(\(Presentation)g(in)e(C/C++,)h(`)p
Fy(.prc)p FC('\))e(\002le.)47 b(The)29 b(\002nal)0 3208
y(phase)c(of)g(compilation,)h(the)f(back)g(end,)g(reads)g(a)h
Fv(P)t(R)t(E)t(S)p 1791 3208 V 39 w(C)g FC(\002le)d(and)i(one)g(or)f
(more)i Fv(S)t(C)t(M)t(L)i FC(\(Source)d(Code)f(Markup)h(Lan-)0
3321 y(guage\))32 b(\002les,)g(and)f(from)g(those)g(descriptions)j
(produces)f(the)e(C)f(or)g(C++)g(code)i(for)e(the)h(optimized)i(stubs,)
g(written)e(to)0 3434 y(use)26 b(a)f(particular)j(transport)g(system)f
(\(e.g.,)h Fv(T)t(C)t(P)r FC(\))e(and)h(message)f(format.)36
b(A)25 b Fy(Makefile)d FC(is)k(generally)i(used)e(to)g(run)g(the)0
3547 y(desired)f(Flick)f(compiler)h(programs)g(in)e(series.)1528
3514 y Fr(1)141 3661 y FC(Flick)e(has)f(multiple)i(implementations)h
(of)e(each)g(of)f(the)h(three)g(phases)h(described)h(abo)o(v)o(e.)28
b(There)20 b(are)h(three)g(separate)0 3773 y(front)26
b(ends:)34 b(one)25 b(to)g(parse)k Fv(C)t(O)t(R)t(B)r(A)f(I)t(D)t(L)g
FC(\002les,)d(one)h(to)f(parse)j Fv(O)t(N)t(C)g(R)t(P)t(C)g
FC(\(Sun\))f Fv(I)t(D)t(L)h FC(\002les,)d(and)h(one)g(to)f(parse)j
Fv(M)t(I)t(G)h(I)t(D)t(L)0 3886 y FC(\002les.)51 b(There)31
b(are)h(\002)n(v)o(e)e(dif)n(ferent)j(presentation)h(generators,)i
(implementing)d(the)g Fv(C)t(O)t(R)t(B)r(A)f FC(\(C)e(and)i(C++\),)i
Fv(O)t(N)t(C)g(R)t(P)t(C)r FC(,)2 3999 y Fv(M)t(I)t(G)r
FC(,)24 b(and)g(Fluk)o(e)560 3966 y Fr(2)621 3999 y FC(mappings)i(of)f
Fv(I)t(D)t(L)i FC(constructs)f(onto)f(C)e(or)g(C++.)29
b(Finally)-6 b(,)24 b(there)h(are)f(se)n(v)o(en)g(separate)i(back)e
(ends)h(for)0 4112 y(producing)g(stubs)e(that)f(use)j
Fv(I)t(I)t(O)t(P)g FC(\(C)c(and)i(C++\),)h Fv(O)t(N)t(C)t
FC(/)t Fv(T)t(C)t(P)r FC(,)f(Mach)g(messages,)g(T)m(rapeze,)2895
4079 y Fr(3)2955 4112 y FC(Khazana-style)j(messages,)3861
4079 y Fr(4)0 4225 y FC(and)e(Fluk)o(e)i Fv(I)t(P)t(C)r
FC(.)141 4339 y(As)20 b(sho)n(wn)h(in)f(Figure)h(2.1,)g(the)g(separate)
i(programs)f(communicate)g(through)h(intermediate)i Fv(AO)t(I)d
FC(and)i Fv(P)t(R)t(E)t(S)p 3623 4339 V 39 w(C)e FC(\002les.)0
4451 y(\(An)f Fv(AO)t(I)g FC(\002le)d(also)i(contains)j
Fv(M)t(E)t(T)m(A)f FC(data;)g(a)e Fv(P)t(R)t(E)t(S)p
1621 4451 V 40 w(C)g FC(\002le)e(also)i(contains)j Fv(M)t(E)t(T)m(A)r
FC(,)g Fv(M)t(I)t(N)t(T)r FC(,)e(and)g Fv(C)t(A)t(S)t(T)h
FC(data.)3392 4418 y Fr(5)3431 4451 y FC(\))27 b(This)19
b(means)p 0 4515 1560 4 v 105 4571 a Fq(1)134 4602 y
Fp(At)24 b(one)g(time,)h(the)f Fo(flick-)t(c-)t(pdl)i
Fp(program)f(could)g(act)f(as)g(a)g(dri)n(v)o(er)g(for)f(the)h(other)h
(stages)f(of)g(Flick.)37 b(That)24 b(program,)i(ho)n(we)n(v)o(er)m(,)g
(is)d(v)o(ery)0 4694 y(much)d(of)f(of)g(date)g(as)g(of)g(this)f
(writing.)23 b(See)18 b(the)h Fo(c/pdl)h Fp(directory)g(for)e(sources.)
105 4755 y Fq(2)134 4787 y Fp(Fluk)o(e)g(is)f(the)g(operating)h(system)
g(being)g(de)n(v)o(eloped)h(by)f(the)f(Flux)g(Project)f(at)h(the)h(Uni)
n(v)o(ersity)f(of)g(Utah.)23 b(Flick)16 b(produces)j(all)e(of)g(the)g
(stub)h(code)0 4878 y(for)h(Fluk)o(e.)k(F)o(or)18 b(more)i
(information,)f(refer)g(to)f Fo(http://www.cs.utah.edu/flux/)q
Fp(.)105 4939 y Fq(3)134 4971 y Fp(T)m(rapeze)28 b(is)e(the)h(f)o(ast)f
(Myrinet-based)i(netw)o(orking)g(system)f(from)g(Duk)o(e)h(Uni)n(v)o
(ersity)-5 b(.)46 b(F)o(or)26 b(more)h(information,)i(see)e
Fo(http://www.cs.)0 5062 y(duke.edu/ari/trapeze/)p Fp(.)105
5124 y Fq(4)134 5156 y Fp(Khazana)g(is)e(distrib)o(uted)g(global)h
(memory)g(service)g(in)f(de)n(v)o(elopment)i(at)e(the)g(Uni)n(v)o
(ersity)h(of)f(Utah.)42 b(F)o(or)25 b(more)g(information,)i(see)f
Fo(http:)0 5247 y(//www.cs.utah.edu/flux/)p Fp(.)105
5308 y Fq(5)134 5340 y Fp(As)19 b(of)g(this)g(writing,)f(a)j
Fn(P)t(R)t(E)t(S)p 912 5340 23 4 v 29 w(C)g Fp(\002le)d(also)h
(contains)i Fn(A)q(O)t(I)r Fp(,)d(for)h(the)g(bene\002t)g(of)g(the)i
Fn(O)t(N)t(C)t Fp(/)t Fn(T)t(C)t(P)d Fp(back)i(end.)j(This)c(is)f(a)h
(b)o(ug,)g(not)g(a)g(feature.)1905 5568 y FC(15)p eop
%%Page: 16 16
16 15 bop 0 -165 a FC(16)1716 b Fx(CHAPTER)20 b(2.)51
b(AN)22 b(OUTLINE)f(OF)h(THE)f(SOURCE)g(CODE)0 4991 y
@beginspecial 0 @llx 0 @lly 561 @urx 713 @ury 4680 @rwi
@setspecial
%%BeginDocument: flick.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: /home/css/eeide/csl/mom/rel/mom/doc/guts/flick.fig
%%Creator: fig2dev Version 3.2 Patchlevel 0-beta3
%%CreationDate: Mon Nov 15 16:17:58 1999
%%For: eeide@ioka.cs.utah.edu (Eric Eide,4560 MEB,585-5512,272-2284)
%%Orientation: Portrait
%%BoundingBox: 0 0 561 713
%%Pages: 0
%%BeginSetup
%%EndSetup
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
-35.0 748.0 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y tr xrad yrad sc 0 0 1 startangle endangle arc
	closepath
	savematrix setmatrix
	} def

/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def
%%EndProlog

$F2psBegin
10 setmiterlimit
n -1000 13464 m -1000 -1000 l 10922 -1000 l 10922 13464 l cp clip
 0.06000 0.06000 sc
/Times-Bold ff 210.00 scf sf
675 4425 m
gs 1 -1 sc (Language Specific) col0 sh gr
/Times-Bold ff 210.00 scf sf
675 7875 m
gs 1 -1 sc (Transport/Implementation Specific) col0 sh gr
/Times-Bold ff 210.00 scf sf
675 4075 m
gs 1 -1 sc (Language Independent) col0 sh gr
% Polyline
15.000 slw
gs  clippath
1626 9870 m 1746 9900 l 1626 9930 l 1830 9930 l 1830 9870 l cp
clip
n 1350 9900 m 1800 9900 l gs col0 s gr gr

% arrowhead
n 1626 9870 m 1746 9900 l 1626 9930 l  col0 s
/Times-Bold ff 210.00 scf sf
675 7525 m
gs 1 -1 sc (Transport Independent) col0 sh gr
% Polyline
7.500 slw
n 780 5175 m 675 5175 675 6720 105 arcto 4 {pop} repeat
  675 6825 9795 6825 105 arcto 4 {pop} repeat
  9900 6825 9900 5280 105 arcto 4 {pop} repeat
  9900 5175 780 5175 105 arcto 4 {pop} repeat
 cp gs 0.00 setgray ef gr gs col0 s gr 
% Polyline
n 1980 8625 m 1875 8625 1875 11220 105 arcto 4 {pop} repeat
  1875 11325 9795 11325 105 arcto 4 {pop} repeat
  9900 11325 9900 8730 105 arcto 4 {pop} repeat
  9900 8625 1980 8625 105 arcto 4 {pop} repeat
 cp gs 0.00 setgray ef gr gs col0 s gr 
% Polyline
n 780 1725 m 675 1725 675 3270 105 arcto 4 {pop} repeat
  675 3375 9795 3375 105 arcto 4 {pop} repeat
  9900 3375 9900 1830 105 arcto 4 {pop} repeat
  9900 1725 780 1725 105 arcto 4 {pop} repeat
 cp gs 0.00 setgray ef gr gs col0 s gr 
% Polyline
n 705 5100 m 600 5100 600 6645 105 arcto 4 {pop} repeat
  600 6750 9720 6750 105 arcto 4 {pop} repeat
  9825 6750 9825 5205 105 arcto 4 {pop} repeat
  9825 5100 705 5100 105 arcto 4 {pop} repeat
 cp gs col14 1.00 shd ef gr gs col0 s gr 
% Polyline
n 705 1650 m 600 1650 600 3195 105 arcto 4 {pop} repeat
  600 3300 9720 3300 105 arcto 4 {pop} repeat
  9825 3300 9825 1755 105 arcto 4 {pop} repeat
  9825 1650 705 1650 105 arcto 4 {pop} repeat
 cp gs col14 1.00 shd ef gr gs col0 s gr 
% Polyline
n 1905 8550 m 1800 8550 1800 11145 105 arcto 4 {pop} repeat
  1800 11250 9720 11250 105 arcto 4 {pop} repeat
  9825 11250 9825 8655 105 arcto 4 {pop} repeat
  9825 8550 1905 8550 105 arcto 4 {pop} repeat
 cp gs col14 1.00 shd ef gr gs col0 s gr 
% Polyline
0.000 slw
n 8205 2325 m 8100 2325 8100 6495 105 arcto 4 {pop} repeat
  8100 6600 9495 6600 105 arcto 4 {pop} repeat
  9600 6600 9600 2430 105 arcto 4 {pop} repeat
  9600 2325 8205 2325 105 arcto 4 {pop} repeat
 cp gs col12 1.00 shd ef gr 
% Polyline
7.500 slw
n 8130 2250 m 8025 2250 8025 6420 105 arcto 4 {pop} repeat
  8025 6525 9420 6525 105 arcto 4 {pop} repeat
  9525 6525 9525 2355 105 arcto 4 {pop} repeat
  9525 2250 8130 2250 105 arcto 4 {pop} repeat
 cp gs col7 1.00 shd ef gr gs col0 s gr 
% Polyline
0.000 slw
n 9531 4890 m 9600 4890 l 9600 5108 l 9531 5108 l cp gs 0.00 setgray ef gr 
% Polyline
7.500 slw
n 8000 3510 m 8100 3510 l 8100 5010 l 8000 5010 l cp gs col7 1.00 shd ef gr gs col7 s gr 
% Polyline
0.000 slw
n 9525 3293 m 9600 3293 l 9600 3375 l 9525 3375 l cp gs 0.00 setgray ef gr 
% Polyline
7.500 slw
n 9500 3385 m 9625 3385 l 9625 4885 l 9500 4885 l cp gs col7 1.00 shd ef gr gs col7 s gr 
% Polyline
15.000 slw
 [60] 0 sd
n 675 4200 m 9900 4200 l gs col-1 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 675 7650 m 9900 7650 l gs col-1 s gr  [] 0 sd
% Polyline
0.000 slw
n 3255 10275 m 3150 10275 3150 10995 105 arcto 4 {pop} repeat
  3150 11100 4545 11100 105 arcto 4 {pop} repeat
  4650 11100 4650 10380 105 arcto 4 {pop} repeat
  4650 10275 3255 10275 105 arcto 4 {pop} repeat
 cp gs col12 1.00 shd ef gr 
% Polyline
n 1005 5775 m 900 5775 900 6495 105 arcto 4 {pop} repeat
  900 6600 2295 6600 105 arcto 4 {pop} repeat
  2400 6600 2400 5880 105 arcto 4 {pop} repeat
  2400 5775 1005 5775 105 arcto 4 {pop} repeat
 cp gs col12 1.00 shd ef gr 
% Polyline
n 4605 2325 m 4500 2325 4500 3045 105 arcto 4 {pop} repeat
  4500 3150 5895 3150 105 arcto 4 {pop} repeat
  6000 3150 6000 2430 105 arcto 4 {pop} repeat
  6000 2325 4605 2325 105 arcto 4 {pop} repeat
 cp gs col12 1.00 shd ef gr 
% Polyline
n 2805 5775 m 2700 5775 2700 6495 105 arcto 4 {pop} repeat
  2700 6600 4095 6600 105 arcto 4 {pop} repeat
  4200 6600 4200 5880 105 arcto 4 {pop} repeat
  4200 5775 2805 5775 105 arcto 4 {pop} repeat
 cp gs col12 1.00 shd ef gr 
% Polyline
n 1005 2325 m 900 2325 900 3045 105 arcto 4 {pop} repeat
  900 3150 2295 3150 105 arcto 4 {pop} repeat
  2400 3150 2400 2430 105 arcto 4 {pop} repeat
  2400 2325 1005 2325 105 arcto 4 {pop} repeat
 cp gs col12 1.00 shd ef gr 
% Polyline
n 4605 5775 m 4500 5775 4500 6495 105 arcto 4 {pop} repeat
  4500 6600 5895 6600 105 arcto 4 {pop} repeat
  6000 6600 6000 5880 105 arcto 4 {pop} repeat
  6000 5775 4605 5775 105 arcto 4 {pop} repeat
 cp gs col12 1.00 shd ef gr 
% Polyline
n 6405 5775 m 6300 5775 6300 6495 105 arcto 4 {pop} repeat
  6300 6600 7695 6600 105 arcto 4 {pop} repeat
  7800 6600 7800 5880 105 arcto 4 {pop} repeat
  7800 5775 6405 5775 105 arcto 4 {pop} repeat
 cp gs col12 1.00 shd ef gr 
% Polyline
n 2355 9225 m 2250 9225 2250 9945 105 arcto 4 {pop} repeat
  2250 10050 3645 10050 105 arcto 4 {pop} repeat
  3750 10050 3750 9330 105 arcto 4 {pop} repeat
  3750 9225 2355 9225 105 arcto 4 {pop} repeat
 cp gs col12 1.00 shd ef gr 
% Polyline
n 4230 9225 m 4125 9225 4125 9945 105 arcto 4 {pop} repeat
  4125 10050 5520 10050 105 arcto 4 {pop} repeat
  5625 10050 5625 9330 105 arcto 4 {pop} repeat
  5625 9225 4230 9225 105 arcto 4 {pop} repeat
 cp gs col12 1.00 shd ef gr 
% Polyline
n 6180 9225 m 6075 9225 6075 9945 105 arcto 4 {pop} repeat
  6075 10050 7470 10050 105 arcto 4 {pop} repeat
  7575 10050 7575 9330 105 arcto 4 {pop} repeat
  7575 9225 6180 9225 105 arcto 4 {pop} repeat
 cp gs col12 1.00 shd ef gr 
% Polyline
n 8055 9225 m 7950 9225 7950 9945 105 arcto 4 {pop} repeat
  7950 10050 9345 10050 105 arcto 4 {pop} repeat
  9450 10050 9450 9330 105 arcto 4 {pop} repeat
  9450 9225 8055 9225 105 arcto 4 {pop} repeat
 cp gs col12 1.00 shd ef gr 
% Polyline
n 7080 10275 m 6975 10275 6975 10995 105 arcto 4 {pop} repeat
  6975 11100 8370 11100 105 arcto 4 {pop} repeat
  8475 11100 8475 10380 105 arcto 4 {pop} repeat
  8475 10275 7080 10275 105 arcto 4 {pop} repeat
 cp gs col12 1.00 shd ef gr 
% Polyline
n 5130 10275 m 5025 10275 5025 10995 105 arcto 4 {pop} repeat
  5025 11100 6420 11100 105 arcto 4 {pop} repeat
  6525 11100 6525 10380 105 arcto 4 {pop} repeat
  6525 10275 5130 10275 105 arcto 4 {pop} repeat
 cp gs col12 1.00 shd ef gr 
% Polyline
7.500 slw
n 2280 9150 m 2175 9150 2175 9870 105 arcto 4 {pop} repeat
  2175 9975 3570 9975 105 arcto 4 {pop} repeat
  3675 9975 3675 9255 105 arcto 4 {pop} repeat
  3675 9150 2280 9150 105 arcto 4 {pop} repeat
 cp gs col7 1.00 shd ef gr gs col0 s gr 
% Polyline
n 7980 9150 m 7875 9150 7875 9870 105 arcto 4 {pop} repeat
  7875 9975 9270 9975 105 arcto 4 {pop} repeat
  9375 9975 9375 9255 105 arcto 4 {pop} repeat
  9375 9150 7980 9150 105 arcto 4 {pop} repeat
 cp gs col7 1.00 shd ef gr gs col0 s gr 
% Polyline
n 4530 2250 m 4425 2250 4425 2970 105 arcto 4 {pop} repeat
  4425 3075 5820 3075 105 arcto 4 {pop} repeat
  5925 3075 5925 2355 105 arcto 4 {pop} repeat
  5925 2250 4530 2250 105 arcto 4 {pop} repeat
 cp gs col7 1.00 shd ef gr gs col0 s gr 
% Polyline
n 4530 5700 m 4425 5700 4425 6420 105 arcto 4 {pop} repeat
  4425 6525 5820 6525 105 arcto 4 {pop} repeat
  5925 6525 5925 5805 105 arcto 4 {pop} repeat
  5925 5700 4530 5700 105 arcto 4 {pop} repeat
 cp gs col7 1.00 shd ef gr gs col0 s gr 
% Polyline
n 930 2250 m 825 2250 825 2970 105 arcto 4 {pop} repeat
  825 3075 2220 3075 105 arcto 4 {pop} repeat
  2325 3075 2325 2355 105 arcto 4 {pop} repeat
  2325 2250 930 2250 105 arcto 4 {pop} repeat
 cp gs col7 1.00 shd ef gr gs col0 s gr 
% Polyline
n 7005 10200 m 6900 10200 6900 10920 105 arcto 4 {pop} repeat
  6900 11025 8295 11025 105 arcto 4 {pop} repeat
  8400 11025 8400 10305 105 arcto 4 {pop} repeat
  8400 10200 7005 10200 105 arcto 4 {pop} repeat
 cp gs col7 1.00 shd ef gr gs col0 s gr 
% Polyline
n 3180 10200 m 3075 10200 3075 10920 105 arcto 4 {pop} repeat
  3075 11025 4470 11025 105 arcto 4 {pop} repeat
  4575 11025 4575 10305 105 arcto 4 {pop} repeat
  4575 10200 3180 10200 105 arcto 4 {pop} repeat
 cp gs col7 1.00 shd ef gr gs col0 s gr 
% Polyline
n 2730 5700 m 2625 5700 2625 6420 105 arcto 4 {pop} repeat
  2625 6525 4020 6525 105 arcto 4 {pop} repeat
  4125 6525 4125 5805 105 arcto 4 {pop} repeat
  4125 5700 2730 5700 105 arcto 4 {pop} repeat
 cp gs col7 1.00 shd ef gr gs col0 s gr 
% Polyline
n 5055 10200 m 4950 10200 4950 10920 105 arcto 4 {pop} repeat
  4950 11025 6345 11025 105 arcto 4 {pop} repeat
  6450 11025 6450 10305 105 arcto 4 {pop} repeat
  6450 10200 5055 10200 105 arcto 4 {pop} repeat
 cp gs col7 1.00 shd ef gr gs col0 s gr 
% Polyline
n 4155 9150 m 4050 9150 4050 9870 105 arcto 4 {pop} repeat
  4050 9975 5445 9975 105 arcto 4 {pop} repeat
  5550 9975 5550 9255 105 arcto 4 {pop} repeat
  5550 9150 4155 9150 105 arcto 4 {pop} repeat
 cp gs col7 1.00 shd ef gr gs col0 s gr 
% Polyline
n 6105 9150 m 6000 9150 6000 9870 105 arcto 4 {pop} repeat
  6000 9975 7395 9975 105 arcto 4 {pop} repeat
  7500 9975 7500 9255 105 arcto 4 {pop} repeat
  7500 9150 6105 9150 105 arcto 4 {pop} repeat
 cp gs col7 1.00 shd ef gr gs col0 s gr 
% Polyline
n 930 5700 m 825 5700 825 6420 105 arcto 4 {pop} repeat
  825 6525 2220 6525 105 arcto 4 {pop} repeat
  2325 6525 2325 5805 105 arcto 4 {pop} repeat
  2325 5700 930 5700 105 arcto 4 {pop} repeat
 cp gs col7 1.00 shd ef gr gs col0 s gr 
% Polyline
n 6330 5700 m 6225 5700 6225 6420 105 arcto 4 {pop} repeat
  6225 6525 7620 6525 105 arcto 4 {pop} repeat
  7725 6525 7725 5805 105 arcto 4 {pop} repeat
  7725 5700 6330 5700 105 arcto 4 {pop} repeat
 cp gs col7 1.00 shd ef gr gs col0 s gr 
15.000 slw
% Ellipse
n 5250 900 1050 300 0 360 DrawEllipse gs col8 1.00 shd ef gr gs col-1 s gr

% Ellipse
n 7950 900 1050 300 0 360 DrawEllipse gs col8 1.00 shd ef gr gs col-1 s gr

% Ellipse
n 5250 4200 1050 300 0 360 DrawEllipse gs col3 1.00 shd ef gr gs col-1 s gr

% Ellipse
n 5250 7650 1050 300 0 360 DrawEllipse gs col3 1.00 shd ef gr gs col-1 s gr

% Ellipse
n 2550 900 1050 300 0 360 DrawEllipse gs col8 1.00 shd ef gr gs col-1 s gr

% Ellipse
n 5250 12150 1050 300 0 360 DrawEllipse gs col4 1.00 shd ef gr gs col-1 s gr

% Rotated Ellipse
gs
1050 9900 tr
-90.000 rot
n 0 0 1050 300 0 360 DrawEllipse 90.000 rot
gs col23 1.00 shd ef gr gs col-1 s gr
gr

/Helvetica-Bold ff 210.00 scf sf
5250 4275 m
gs 1 -1 sc (AOI File) dup sw pop 2 div neg 0 rm  col-1 sh gr
% Polyline
gs  clippath
5280 3726 m 5250 3846 l 5220 3726 l 5220 3930 l 5280 3930 l cp
clip
n 5250 3300 m 5250 3900 l gs col0 s gr gr

% arrowhead
n 5280 3726 m 5250 3846 l 5220 3726 l  col0 s
/Helvetica-Bold ff 210.00 scf sf
5700 10675 m
gs 1 -1 sc (Khazana) dup sw pop 2 div neg 0 rm  col-1 sh gr
/Helvetica-Bold ff 210.00 scf sf
7650 10675 m
gs 1 -1 sc (Trapeze) dup sw pop 2 div neg 0 rm  col-1 sh gr
/Helvetica-Bold ff 210.00 scf sf
8625 9750 m
gs 1 -1 sc (IPC) dup sw pop 2 div neg 0 rm  col-1 sh gr
/Times-Bold ff 360.00 scf sf
675 2025 m
gs 1 -1 sc (Front End) col-1 sh gr
/Helvetica-Bold ff 210.00 scf sf
5250 7725 m
gs 1 -1 sc (PRES_C File) dup sw pop 2 div neg 0 rm  col-1 sh gr
% Polyline
gs  clippath
5280 7176 m 5250 7296 l 5220 7176 l 5220 7380 l 5280 7380 l cp
clip
n 5250 6750 m 5250 7350 l gs col0 s gr gr

% arrowhead
n 5280 7176 m 5250 7296 l 5220 7176 l  col0 s
% Polyline
gs  clippath
5280 8376 m 5250 8496 l 5220 8376 l 5220 8580 l 5280 8580 l cp
clip
n 5250 7950 m 5250 8550 l gs col0 s gr gr

% arrowhead
n 5280 8376 m 5250 8496 l 5220 8376 l  col0 s
/Helvetica-Bold ff 210.00 scf sf
8625 9525 m
gs 1 -1 sc (Fluke) dup sw pop 2 div neg 0 rm  col-1 sh gr
/Helvetica-Bold ff 210.00 scf sf
6750 9750 m
gs 1 -1 sc (TCP/IP) dup sw pop 2 div neg 0 rm  col-1 sh gr
/Helvetica-Bold ff 210.00 scf sf
6750 9525 m
gs 1 -1 sc (ONC RPC) dup sw pop 2 div neg 0 rm  col-1 sh gr
% Arc
gs  clippath
5388 2140 m 5286 2209 l 5344 2100 l 5208 2252 l 5252 2292 l cp
clip
n 4800.0 1725.0 691.5 -49.4 49.4 arc
gs col-1 s gr
 gr

% arrowhead
n 5388 2140 m 5286 2209 l 5344 2100 l  col-1 s
/Helvetica-Bold ff 210.00 scf sf
2550 975 m
gs 1 -1 sc (CORBA IDL File) dup sw pop 2 div neg 0 rm  col7 sh gr
% Arc
gs  clippath
2409 2173 m 2293 2218 l 2374 2124 l 2208 2243 l 2243 2292 l cp
clip
n 1875.0 1575.0 772.2 -29.1 60.9 arc
gs col-1 s gr
 gr

% arrowhead
n 2409 2173 m 2293 2218 l 2374 2124 l  col-1 s
/Helvetica-Bold ff 210.00 scf sf
5250 12225 m
gs 1 -1 sc (.c/.cc, .h Files) dup sw pop 2 div neg 0 rm  col7 sh gr
% Polyline
gs  clippath
5280 11676 m 5250 11796 l 5220 11676 l 5220 11880 l 5280 11880 l cp
clip
n 5250 11280 m 5250 11850 l gs col0 s gr gr

% arrowhead
n 5280 11676 m 5250 11796 l 5220 11676 l  col0 s
% Arc
gs  clippath
8453 2082 m 8407 2196 l 8394 2074 l 8366 2276 l 8426 2284 l cp
clip
n 7382.7 2021.4 1042.7 -52.0 12.7 arc
gs col-1 s gr
 gr

% arrowhead
n 8453 2082 m 8407 2196 l 8394 2074 l  col-1 s
/Helvetica-Bold ff 210.00 scf sf
1125 9900 m
gs 1 -1 sc  90.0 rot (SCML File) dup sw pop 2 div neg 0 rm  col7 sh gr
/Helvetica-Bold ff 210.00 scf sf
4800 9525 m
gs 1 -1 sc (CORBA C++) dup sw pop 2 div neg 0 rm  col-1 sh gr
/Helvetica-Bold ff 210.00 scf sf
4800 9750 m
gs 1 -1 sc (IIOP) dup sw pop 2 div neg 0 rm  col-1 sh gr
/Helvetica-Bold ff 210.00 scf sf
2925 9750 m
gs 1 -1 sc (IIOP) dup sw pop 2 div neg 0 rm  col-1 sh gr
/Helvetica-Bold ff 210.00 scf sf
2925 9525 m
gs 1 -1 sc (CORBA C) dup sw pop 2 div neg 0 rm  col-1 sh gr
/Times-Bold ff 360.00 scf sf
675 5475 m
gs 1 -1 sc (Presentation Generator) col-1 sh gr
/Helvetica-Bold ff 210.00 scf sf
6975 6150 m
gs 1 -1 sc (Fluke) dup sw pop 2 div neg 0 rm  col-1 sh gr
/Courier ff 225.00 scf sf
5175 6150 m
gs 1 -1 sc (rpcgen) dup sw pop 2 div neg 0 rm  col-1 sh gr
% Polyline
 [15 30] 30 sd
gs  clippath
8828 5232 m 8782 5346 l 8769 5224 l 8741 5426 l 8801 5434 l cp
clip
n 8775 3150 m 8775 3152 l 8774 3155 l 8773 3162 l 8771 3173 l 8769 3188 l
 8766 3209 l 8762 3234 l 8757 3265 l 8752 3301 l 8746 3343 l
 8739 3389 l 8731 3438 l 8723 3492 l 8715 3548 l 8706 3606 l
 8697 3665 l 8689 3725 l 8680 3784 l 8672 3842 l 8664 3898 l
 8657 3953 l 8650 4004 l 8644 4053 l 8639 4099 l 8634 4141 l
 8630 4179 l 8627 4214 l 8624 4246 l 8623 4273 l 8622 4297 l
 8622 4318 l 8623 4335 l 8625 4350 l 8630 4369 l 8637 4379 l
 8647 4380 l 8660 4373 l 8675 4357 l 8692 4334 l 8711 4304 l
 8732 4270 l 8753 4232 l 8775 4193 l 8797 4154 l 8818 4116 l
 8839 4082 l 8858 4054 l 8875 4032 l 8890 4017 l 8903 4012 l
 8913 4015 l 8920 4028 l 8925 4050 l 8927 4066 l 8928 4085 l
 8928 4107 l 8928 4132 l 8926 4160 l 8924 4193 l 8922 4228 l
 8918 4268 l 8914 4311 l 8909 4358 l 8904 4407 l 8898 4460 l
 8891 4516 l 8884 4575 l 8876 4635 l 8869 4697 l 8861 4759 l
 8852 4823 l 8844 4885 l 8836 4947 l 8828 5006 l 8821 5064 l
 8813 5117 l 8807 5167 l 8801 5213 l 8795 5253 l 8790 5289 l
 8786 5319 l 8783 5344 l 8780 5363 l 8778 5378 l 8775 5400 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 8828 5232 m 8782 5346 l 8769 5224 l  col0 s
% Polyline
45.000 slw
n 7950 4950 m 7953 4952 l 7958 4955 l 7969 4961 l 7985 4969 l 8005 4981 l
 8031 4994 l 8060 5009 l 8091 5025 l 8124 5040 l 8157 5055 l
 8189 5068 l 8221 5080 l 8251 5090 l 8280 5098 l 8307 5104 l
 8334 5108 l 8360 5111 l 8385 5111 l 8411 5109 l 8436 5105 l
 8463 5100 l 8485 5094 l 8509 5087 l 8533 5079 l 8558 5070 l
 8583 5059 l 8610 5048 l 8637 5036 l 8665 5023 l 8694 5009 l
 8723 4995 l 8752 4980 l 8782 4965 l 8813 4950 l 8843 4935 l
 8873 4920 l 8902 4905 l 8931 4891 l 8960 4877 l 8988 4864 l
 9015 4852 l 9042 4841 l 9067 4830 l 9092 4821 l 9116 4813 l
 9140 4806 l 9163 4800 l 9189 4795 l 9214 4791 l 9240 4789 l
 9265 4789 l 9291 4792 l 9318 4796 l 9345 4802 l 9374 4810 l
 9404 4820 l 9436 4832 l 9468 4845 l 9501 4860 l 9534 4875 l
 9565 4891 l 9594 4906 l 9620 4919 l 9640 4931 l 9656 4939 l
 9667 4945 l 9672 4948 l 9675 4950 l gs col0 s gr 
% Polyline
n 7950 3450 m 7953 3452 l 7958 3455 l 7969 3461 l 7985 3469 l 8005 3481 l
 8031 3494 l 8060 3509 l 8091 3525 l 8124 3540 l 8157 3555 l
 8189 3568 l 8221 3580 l 8251 3590 l 8280 3598 l 8307 3604 l
 8334 3608 l 8360 3611 l 8385 3611 l 8411 3609 l 8436 3605 l
 8463 3600 l 8485 3594 l 8509 3587 l 8533 3579 l 8558 3570 l
 8583 3559 l 8610 3548 l 8637 3536 l 8665 3523 l 8694 3509 l
 8723 3495 l 8752 3480 l 8782 3465 l 8813 3450 l 8843 3435 l
 8873 3420 l 8902 3405 l 8931 3391 l 8960 3377 l 8988 3364 l
 9015 3352 l 9042 3341 l 9067 3330 l 9092 3321 l 9116 3313 l
 9140 3306 l 9163 3300 l 9189 3295 l 9214 3291 l 9240 3289 l
 9265 3289 l 9291 3292 l 9318 3296 l 9345 3302 l 9374 3310 l
 9404 3320 l 9436 3332 l 9468 3345 l 9501 3360 l 9534 3375 l
 9565 3391 l 9594 3406 l 9620 3419 l 9640 3431 l 9656 3439 l
 9667 3445 l 9672 3448 l 9675 3450 l gs col0 s gr 
/Helvetica-Bold ff 210.00 scf sf
8775 6150 m
gs 1 -1 sc (MIG) dup sw pop 2 div neg 0 rm  col-1 sh gr
/Helvetica-Bold ff 210.00 scf sf
8775 2700 m
gs 1 -1 sc (MIG) dup sw pop 2 div neg 0 rm  col-1 sh gr
/Helvetica-Bold ff 210.00 scf sf
3375 6075 m
gs 1 -1 sc (CORBA) dup sw pop 2 div neg 0 rm  col-1 sh gr
/Helvetica-Bold ff 210.00 scf sf
3375 6300 m
gs 1 -1 sc (C++) dup sw pop 2 div neg 0 rm  col-1 sh gr
/Helvetica-Bold ff 210.00 scf sf
1575 2700 m
gs 1 -1 sc (CORBA) dup sw pop 2 div neg 0 rm  col-1 sh gr
/Helvetica-Bold ff 210.00 scf sf
1575 6075 m
gs 1 -1 sc (CORBA) dup sw pop 2 div neg 0 rm  col-1 sh gr
/Helvetica-Bold ff 210.00 scf sf
1575 6300 m
gs 1 -1 sc (C) dup sw pop 2 div neg 0 rm  col-1 sh gr
/Helvetica-Bold ff 225.00 scf sf
5175 2700 m
gs 1 -1 sc (ONC RPC) dup sw pop 2 div neg 0 rm  col-1 sh gr
/Helvetica-Bold ff 210.00 scf sf
7950 975 m
gs 1 -1 sc (MIG IDL File) dup sw pop 2 div neg 0 rm  col7 sh gr
/Helvetica-Bold ff 210.00 scf sf
3825 10575 m
gs 1 -1 sc (Mach 3/MIG) dup sw pop 2 div neg 0 rm  col-1 sh gr
/Helvetica-Bold ff 210.00 scf sf
3825 10800 m
gs 1 -1 sc (IPC) dup sw pop 2 div neg 0 rm  col-1 sh gr
/Times-Bold ff 360.00 scf sf
1875 8925 m
gs 1 -1 sc (Back End) col-1 sh gr
/Helvetica-Bold ff 210.00 scf sf
5250 975 m
gs 1 -1 sc (ONC RPC IDL File) dup sw pop 2 div neg 0 rm  col7 sh gr
% Polyline
15.000 slw
gs  clippath
5280 4926 m 5250 5046 l 5220 4926 l 5220 5130 l 5280 5130 l cp
clip
n 5250 4500 m 5250 5100 l gs col0 s gr gr

% arrowhead
n 5280 4926 m 5250 5046 l 5220 4926 l  col0 s
$F2psEnd
rs

%%EndDocument
 @endspecial 1067 5286 a FC(Figure)k(2.1:)k(Ov)o(ervie)n(w)23
b(of)h(the)f(Flick)j Fv(I)t(D)t(L)g FC(Compiler)-5 b(.)p
eop
%%Page: 17 17
17 16 bop 0 -165 a Fx(2.1.)51 b(FLICK)22 b(PR)l(OGRAMS,)e(FILES,)g(AND)
i(LIBRARIES)1815 b FC(17)0 91 y(that)30 b(Flick)f(must)g(be)h(able)g
(to)f(write)g(all)g(of)h(these)g(intermediate)i(languages)g(to)d
(\002les)g(and)h(read)f(them)h(back)g(again.)46 b(T)-7
b(o)0 204 y(f)o(acilitate)27 b(these)e(steps,)g(Flick)g(de\002nes)g
(these)g(intermediate)i(languages)g(in)g Fv(O)t(N)t(C)g(R)t(P)t(C)h(I)t
(D)t(L)g FC(\002les)c(\(`)p Fy(.x)p FC(')g(\002les,)g(contained)0
317 y(in)e(the)h Fy(mom)d FC(directory\).)31 b(When)23
b(Flick)f(is)g(compiled,)i(these)f(\002les)f(are)g(processed)j(by)d
Fy(rpcgen)e FC(to)i(produce)i(the)f(functions)0 430 y(to)g(read)i(and)f
(write)f(Flick')-5 b(s)24 b(intermediate)j(languages)f(to)d(and)h(from)
g(\002les.)141 545 y(Each)32 b(of)f(Flick')-5 b(s)33
b(compilation)h(stages)f(is)e(primarily)i(implemented)h(by)e(one)g(or)f
(more)h(lar)n(ge)h(libraries)h(of)d(C)g(and)0 658 y(C++)c(code.)41
b(Dif)n(ferent)28 b(implementations)j(of)c(an)i Fv(I)t(D)t(L)h
FC(compilation)g(stage)e(are)g(created)h(by)e(specializing)k(library)e
(C++)0 770 y(classes)i(or)e(o)o(v)o(erriding)i(library)f(C)e(functions)
k(to)d(implement)h(ne)n(w)-6 b(,)30 b(tailored)h(beha)n(vior)-5
b(.)47 b(F)o(or)28 b(instance,)33 b(the)e Fv(O)t(N)t(C)h(R)t(P)t(C)0
883 y FC(presentation)j(generator)f(w)o(as)d(created)i(by)e(deri)n
(ving)j(from)d(the)h(base)g(presentation)j(generator)f(C++)d(class,)j
(and)d(then)0 996 y(supplying)e(a)c(small)h(amount)h(of)f(ne)n(w)f
(code)i(to)e(implement)i(the)f(speci\002cs)i(of)d(the)j
Fv(O)t(N)t(C)h(R)t(P)t(C)f FC(language)h(mapping.)37
b(The)0 1109 y(libraries)26 b(that)f(manipulate)h(Flick')-5
b(s)25 b(intermediate)i(languages)g(are)e(described)h(in)f(P)o(art)e
(II)h(of)g(this)h(manual;)h(the)e(libraries)0 1222 y(for)g(indi)n
(vidual)i(compiler)f(stages)g(are)e(described)k(in)c(P)o(art)g(III.)141
1337 y(Before)30 b(mo)o(ving)g(on)f(to)g(the)g(or)n(ganization)k(of)c
(Flick')-5 b(s)30 b(source)g(code,)h(here)f(are)f(some)g(retrospecti)n
(v)o(e)k(thoughts)e(on)0 1450 y(the)24 b(general)h(design)g(and)f
(implementation)j(of)c(Flick:)0 1671 y Fz(Using)g Fy(rpcgen)e
Fz(to)j(Generate)g(Code)e(f)n(or)i(Flick')m(s)f(Intermediate)i(Repr)n
(esentations.)47 b FC(The)30 b(primary)i(reason)g(for)f(us-)227
1784 y(ing)19 b Fy(rpcgen)d FC(in)i(de\002ning)h(Flick')-5
b(s)19 b(intermediate)i(representations)i(w)o(as)17 b(to)i(eliminate)g
(the)g(need)g(for)f(programmers)227 1897 y(to)28 b(write)f(IR)g
(serialization)k(and)d(other)h(I/O)e(code)h(by)g(hand.)42
b(In)27 b(retrospect,)k(this)d(early)h(decision)g(has)f(sa)n(v)o(ed)h
(the)227 2009 y(Flick)20 b(implementors)j(a)c(lot)h(of)g(w)o(ork.)28
b(At)19 b(the)h(same)g(time,)h(ho)n(we)n(v)o(er)l(,)g(it)e(has)i(made)f
(other)h(parts)g(of)f(the)g(w)o(ork)g(more)227 2122 y(dif)n(\002cult.)
29 b(The)22 b(limitations)i(of)e(the)i Fv(O)t(N)t(C)h(R)t(P)t(C)h(I)t
(D)t(L)f FC(forced)e(compromises)h(in)e(the)g(design)h(of)f(the)g(IRs,)
g(e.g.,)f(in)h(the)227 2235 y(representation)28 b(of)c(scopes)i(and)e
(references)j(in)f Fv(AO)t(I)r FC(.)k(Further)l(,)25
b(because)h(the)e Fy(rpcgen)p FC(-produced)h(data)g(types)g(are)227
2348 y(transparent)g(C)c(types,)i(Flick')-5 b(s)23 b(programmers)h
(were)d(tempted)i(to)f(treat)h(them)f(as)g(transparent)j(\227)c(not)h
(abstract)i(\227)227 2461 y(entities.)30 b(At)19 b(man)o(y)h(points)h
(in)g(the)f(code,)h Fy(rpcgen)p FC(-de\002ned)f(structures)j(are)d
(\002lled)g(out)h(\002eld-by-\002eld,)h(rather)f(than)227
2574 y(by)i(calling)i(a)d(separate)j(constructor)h(or)c(initialization)
27 b(function.)k(This)22 b(has)i(made)e(maintenance)k(more)d(dif)n
(\002cult,)227 2687 y(because)29 b(when)d(the)j Fv(O)t(N)t(C)g(R)t(P)t
(C)i(I)t(D)t(L)e FC(de\002nition)f(of)e(a)g(data)h(type)g(is)g
(changed,)h(all)f(the)g(manipulating)i(code)e(must)227
2800 y(be)h(updated)i(as)e(well.)42 b(This)27 b(is)h(not)g(a)g
(consistent)j(problem:)39 b(there)29 b(are)f(man)o(y)g(Flick)g(library)
h(functions)i(to)c(help)227 2913 y(programmers)g(manipulate)g(IRs)d
(data)i(structures)h(as)e(abstract)i(objects.)34 b(It)25
b(w)o(ould)g(ha)n(v)o(e)h(been)g(useful,)g(ho)n(we)n(v)o(er)l(,)227
3026 y(to)e Fu(for)m(ce)g FC(this)g(style)g(of)g(programming)i
(throughout)g(Flick')-5 b(s)25 b(de)n(v)o(elopment.)2670
2993 y Fr(6)0 3220 y Fz(Back)e(Ends.)44 b FC(A)28 b(back)j(end)f(is)g
(responsible)j(for)c(generating)k(code)d(that)h(w)o(orks)f(with)f(a)g
(particular)k(transport)f(system,)227 3333 y(using)23
b(a)f(particular)i(message)g(format)e(and)g(a)g(particular)j(data)d
(encoding)j(format,)d(in)g(conjunction)j(with)d(a)g(certain)227
3446 y(runtime)27 b(library)-6 b(.)37 b(Thus,)26 b(there)h(are)f(at)g
(least)g(four)h(messaging)g(aspects)h(that)e(each)h(back)g(end)f
(decides.)37 b(It)26 b(w)o(ould)227 3559 y(be)e(useful)h(to)e(separate)
j(these)e(aspects)i(in)d(Flick')-5 b(s)24 b(back)h(ends,)f(so)f(that)h
(each)h(could)f(be)g(speci\002ed)h(separately)-6 b(.)3773
3526 y Fr(7)0 3753 y Fz(Mix-and-Match.)46 b FC(In)29
b(principle,)j(Flick')-5 b(s)30 b(design)h(mak)o(es)e(it)g(possible)i
(and)e(straightforw)o(ard)k(to)c(mix)f(dif)n(ferent)j(front)227
3866 y(ends,)40 b(presentation)f(generators,)i(and)c(back)f(ends)h(in)f
(no)o(v)o(el)g(w)o(ays)g(to)g(create)h(a)e(wide)h(v)n(ariety)h(of)f
(stubs.)66 b(In)227 3979 y(practice,)25 b(ho)n(we)n(v)o(er)l(,)f(there)
h(are)f(se)n(v)o(eral)g(signi\002cant)i(barriers)f(to)e(the)h(random)h
(mixing)f(of)g(components:)336 4174 y Fs(\017)46 b FC(Combining)26
b(dif)n(ferent)g(front)e(ends)h(and)g(presentation)i(generators)g(is)d
(dif)n(\002cult)h(because)g(there)g(is)f(often)h(no)427
4287 y(ob)o(vious)h(mapping)g(for)e(constructs)j(of)d(a)g
(\223foreign\224)29 b Fv(I)t(D)t(L)r FC(.)i(F)o(or)23
b(instance,)k(just)d(ho)n(w)g(should)i(a)f Fv(C)t(O)t(R)t(B)r(A)i(I)t
(D)t(L)427 4399 y Fy(exception)22 b FC(be)k(presented)i(by)d(Flick')-5
b(s)28 b Fv(O)t(N)t(C)h(R)t(P)t(C)f FC(presentation)g(generator?)38
b(In)25 b(practice,)j(it)d(seems)h(that)427 4512 y(people)f(don')n(t)g
(really)g(w)o(ant)f(to)f(mix)g(front)i(ends)f(and)g(presentation)j
(generators)g(in)c(an)o(y)h(case.)336 4662 y Fs(\017)46
b FC(Mixing)34 b(presentation)j(generators)f(and)d(back)h(ends)g(is)f
(principally)j(hindered)f(by)e(the)h(need)g(to)f(pro)o(vide)427
4775 y(appropriate)28 b(runtime)d(support)i(to)d(the)h(generated)h
(code.)33 b(F)o(or)23 b(instance,)28 b Fv(C)t(O)t(R)t(B)r(A)e
FC(object)f(references)i(need)427 4888 y(to)19 b(be)f(implemented)i
(atop)f(e)n(v)o(ery)g(a)n(v)n(ailable)i(transport)g(system,)e(and)g
(the)g(Flick)f(de)n(v)o(elopers)j(simply)e(ha)n(v)o(en')n(t)427
5001 y(had)24 b(the)g(time)f(to)h(do)g(the)f(required)j(runtime)f
(programming)g(for)f(all)g(\223mismatched\224)h(cases.)p
0 5069 1560 4 v 105 5125 a Fq(6)134 5156 y Fp(Ob)o(viously)-5
b(,)20 b(we)f(need)h(to)f(implement)g(our)g(o)n(wn,)g(custom)h
(presentation)g(of)h Fn(O)t(N)t(C)h(R)t(P)t(C)f(I)t(D)t(L)f
Fp(for)f(de)n(v)o(eloping)h(Flick)f(itself!)105 5217
y Fq(7)134 5249 y Fp(It)k(w)o(ould)i(probably)g(be)f(a)f(bad)h(idea)g
(to)g(separate)g(these)g(aspects)g(into)f(separate)h(programs.)38
b(Who)24 b(w)o(ould)g(w)o(ant)g(an)i Fn(I)t(D)t(L)e Fp(compiler)g
(imple-)0 5340 y(mented)c(as)f Fm(six)f Fp(separate)i(programs?!)p
eop
%%Page: 18 18
18 17 bop 0 -165 a FC(18)1716 b Fx(CHAPTER)20 b(2.)51
b(AN)22 b(OUTLINE)f(OF)h(THE)f(SOURCE)g(CODE)336 91 y
Fs(\017)46 b FC(Occasionally)-6 b(,)27 b(issues)e(arise)f(between)h
(mismatched)i Fv(I)t(D)t(L)g FC(and)d(back)g(end.)30
b(F)o(or)22 b(instance,)k(ho)n(w)d(can)h(a)f(non-)427
204 y(Mach)f(back)g(end)g(implement)g(a)h Fv(M)t(I)t(G)j(I)t(D)t(L)r
FC(-speci\002ed)e(port)e(right?)30 b(These)22 b(kinds)g(of)g
(con\003icts)g(will)f(increase)427 317 y(in)g(the)h(future)g(as)f
(annotations)k(are)c(attached)i(to)g Fv(I)t(D)t(L)h FC
(speci\002cations,)h(e.g.,)c(quality)i(of)e(service)h(constraints.)227
518 y(Therefore,)i(in)f(practice,)i(Flick)e(de)n(v)o(elopers)i(ha)n(v)o
(e)e(tended)h(to)f(focus)h(on)f(well-de\002ned)h(pairings)h(between)f
(dif)n(fer)n(-)227 631 y(ent)g(Flick)g(components.)0
943 y Ft(2.2)119 b(Or)o(ganization)30 b(of)g(the)g(Sour)n(ce)h(Code)0
1157 y FC(Flick')-5 b(s)24 b(source)h(code)g(is)e(or)n(ganized)j(in)e
(a)f(directory)j(hierarchy)f(as)f(follo)n(ws:)136 1386
y Fs(\017)46 b FC(Library)34 b(header)h(\002les)e(are)g(generally)j
(placed)f(within)e(the)h Fy(mom)e FC(subdirectory)-6
b(.)61 b(This)33 b(includes)j(the)d(`)p Fy(.x)p FC(')f(\002les)227
1499 y(that)e(describe)h(Flick')-5 b(s)30 b(v)n(arious)h(intermediate)g
(data)f(formats)g(as)f(described)j(in)d(Section)h(2.1.)45
b(Header)30 b(\002les)f(for)227 1612 y(libraries)d(that)e(are)g
(speci\002c)g(to)g(C/C++)e(code)j(generation)h(are)e(stored)h(in)e(the)
h Fy(mom/c)e FC(subdirectory)-6 b(.)136 1813 y Fs(\017)46
b FC(The)21 b(source)j(code)e(for)g(libraries)i(and)e(programs)h(that)f
(are)g Fu(speci\002c)i FC(to)d(C/C++)g(code)i(generation)h(is)e(stored)
h(within)227 1926 y(the)h Fy(c)f FC(directory)-6 b(.)336
2127 y Fz(\226)46 b FC(Code)24 b(for)g(the)f(C/C++-speci\002c)i
(libraries)h(is)d(found)i(here,)f(in)f Fy(c/libcast)e
FC(and)j Fy(c/libpres_c)p FC(.)336 2280 y Fz(\226)46
b FC(Code)21 b(for)g(C/C++)g(presentation)j(generation)g(is)d(stored)h
(within)g Fy(c/pfe)p FC(.)j(\(\223)p Fy(pfe)p FC(\224)c(stands)h(for)f
(\223presentation)427 2392 y(front)35 b(end,)-6 b(\224)35
b(which)f(is)f(the)h(old)g(name)f(for)h(what)f(we)f(no)n(w)h(call)h(a)f
(presentation)k(generator)-5 b(.\))61 b(The)32 b(base)427
2505 y(presentation)k(generator)f(library)g(is)d(in)h
Fy(c/pfe/lib)p FC(.)52 b(Other)33 b(subdirectories)k(of)32
b Fy(c/pfe)f FC(contain)j(other)427 2618 y(presentation)27
b(generator)f(libraries)g(or)d(speci\002c)i(presentation)i(generators.)
336 2771 y Fz(\226)46 b FC(Code)27 b(for)f(C/C++)g(back)h(ends)g(is)f
(stored)i(within)e Fy(c/pbe)p FC(.)35 b(\(\223)p Fy(pbe)p
FC(\224)26 b(is)g(an)g(abbre)n(viation)k(for)c(\223presentation)427
2884 y(back)h(end,)-6 b(\224)27 b(which)f(is)g(the)g(old)g(name)g(for)g
(what)g(we)f(no)n(w)g(call)i(a)e(back)i(end.\))36 b(The)26
b(base)h(back)f(end)h(library)427 2997 y(is)k(contained)i(in)d
Fy(c/pbe/lib)p FC(;)i(other)f(subdirectories)k(of)c Fy(c/pbe)d
FC(contain)k(other)g(back)f(end)h(libraries)g(or)427
3110 y(speci\002c)25 b(back)f(ends.)136 3311 y Fs(\017)46
b FC(The)25 b(source)h(code)f(for)g(libraries)i(and)e(programs)i
Fu(not)e(speci\002c)h FC(to)f(C/C++)f(code)h(generation)j(is)d
(generally)i(stored)227 3424 y(within)d(immediate)h(subdirectories)j
(of)23 b(the)h(root.)29 b(F)o(or)23 b(instance:)336 3625
y Fz(\226)46 b FC(The)31 b Fv(AO)t(I)r FC(,)h Fv(M)t(E)t(T)m(A)r
FC(,)h Fv(M)t(I)t(N)t(T)r FC(,)e(and)f(general)g(compiler)h(libraries)g
(are)e(contained)i(in)e(the)h Fy(libaoi)p FC(,)d Fy(libmeta)p
FC(,)427 3738 y Fy(libmint)p FC(,)21 b(and)j Fy(libcompiler)c
FC(directories,)26 b(respecti)n(v)o(ely)-6 b(.)336 3890
y Fz(\226)46 b FC(Front)28 b(ends)g(are)g(stored)h(within)f(the)g
Fy(fe)e FC(directory)-6 b(.)43 b(F)o(or)27 b(e)o(xample,)i
Fy(fe/newcorba)23 b FC(contains)30 b(the)e(source)427
4003 y(for)f(Flick')-5 b(s)29 b Fv(C)t(O)t(R)t(B)r(A)e
FC(front)g(end.)37 b(\(Note)27 b(that)f(the)j Fv(M)t(I)t(G)f
FC(front)f(end)g(is)f(found)i(in)e Fy(fe/mig)p FC(,)e(despite)k(the)f
(f)o(act)427 4116 y(that)d(the)i Fv(M)t(I)t(G)g FC(front)e(end)g(is)g
(speci\002c)g(to)g(the)f(generation)k(of)c(C)g(language)j(stubs.\))141
4345 y(In)33 b(addition,)38 b(there)c(are)g(top-le)n(v)o(el)h
(directories)h(for)e(other)g(major)g(components)i(of)d(the)g(source)i
(code,)i(including)0 4458 y(the)27 b(runtime)g(libraries)i(and)e
(headers)h(\()p Fy(runtime)p FC(\),)d(e)o(xtra)i(support)h(\002les)e
(for)h(certain)h(platforms)g(\()p Fy(support)p FC(\),)c(the)j(Flick)0
4571 y(testing)e(infrastructure)j(\()p Fy(test)p FC(\),)22
b(and)i(documentation)j(\()p Fy(doc)p FC(\).)141 4687
y(Belo)n(w)19 b(is)h(a)f(detailed)j(listing)f(of)f(the)g(major)g
(directories)j(in)d(the)g(Flick)g(source)h(code)g(tree.)28
b(This)19 b(catalog)j(is)e(generated)0 4800 y(automatically)k(by)d(a)g
(script)h(that)g(collects)h(the)e(contents)j(of)d(the)g
Fy(WHAT-)t(IS-)t(THIS)c FC(\002les)k(in)g(the)h(Flick)f(source)i(tree.)
28 b(Some)0 4913 y(of)c(the)g(listed)h(directories)h(\227)d(those)i
(that)f(contain)i(out-of-date)h(or)c(obsolete)j(code)f(\227)e(may)g
(not)h(be)g(included)i(as)e(part)g(of)0 5026 y(general)h(Flick)f
(distrib)n(utions.)195 5227 y Fy(.)1197 b FC(This)22
b(is)g(the)h(root)g(of)g(the)f(source)i(tree)f(for)g(Flick,)f(the)h
(Fle)o(xible,)g(Optimizing)1440 5340 y(IDL)f(Compiler)i(Kit.)p
eop
%%Page: 19 19
19 18 bop 0 -165 a Fx(2.2.)51 b(ORGANIZA)-10 b(TION)20
b(OF)i(THE)f(SOURCE)f(CODE)1949 b FC(19)195 91 y Fy(c)1197
b FC(This)20 b(directory)j(contains)g(all)e(of)f(the)h(Flick)g
(libraries)h(and)g(components)h(that)1440 204 y(are)i(speci\002c)g(to)f
(presentation-)29 b(and)c(code-generation)k(for)c(the)g(C)e(and)i(C++)
1440 317 y(programming)h(languages.)195 472 y Fy(c/libcast)813
b FC(This)38 b(directory)i(contains)g(general-purpose)i(routines)e(for)
e(creating)i(and)1440 585 y(manipulating)27 b(C)22 b(Abstract)j(Syntax)
f(T)m(ree)f(\(CAST\))f(data)i(structures.)195 740 y Fy(c/libcparse)717
b FC(This)28 b(directory)j(contains)g(le)o(x/yacc)f(code)g(to)e(parse)i
(a)e(C)f(source)j(code)g(\002le)1440 853 y(into)c(a)f(C)f(Abstract)j
(Syntax)f(T)m(ree)f(\(CAST\).)e(This)i(isn')n(t)i(currently)h(used)e
(by)1440 966 y(Flick,)d(b)n(ut)h(can)g(be)g(used)g(for)g(testing)h
(CAST)c(code.)195 1121 y Fy(c/libpres_c)717 b FC(This)38
b(directory)i(contains)g(general-purpose)i(routines)e(for)e(creating)i
(and)1440 1234 y(manipulating)27 b(PRES)p 2167 1234 28
4 v 31 w(C)22 b(\(Presentation)k(in)e(C/C++\))f(data)h(structures.)195
1389 y Fy(c/pbe)1005 b FC(This)33 b(directory)j(contains)g(the)e(code)g
(for)g(all)f(back)i(ends)f(that)g(produce)h(C)1440 1502
y(or)25 b(C++)f(code.)34 b(Aside)25 b(from)g(certain)h(data)g
(structure)h(and)f(general)g(support)1440 1615 y(libraries)h
(\(libcast,)f(libcompiler)l(,)h(etc.\),)e(this)g(directory)i(should)g
(contain)f(all)1440 1728 y(code)i(related)g(to)f(the)g(translation)j
(of)d(PRES)p 2881 1728 V 30 w(C)f(\(.prc\))i(\002les)e(to)h(C)f(and)h
(C++)1440 1841 y(source)e(and)f(header)h(\002les.)195
1996 y Fy(c/pbe/fluke)717 b FC(This)20 b(directory)k(contains)e(code)g
(for)f(stub)g(generation)j(using)e(the)f(Fluk)o(e)g(IPC)1440
2109 y(transport)j(mechanism.)29 b(This)21 b(back)h(end)f(produces)j
(stubs)e(that)g(are)f(suitable)1440 2222 y(for)j(use)g(within)g(the)g
(Fluk)o(e)f(k)o(ernel)i(serv)o(er)-5 b(.)195 2377 y Fy(c/pbe/iiop)765
b FC(This)27 b(directory)i(contains)h(code)d(for)h(stub)f(generation)j
(using)f(the)e(CORB)m(A)1440 2490 y(IIOP)22 b(transport)k(mechanism.)
195 2645 y Fy(c/pbe/iiopxx)669 b FC(This)23 b(directory)i(contains)g
(code)f(for)f(stub)h(generation)i(using)e(the)f(T)-8
b(A)j(O)21 b(run-)1440 2758 y(time.)36 b(T)-8 b(A)j(O)23
b(is)j(the)g(real-time,)i(open)f(source)g(CORB)m(A)c(ORB)h(from)i(W)-7
b(ash-)1440 2871 y(ington)25 b(Uni)n(v)o(ersity)g(in)e(St.)28
b(Louis.)195 3026 y Fy(c/pbe/khazana)621 b FC(This)41
b(directory)i(contains)g(code)e(for)g(generating)j(stubs)e(for)f(use)g
(within)1440 3139 y(Khazana.)33 b(Khazana)26 b(is)f(a)f(distrib)n(uted)
k(service)e(e)o(xporting)h(the)e(abstraction)1440 3252
y(of)j(a)f(distrib)n(uted,)32 b(secure,)f(persistent,)g(globally)f
(shared)g(store)e(that)h(appli-)1440 3365 y(cations)e(can)e(use)h(to)f
(store)h(their)g(data.)34 b(See)25 b(http://www)-6 b
(.cs.utah.edu/\003ux/)1440 3478 y(for)24 b(more)f(information.)195
3633 y Fy(c/pbe/lib)813 b FC(This)34 b(directory)i(contains)g(the)f
(base)f(implementation)j(of)d(all)g(Flick)g(back)1440
3746 y(ends)j(that)h(produce)g(C)e(or)g(C++)g(code.)69
b(The)36 b(core)h(of)g(the)g(library)h(is)e(an)1440 3858
y(abstract)j(base)e(class;)44 b(certain)39 b(member)d(functions)j(must)
e(be)g(de\002ned)g(in)1440 3971 y(each)24 b(deri)n(v)o(ed)h(class)f(to)
g(create)h(a)e(complete)i(back)f(end.)195 4126 y Fy(c/pbe/local)717
b FC(This)24 b(directory)i(contains)g(\(incomplete?\))33
b(back-end)26 b(code)f(for)f(generation)1440 4239 y(of)f(a)g(local)h
(transport.)31 b(Intraprocess?)h(Host-local)26 b(ports?)k(Not)22
b(really)j(sure.)1440 4352 y(This)k(code)h(is)e(no)h(longer)i
(maintained,)h(and)d(it)g(hasn')n(t)i(been)e(substantially)1440
4465 y(changed)d(since)e(1995,)g(so)g(it)f(is)h(most)f(certainly)j(out)
e(of)f(date.)195 4620 y Fy(c/pbe/mach3)717 b FC(This)27
b(directory)j(contains)f(back-end)g(code)f(to)f(complete)i(the)f(back)g
(end)f(li-)1440 4733 y(brary)19 b(for)g(the)g(Mach)f(3)g(transport.)30
b(This)18 b(is)g(dif)n(ferent)j(from)d(the)h(Mach3MIG)1440
4846 y(back-end)35 b(code)e(because)h(it)e(does)h(not)f(attempt)h(to)f
(implement)i(the)e(MIG)1440 4959 y(message)g(format.)50
b(This)31 b(code)g(is)g(no)g(longer)h(maintained.)52
b(It)30 b(has)h(se)n(v)o(ere)1440 5072 y(bit-rot)25 b(and)f(almost)g
(certainly)i(does)e(not)g(compile)h(or)e(w)o(ork)h(an)o(y)g(longer)-5
b(.)195 5227 y Fy(c/pbe/mach3mig)573 b FC(This)22 b(directory)j
(contains)g(code)f(to)e(generate)j(Mach)e(3)f(transport)j(stubs)f(that)
1440 5340 y(emulate)h(the)e(MIG)g(message)i(format.)p
eop
%%Page: 20 20
20 19 bop 0 -165 a FC(20)1716 b Fx(CHAPTER)20 b(2.)51
b(AN)22 b(OUTLINE)f(OF)h(THE)f(SOURCE)g(CODE)195 91 y
Fy(c/pbe/mach4)717 b FC(This)20 b(directory)j(contains)g(code)f(to)e
(produce)j(Mach)e(4)f(transport)j(stubs.)29 b(The)1440
204 y(code)24 b(for)g(this)g(back)h(end)f(is)f(incomplete)j(and)e(is)f
(no)h(longer)h(maintained.)195 363 y Fy(c/pbe/sun)813
b FC(This)19 b(directory)i(contains)h(code)d(for)h(stub)f(generation)j
(using)f(the)e(ONC)e(RPC)1440 476 y(\(Sun)23 b(RPC\))f(transport)k
(mechanism.)195 635 y Fy(c/pbe/trapeze)621 b FC(This)29
b(directory)j(contains)f(code)g(for)e(stub)h(generation)i(using)f(the)e
(T)m(rapeze)1440 748 y(transport)d(mechanism.)195 907
y Fy(c/pdl)1005 b FC(This)20 b(directory)i(contains)g(old)f(code)f(for)
h(the)f(Presentation)i(De\002nition)f(Lan-)1440 1020
y(guage)27 b(\(PDL\))e(piece)i(of)f(Flick,)h(which)g(also)f(serv)o(ed)i
(as)e(a)g(top-le)n(v)o(el)i(dri)n(v)o(er)1440 1133 y(program)33
b(for)f(all)g(of)f(the)i(separate)g(Flick)f(programs)h(\(front)g(end,)h
(presen-)1440 1246 y(tation)g(generator)l(,)k(and)c(back)f(end\).)58
b(PDL)31 b(allo)n(wed)j(one)f(to)g(modify)h(a)e(C)1440
1359 y(language)23 b(presentation)i(\(as)c(described)i(by)e(a)g(PRES)p
3143 1359 28 4 v 31 w(C)e(\002le\);)j(ho)n(we)n(v)o(er)l(,)g(the)1440
1471 y(PDL)e(program)k(is)e(old,)h(out)g(of)f(date,)h(and)g(is)f(no)h
(longer)g(maintained.)31 b(Some)1440 1584 y(of)23 b(the)h(code)h(is)e
(deri)n(v)o(ed)i(from)e(Sun')-5 b(s)24 b(`rpcgen')i(source)f(code.)195
1743 y Fy(c/pfe)1005 b FC(This)38 b(directory)j(contains)g(all)d(of)g
(the)h(code)g(\(e)o(xcept)h(for)f(common)g(data)1440
1856 y(structure)20 b(manipulation)h(libraries\))g(for)d(translation)j
(from)d(A)-5 b(OI)17 b(to)h(PRES)p 3822 1856 V 31 w(C.)1440
1969 y(This)28 b(is)f(called)i(the)g(\223presentation)i(generation\224)
h(phase)d(of)e(IDL)g(compila-)1440 2082 y(tion.)195 2241
y Fy(c/pfe/corba)717 b FC(This)19 b(directory)j(contains)g(the)d(code)h
(for)g(Flick')-5 b(s)20 b(CORB)m(A)d(C)h(language)k(pre-)1440
2354 y(sentation)32 b(generator)-5 b(.)48 b(Because)30
b(the)g(CORB)m(A)c(presentation)33 b(style)d(is)f(im-)1440
2467 y(plemented)24 b(as)e(a)g(library)i(\(libcorba\),)h(this)e
(directory)i(is)d(practically)j(empty)-6 b(.)195 2626
y Fy(c/pfe/corbaxx)621 b FC(This)26 b(directory)j(contains)f(the)f
(code)g(for)g(Flick')-5 b(s)27 b(CORB)m(A)c(C++)j(language)1440
2739 y(presentation)g(generator)-5 b(.)31 b(Lik)o(e)22
b(the)h(CORB)m(A)d(C)h(presentation,)26 b(this)d(is)g(also)1440
2852 y(implemented)f(as)d(a)g(library)i(\(libcorbaxx\),)j(so)c(this)g
(directory)i(is)d(practically)1440 2965 y(empty)-6 b(.)195
3123 y Fy(c/pfe/fluke)717 b FC(This)30 b(directory)i(contains)g(the)e
(Fluk)o(e/MOM)g(presentation)k(generator)e(for)1440 3236
y(C)24 b(language)j(stubs.)33 b(The)25 b(Fluk)o(e)g(language)i(mapping)
f(is)f(for)g(the)g(most)g(part)1440 3349 y(lik)o(e)35
b(the)g(CORB)m(A)d(C)i(language)j(mapping,)i(b)n(ut)c(with)g(all)g(the)
g(generated)1440 3462 y(stubs)25 b(and)f(type)g(names)g(changed.)195
3621 y Fy(c/pfe/lib)813 b FC(This)31 b(directory)j(contains)f(a)e
(\223generic\224)j(A)-5 b(OI-to-C)31 b(presentation)j(genera-)1440
3734 y(tor)-5 b(.)52 b(The)30 b(generic)j(mapping)g(is)e(lar)n(gely)i
(b)n(ut)e(not)h(entirely)h(CORB)m(A-lik)o(e;)1440 3847
y(some)g(of)g(the)h(more)f(complicated)i(mapping)g(procedures)h(are)d
(simpli\002ed)1440 3960 y(and)19 b(more)g(`rpcgen'-lik)o(e.)31
b(All)19 b(C)e(and)j(C++)e(language)j(presentation)i(gener)n(-)1440
4073 y(ators)d(\(e)o(xcept)g(the)f(MIG)f(presentation)k(generator)g(in)
d(`fe/mig'\))h(are)f(deri)n(v)o(ed)1440 4186 y(from)h(this)h(generic)h
(presentation)i(generator)e(base)f(class,)h(either)f(directly)h(or)1440
4299 y(indirectly)-6 b(.)195 4458 y Fy(c/pfe/libcorba)573
b FC(This)38 b(directory)i(contains)h(the)d(CORB)m(A-speci\002c)g
(modi\002cations)i(to)e(the)1440 4570 y(\223generic\224)23
b(A)-5 b(OI)20 b(to)h(C)f(language)j(mapping.)29 b(The)21
b(CORB)m(A)d(language)23 b(map-)1440 4683 y(ping)d(is)f(or)n(ganized)i
(as)e(a)g(library)i(so)e(that)g(the)h(Fluk)o(e)f(presentation)k
(generator)1440 4796 y(can)h(be)f(deri)n(v)o(ed)i(from)f(it.)195
4955 y Fy(c/pfe/libcorbaxx)477 b FC(This)31 b(directory)i(contains)f
(the)f(CORB)m(A)d(C++-speci\002c)k(modi\002cations)h(to)1440
5068 y(the)h(\223generic\224)j(A)-5 b(OI)33 b(to)h(C)f(language)k
(mapping.)62 b(It)34 b(is)g(a)g(library)h(so)g(that)1440
5181 y(other)25 b(presentation)i(generators)f(can)e(be)f(deri)n(v)o(ed)
i(from)f(it.)195 5340 y Fy(c/pfe/sun)813 b FC(This)18
b(directory)i(contains)h(the)d(Sun)g(RPC,)e(\223rpcgen\224-lik)o(e)22
b(presentation)f(gen-)p eop
%%Page: 21 21
21 20 bop 0 -165 a Fx(2.2.)51 b(ORGANIZA)-10 b(TION)20
b(OF)i(THE)f(SOURCE)f(CODE)1949 b FC(21)1440 91 y(erator)-5
b(.)29 b(The)21 b(Sun)h(presentation)j(generator)f(is)d(deri)n(v)o(ed)i
(from)f(the)g(\223generic\224)1440 204 y(base)i(class)h(for)e(C)g
(language)j(presentation)h(generators.)195 361 y Fy(doc)1101
b FC(This)23 b(directory)j(contains)g(Flick)e(documentation.)195
519 y Fy(doc/guts)861 b FC(This)18 b(diretcory)j(contains)f(the)f(L)
2437 502 y Fr(A)2472 519 y FC(T)2513 539 y(E)2555 519
y(X)e(sources)k(for)d(the)h(Flick)f(Programmer')-5 b(s)1440
631 y(Manual.)195 789 y Fy(doc/usersguide)573 b FC(This)25
b(diretcory)i(contains)h(the)d(L)2464 772 y Fr(A)2499
789 y FC(T)2540 809 y(E)2583 789 y(X)f(sources)j(for)e(the)g(Flick)h
(User')-5 b(s)25 b(Man-)1440 902 y(ual.)195 1059 y Fy(fe)1149
b FC(This)28 b(directory)i(contains)g(code)f(for)f(Flick')-5
b(s)29 b(front)g(ends,)h(which)e(translate)1440 1172
y(from)k(some)g(IDL)f(\(CORB)m(A)f(IDL,)g(ONC)g(RPC)h(IDL,)f(MIG)h
(IDL,)g(...\))53 b(to)1440 1284 y(A)-5 b(OI.)37 b(Actually)-6
b(,)43 b(the)38 b(MIG)f(front)j(end)e(skips)i(o)o(v)o(er)e(A)-5
b(OI)37 b(and)i(generates)1440 1397 y(PRES)p 1664 1397
28 4 v 31 w(C)22 b(directly)-6 b(.)195 1555 y Fy(fe/corba)861
b FC(This)38 b(directory)i(contains)g(a)d(\223back-end\224)k(for)d(the)
g(Sun')-5 b(s)38 b(CORB)m(A)d(IDL)1440 1667 y(compiler)i(front)f(end)f
(\(which)h(can)g(be)f(obtained)j(from)d(ftp.omg.or)n(g\).)65
b(It)1440 1780 y(translates)39 b(from)d(Sun')-5 b(s)37
b(CORB)m(A)c(AST)h(to)i(A)-5 b(OI.)35 b(The)h(code)h(in)f(this)h(di-)
1440 1893 y(rectory)c(is)d(out)i(of)f(date)g(and)h(is)e(no)h(longer)i
(maintained.)53 b(Flick')-5 b(s)32 b(current)1440 2006
y(CORB)m(A)21 b(front)j(end)g(is)g(in)f(the)h(`ne)n(wcorba')h
(directory)-6 b(.)195 2163 y Fy(fe/mig)957 b FC(This)23
b(directory)i(contains)g(Flick')-5 b(s)23 b(MIG)f(front)i(end)f(and)g
(presentation)j(gen-)1440 2276 y(erator)-5 b(.)29 b(MIG)18
b(contains)k(w)o(ay)e(too)g(much)g(presentation)j(glop)e(to)e(use)h
(the)g(A)-5 b(OI)1440 2389 y(IR,)22 b(so)i(this)g(MIG)e(front)j(end)f
(generates)i(PRES)p 2977 2389 V 31 w(C)c(directly)-6
b(.)195 2546 y Fy(fe/newcorba)717 b FC(This)23 b(directory)i(contains)g
(Flick')-5 b(s)23 b(CORB)m(A)d(IDL)i(front)i(end,)f(which)g(trans-)1440
2659 y(lates)h(CORB)m(A)d(IDL)h(input)j(\002les)e(into)h(A)-5
b(OI.)195 2816 y Fy(fe/sun)957 b FC(This)35 b(directory)i(contains)g
(Flick')-5 b(s)36 b(ONC)d(RPC)g(\(a.k.a.)64 b(Sun)34
b(RPC\))g(IDL)1440 2929 y(front)25 b(end,)f(which)h(translates)i(ONC)22
b(RPC)g(IDL)h(\002les)h(into)g(A)-5 b(OI)23 b(\002les.)30
b(This)1440 3042 y(front)k(end)f(uses)h(the)g(original)h(`rpcgen')g
(code)f(to)f(parse)h(the)f(IDL;)f(Flick-)1440 3155 y(speci\002c)24
b(code)h(then)f(translates)i(the)e(parse)h(tree)f(into)g(A)-5
b(OI)22 b(format.)195 3312 y Fy(flick-)t(2.1)809 b FC(This)22
b(is)g(the)h(root)g(of)g(the)f(source)i(tree)f(for)g(Flick,)f(the)h
(Fle)o(xible,)g(Optimizing)1440 3425 y(IDL)f(Compiler)i(Kit.)195
3582 y Fy(flick-)t(2.1/c)713 b FC(This)20 b(directory)j(contains)g(all)
e(of)f(the)h(Flick)g(libraries)h(and)g(components)h(that)1440
3695 y(are)i(speci\002c)g(to)f(presentation-)29 b(and)c
(code-generation)k(for)c(the)g(C)e(and)i(C++)1440 3808
y(programming)h(languages.)195 3965 y Fy(flick-)t(2.1/c/libcast)329
b FC(This)38 b(directory)i(contains)g(general-purpose)i(routines)e(for)
e(creating)i(and)1440 4078 y(manipulating)27 b(C)22 b(Abstract)j
(Syntax)f(T)m(ree)f(\(CAST\))f(data)i(structures.)195
4235 y Fy(flick-)t(2.1/c/libpres_c)233 b FC(This)38 b(directory)i
(contains)g(general-purpose)i(routines)e(for)e(creating)i(and)1440
4348 y(manipulating)27 b(PRES)p 2167 4348 V 31 w(C)22
b(\(Presentation)k(in)e(C/C++\))f(data)h(structures.)195
4505 y Fy(flick-)t(2.1/c/pbe)521 b FC(This)33 b(directory)j(contains)g
(the)e(code)g(for)g(all)f(back)i(ends)f(that)g(produce)h(C)1440
4618 y(or)25 b(C++)f(code.)34 b(Aside)25 b(from)g(certain)h(data)g
(structure)h(and)f(general)g(support)1440 4731 y(libraries)h
(\(libcast,)f(libcompiler)l(,)h(etc.\),)e(this)g(directory)i(should)g
(contain)f(all)1440 4844 y(code)i(related)g(to)f(the)g(translation)j
(of)d(PRES)p 2881 4844 V 30 w(C)f(\(.prc\))i(\002les)e(to)h(C)f(and)h
(C++)1440 4957 y(source)e(and)f(header)h(\002les.)195
5114 y Fy(flick-)t(2.1/c/pbe/fluke)233 b FC(This)20 b(directory)k
(contains)e(code)g(for)f(stub)g(generation)j(using)e(the)f(Fluk)o(e)g
(IPC)1440 5227 y(transport)j(mechanism.)29 b(This)21
b(back)h(end)f(produces)j(stubs)e(that)g(are)f(suitable)1440
5340 y(for)j(use)g(within)g(the)g(Fluk)o(e)f(k)o(ernel)i(serv)o(er)-5
b(.)p eop
%%Page: 22 22
22 21 bop 0 -165 a FC(22)1716 b Fx(CHAPTER)20 b(2.)51
b(AN)22 b(OUTLINE)f(OF)h(THE)f(SOURCE)g(CODE)195 91 y
Fy(flick-)t(2.1/c/pbe/iiop)281 b FC(This)27 b(directory)i(contains)h
(code)d(for)h(stub)f(generation)j(using)f(the)e(CORB)m(A)1440
204 y(IIOP)22 b(transport)k(mechanism.)195 373 y Fy(flick-)t
(2.1/c/pbe/iiopxx)185 b FC(This)23 b(directory)i(contains)g(code)f(for)
f(stub)h(generation)i(using)e(the)f(T)-8 b(A)j(O)21 b(run-)1440
486 y(time.)36 b(T)-8 b(A)j(O)23 b(is)j(the)g(real-time,)i(open)f
(source)g(CORB)m(A)c(ORB)h(from)i(W)-7 b(ash-)1440 599
y(ington)25 b(Uni)n(v)o(ersity)g(in)e(St.)28 b(Louis.)195
768 y Fy(flick-)t(2.1/c/pbe/khazana)137 b FC(This)41
b(directory)i(contains)g(code)e(for)g(generating)j(stubs)e(for)f(use)g
(within)1440 881 y(Khazana.)33 b(Khazana)26 b(is)f(a)f(distrib)n(uted)k
(service)e(e)o(xporting)h(the)e(abstraction)1440 994
y(of)j(a)f(distrib)n(uted,)32 b(secure,)f(persistent,)g(globally)f
(shared)g(store)e(that)h(appli-)1440 1107 y(cations)e(can)e(use)h(to)f
(store)h(their)g(data.)34 b(See)25 b(http://www)-6 b
(.cs.utah.edu/\003ux/)1440 1220 y(for)24 b(more)f(information.)195
1389 y Fy(flick-)t(2.1/c/pbe/lib)329 b FC(This)34 b(directory)i
(contains)g(the)f(base)f(implementation)j(of)d(all)g(Flick)g(back)1440
1502 y(ends)j(that)h(produce)g(C)e(or)g(C++)g(code.)69
b(The)36 b(core)h(of)g(the)g(library)h(is)e(an)1440 1615
y(abstract)j(base)e(class;)44 b(certain)39 b(member)d(functions)j(must)
e(be)g(de\002ned)g(in)1440 1728 y(each)24 b(deri)n(v)o(ed)h(class)f(to)
g(create)h(a)e(complete)i(back)f(end.)195 1897 y Fy(flick-)t
(2.1/c/pbe/mach3mi)o(g)90 b FC(This)22 b(directory)j(contains)g(code)f
(to)e(generate)j(Mach)e(3)f(transport)j(stubs)f(that)1440
2010 y(emulate)h(the)e(MIG)g(message)i(format.)195 2179
y Fy(flick-)t(2.1/c/pbe/sun)329 b FC(This)19 b(directory)i(contains)h
(code)d(for)h(stub)f(generation)j(using)f(the)e(ONC)e(RPC)1440
2292 y(\(Sun)23 b(RPC\))f(transport)k(mechanism.)195
2462 y Fy(flick-)t(2.1/c/pbe/trapeze)137 b FC(This)29
b(directory)j(contains)f(code)g(for)e(stub)h(generation)i(using)f(the)e
(T)m(rapeze)1440 2574 y(transport)d(mechanism.)195 2744
y Fy(flick-)t(2.1/c/pfe)521 b FC(This)38 b(directory)j(contains)g(all)d
(of)g(the)h(code)g(\(e)o(xcept)h(for)f(common)g(data)1440
2857 y(structure)20 b(manipulation)h(libraries\))g(for)d(translation)j
(from)d(A)-5 b(OI)17 b(to)h(PRES)p 3822 2857 28 4 v 31
w(C.)1440 2969 y(This)28 b(is)f(called)i(the)g(\223presentation)i
(generation\224)h(phase)d(of)e(IDL)g(compila-)1440 3082
y(tion.)195 3252 y Fy(flick-)t(2.1/c/pfe/corba)233 b
FC(This)19 b(directory)j(contains)g(the)d(code)h(for)g(Flick')-5
b(s)20 b(CORB)m(A)d(C)h(language)k(pre-)1440 3365 y(sentation)32
b(generator)-5 b(.)48 b(Because)30 b(the)g(CORB)m(A)c(presentation)33
b(style)d(is)f(im-)1440 3477 y(plemented)24 b(as)e(a)g(library)i
(\(libcorba\),)h(this)e(directory)i(is)d(practically)j(empty)-6
b(.)195 3647 y Fy(flick-)t(2.1/c/pfe/corbaxx)137 b FC(This)26
b(directory)j(contains)f(the)f(code)g(for)g(Flick')-5
b(s)27 b(CORB)m(A)c(C++)j(language)1440 3760 y(presentation)g
(generator)-5 b(.)31 b(Lik)o(e)22 b(the)h(CORB)m(A)d(C)h(presentation,)
26 b(this)d(is)g(also)1440 3872 y(implemented)f(as)d(a)g(library)i
(\(libcorbaxx\),)j(so)c(this)g(directory)i(is)d(practically)1440
3985 y(empty)-6 b(.)195 4155 y Fy(flick-)t(2.1/c/pfe/fluke)233
b FC(This)30 b(directory)i(contains)g(the)e(Fluk)o(e/MOM)g
(presentation)k(generator)e(for)1440 4268 y(C)24 b(language)j(stubs.)33
b(The)25 b(Fluk)o(e)g(language)i(mapping)f(is)f(for)g(the)g(most)g
(part)1440 4380 y(lik)o(e)35 b(the)g(CORB)m(A)d(C)i(language)j
(mapping,)i(b)n(ut)c(with)g(all)g(the)g(generated)1440
4493 y(stubs)25 b(and)f(type)g(names)g(changed.)195 4663
y Fy(flick-)t(2.1/c/pfe/lib)329 b FC(This)31 b(directory)j(contains)f
(a)e(\223generic\224)j(A)-5 b(OI-to-C)31 b(presentation)j(genera-)1440
4775 y(tor)-5 b(.)52 b(The)30 b(generic)j(mapping)g(is)e(lar)n(gely)i
(b)n(ut)e(not)h(entirely)h(CORB)m(A-lik)o(e;)1440 4888
y(some)g(of)g(the)h(more)f(complicated)i(mapping)g(procedures)h(are)d
(simpli\002ed)1440 5001 y(and)19 b(more)g(`rpcgen'-lik)o(e.)31
b(All)19 b(C)e(and)j(C++)e(language)j(presentation)i(gener)n(-)1440
5114 y(ators)d(\(e)o(xcept)g(the)f(MIG)f(presentation)k(generator)g(in)
d(`fe/mig'\))h(are)f(deri)n(v)o(ed)1440 5227 y(from)h(this)h(generic)h
(presentation)i(generator)e(base)f(class,)h(either)f(directly)h(or)1440
5340 y(indirectly)-6 b(.)p eop
%%Page: 23 23
23 22 bop 0 -165 a Fx(2.2.)51 b(ORGANIZA)-10 b(TION)20
b(OF)i(THE)f(SOURCE)f(CODE)1949 b FC(23)195 91 y Fy(flick-)t
(2.1/c/pfe/libcorb)o(a)90 b FC(This)38 b(directory)i(contains)h(the)d
(CORB)m(A-speci\002c)g(modi\002cations)i(to)e(the)1440
204 y(\223generic\224)23 b(A)-5 b(OI)20 b(to)h(C)f(language)j(mapping.)
29 b(The)21 b(CORB)m(A)d(language)23 b(map-)1440 317
y(ping)d(is)f(or)n(ganized)i(as)e(a)g(library)i(so)e(that)g(the)h(Fluk)
o(e)f(presentation)k(generator)1440 430 y(can)h(be)f(deri)n(v)o(ed)i
(from)f(it.)195 595 y Fy(flick-)t(2.1/c/pfe/)195 708
y(libcorbaxx)1440 595 y FC(This)31 b(directory)i(contains)f(the)f(CORB)
m(A)d(C++-speci\002c)k(modi\002cations)h(to)1440 708
y(the)h(\223generic\224)j(A)-5 b(OI)33 b(to)h(C)f(language)k(mapping.)
62 b(It)34 b(is)g(a)g(library)h(so)g(that)1440 821 y(other)25
b(presentation)i(generators)f(can)e(be)f(deri)n(v)o(ed)i(from)f(it.)195
986 y Fy(flick-)t(2.1/c/pfe/sun)329 b FC(This)18 b(directory)i
(contains)h(the)d(Sun)g(RPC,)e(\223rpcgen\224-lik)o(e)22
b(presentation)f(gen-)1440 1099 y(erator)-5 b(.)29 b(The)21
b(Sun)h(presentation)j(generator)f(is)d(deri)n(v)o(ed)i(from)f(the)g
(\223generic\224)1440 1212 y(base)i(class)h(for)e(C)g(language)j
(presentation)h(generators.)195 1377 y Fy(flick-)t(2.1/doc)617
b FC(This)23 b(directory)j(contains)g(Flick)e(documentation.)195
1543 y Fy(flick-)t(2.1/doc/guts)377 b FC(This)18 b(diretcory)j
(contains)f(the)f(L)2437 1526 y Fr(A)2472 1543 y FC(T)2513
1563 y(E)2555 1543 y(X)e(sources)k(for)d(the)h(Flick)f(Programmer')-5
b(s)1440 1655 y(Manual.)195 1821 y Fy(flick-)t(2.1/doc/usersguid)o(e)90
b FC(This)25 b(diretcory)i(contains)h(the)d(L)2464 1804
y Fr(A)2499 1821 y FC(T)2540 1841 y(E)2583 1821 y(X)f(sources)j(for)e
(the)g(Flick)h(User')-5 b(s)25 b(Man-)1440 1934 y(ual.)195
2099 y Fy(flick-)t(2.1/fe)665 b FC(This)28 b(directory)i(contains)g
(code)f(for)f(Flick')-5 b(s)29 b(front)g(ends,)h(which)e(translate)1440
2212 y(from)k(some)g(IDL)f(\(CORB)m(A)f(IDL,)g(ONC)g(RPC)h(IDL,)f(MIG)h
(IDL,)g(...\))53 b(to)1440 2325 y(A)-5 b(OI.)37 b(Actually)-6
b(,)43 b(the)38 b(MIG)f(front)j(end)e(skips)i(o)o(v)o(er)e(A)-5
b(OI)37 b(and)i(generates)1440 2438 y(PRES)p 1664 2438
28 4 v 31 w(C)22 b(directly)-6 b(.)195 2603 y Fy(flick-)t(2.1/fe/mig)
473 b FC(This)23 b(directory)i(contains)g(Flick')-5 b(s)23
b(MIG)f(front)i(end)f(and)g(presentation)j(gen-)1440
2716 y(erator)-5 b(.)29 b(MIG)18 b(contains)k(w)o(ay)e(too)g(much)g
(presentation)j(glop)e(to)e(use)h(the)g(A)-5 b(OI)1440
2829 y(IR,)22 b(so)i(this)g(MIG)e(front)j(end)f(generates)i(PRES)p
2977 2829 V 31 w(C)c(directly)-6 b(.)195 2994 y Fy(flick-)t
(2.1/fe/newcorba)233 b FC(This)23 b(directory)i(contains)g(Flick')-5
b(s)23 b(CORB)m(A)d(IDL)i(front)i(end,)f(which)g(trans-)1440
3107 y(lates)h(CORB)m(A)d(IDL)h(input)j(\002les)e(into)h(A)-5
b(OI.)195 3272 y Fy(flick-)t(2.1/fe/sun)473 b FC(This)35
b(directory)i(contains)g(Flick')-5 b(s)36 b(ONC)d(RPC)g(\(a.k.a.)64
b(Sun)34 b(RPC\))g(IDL)1440 3385 y(front)25 b(end,)f(which)h
(translates)i(ONC)22 b(RPC)g(IDL)h(\002les)h(into)g(A)-5
b(OI)23 b(\002les.)30 b(This)1440 3498 y(front)k(end)f(uses)h(the)g
(original)h(`rpcgen')g(code)f(to)f(parse)h(the)f(IDL;)f(Flick-)1440
3611 y(speci\002c)24 b(code)h(then)f(translates)i(the)e(parse)h(tree)f
(into)g(A)-5 b(OI)22 b(format.)195 3776 y Fy(flick-)t(2.1/libaoi)473
b FC(This)27 b(directory)j(contains)g(data)e(creation)h(and)f
(manipulation)i(routines)g(for)1440 3889 y(the)c(A)-5
b(OI)24 b(data)i(format.)35 b(The)25 b(A)-5 b(OI)25 b(library)i(is)e
(used)h(e)o(xtensi)n(v)o(ely)i(in)d(Flick')-5 b(s)1440
4002 y(front)24 b(ends)h(and)f(presentation)j(generators.)195
4167 y Fy(flick-)t(2.1/libcompiler)233 b FC(This)21 b(directory)i
(contains)f(utility)h(code)e(used)h(throughout)h(Flick,)f(including)
1440 4280 y(error)n(-check)o(ed)36 b(malloc/calloc/realloc)i(routines,)
e(uniform)d(w)o(arning)h(and)1440 4393 y(error)24 b(printing)i
(routines,)f(and)f(some)g(code)g(printing)i(routines.)195
4558 y Fy(flick-)t(2.1/libmeta)425 b FC(This)32 b(directory)j(contains)
g(routines)f(for)f(creating)i(and)d(manipulating)k(the)1440
4671 y(metadata)25 b(within)f(Flick')-5 b(s)24 b(intermediate)i
(\002les.)195 4836 y Fy(flick-)t(2.1/libmint)425 b FC(This)27
b(directory)j(contains)g(data)e(creation)h(and)f(manipulation)i
(routines)g(for)1440 4949 y(the)18 b(MINT)f(data)i(format.)27
b(It)18 b(is)g(used)h(e)o(xtensi)n(v)o(ely)h(throughout)i(presentation)
1440 5062 y(generation)k(and)e(back)h(end)f(code)g(generation.)195
5227 y Fy(flick-)t(2.1/mom)617 b FC(This)25 b(directory)k(contains)e
(the)f(de\002nitions)i(of)e(all)f(of)h(the)g(ONC)e(RPC)f(IDL-)1440
5340 y(speci\002ed)i(intermediate)h(data)f(formats)f(formats)h(used)f
(internally)i(by)e(Flick)p eop
%%Page: 24 24
24 23 bop 0 -165 a FC(24)1716 b Fx(CHAPTER)20 b(2.)51
b(AN)22 b(OUTLINE)f(OF)h(THE)f(SOURCE)g(CODE)1440 91
y FC(\(A)-5 b(OI,)21 b(MINT)-7 b(,)20 b(CAST)-7 b(,)19
b(PRES)p 2433 91 28 4 v 31 w(C,)i(and)h(MET)-8 b(A\).)19
b(These)j(formats)h(are)f(spec-)1440 204 y(i\002ed)28
b(in)g(ONC)e(RPC)g(IDL)g(because)k(Flick)e(needs)h(to)f(send)h(these)g
(interme-)1440 317 y(diate)38 b(formats)f(between)h(separate)h
(programs,)i(and)c(Flick)g(does)h(that)f(by)1440 430
y(writing)25 b(data)g(to)g(intermediate)i(\002les.)k(Because)26
b(the)f(formats)g(are)g(speci\002ed)1440 543 y(in)d(IDL,)f(we)h(can)h
(use)g(`rpcgen')i(to)d(automatically)k(create)e(the)f(code)g(to)g(read)
1440 656 y(and)h(write)g(Flick')-5 b(s)24 b(intermediate)i(data)e
(representations.)1440 825 y(This)37 b(directory)j(also)e(contains)h
(the)f(header)g(\002les)f(for)h(the)f(libraries)j(that)1440
938 y(manipulate)23 b(Flick')-5 b(s)22 b(non-C/C++-speci\002c)h
(intermediate)h(representations)1440 1051 y(\(i.e.,)f(libaoi,)h
(libmint,)h(and)f(libmeta\).)195 1220 y Fy(flick-)t(2.1/mom/c)521
b FC(This)18 b(directory)j(contains)g(header)f(\002les)e(that)h(are)f
(speci\002c)i(to)e(the)h(C)e(and)i(C++)1440 1333 y(language-speci\002c)
36 b(phases)d(of)e(Flick)g(\(i.e.,)i(the)e(presentation)k(generation)
1440 1446 y(and)24 b(back)g(end)g(stages\).)195 1615
y Fy(flick-)t(2.1/mom/c/be)377 b FC(This)40 b(directory)i(contains)g
(additional)h(header)f(\002les)e(speci\002c)h(to)e(Flick')-5
b(s)1440 1728 y(C/C++)23 b(back)h(ends.)195 1897 y Fy(flick-)t
(2.1/test)569 b FC(This)24 b(directory)i(is)e(the)g(root)g(of)g(test)h
(tree.)30 b(The)23 b(structure)k(of)c(the)i(test)f(direc-)1440
2010 y(tory)32 b(tree)f(is)g(patterned)i(after)f(the)f(stages)h(of)f
(the)h(Flick)f(compiler)-5 b(.)52 b(There)1440 2123 y(are)23
b(separate)j(directories)g(to)d(hold)h(the)f(results)i(of)e(each)h
(front)g(end,)f(presen-)1440 2236 y(tation)30 b(generator)l(,)h(and)e
(back)g(end.)44 b(The)27 b(output)j(from)e(each)h(stage)h(can)e(be)1440
2349 y(v)o(eri\002ed)g(against)i(kno)n(wn-good)g(copies)g(of)d(the)i
(output)g(\002les.)42 b(Dri)n(v)o(er)28 b(pro-)1440 2462
y(grams)33 b(are)f(compiled)i(and)f(link)o(ed)h(separately)-6
b(.)59 b(There)32 b(is)g(a)g(Mak)o(e\002le)h(in)1440
2575 y(the)28 b(root)h(of)f(the)g(testing)h(tree)g(that)f(simpli\002es)
h(the)f(testing)i(process,)g(and)f(a)1440 2688 y(README)21
b(\002le)h(to)i(e)o(xplain)h(e)n(v)o(erything.)195 2857
y Fy(flick-)t(2.1/util)569 b FC(This)23 b(directory)j(contains)g(Flick)
e(utility)h(programs.)195 3026 y Fy(flick-)t(2.1/util/aoid)329
b FC(This)31 b(directory)j(contains)f(the)f(source)h(code)f(for)f
(`aoid',)j(a)d(pretty-printer)1440 3139 y(for)26 b(A)-5
b(OI)24 b(\002les.)35 b(When)26 b(the)g(A)-5 b(OI)25
b(format)h(is)f(changed,)j(this)f(tool)f(should)h(be)1440
3252 y(modi\002ed)d(to)g(re\003ect)g(those)h(changes.)32
b(Gi)n(v)o(en)24 b(a)f(`\002lename.aoi',)j(the)e(`aoid')1440
3365 y(program)h(will)e(create)i(a)e(human-readable)k(`\002lename.aod')
e(\002le.)195 3534 y Fy(flick-)t(2.1/util/presd)281 b
FC(This)18 b(directory)j(contains)g(`presd',)g(a)d(pretty-printer)23
b(for)c(PRES)p 3494 3534 V 31 w(C)e(\002les.)27 b(As)1440
3647 y(PRES)p 1664 3647 V 31 w(C)i(changes,)35 b(this)c(program)h
(should)g(be)e(changed)j(as)e(well.)49 b(Gi)n(v)o(en)1440
3760 y(a)28 b(`\002lename.prc',)j(the)e(`presd')h(program)g(will)e
(create)i(a)e(human-readable)1440 3873 y(`\002lename.prd')d(\002le.)195
4042 y Fy(libaoi)957 b FC(This)27 b(directory)j(contains)g(data)e
(creation)h(and)f(manipulation)i(routines)g(for)1440
4155 y(the)c(A)-5 b(OI)24 b(data)i(format.)35 b(The)25
b(A)-5 b(OI)25 b(library)i(is)e(used)h(e)o(xtensi)n(v)o(ely)i(in)d
(Flick')-5 b(s)1440 4268 y(front)24 b(ends)h(and)f(presentation)j
(generators.)195 4437 y Fy(libcompiler)717 b FC(This)21
b(directory)i(contains)f(utility)h(code)e(used)h(throughout)h(Flick,)f
(including)1440 4550 y(error)n(-check)o(ed)36 b(malloc/calloc/realloc)i
(routines,)e(uniform)d(w)o(arning)h(and)1440 4663 y(error)24
b(printing)i(routines,)f(and)f(some)g(code)g(printing)i(routines.)195
4832 y Fy(libmeta)909 b FC(This)32 b(directory)j(contains)g(routines)f
(for)f(creating)i(and)d(manipulating)k(the)1440 4945
y(metadata)25 b(within)f(Flick')-5 b(s)24 b(intermediate)i(\002les.)195
5114 y Fy(libmint)909 b FC(This)27 b(directory)j(contains)g(data)e
(creation)h(and)f(manipulation)i(routines)g(for)1440
5227 y(the)18 b(MINT)f(data)i(format.)27 b(It)18 b(is)g(used)h(e)o
(xtensi)n(v)o(ely)h(throughout)i(presentation)1440 5340
y(generation)k(and)e(back)h(end)f(code)g(generation.)p
eop
%%Page: 25 25
25 24 bop 0 -165 a Fx(2.3.)51 b(CODING)21 b(STYLE)2961
b FC(25)195 91 y Fy(mom)1101 b FC(This)25 b(directory)k(contains)e(the)
f(de\002nitions)i(of)e(all)f(of)h(the)g(ONC)e(RPC)f(IDL-)1440
204 y(speci\002ed)i(intermediate)h(data)f(formats)f(formats)h(used)f
(internally)i(by)e(Flick)1440 317 y(\(A)-5 b(OI,)21 b(MINT)-7
b(,)20 b(CAST)-7 b(,)19 b(PRES)p 2433 317 28 4 v 31 w(C,)i(and)h(MET)-8
b(A\).)19 b(These)j(formats)h(are)f(spec-)1440 430 y(i\002ed)28
b(in)g(ONC)e(RPC)g(IDL)g(because)k(Flick)e(needs)h(to)f(send)h(these)g
(interme-)1440 543 y(diate)38 b(formats)f(between)h(separate)h
(programs,)i(and)c(Flick)g(does)h(that)f(by)1440 656
y(writing)25 b(data)g(to)g(intermediate)i(\002les.)k(Because)26
b(the)f(formats)g(are)g(speci\002ed)1440 769 y(in)d(IDL,)f(we)h(can)h
(use)g(`rpcgen')i(to)d(automatically)k(create)e(the)f(code)g(to)g(read)
1440 882 y(and)h(write)g(Flick')-5 b(s)24 b(intermediate)i(data)e
(representations.)1440 1040 y(This)37 b(directory)j(also)e(contains)h
(the)f(header)g(\002les)f(for)h(the)f(libraries)j(that)1440
1153 y(manipulate)23 b(Flick')-5 b(s)22 b(non-C/C++-speci\002c)h
(intermediate)h(representations)1440 1266 y(\(i.e.,)f(libaoi,)h
(libmint,)h(and)f(libmeta\).)195 1425 y Fy(mom/c)1005
b FC(This)18 b(directory)j(contains)g(header)f(\002les)e(that)h(are)f
(speci\002c)i(to)e(the)h(C)e(and)i(C++)1440 1538 y(language-speci\002c)
36 b(phases)d(of)e(Flick)g(\(i.e.,)i(the)e(presentation)k(generation)
1440 1651 y(and)24 b(back)g(end)g(stages\).)195 1810
y Fy(mom/c/be)861 b FC(This)40 b(directory)i(contains)g(additional)h
(header)f(\002les)e(speci\002c)h(to)e(Flick')-5 b(s)1440
1923 y(C/C++)23 b(back)h(ends.)195 2081 y Fy(test)1053
b FC(This)24 b(directory)i(is)e(the)g(root)g(of)g(test)h(tree.)30
b(The)23 b(structure)k(of)c(the)i(test)f(direc-)1440
2194 y(tory)32 b(tree)f(is)g(patterned)i(after)f(the)f(stages)h(of)f
(the)h(Flick)f(compiler)-5 b(.)52 b(There)1440 2307 y(are)23
b(separate)j(directories)g(to)d(hold)h(the)f(results)i(of)e(each)h
(front)g(end,)f(presen-)1440 2420 y(tation)30 b(generator)l(,)h(and)e
(back)g(end.)44 b(The)27 b(output)j(from)e(each)h(stage)h(can)e(be)1440
2533 y(v)o(eri\002ed)g(against)i(kno)n(wn-good)g(copies)g(of)d(the)i
(output)g(\002les.)42 b(Dri)n(v)o(er)28 b(pro-)1440 2646
y(grams)33 b(are)f(compiled)i(and)f(link)o(ed)h(separately)-6
b(.)59 b(There)32 b(is)g(a)g(Mak)o(e\002le)h(in)1440
2759 y(the)28 b(root)h(of)f(the)g(testing)h(tree)g(that)f(simpli\002es)
h(the)f(testing)i(process,)g(and)f(a)1440 2872 y(README)21
b(\002le)h(to)i(e)o(xplain)h(e)n(v)o(erything.)195 3030
y Fy(util)1053 b FC(This)23 b(directory)j(contains)g(Flick)e(utility)h
(programs.)195 3189 y Fy(util/aoid)813 b FC(This)31 b(directory)j
(contains)f(the)f(source)h(code)f(for)f(`aoid',)j(a)d(pretty-printer)
1440 3302 y(for)26 b(A)-5 b(OI)24 b(\002les.)35 b(When)26
b(the)g(A)-5 b(OI)25 b(format)h(is)f(changed,)j(this)f(tool)f(should)h
(be)1440 3415 y(modi\002ed)d(to)g(re\003ect)g(those)h(changes.)32
b(Gi)n(v)o(en)24 b(a)f(`\002lename.aoi',)j(the)e(`aoid')1440
3528 y(program)h(will)e(create)i(a)e(human-readable)k(`\002lename.aod')
e(\002le.)195 3687 y Fy(util/presd)765 b FC(This)18 b(directory)j
(contains)g(`presd',)g(a)d(pretty-printer)23 b(for)c(PRES)p
3494 3687 V 31 w(C)e(\002les.)27 b(As)1440 3800 y(PRES)p
1664 3800 V 31 w(C)i(changes,)35 b(this)c(program)h(should)g(be)e
(changed)j(as)e(well.)49 b(Gi)n(v)o(en)1440 3912 y(a)28
b(`\002lename.prc',)j(the)e(`presd')h(program)g(will)e(create)i(a)e
(human-readable)1440 4025 y(`\002lename.prd')d(\002le.)0
4338 y Ft(2.3)119 b(Coding)31 b(Style)0 4551 y FC(Flick)d(is)h(not)f
(implemented)i(in)f(an)f(e)o(xtremely)i(rigid)f(style.)44
b(Ne)n(v)o(ertheless,)31 b(the)e(code)g(has)f(been)i(written)f(using)g
(a)f(fe)n(w)0 4664 y(general)37 b(rules)f(and)g(idioms,)i(and)e(these)g
(rules)g(should)h(be)e(follo)n(wed)h(whene)n(v)o(er)h(one)e(adds)h(ne)n
(w)f(code)h(or)f(modi\002es)0 4777 y(e)o(xisting)25 b(code.)0
5046 y FA(2.3.1)99 b(Files)0 5227 y FC(Ob)o(viously)-6
b(,)42 b(ne)n(w)36 b(\002les)h(should)i(be)e(placed)h(in)f(accordance)j
(with)d(the)g(e)o(xisting)i(directory)h(hierarchy)f(described)g(in)0
5340 y(Section)28 b(2.2.)41 b(File)27 b(names)h(should)h(be)e(chosen)j
(to)d(match)h(the)g(\002le')-5 b(s)27 b(e)o(xisting)i(peers;)i(e.g.,)d
(if)f(the)h(e)o(xisting)h(\002le)e(names)p eop
%%Page: 26 26
26 25 bop 0 -165 a FC(26)1716 b Fx(CHAPTER)20 b(2.)51
b(AN)22 b(OUTLINE)f(OF)h(THE)f(SOURCE)g(CODE)0 91 y FC(use)i
(underscores)k(to)c(separate)i(w)o(ords,)e(the)g(ne)n(w)f(\002le)h
(name)g(should)i(follo)n(w)e(this)g(pattern.)30 b(Flick)24
b(source)g(\002les)f(generally)0 204 y(use)h(the)g(follo)n(wing)h
(\002le)e(name)g(e)o(xtensions:)195 385 y Fy(.cc)1101
b FC(C++)23 b(source)i(\002les.)195 539 y Fy(.hh)1101
b FC(C++-only)25 b(header)g(\002les.)195 693 y Fy(.c)1149
b FC(C)22 b(source)j(\002les.)195 847 y Fy(.h)1149 b
FC(C)35 b(header)j(\002les.)68 b(Note)36 b(that)i(C)d(header)j(\002les)
e(must)h(be)f Fy(#include)p FC(-able)1440 960 y(by)h(C++)f(code.)69
b(In)36 b(general,)42 b(this)37 b(means)g(that)g(one)g(uses)h
(preprocessor)1440 1073 y(magic)31 b(to)g(ensure)h(that)f(whene)n(v)o
(er)h(the)f(\002le)f(is)g(included)j(by)e(C++)f(source,)1440
1185 y(the)21 b(header)h(contents)g(are)f(wrapped)h(within)f(an)f
Fy(extern)46 b("C")19 b FC(declaration.)195 1339 y Fy(.idl)1055
b Fv(C)t(O)t(R)t(B)r(A)26 b(I)t(D)t(L)h FC(\002les.)195
1493 y Fy(.x)1151 b Fv(O)t(N)t(C)27 b(R)t(P)t(C)g(I)t(D)t(L)g
FC(\002les.)195 1647 y Fy(.defs)1007 b Fv(M)t(I)t(G)28
b(I)t(D)t(L)e FC(\002les.)141 1828 y(Each)36 b Fy(make)p
FC(-able)g(directory)j(contains)f(a)e Fy(GNUmakefile.in)c
FC(\002le)j(that)i(is)f(processed)j(by)d(Flick')-5 b(s)37
b Fy(configure)0 1941 y FC(script)31 b(to)f(produce)i(a)d
Fy(GNUmakefile)d FC(for)31 b(b)n(uilding)h(the)e(directory)i(contents.)
50 b(\(Flick)31 b(requires)h(GNU)c(Mak)o(e.\))48 b(Most)0
2054 y(\223leaf)5 b(\224)31 b Fy(GNUmakefile)p FC(s)26
b(do)j(little)h(more)g(than)g(de\002ne)g(a)f(fe)n(w)f(macros.)47
b(The)29 b Fy(GNUmakerules.*)c FC(\002les)k(at)h(the)f(root)h(of)0
2167 y(the)22 b(source)i(tree)e(contain)i(the)e(actual)i(rules)f(used)f
(to)g(b)n(uild)i(v)n(arious)f(Flick)f(libraries)i(and)f(programs.)30
b(Consult)23 b(the)f(user')-5 b(s)0 2280 y(manual)24
b(for)g(further)h(help)f(in)g(b)n(uilding)i(Flick.)0
2527 y FA(2.3.2)99 b(Aesthetics)0 2702 y FC(When)24 b(writing)g(ne)n(w)
f(code)h(or)g(modifying)h(e)o(xisting)h(code,)e(please)h(follo)n(w)f
(these)g(guidelines:)0 2906 y Fz(Maintain)f(consistency)-6
b(.)48 b FC(When)27 b(modifying)j(Flick)d(in)h(an)o(y)f(w)o(ay)-6
b(,)28 b(the)g(primary)g(rule)g(is)g(to)f Fu(mak)o(e)g(ne)o(w)g(code)h
(look)h(lik)o(e)227 3019 y(the)d(code)g(that')l(s)h(alr)m(eady)g(ther)m
(e)p FC(.)36 b(A)24 b(corollary)k(to)d(the)h(rule)g(is)f(this:)34
b(do)26 b(not)f(reformat)i(e)o(xisting)g(code.)36 b(K)n(eep)25
b(the)227 3132 y(same)f(declaration)j(style,)d(commenting)i(style,)e
(indentation)k(style,)c(and)g(so)g(on)g(as)g(you)g(write)g(and)g
(modify)h(code.)227 3245 y(Most)19 b(an)o(y)g(good,)h(consistent)h
(coding)f(style)g(can)f(be)f(readable,)k(b)n(ut)d(an)g
Fu(inconsistent)k FC(style)d(creates)g(Programmer')-5
b(s)227 3358 y(Hell.)28 b(Gratuitous)d(reformatting)g(of)e(e)o(xisting)
h(code)f(mak)o(es)g(it)g(dif)n(\002cult)g(to)f(tell)h(from)g(a)f
Fy(diff)f FC(what)h(w)o(as)g(actually)227 3471 y(changed)k(and)e(what)f
(is)h(just)g(cosmetic.)0 3656 y Fz(Comment)e(the)h(code.)46
b FC(Source)21 b(code)f(is)f(useless)j(if)d(people)i(cannot)h
(understand)g(it.)27 b(Comment)20 b(ne)n(w)f(code)h Fu(as)g(you)g
(write)227 3769 y(it)p FC(.)28 b(Fix)22 b(poorly)i(commented)f(code)g
(as)f(you)h(\002nd)f(it.)28 b(Comments)22 b(come)g(in)g(a)g(v)n(ariety)
h(of)f(forms,)h(b)n(ut)f(the)h(preferred)227 3882 y(style)h(is)f(to)g
(ha)n(v)o(e)h(the)f(initiators)j(\()p Fy(/*)p FC(\))c(and)i
(terminators)h(\()p Fy(*/)p FC(\))d(on)i(separate)h(lines)f(with)f
(each)g(line)h(of)f(te)o(xt)g(starting)227 3995 y(with)h(an)h(asterisk)
h(\()p Fy(*)p FC(\).)31 b(The)24 b(result)i(looks)f(clean,)g(e)n(v)o
(en)g(though)h(it)e(can)h(be)f(troublesome)k(to)c(edit)h(afterw)o
(ards.)33 b(Be)227 4108 y(careful)25 b(not)f(to)g(use)g(`)p
Fy(//)p FC('-style)g(comments)h(in)e(C)g(code;)h(not)g(all)g(C)e
(compilers)j(accept)g(such)g(comments.)0 4293 y Fz(A)-9
b(v)o(oid)23 b(tricks;)h(write)g(portable)g(code.)46
b FC(Ob)o(vious)22 b(code)f(is)g(best.)28 b(A)-7 b(v)n(oid)22
b(tricks)g(and)f(non-portable)k(idioms;)e(in)d(particu-)227
4405 y(lar)l(,)j(be)f(careful)h(to)f(a)n(v)n(oid)i(language)g(e)o
(xtensions)h(pro)o(vided)f(by)e Fy(gcc)f FC(and)h Fy(g++)p
FC(.)27 b(Use)21 b(the)i(GNU)d(compiler)j(options)227
4518 y Fy(-pedantic)e FC(and)j Fy(-ansi)d FC(to)i(weed)h(out)g(GNUisms)
e(in)i(ne)n(w)f(code.)0 4703 y Fz(T)-7 b(r)n(eat)24 b(compiler)h(war)o
(nings)e(as)g(err)n(ors.)48 b FC(Not)34 b(only)h(should)i(your)e(code)g
(compile)h(on)f(a)f(v)n(ariety)i(of)e(platforms)i(with)227
4816 y(a)h(v)n(ariety)h(of)e(compilers,)42 b(it)36 b(should)j(also)e
(compile)h Fu(without)g(any)f(warnings)p FC(.)70 b(A)36
b(w)o(arning)i(is)e(a)h(signal)h(that)227 4929 y(something)26
b(is)d(wrong.)29 b(A)23 b(constant)i(stream)g(of)e(w)o(arnings)i(mak)o
(es)f(it)f(too)h(easy)h(for)e(ne)n(w)g(w)o(arnings)i(to)f(hide.)0
5114 y Fz(Use)f(C)f(f)n(or)i(general-pur)o(pose)h(libraries.)48
b FC(The)35 b(libraries)i(for)f(Flick')-5 b(s)36 b(intermediate)i
(representations)i(\()r Fv(AO)t(I)r FC(,)g Fv(M)t(I)t(N)t(T)r
FC(,)227 5227 y(and)22 b(so)e(on\))i(are)f(implemented)h(in)f(C)f(so)h
(that)g(the)o(y)g(may)g(be)g(used)g(in)g(both)h(C)d(and)j(C++)e
(programs.)29 b(The)21 b(functions)227 5340 y(in)j Fy(libcompiler)19
b FC(are)24 b(implemented)i(in)d(C)f(for)i(the)g(same)g(reason.)p
eop
%%Page: 27 27
27 26 bop 0 -165 a Fx(2.3.)51 b(CODING)21 b(STYLE)2961
b FC(27)0 91 y Fz(Maintain)23 b(language)i(consistency)-6
b(.)47 b FC(Some)21 b(parts)h(of)g(Flick)g(are)f(implemented)j(in)e(C,)
e(and)i(others)h(are)f(implemented)h(in)227 204 y(C++.)28
b(Ho)n(we)n(v)o(er)l(,)22 b(it)g(is)h(confusing)i(when)d(a)g(single)i
(component)g(is)f(implemented)h(using)g(both)f(languages.)31
b(When)227 317 y(w)o(orking)26 b(on)e(an)g(e)o(xisting)h(component,)h
(use)f(the)f(language)i(that)f(is)f(already)i(in)d(use)i(for)f(that)h
(component.)32 b(When)227 430 y(starting)26 b(a)d(ne)n(w)g(component,)i
(use)f(the)g(language)i(that)e(is)f(common)h(for)g(components)i(of)d
(that)i(class.)0 618 y Fz(Use)e(the)g(Flux)g(Pr)n(oject)h(coding)g
(style.)47 b FC(The)18 b(Flux)g(coding)i(style)g(should)g(be)f(used)g
(in)g(all)g(C-)e(and)i(C++-based)i(programs)227 730 y(implemented)28
b(by)e(the)h(Flux)f(Project.)37 b(The)25 b(most)h(ob)o(vious)i
(hallmark)f(of)f(this)h(style)g(is)f(8-character)j(indentation)227
843 y(stops)37 b(\227)e(chosen)j(to)e(mak)o(e)g Fy(vi)e
FC(users)j(happ)o(y)-6 b(.)68 b(A)34 b(second)k(hallmark)f(is)f(that)g
(braces)h(are)g(\223hung\224)g(after)g Fy(if)p FC(,)227
956 y Fy(else)p FC(,)21 b Fy(for)p FC(,)g(and)i Fy(switch)p
FC(.)j(Braces)d(are)g(not)g(hung,)h(ho)n(we)n(v)o(er)l(,)f(around)h
(the)f(bodies)i(of)d(functions,)j(structure)g(type)227
1069 y(de\002nitions,)h(and)e(so)f(on.)29 b(The)23 b(follo)n(wing)i
(code)f(snippet)i(illustrates)g(these)f(points)g(of)e(the)h(Flux)f
(coding)j(style:)227 1318 y Fy(int)227 1431 y(make_payments\(.)44
b(.)j(.\))227 1544 y({)609 1657 y(.)h(.)f(.)609 1770
y(for)g(\(i)g(=)h(0;)f(i)g(<)h(pmt_max;)d(++i\))i({)991
1883 y(if)g(\(i)g(==)g(pmt_num\))f({)1373 1996 y(skip_payment\(pmts,)d
(i\);)1373 2109 y(.)k(.)h(.)991 2222 y(})f(else)g({)1373
2335 y(double_payment\(pmts,)42 b(i\);)1373 2448 y(.)47
b(.)h(.)991 2560 y(})991 2673 y(print_current_payments\(p)o(mts\))o(;)
609 2786 y(})227 2899 y(})227 3148 y Fu(It)31 b(is)g(mor)m(e)g
(important)i(to)e(maintain)i(consistency)h FC(with)d(e)o(xisting)i
(code)f(than)g(it)f(is)g(to)g(apply)h(the)f(Flux)h(coding)227
3261 y(style.)d(In)22 b(particular)l(,)j(this)e(means)g(that)f(when)g
(\223foreign\224)j(code)e(is)f(assimilated)i(into)f(Flick)f(\(e.g.,)g
(bits)h(of)f Fy(rpcgen)227 3374 y FC(for)j(the)i Fv(O)t(N)t(C)g(R)t(P)t
(C)g FC(front)e(end,)g(and)g(bits)g(of)h Fv(M)t(I)t(G)h
FC(for)d(the)j Fv(M)t(I)t(G)g FC(front)e(end\),)g Fu(the)g(formatting)h
(of)f(the)f(for)m(eign)i(code)227 3487 y(should)f(be)f(pr)m(eserved)p
FC(.)0 3675 y Fz(Use)f(library)i(r)n(outines)f(as)f(much)f(as)i
(possible.)46 b FC(In)24 b(particular)l(,)k(a)n(v)n(oid)e(treating)g
(Flick')-5 b(s)25 b(intermediate)i(representation)227
3788 y(types)e(\(e.g.,)e(the)h(v)n(arious)j Fv(AO)t(I)e
FC(and)h Fv(P)t(R)t(E)t(S)p 1580 3788 28 4 v 39 w(C)f
FC(node)g(types\))f(as)g(\223e)o(xposed\224)i(C)c(structures)k(whene)n
(v)o(er)f(it)e(is)g(feasible)227 3900 y(and)32 b(reasonable)j(to)d(do)f
(so.)53 b(As)31 b(much)h(as)g(possible,)j(use)d(the)g(appropriate)j
(library)e(functions)h(to)e(manipulate)227 4013 y(IR)f(nodes)i(as)f
(abstract)h(data)g(types.)54 b(This)31 b(mak)o(es)i(the)e(code)i
(easier)g(to)e(read)i(and)f(maintain.)54 b(\(This)32
b(advice)h(is)227 4126 y(some)n(what)26 b(idealistic.)34
b(While)25 b(it)g(is)g(generally)i(straightforw)o(ard)h(to)d(create)h
(nodes)g(through)h(a)d(library)i(interf)o(ace,)227 4239
y(there)f(is)e(currently)j(v)o(ery)e(little)g(library)h(support)h(for)e
(accessing)i(node)e(data)g(in)g(an)o(y)f(kind)i(of)e(abstract)j(w)o(ay)
-6 b(.\))0 4488 y FA(2.3.3)99 b(Storage)25 b(Allocation)0
4663 y Fu(Although)d(Flic)n(k-g)o(ener)o(ated)j(stubs)d(and)f(sk)o
(eletons)j(ar)m(e)d(car)m(eful)h(to)f(mana)o(g)o(e)h(memory)e(in)h(a)g
(r)l(ob)n(ust)h(manner)p FC(,)g(Flick)f(itself)0 4775
y(handles)k(memory)f(in)g(a)f(w)o(ay)g(that)h(is)f(more)h(appropriate)j
(to)c(a)g(compiler)-5 b(.)141 4888 y(Flick)21 b(is)g(written)g(with)g
(the)g(assumption)i(that)f(memory)f(is)f(plentiful,)k(and)d(this)h
(assumption)h(is)d(e)n(vident)j(in)e(tw)o(o)f(w)o(ays)0
5001 y(throughout)25 b(the)e(code.)29 b(First,)22 b(Flick)g(mak)o(es)g
(frequent)j(use)d(of)g(library)i(routines)g(that)e(implement)i
(\223allocate)g(memory)e(or)0 5114 y(panic\224)27 b(beha)n(vior)i
(\(see)d(Section)h(9.2\).)36 b(Thus,)27 b(if)e(memory)h(runs)h(out,)g
(Flick)f(will)f(e)o(xit)i(ungracefully)-6 b(.)39 b(Second,)27
b(Flick)f(is)0 5227 y(often)i(not)f(v)o(ery)g(careful)h(in)f(freeing)h
(memory)-6 b(.)39 b(Memory)27 b(may)f(\223leak\224)i(when)f(the)g(last)
g(pointer)i(to)e(a)f(bit)h(of)f(pre)n(viously)0 5340
y(allocated)g(storage)f(is)f(lost.)p eop
%%Page: 28 28
28 27 bop 0 -165 a FC(28)1716 b Fx(CHAPTER)20 b(2.)51
b(AN)22 b(OUTLINE)f(OF)h(THE)f(SOURCE)g(CODE)141 91 y
FC(In)35 b(practice,)k(this)d(style)g(of)f(coding)h(is)f(not)g
(problematic)j(for)d(Flick:)52 b(there)36 b(is)f(plenty)h(of)f(memory)g
(on)g(modern)0 204 y(computer)22 b(systems,)g(the)f(compiler')-5
b(s)23 b(memory)e(demands)h(are)f(not)g(lar)n(ge)h(in)f(an)o(y)g(case,)
g(and)h(the)f(v)n(arious)h(Flick)f(compiler)0 317 y(passes)32
b(run)f(v)o(ery)g(quickly)-6 b(.)51 b(It)31 b(is)f(certainly)j
(possible)f(to)f(\002nd)h Fv(I)t(D)t(L)h FC(inputs,)h(ho)n(we)n(v)o(er)
l(,)e(that)f(cause)h(Flick)e(to)h(consume)0 430 y(inordinate)26
b(amounts)f(of)e(memory)g(or)g(CPU)e(time.)29 b(F)o(or)22
b(this)i(and)g(other)g(reasons,)h(we)d(e)o(xpect)i(to)g(e)n(v)o
(entually)h(\223clean)g(up\224)0 543 y(Flick')-5 b(s)23
b(memory)g(management)h(code,)f(either)g(through)i(recoding)f(or)e
(through)j(the)d(addition)j(of)d(some)g(kind)i(of)e(garbage)0
656 y(collector)-5 b(.)0 905 y FA(2.3.4)99 b(T)-9 b(ags)0
1079 y FC(Man)o(y)25 b(functions)j(in)d(Flick)g(tak)o(e)g(their)h(ar)n
(guments)i(as)d(\223tag)g(lists\224:)34 b(lists)25 b(of)g(name-v)n
(alue)i(associations.)37 b(Each)25 b(associa-)0 1192
y(tion)c(consists)h(of)d(an)h(identi\002er)l(,)i(representing)i(some)c
(attrib)n(ute,)j(follo)n(wed)e(by)f(the)g(set)g(of)g(\(zero)g(or)g
(more\))g(v)n(alues)i(for)e(that)0 1305 y(attrib)n(ute.)44
b(A)26 b(special)k(tag)e(identi\002er)h(signals)g(the)f(end)h(of)e(the)
h(tag)g(list.)42 b(F)o(or)27 b(instance,)j(the)e(function)i
Fy(add_function)0 1418 y FC(accepts)25 b(a)e(list)h(of)g(tags)g
(describing)i(the)e(properties)i(of)e(a)f(C++)g(function:)191
1629 y Fy(add_function\(tl,)811 1742 y(sc_out_name,)811
1855 y(PFA_Protection,)44 b(current_protection,)811 1968
y(PFA_Constructor,)811 2080 y(PFA_FunctionKind,)f("T_out\(T_var)i
(&\)",)811 2193 y(PFA_Scope,)g(scope,)811 2306 y(PFA_ReturnType,)f
(cast_new_type\(CAST_TYPE_)o(NULL)o(\),)811 2419 y(PFA_Parameter,)g
(type,)j("r",)f(NULL,)811 2532 y(PFA_TAG_DONE\);)0 2743
y FC(Each)29 b(tag)g(\(the)h Fy(PFA_*)d FC(identi\002ers\))k(in)e(the)g
(abo)o(v)o(e)h(e)o(xample)g(is)e(paired)j(with)e(zero)g(or)g(more)g
(data)h(v)n(alues.)46 b(Most)30 b(tags)0 2856 y(ha)n(v)o(e)37
b(a)f(single)i(associated)h(v)n(alue;)44 b(for)37 b(e)o(xample,)j
Fy(PFA_Protection)32 b FC(is)k(paired)i(with)e(the)h(v)n(alue)g(of)g
(the)f(v)n(ariable)0 2969 y Fy(current_protection)p FC(.)23
b(Some)e(tags,)i(ho)n(we)n(v)o(er)l(,)g(are)g(associated)i(with)e(no)f
(v)n(alues)i(\(e.g.,)e Fy(PFA_Constructor)c FC(in)k(the)0
3082 y(e)o(xample)e(abo)o(v)o(e\))g(or)g(with)f(multiple)h(v)n(alues)h
(\(e.g.,)e Fy(PFA_Parameter)p FC(\).)24 b(When)19 b(a)g(tag)h(has)g(no)
f(v)n(alue,)i(it)e(usually)i(signi\002es)0 3195 y(a)33
b(boolean)j(switch:)51 b(the)34 b(attrib)n(ute)i(is)e(true)h(when)f
(the)g(tag)g(appears)i(in)e(the)g(tag)g(list.)60 b(The)34
b(special)h Fy(PFA_TAG_DONE)0 3308 y FC(identi\002er)25
b(in)e(the)h(abo)o(v)o(e)g(e)o(xample)h(signals)g(the)f(end)g(of)f(the)
h(tag)g(list.)141 3421 y(T)-7 b(ags)22 b(are)h(generally)i(grouped)g
(into)e(sets)g(or)f(\223f)o(amilies\224)j(according)g(to)d(their)i
(purpose.)30 b(F)o(or)22 b(instance,)i(all)f(of)f(the)h(tag)0
3533 y(identi\002ers)32 b(in)e(the)h(abo)o(v)o(e)g(e)o(xample)g(be)o
(gin)g(with)f Fy(PFA)f FC(because)j(the)o(y)f(are)g(all)f
(\223presentation)k(function)f(attrib)n(utes\224)g(as)0
3646 y(de\002ned)22 b(in)f Fy(mom/c/libpres_c.h)p FC(.)h(The)f
(documentation)k(for)c(an)o(y)g(tag)h(set)f(should)i(e)o(xplain)f(the)g
(meaning)g(of)f(each)h(tag)0 3759 y(identi\002er)29 b(and)f(the)g(v)n
(alues)h(that)f(each)g(tag)g(must)f(be)h(associated)i(with.)41
b(\(F)o(or)27 b(more)g(information)j(about)f(the)f Fy(PFA)e
FC(tags,)0 3872 y(see)e(Section)g(7.3.\))141 3985 y(Essentially)35
b(all)e(functions)i(that)e(accept)i(tag)e(lists)g(are)g
Fy(varargs)p FC(-style)f(functions,)37 b(meaning)d(that)g(the)o(y)f
(may)f(be)0 4098 y(called)27 b(with)e(an)g(arbitrary-length)31
b(list)25 b(of)h(tags)g(and)g(v)n(alues.)35 b(This)26
b(is)f(why)g(a)g(special)i(tag)e(is)h(required)h(to)f(mark)f(the)h(end)
0 4211 y(of)32 b(a)f(tag)h(list.)53 b(Functions)34 b(that)e(accept)h
(tag)f(lists)h(generally)h(do)d(so)h(because)i(the)o(y)e(construct)i
(objects)f(\(e.g.,)j Fv(P)t(R)t(E)t(S)p 3817 4211 28
4 v 39 w(C)0 4324 y FC(nodes\))c(or)f(just)g(because)i(the)o(y)e(ha)n
(v)o(e)h(a)e(lar)n(ge)i(number)g(of)e(possible)j(ar)n(guments.)53
b(When)31 b(used)h(to)e(construct)k(objects,)0 4437 y(the)c(tags)h
(generally)i(correspond)g(to)d(slots)h(or)g(\003ags)f(within)g(the)h
(constructed)i(object.)50 b(Some)30 b(subset)h(of)g(the)f(possible)0
4550 y(tags)i(may)f(not)h(be)f(present)i(in)e(the)h(ar)n(gument)h(list)
f(gi)n(v)o(en)g(to)f(a)g(function:)47 b(for)31 b(instance,)k(in)d(the)f
(abo)o(v)o(e)h(e)o(xample,)i(the)0 4663 y Fy(PFA_GlobalFunction)19
b FC(tag)25 b(w)o(as)g(not)g(speci\002ed.)34 b(The)24
b(documentation)29 b(for)c(a)f(function)j(that)f(tak)o(es)g(a)e(tag)h
(list)h(should)0 4775 y(describe)k(what)d(tags)h(are)g(required)h(\(if)
f(an)o(y\))g(and)g(what)f(happens)j(when)d(certain)i(tags)g(are)e(not)h
(present)h(in)f(a)f(gi)n(v)o(en)h(tag)0 4888 y(list.)141
5001 y(Because)22 b(tag)f(lists)g(are)g(generally)i(passed)f(to)e
Fy(varargs)p FC(-style)g(functions,)j Fu(pr)l(o)o(gr)o(ammer)o(s)g
(must)d(be)h(e)n(xtr)m(emely)h(car)m(e-)0 5114 y(ful)k
FC(to)g(ensure)h(that)g(the)f(right)h(types)g(and)f(number)h(of)e(v)n
(alues)i(are)f(associated)j(with)d(each)g(tag:)35 b(the)26
b(C)e(compiler)k(cannot)0 5227 y(typecheck)h(a)d(tag)g(list!)38
b Fu(Most)26 b(notably)-5 b(,)29 b(pr)l(o)o(gr)o(ammer)o(s)f(must)e
(mak)o(e)g(sur)m(e)h(to)f(use)g Fl(NULL)41 b Fu(r)o(ather)27
b(than)g Fl(0)41 b Fu(when)26 b(passing)0 5340 y(a)f(liter)o(al)h(null)
f(pointer)i(to)e(a)f(ta)o(gs-based)29 b(function.)35
b FC(On)24 b(some)h(architectures)j(\(e.g.,)d(64-bit)i(machines\),)f(a)
f(null)g(pointer)p eop
%%Page: 29 29
29 28 bop 0 -165 a Fx(2.4.)51 b(SUMMAR)-6 b(Y)21 b(AND)g(COMMENTS)2398
b FC(29)0 91 y(and)21 b(an)g(inte)o(ger)h Fy(0)d FC(ha)n(v)o(e)j(dif)n
(ferent)g(representations,)k(and)21 b(may)g(not)g(e)n(v)o(en)g(be)f
(represented)k(by)d(the)g(same)g(number)g(of)g(bits.)0
204 y(In)26 b(a)g Fy(varargs)e FC(list,)j(the)f(compiler)i(does)f(not)g
(kno)n(w)f(what)g(types)h(of)f(v)n(alues)i(are)e(required)j(for)d(each)
h(tag,)g(and)g(thus)g(the)0 317 y(compiler)e(cannot)g(automatically)i
(con)l(v)o(ert)e(zeros)g(to)e(null)h(pointer)h(v)n(alues.)141
432 y(The)36 b(notion)i(of)e(a)g(tag)h(lists)g(can)f(be)h(e)o(xtended)h
(to)e(create)i(entire)f(object)h(hierarchies.)70 b(F)o(or)35
b(e)o(xample,)40 b(the)d(fol-)0 544 y(lo)n(wing)32 b(statement)h(uses)f
(tag)g(lists)g(to)g(create)g(a)f(nest)h(of)g(four)i Fv(P)t(R)t(E)t(S)p
2246 544 28 4 v 39 w(C)f FC(nodes:)46 b(a)31 b Fy(PRES_C_INLINE_ATOM)26
b FC(contain-)0 657 y(ing)36 b(a)g Fy(PRES_C_MAPPING_TEMPORARY)p
FC(,)c(which)k(contains)i(a)e Fy(PRES_C_MAPPING_ARGUMENT)p
FC(,)c(which)k(contains)j(a)0 770 y Fy(PRES_C_MAPPING_DIRECT)p
FC(.)33 b(T)-7 b(ag)26 b(lists)i(are)g(used)f(to)h(specify)g(the)g
(hierarchy)h(of)e(nodes)h(and)g(\002ll)e(in)h(the)h(nodes')h(data)0
883 y(slots.)191 1105 y Fy(ac->length)45 b(=)i(PRES_C_I_ATOM,)907
1218 y(PIA_Index,)e(0,)907 1331 y(PIA_Mapping,)f(PRES_C_M_TEMPORARY,)
1002 1444 y(PMA_Name,)i("string_len",)1002 1557 y(PMA_CType,)f(lctype,)
1002 1669 y(PMA_PreHandler,)f("stringlen",)1002 1782
y(PMA_TempType,)g(TEMP_TYPE_ENCODED,)1002 1895 y(PMA_Target,)h
(PRES_C_M_ARGUMENT,)1098 2008 y(PMA_ArgList,)f(ac->arglist_name,)1098
2121 y(PMA_Name,)h("length",)1098 2234 y(PMA_Mapping,)f
(PRES_C_M_DIRECT,)g(END_PRES_C,)1098 2347 y(END_PRES_C,)1002
2460 y(END_PRES_C,)907 2573 y(END_PRES_C;)141 2793 y
FC(The)26 b(node)i(types)g(are)e(speci\002ed)i(by)f(special)h
Fy(PRES_C_*)c FC(macros,)k(which)f(e)o(xpand)h(into)f(calls)g(to)g
(functions.)40 b(Each)0 2906 y(function)34 b(tak)o(es)f(a)e(tag)h
(list:)46 b Fy(PIA_*)29 b FC(tags)k(specify)g(\223)r
Fv(P)t(R)t(E)t(S)p 1919 2906 V 40 w(C)g FC(inline)g(attrib)n(utes\224)i
(and)d Fy(PMA_*)d FC(tags)k(specify)g(\223)r Fv(P)t(R)t(E)t(S)p
3816 2906 V 40 w(C)0 3019 y FC(mapping)25 b(attrib)n(utes.)-6
b(\224)31 b(The)23 b(special)j(tag)d Fy(END_PRES_C)d
FC(marks)k(the)g(end)g(of)g(each)g(tag)g(list.)141 3133
y(The)30 b(tag-based)j(code)e(mak)o(es)g(it)g(clear)g(ho)n(w)f(the)g
(four)i(nodes)f(relate)h(to)e(each)h(other)-5 b(.)51
b(Moreo)o(v)o(er)l(,)33 b(the)e(abo)o(v)o(e)g(tag-)0
3246 y(based)d(statement)g(is)f(easier)h(to)e(read)i(and)f(maintain)h
(than)f(the)h(alternati)n(v)o(e:)37 b(a)27 b(block)h(of)e(C)g
(statements)j(that)e(create)h(and)0 3359 y(initialize)e(each)e(node)h
(indi)n(vidually)-6 b(.)0 3661 y Ft(2.4)119 b(Summary)30
b(and)g(Comments)0 3871 y FC(Flick)25 b(be)o(gan)g(as)g(a)f(collection)
k(of)c(C-only)i(programs)g(and)f(libraries.)35 b(Originally)-6
b(,)27 b(indi)n(vidual)g(presentation)h(generators)0
3984 y(and)h(back)h(ends)f(w)o(ould)h(\223specialize\224)i(library)e
(code)f(simply)h(by)f(pro)o(viding)i(ne)n(w)d(v)o(ersions)i(of)f
(certain)h(functions.)47 b(At)0 4096 y(compile)30 b(time,)f(the)g(link)
o(er)h(w)o(ould)g(include)g(the)f(specialized)j(function)f(in)d(the)h
(generated)j(program.)45 b(This)29 b(technique)0 4209
y(made)20 b(it)g(dif)n(\002cult)h(to)f(create)h(a)f(specialized)j(v)o
(ersion)f(of)e(a)f(function)k(that)d(e)o(xtended)i(the)f(beha)n(vior)h
(of)e(the)h(library)g(routine;)0 4322 y(in)f(object-oriented)25
b(terms,)20 b(it)g(w)o(as)g(impossible)i(to)e(in)l(v)n(ok)o(e)i(a)e
(parent)h(method.)29 b(Further)l(,)21 b(because)h(libraries)h(were)c
(simply)0 4435 y(collections)k(of)d(C)f(functions)k(\(and)e(types\),)h
(it)e(w)o(as)f(not)i(inherently)i(ob)o(vious)f(which)e(sets)h(of)f
(functions)j(applied)f(to)e(which)0 4548 y(\223objects\224)26
b(in)d(the)h(library)-6 b(.)141 4663 y(F)o(or)29 b(these)i(reasons,)i
(most)d(of)g(Flick)g(w)o(as)f(con)l(v)o(erted)k(to)c(C++)g(in)h(1995.)
49 b(Some)29 b(parts,)j(notably)g(the)e(libraries)i(for)0
4775 y(manipulating)39 b(Flick')-5 b(s)37 b(intermediate)h(languages,)k
(remained)c(in)e(C.)65 b(\(This)36 b(made)g(it)g(easier)h(to)f(write)g
(C)f(programs)0 4888 y(based)26 b(on)e(these)i(libraries.\))34
b(The)24 b(con)l(v)o(ersion)k(w)o(as)c(done)h(in)g(the)g(most)f
(straightforw)o(ard)k(manner:)k(certain)27 b(C)c(structure)0
5001 y(types)32 b(were)g(replaced)h(with)e(C++)g(classes,)k(and)c
(functions)j(on)e(those)g(structures)i(were)d(transformed)j(into)e
(methods.)0 5114 y(Most)g(of)g(the)g(e)o(xisting)i(C)d(idioms)i
(\(e.g.,)g(the)g(use)f(of)g Fy(stdio)p FC(,)g Fy(malloc)p
FC(,)f(and)i(so)f(on\),)i(ho)n(we)n(v)o(er)l(,)g(were)e(left)h(in)e
(place.)0 5227 y(This)e(approach)j(w)o(as)e(highly)h(pragmatic:)43
b(the)30 b(e)o(xisting)h(C)e(code)h(w)o(ork)o(ed,)i(so)e(there)g(w)o
(as)f(no)h(need)g(to)g(replace)h(it;)i(the)0 5340 y(programmers)24
b(already)g(kne)n(w)e(the)g(C)f(idioms;)j(and)e(in)g(1995,)h(man)o(y)f
(C++)g(implementations)j(were)d(notoriously)k(b)n(uggy)-6
b(.)p eop
%%Page: 30 30
30 29 bop 0 -165 a FC(30)1716 b Fx(CHAPTER)20 b(2.)51
b(AN)22 b(OUTLINE)f(OF)h(THE)f(SOURCE)g(CODE)141 91 y
FC(The)34 b(result)h(w)o(as)f(that)h(Flick)f(became)h(a)e(combination)k
(of)d(C)f(and)i(C++,)h(programmed)g(in)e(a)f(v)o(ery)i(C-lik)o(e)g
(style.)0 204 y(Lar)n(gely)-6 b(,)39 b(Flick)34 b(has)i(remained)g(in)e
(this)i(state,)i(although)f(ne)n(wer)e(parts)g(of)g(Flick)g(tak)o(e)g
(greater)i(adv)n(antage)g(of)e(C++-)0 317 y(speci\002c)24
b(idioms.)141 430 y(The)32 b(o)o(v)o(erall)h(design)h(of)e(the)h
(original)h(C)d(implementation)k(has)e(survi)n(v)o(ed)h(through)g
(Flick')-5 b(s)33 b(con)l(v)o(ersion)j(to)c(C++)0 543
y(and)g(through)h(the)e(man)o(y)g(e)o(xtensions)j(that)d(ha)n(v)o(e)h
(been)g(made)f(since.)53 b(The)30 b(remaining)j(chapters)g(of)e(this)h
(manual)g(de-)0 656 y(scribe)26 b(Flick')-5 b(s)26 b(current)h(design)f
(and)g(implementation)i(in)d(detail.)34 b(In)25 b(places,)h(this)g
(design)g(is)f(starting)i(to)e(sho)n(w)g(its)g(age.)0
769 y(Therefore,)g(where)e(appropriate,)k(this)d(manual)g(will)f(point)
h(out)g(problems)h(that)f(ha)n(v)o(e)g(become)g(apparent)i(in)d(the)h
(current)0 882 y(design)k(and)g(implementation)i(of)d(Flick,)g(and)h
(will)e(suggest)j(w)o(ays)e(in)g(which)g(these)h(problems)h(might)e(be)
g(corrected)i(in)0 995 y(the)24 b(future.)p eop
%%Page: 31 31
31 30 bop 1700 1827 a Fw(P)n(art)44 b(II)443 2242 y FB(The)51
b(Intermediate)g(Repr)l(esentations)1905 5568 y FC(31)p
eop
%%Page: 32 32
32 31 bop eop
%%Page: 33 33
33 32 bop 0 715 a Fw(Chapter)44 b(3)0 1131 y FB(Metadata)52
b(\(MET)-19 b(A\))51 b(Repr)l(esentation)0 1577 y FC(T)-7
b(o)19 b(k)o(eep)i(track)g(of)g(attrib)n(utes)i(that)d(are)h
(associated)i(with)d(Flick')-5 b(s)21 b(intermediate)i(data)e
(structures,)i(Flick)d(stores)i Fu(metadata)0 1690 y
FC(in)36 b(the)g(intermediate)j(\002les)d(that)g(it)g(creates)i
(\(i.e.,)i Fv(AO)t(I)e FC(and)h Fv(P)t(R)t(E)t(S)p 2211
1690 28 4 v 39 w(C)f FC(\002les\).)66 b(Metadata)37 b(allo)n(ws)g
(Flick)f(to)g(track)h(the)0 1803 y(sources)h(and)e(sinks)h
(\(destinations\))j(of)c(objects,)k(to)c(describe)i(relationships)h
(among)e(those)g(sources)g(and)g(sinks,)i(to)0 1916 y(attach)25
b(additional)h(semantics)g(or)d(classi\002cations)k(to)c(data,)h(and)g
(so)g(on.)29 b(All)23 b(of)g(this)i(information)h(is)d(stored)i(in)f(a)
f(format)0 2029 y(called)k Fv(M)t(E)t(T)m(A)r FC(.)141
2143 y(Metadata)36 b(is)e(used)i(to)e(classify)i(objects)h(in)d(the)h
(intermediate)i(\002les)d(so)h(that)g(Flick)f(can)h(partition)i(its)d
(output)i(in)0 2256 y(v)n(arious)i(w)o(ays.)69 b(F)o(or)36
b(e)o(xample,)41 b(Flick)c(may)f(put)h(certain)i(types)f(of)e(data)i
(in)f(one)g(\002le)f(and)h(other)h(types)g(of)f(data)g(in)0
2369 y(another)-5 b(.)31 b(Alternately)-6 b(,)25 b(Flick)f(might)g
(completely)i(suppress)g(the)e(output)h(of)e(certain)i(kinds)g(of)f
(data.)29 b(The)d Fv(M)t(E)t(T)m(A)h FC(format)0 2482
y(is)k(currently)i(constrained)h(to)d(representing)k(relati)n(v)o(ely)d
(simple)g(attrib)n(utes)i(\227)c(e.g.,)i(the)f(input)h(\002les)f
(associated)i(with)0 2595 y(v)n(arious)26 b(objects)h(\227)d(b)n(ut)h
(the)i Fv(M)t(E)t(T)m(A)i FC(language)e(may)d(be)h(e)o(xtended)i(in)e
(the)g(future)h(to)f(support)i(more)d(comple)o(x)i(kinds)g(of)0
2708 y(annotations.)0 3007 y Ft(3.1)119 b(MET)-11 b(A)30
b(Ov)o(er)o(view)0 3216 y FC(The)f Fv(M)t(E)t(T)m(A)i
FC(data)d(structures)i(are)d(de\002ned)h(in)g Fy(mom/meta.x)p
FC(,)c(and)k(the)g(library)h(for)e(manipulating)32 b
Fv(M)t(E)t(T)m(A)f FC(data)d(is)f(con-)0 3329 y(tained)e(in)e(the)h
(directory)i Fy(libmeta)p FC(.)143 3443 y Fv(M)t(E)t(T)m(A)e
FC(pro)o(vides)f(tw)o(o)e(basic)h(abstractions:)31 b
Fy(io_file)p FC(s,)19 b(representing)24 b(input)e(\002les,)2822
3410 y Fr(1)2880 3443 y FC(and)g Fy(data_channel)p FC(s,)17
b(repre-)0 3555 y(senting)23 b(separate)g(\223streams\224)f(of)f(data)g
(within)h(a)e(single)i(\002le.)27 b(These)22 b(structures)h(are)e(used)
h(to)f(classify)h(data)g(according)h(to)0 3668 y(their)g(source)h(and)f
(purpose.)30 b(An)22 b Fy(io_file)d FC(is)k(referenced)i(by)d(data)h
(structures)i(that)e(\223arise\224)h(from)e(the)h(input)g(\002le)f
(repre-)0 3781 y(sented)k(by)e(the)g Fy(io_file)e FC(object.)32
b(A)23 b Fy(data_channel)d FC(is)k(used)h(to)f(classify)i(the)e
(results)i(generated)h(by)d(processing)j(the)0 3894 y(input)d
(de\002nitions.)30 b(F)o(or)21 b(e)o(xample,)j(multiple)f(channels)i
(could)f(be)e(used)h(to)g(separate)h(the)f(client-side)i(and)e(serv)o
(er)n(-side)i(C)0 4007 y(declarations)i(that)d(result)h(from)e(a)g
(single)k Fv(I)t(D)t(L)g FC(de\002nition.)141 4121 y(In)c(addition)i
(to)e(the)h(basic)g Fy(io_file)c FC(and)k Fy(data_channel)19
b FC(structures,)27 b Fv(M)t(E)t(T)m(A)g FC(de\002nes)c(structures)j
(for)d(describing)0 4234 y(sets)i(of)g(\002les)f(and)i(channels.)34
b(Sets)25 b(are)f(described)k(by)d Fu(masks)p FC(:)32
b(patterns)26 b(that)g(may)e(be)h(used)g(to)g(\002nd)f(\002les)h(and)g
(channels)0 4347 y(of)e(interest.)0 4646 y Ft(3.2)119
b(MET)-11 b(A)30 b(Data)f(Structur)n(es)0 4855 y FC(The)g(primary)h
(metadata)h(objects)g(are)f(contained)i(within)d(arrays)i(which)f(are)f
(collected)j(under)f(a)d(root)i(object)h(of)e(type)0
4968 y Fy(meta)p FC(:)0 5187 y Fy(struct)46 b(meta)h({)p
0 5253 1560 4 v 105 5308 a Fq(1)134 5340 y Fo(io_file)p
Fp(s)21 b(are)e(not)g(currently)g(used)h(to)f(represent)g(output)h
(\002les.)1905 5568 y FC(33)p eop
%%Page: 34 34
34 33 bop 0 -165 a FC(34)1645 b Fx(CHAPTER)20 b(3.)51
b(MET)-8 b(AD)l(A)e(T)i(A)19 b(\(MET)-8 b(A\))22 b(REPRESENT)-8
b(A)e(TION)382 91 y Fy(io_file)427 b(files<>;)382 204
y(data_channel)187 b(channels<>;)0 317 y(};)0 532 y FC(A)22
b(reference)j(to)e(an)g Fy(io_file)d FC(or)j Fy(data_channel)c
FC(is)k(implemented)i(as)e(an)g(inte)o(ger)h(inde)o(x)g(into)g(the)f
(appropriate)j(array)0 645 y(within)e(a)f Fy(meta)f FC(structure.)0
860 y Fy(typedef)46 b(int)h(io_file_index;)0 973 y(typedef)f(int)h
(data_channel_index;)0 1188 y FC(Other)32 b Fv(M)t(E)t(T)m(A)i
FC(data)d(structures,)j(such)d(as)f(descriptions)k(of)c(\002le)g(and)h
(channel)h(sets,)g(are)e(not)h(stored)h(in)e(the)g(root)h
Fy(meta)0 1301 y FC(structure)26 b(b)n(ut)e(are)g(instead)h(stored)g
(where)f(the)o(y)g(are)f(used.)0 1553 y FA(3.2.1)99 b(Files)0
1728 y FC(Files)24 b(are)f(track)o(ed)j(with)d(the)h
Fy(io_file)d FC(structure:)0 1943 y Fy(struct)46 b(io_file)g({)382
2056 y(string)475 b(id<>;)524 b(/*)47 b(Filename)f(*/)382
2169 y(unsigned)f(int)190 b(flags;)476 b(/*)47 b(Holds)g(the)g(above)f
(flags)g(*/)382 2282 y(int)619 b(references;)236 b(/*)1957
2395 y(*)47 b(How)g(many)g(other)f(files)h(have)f(included)1957
2508 y(*)h(this)g(one)1957 2620 y(*/)382 2733 y(io_file_index)139
b(includes<>;)236 b(/*)47 b(References)e(to)i(included)f(files)g(*/)0
2846 y(};)0 3061 y FC(The)23 b Fy(flags)e FC(\002eld)j(contains)i(a)d
(set)g(of)h(the)g(follo)n(wing)h(v)n(alues:)0 3250 y
Fy(IO_FILE_INPUT)300 3363 y FC(Indicates)h(that)e(the)g
Fy(io_file)d FC(represents)26 b(an)d(input)i(\002le.)0
3556 y Fy(IO_FILE_OUTPUT)300 3669 y FC(Indicates)h(that)e(the)g
Fy(io_file)d FC(represents)26 b(an)d(output)j(\002le.)i
Fu(This)23 b(\003a)o(g)h(is)g(not)f(curr)m(ently)j(used)e(by)g(Flic)n
(k.)0 3862 y Fy(IO_FILE_BUILTIN)300 3975 y FC(Indicates)31
b(that)f(the)f Fy(io_file)d FC(does)k(not)g(correspond)i(to)d(an)o(y)g
(actual)h(\002le.)44 b(Rather)l(,)31 b(data)f(from)f(this)g
(\223\002le\224)g(is)300 4088 y(already)c(b)n(uilt)g(into)f(Flick.)0
4280 y Fy(IO_FILE_ROOT)300 4393 y FC(Indicates)i(that)e(this)g
Fy(io_file)d FC(represents)26 b(the)e(root)i Fv(I)t(D)t(L)h
FC(\002le)22 b(from)i(which)g(all)f(others)i(are)f Fy(#include)p
FC(d.)0 4586 y Fy(IO_FILE_SYSTEM)300 4699 y FC(Indicates)g(that)e(this)
g Fy(io_file)c FC(represents)24 b(a)d(system)h(\002le)f(\(i.e.,)g(a)g
(system)h(header)h(\002le,)e(generally)j Fy(#include)p
FC(d)300 4812 y(with)f Fy(<)t(>)t FC(')-5 b(s\).)141
5001 y(The)31 b(main)f(set)h(of)g Fy(io_file)d FC(objects)33
b(is)e(generated)i(by)e(a)f(Flick)h(front)h(end)g(when)e(it)h
(processes)i(a)e(root)i Fv(I)t(D)t(L)h FC(\002le.)0 5114
y(In)28 b(addition,)k(the)d(front)g(end)g(will)f(create)i(an)o(y)f
(\223b)n(uiltin\224)i(\002les)d(that)h(it)f(needs)i(to)e(indicate)j
(de\002nitions)f(that)f(are)g(kno)n(wn)0 5227 y(a)h(priori)i(to)f(the)g
(front)h(end.)51 b(F)o(or)30 b(e)o(xample,)j(the)g Fv(C)t(O)t(R)t(B)r
(A)e FC(front)h(end)f(\(described)j(in)d(Section)g(10.2\))h(creates)g
(a)e(b)n(uiltin)0 5340 y Fy(io_file)e FC(to)j(represent)i(the)e(source)
h(of)f(the)g(prede\002ned)h Fy(CORBA::Object)27 b FC(interf)o(ace)33
b(type.)51 b(The)30 b(set)h(of)g Fy(io_file)p FC(s)p
eop
%%Page: 35 35
35 34 bop 0 -165 a Fx(3.2.)51 b(MET)-8 b(A)21 b(D)l(A)-10
b(T)i(A)21 b(STR)l(UCTURES)2516 b FC(35)0 91 y(created)27
b(by)e(a)g(front)h(end)f(encodes)i(just)f(about)g(e)n(v)o(erything)h
(that)f(Flick)f(cares)h(about)h(from)e(the)g(\002les,)g(from)g(their)h
(names)0 204 y(to)d(their)i(place\(s\))g(in)f(the)g(inclusion)i(graph.)
141 317 y(The)d Fy(io_file_mask)d FC(structure)25 b(describes)h(a)e
(set)f(of)h Fy(io_file)d FC(objects:)0 531 y Fy(struct)46
b(io_file_mask)f({)382 644 y(unsigned)g(int)190 b(mask_flags;)236
b(/*)47 b(Flags)g(specific)e(to)i(the)g(mask)g(*/)382
757 y(string)475 b(id<>;)524 b(/*)47 b(An)g(identifier)e(to)j(match)e
(*/)382 870 y(unsigned)f(int)190 b(set_flags;)284 b(/*)1957
983 y(*)47 b(Match)g(when)f(all)h(of)g(these)g(flags)f(are)1957
1096 y(*)h(set)g(in)g(the)g(io_file)1957 1209 y(*/)382
1321 y(unsigned)e(int)190 b(unset_flags;)e(/*)1957 1434
y(*)47 b(Match)g(when)f(all)h(of)g(these)g(flags)f(aren't)1957
1547 y(*)h(set)g(in)g(the)g(io_file)1957 1660 y(*/)0
1773 y(};)141 1987 y FC(This)22 b(structure)i(is)e(supposed)i(to)e(be)g
(some)n(what)h(opaque;)h Fy(libmeta)19 b FC(pro)o(vides)24
b(se)n(v)o(eral)f(functions)i(for)d(dealing)h(with)0
2099 y(them.)53 b(The)31 b(construction)k(of)c Fy(io_file_mask)p
FC(s)d(is)j(handled)j(by)d(a)g(tag)h(list)g(function)h(\(see)f(Section)
h(2.3.4\))f(that)g(sets)0 2212 y(all)i(the)g(\002elds)g(and)g(\003ags)f
(based)i(on)f(the)g(tags)g(passed)i(in.)59 b(F)o(or)32
b(e)o(xample,)37 b(the)d(follo)n(wing)h(statement)h(constructs)g(an)0
2325 y Fy(io_file_mask)19 b FC(that)25 b(matches)f(only)h(system)f
(\002les:)382 2539 y Fy(meta_make_file_mask\(FMA_)o(Set)o(Flag)o(s,)42
b(IO_FILE_SYSTEM,)1336 2652 y(FMA_TAG_DONE\);)0 2865
y FC(The)23 b Fy(meta_make_file_mask)18 b FC(function)25
b(is)f(fully)g(described)i(in)e(Section)g(3.3,)f(belo)n(w)-6
b(.)0 3116 y FA(3.2.2)99 b(Channels)0 3290 y FC(Channels)25
b(are)f(described)i(by)e(the)f Fy(data_channel)d FC(structure:)0
3504 y Fy(struct)46 b(data_channel)f({)382 3617 y(io_file_index)521
b(input;)476 b(/*)47 b(input)f(for)h(the)g(channel)f(*/)382
3730 y(string)857 b(id<>;)524 b(/*)47 b(semantic)f(id)h(*/)382
3843 y(unsigned)e(int)572 b(flags;)476 b(/*)47 b(Holds)f(the)h(above)g
(flags)f(*/)382 3956 y(io_file_index)521 b(outputs<>;)284
b(/*)2339 4069 y(*)47 b(List)g(of)g(output)f(files)g(for)2339
4182 y(*)h(the)g(channel)f(\(unused\))2339 4295 y(*/)0
4407 y(};)0 4621 y FC(Note)30 b(that)g(the)g Fy(output)e
FC(\002eld)i(is)f(currently)k(unused,)g(because)e Fy(io_file)p
FC(s)d(are)i(currently)i(used)f(only)g(for)f(input)h(\002les.)0
4734 y(The)23 b(possible)j(\003ags)d(within)h(the)g Fy(flags)e
FC(\002eld)h(are)h(these:)0 4922 y Fy(DATA_CHANNEL_SQUELCHED)300
5035 y FC(Indicates)i(that)e(the)g(channel)h(is)f(squelched:)32
b(nothing)25 b(on)f(this)g(channel)h(should)h(be)d(output.)0
5227 y Fy(DATA_CHANNEL_DECL)300 5340 y FC(Indicates)j(that)e(an)o
(ything)i(on)d(this)h(channel)i(is)d(a)g(declaration.)p
eop
%%Page: 36 36
36 35 bop 0 -165 a FC(36)1645 b Fx(CHAPTER)20 b(3.)51
b(MET)-8 b(AD)l(A)e(T)i(A)19 b(\(MET)-8 b(A\))22 b(REPRESENT)-8
b(A)e(TION)0 91 y Fy(DATA_CHANNEL_IMPL)300 204 y FC(Indicates)26
b(that)e(an)o(ything)i(on)d(this)h(channel)i(is)d(a)g(de\002nition)i
(or)f(implementation.)141 406 y(The)29 b(purpose)j(of)e(a)f(channel)j
(is)e(to)f(describe)j(a)e(data)g(path)g(for)g(some)g(object,)j(thus)d
(allo)n(wing)h(Flick)f(to)g(classify)h(it)0 518 y(and)26
b(determine)h(its)e(origin)i(and)e(destination.)38 b(This)25
b(kno)n(wledge)i(is)e(primarily)i(useful)f(for)g(squelching)k
Fv(I)t(D)t(L)e FC(de\002nitions)0 631 y(that)c(should)h(not)f(appear)h
(in)e(the)h(output.)30 b(F)o(or)23 b(e)o(xample,)h(a)f(Flick)g(back)i
(end)f(may)f(need)h(to)f(suppress)j(de\002nitions)g(and/or)0
744 y(declarations)j(that)d(arise)h(from)g Fv(I)t(D)t(L)i
FC(system)d(header)h(\002les:)33 b(the)26 b(de\002nitions)i(of)d
(system)i(objects)g(may)e(be)h(b)n(uilt)h(into)f(the)0
857 y(tar)n(geted)31 b Fv(R)t(P)t(C)r FC(/)r Fv(R)t(M)t(I)e
FC(runtime)f(library)-6 b(.)38 b(Similarly)-6 b(,)28
b(a)e(user)h(might)g(ask)f(Flick)h(to)f(suppress)j(de\002nitions)f
(that)f(come)f(from)0 970 y Fy(#include)p FC(d)d Fv(I)t(D)t(L)j
FC(\002les,)c(b)n(ut)i(to)f(k)o(eep)h(the)f(corresponding)28
b(declarations.)k(This)23 b(is)g(useful)h(when)g(the)f(included)k
Fv(I)t(D)t(L)f FC(\002les)0 1083 y(are)e(intended)i(to)d(be)h(compiled)
h(separately)-6 b(.)141 1199 y(Similar)24 b(to)f Fy(io_file)p
FC(s,)e(channels)26 b(can)e(be)f(selected)j(with)d(the)h(help)g(of)g(a)
f(mask)g(structure:)0 1432 y Fy(struct)46 b(data_channel_mask)d({)382
1545 y(unsigned)i(int)190 b(mask_flags;)236 b(/*)47 b(Flags)g(for)g
(the)f(mask)h(*/)382 1658 y(io_file_mask)187 b(*input;)428
b(/*)47 b(Input)g(file)f(mask)h(*/)382 1771 y(string)475
b(id<>;)524 b(/*)47 b(ID)g(to)h(match)e(on)h(*/)382 1884
y(unsigned)e(int)190 b(set_flags;)284 b(/*)1957 1997
y(*)47 b(Match)g(when)f(all)h(of)g(these)g(flags)f(are)1957
2110 y(*)h(set)g(in)g(the)g(io_file)1957 2223 y(*/)382
2336 y(unsigned)e(int)190 b(unset_flags;)e(/*)1957 2449
y(*)47 b(Match)g(when)f(all)h(of)g(these)g(flags)f(aren't)1957
2561 y(*)h(set)g(in)g(the)g(io_file)1957 2674 y(*/)0
2787 y(};)0 3100 y Ft(3.3)119 b(The)30 b(MET)-11 b(A)30
b(Library)0 3314 y FC(The)e Fv(M)t(E)t(T)m(A)h FC(library)f(contains)g
(a)e(relati)n(v)o(ely)i(small)e(number)h(of)f(functions)i(of)e
(creating)i(and)f(manipulating)k Fv(M)t(E)t(T)m(A)f FC(data)0
3427 y(structures.)44 b(The)27 b(source)i(code)f(for)g(the)g(library)h
(is)f(in)g(the)f Fy(libmeta)e FC(directory)-6 b(,)31
b(and)d(the)g(library)h(header)h(\002le)d(is)g Fy(mom/)0
3540 y(libmeta.h)p FC(.)e(The)f(v)n(arious)j Fv(M)t(E)t(T)m(A)g
FC(library)e(functions)h(are)e(summarized)h(belo)n(w)-6
b(.)0 3741 y Fy(void)47 b(init_meta\(meta)d(*m\))300
3854 y FC(Initialize)26 b(the)e(gi)n(v)o(en)g Fy(meta)d
FC(structure.)31 b(The)24 b(structure)h(is)f(set)f(to)h(contain)h(no)f
(\002les)f(or)h(channels.)0 4057 y Fy(void)47 b(check_meta\(meta)c
(*m\))300 4170 y FC(Check)19 b(that)g(the)f(gi)n(v)o(en)h
Fy(meta)e FC(structure)j(is)f(well-formed.)28 b(This)18
b(function)j(uses)e Fy(assert)d FC(to)i(v)o(erify)h(the)g(contents)300
4283 y(of)k(the)h(structure.)0 4486 y Fy(void)47 b(print_meta\(meta)c
(*m,)51 b(FILE)c(*file,)j(int)d(indent\))300 4599 y FC(Pretty-print)26
b(the)e(gi)n(v)o(en)g Fy(meta)d FC(structure)26 b(to)e(the)g(gi)n(v)o
(en)g(\002le,)e(using)j(the)f(speci\002ed)h(initial)g(indentation)h(v)n
(alue.)0 4800 y(The)d(follo)n(wing)i(functions)h(are)e(useful)h(for)f
(manipulating)i(\002les:)0 5001 y Fy(io_file_index)44
b(meta_add_file\(meta)f(*m,)51 b(const)46 b(char)h(*id,)k(int)c
(flags\))300 5114 y FC(If)20 b(the)h(gi)n(v)o(en)g Fy(meta)d
FC(contains)23 b(an)d Fy(io_file)e FC(with)i(the)g(speci\002ed)i
Fy(id)d FC(and)i Fy(flags)p FC(,)d(return)k(the)f(inde)o(x)g(of)f(that)
h(\002le.)300 5227 y(Otherwise,)30 b(create)f(a)f(ne)n(w)f
Fy(io_file)e FC(within)k Fy(m)p FC(,)f(initialize)i(it,)f(and)f(return)
i(the)e(inde)o(x)h(of)f(the)g(ne)n(wly)h(created)300
5340 y(\002le.)p eop
%%Page: 37 37
37 36 bop 0 -165 a Fx(3.3.)51 b(THE)22 b(MET)-8 b(A)21
b(LIBRAR)-6 b(Y)2755 b FC(37)0 63 y Fy(io_file_index)44
b(meta_find_file\(meta)f(*m,)51 b(const)46 b(char)h(*id,)k(int)46
b(flags,)51 b(int)0 176 y(absolute_path\))300 289 y FC(Find)23
b(a)g(\002le)g(in)g(the)h(gi)n(v)o(en)g Fy(meta)d FC(structure.)31
b(If)23 b Fy(id)f FC(is)i(null,)f(then)h(match)g(only)g(the)g
Fy(flags)p FC(;)e(similarly)-6 b(,)24 b(if)f Fy(flags)300
402 y FC(is)30 b(zero,)i(match)e(only)h(on)f Fy(id)p
FC(.)46 b(The)30 b Fy(absolute_path)25 b FC(ar)n(gument)32
b(determines)g(whether)f Fy(id)d FC(is)i(an)g(absolute)300
515 y(\002le)25 b(name)i(or)f(just)g(the)h(\002le)e(part)i(\(i.e.,)f
(non-directory)k(part\))c(of)g(the)h(name.)36 b(Return)27
b(the)f(inde)o(x)h(of)f(the)g(located)300 628 y Fy(io_file)21
b FC(or)i Fy(-)t(1)g FC(if)g(no)h(such)g(\002le)f(e)o(xists.)0
817 y Fy(void)47 b(meta_include_file\(meta)41 b(*m,)51
b(io_file_index)45 b(file,)50 b(io_file_index)44 b(included_file\))300
930 y FC(Record)24 b(the)g(f)o(act)g(that)g(the)g(\002le)f(at)g(inde)o
(x)i Fy(file)c FC(includes)26 b(the)e(\002le)f(at)g(inde)o(x)i
Fy(included_file)p FC(.)0 1120 y Fy(void)47 b(meta_check_file\(meta)42
b(*m,)51 b(io_file_index)44 b(file\))300 1233 y FC(Check)26
b(the)h(inte)o(grity)g(of)f(the)g Fy(io_file)e FC(at)h(the)i(gi)n(v)o
(en)f(inde)o(x)h(in)f Fy(m)p FC(.)35 b(Errors)26 b(are)g(reported)i(as)
e Fy(assert)d FC(f)o(ailures)300 1346 y(\(i.e.,)g(core)h(dumps\).)0
1535 y Fy(void)47 b(meta_print_file\(meta)42 b(*m,)51
b(FILE)c(*file,)j(int)d(indent,)j(io_file_index)44 b(idx\))300
1648 y FC(Pretty-print)26 b(the)e Fy(io_file)d FC(at)i(the)h(gi)n(v)o
(en)g(inde)o(x.)29 b(The)23 b(initial)i(indentation)i(le)n(v)o(el)d(is)
f(speci\002ed)i(by)f Fy(indent)p FC(.)0 1838 y Fy(io_file_mask)44
b(meta_make_file_mask\(int)e(tag,)51 b(...\))300 1951
y FC(Create)37 b(and)h(return)g(an)f Fy(io_file_mask)c
FC(structure,)42 b(initialized)e(according)f(to)e(the)g(tag)g(list)h
(gi)n(v)o(en)f(in)g(the)300 2064 y(function)d(ar)n(guments.)54
b(\(T)-7 b(ag)31 b(list)g(functions)j(are)e(described)i(in)d(Section)h
(2.3.4.\))53 b(A)30 b(mask)h(de\002nes)h(a)f Fu(matc)o(h)300
2177 y(set)25 b FC(of)f Fy(io_file)d FC(patterns;)k(a)e(particular)j
Fy(io_file)21 b FC(can)j(be)g(compared)h(to)e(an)h Fy(io_file_mask)19
b FC(to)k(determine)300 2290 y(if)29 b(the)g Fy(io_file)d
FC(meets)k(the)f(criteria)i(speci\002ed)f(by)f(the)h(mask,)g(and)f(is)g
(therefore)i(a)e(member)g(of)g(the)g(mask')-5 b(s)300
2402 y(match)24 b(set.)300 2556 y(The)f(tags)h(and)g(associated)j(tag)c
(v)n(alues)i(for)f(the)g Fy(meta_make_file_mask)17 b
FC(function)26 b(are)e(these:)300 2746 y Fy(FMA_TAG_DONE)600
2859 y FC(\(No)f(required)j(tag)e(v)n(alues.\))30 b(Marks)24
b(the)g(end)g(of)f(the)h(tag)g(list.)300 3028 y Fy(FMA_MatchesID)600
3141 y FC(\(Required)39 b(tag)e(v)n(alues:)58 b Fy(char)47
b(*)p FC(.\))69 b(Speci\002es)37 b(that)h(the)g(match)f(set)h(should)h
Fu(include)g Fy(io_file)p FC(s)600 3254 y(whose)32 b(complete)i(\002le)
d(names)h(match)h(the)f(gi)n(v)o(en)g(string.)56 b(Matching)33
b(is)f(done)h(with)e Fy(strcmp)f FC(\(i.e.,)600 3366
y(e)o(xact)24 b(string)h(matching\).)300 3535 y Fy(FMA_ExcludesID)600
3648 y FC(\(Required)38 b(tag)f(v)n(alues:)57 b Fy(char)47
b(*)p FC(.\))67 b(Speci\002es)37 b(that)g(the)g(match)g(set)g(should)h
Fu(e)n(xclude)h Fy(io_file)p FC(s)600 3761 y(whose)24
b(complete)h(\002le)e(names)h(match)g(the)g(gi)n(v)o(en)g(string.)300
3930 y Fy(FMA_MatchesDirID)600 4043 y FC(\(Required)39
b(tag)e(v)n(alues:)58 b Fy(char)47 b(*)p FC(.\))69 b(Speci\002es)37
b(that)h(the)g(match)f(set)h(should)h Fu(include)g Fy(io_file)p
FC(s)600 4156 y(containing)27 b(\002le)22 b(names)i(with)g(directory)i
(portions)f(that)g(match)e(the)h(gi)n(v)o(en)g(string.)300
4325 y Fy(FMA_ExcludesDirID)600 4438 y FC(\(Required)38
b(tag)f(v)n(alues:)57 b Fy(char)47 b(*)p FC(.\))67 b(Speci\002es)37
b(that)g(the)g(match)g(set)g(should)h Fu(e)n(xclude)h
Fy(io_file)p FC(s)600 4551 y(containing)27 b(\002le)22
b(names)i(with)g(directory)i(portions)f(that)g(match)e(the)h(gi)n(v)o
(en)g(string.)300 4719 y Fy(FMA_MatchesFileID)600 4832
y FC(\(Required)39 b(tag)e(v)n(alues:)58 b Fy(char)47
b(*)p FC(.\))69 b(Speci\002es)37 b(that)h(the)g(match)f(set)h(should)h
Fu(include)g Fy(io_file)p FC(s)600 4945 y(containing)27
b(\002le)22 b(names)i(with)g(\002le)f(\(non-directory\))28
b(portions)e(that)e(match)g(the)f(gi)n(v)o(en)h(string.)300
5114 y Fy(FMA_ExcludesFileID)600 5227 y FC(\(Required)38
b(tag)f(v)n(alues:)57 b Fy(char)47 b(*)p FC(.\))67 b(Speci\002es)37
b(that)g(the)g(match)g(set)g(should)h Fu(e)n(xclude)h
Fy(io_file)p FC(s)600 5340 y(containing)27 b(\002le)22
b(names)i(with)g(\002le)f(\(non-directory\))28 b(portions)e(that)e
(match)g(the)f(gi)n(v)o(en)h(string.)p eop
%%Page: 38 38
38 37 bop 0 -165 a FC(38)1645 b Fx(CHAPTER)20 b(3.)51
b(MET)-8 b(AD)l(A)e(T)i(A)19 b(\(MET)-8 b(A\))22 b(REPRESENT)-8
b(A)e(TION)300 91 y Fy(FMA_SetFlags)600 204 y FC(\(Required)35
b(tag)e(v)n(alues:)49 b Fy(unsigned)d(int)p FC(.\))55
b(Speci\002es)33 b(that)h(the)f(match)g(set)h(should)g(include)h
Fy(io_)600 317 y(file)p FC(s)23 b(in)i(which)g(the)f(speci\002ed)i
(\003ags)f(are)g(set.)32 b(Additional)26 b(\003ags)f
Fu(may)f FC(be)h(set)f(in)h(the)g Fy(io_file)p FC(,)d(b)n(ut)600
430 y(only)i(the)g(speci\002ed)h(\003ags)f(are)f Fu(r)m(equir)m(ed)28
b FC(to)23 b(be)h(set.)300 619 y Fy(FMA_UnsetFlags)600
732 y FC(\(Required)35 b(tag)e(v)n(alues:)49 b Fy(unsigned)d(int)p
FC(.\))55 b(Speci\002es)33 b(that)h(the)f(match)g(set)h(should)g
(include)h Fy(io_)600 845 y(file)p FC(s)22 b(in)h(which)h(the)g
(speci\002ed)h(\003ags)f(are)f(unset.)300 1062 y(An)30
b Fy(io_file_mask)d FC(can)k(specify)i(at)d(most)h(one)h(\002le)e(name)
h(matching)h(function:)46 b(in)31 b(other)h(w)o(ords,)h(do)e(not)300
1175 y(specify)24 b(more)e(than)h(one)g(of)f(the)h(abo)o(v)o(e)f(\223)p
Fy(ID)p FC(\224)g(tags)h(when)f(creating)i(a)e(mask.)29
b(In)22 b(contrast,)i(an)e Fy(io_file_mask)300 1288 y
FC(can)i(specify)h(matching)g(against)g(both)f(set)g(and)g(unset)h
(\003ags.)0 1505 y Fy(int)47 b(meta_match_file_mask\(met)o(a)42
b(*m,)51 b(io_file_mask)44 b(*ifm,)51 b(io_file_index)44
b(file\))300 1618 y FC(Compare)24 b(the)g(speci\002ed)g
Fy(io_file)d FC(\(i.e.,)i(the)g(\002le)g(at)g(inde)o(x)i
Fy(file)c FC(in)j Fy(m)p FC(\))e(against)j(the)f(gi)n(v)o(en)g
Fy(io_file_mask)p FC(.)300 1731 y(Return)31 b(a)e(non-zero)k(v)n(alue)e
(if)f(the)g(\002le)g(matches)h(the)f(mask)h(\227)e(meaning)i(that)g
(the)f(\002le)g(is)g(a)g(member)g(of)g(the)300 1844 y(mask')-5
b(s)24 b(match)g(set)g(\227)f(and)h(zero)g(if)f(it)g(does)i(not)f
(match.)0 2061 y Fy(void)47 b(meta_squelch_file\(meta)41
b(*m,)51 b(io_file_index)45 b(file,)50 b(data_channel_mask)43
b(*dcm\))300 2174 y FC(Squelch)26 b(a)f(set)h(of)f(data)h(channels)i
(that)d(come)h(from)f(the)h(speci\002ed)g(\002le)f Fu(and)h(fr)l(om)f
(all)h(\002les)g(that)g(ar)m(e)f(included)300 2287 y(by)c(that)h
(\002le)p FC(.)28 b(The)21 b(squelched)j(channels)f(are)f(those)g(that)
g(match)f Fy(dcm)p FC(.)26 b(When)c(a)f(channel)i(is)e(\223squelched,)
-6 b(\224)24 b(Flick)300 2400 y(will)f(not)h(produce)i(output)f(from)e
(data)h(structures)j(that)d(refer)g(to)f(that)h(channel.)0
2617 y Fy(void)47 b(meta_squelch_files\(meta)41 b(*m,)51
b(io_file_mask)45 b(*ifm,)50 b(data_channel_mask)43 b(*dcm\))300
2730 y FC(Apply)32 b Fy(meta_squelch_file)26 b FC(to)32
b(all)g(of)f(the)h(\002les)g(in)f Fy(m)g FC(that)h(match)g
Fy(ifm)p FC(.)51 b(The)32 b(squelched)i(channels)g(are)300
2843 y(those)25 b(that)f(match)g Fy(dcm)p FC(.)0 3060
y Fy(void)47 b(meta_print_file_mask\(FI)o(LE)42 b(*file,)50
b(int)d(indent,)j(io_file_mask)44 b(*ifm\))300 3173 y
FC(Pretty-print)26 b(the)e(gi)n(v)o(en)g Fy(io_file_mask)p
FC(.)0 3391 y(The)f(follo)n(wing)i(functions)h(are)e(useful)h(for)f
(manipulating)i(\002les:)0 3609 y Fy(data_channel_index)43
b(meta_add_channel\(meta)f(*m,)51 b(io_file_index)44
b(input,)50 b(const)d(char)f(*id\))300 3722 y FC(Create)21
b(a)f(ne)n(w)g Fy(data_channel)d FC(within)k Fy(m)p FC(.)27
b(The)20 b(ne)n(w)g(channel)j(has)e(the)g(gi)n(v)o(en)g
Fy(id)e FC(and)i(refers)h(to)f(the)g(indicated)300 3834
y Fy(io_file)p FC(.)26 b(Return)e(the)g(inde)o(x)g(of)g(the)g(ne)n(wly)
f(created)i(channel.)0 4030 y Fy(data_channel_index)43
b(meta_find_channel\(meta)f(*m,)51 b(io_file_index)44
b(input,)50 b(const)c(char)0 4143 y(*id,)51 b(int)c(flags\))300
4256 y FC(Find)33 b(a)f(channel)i(in)f(the)g(gi)n(v)o(en)g
Fy(meta)e FC(structure)k(with)d(the)h(gi)n(v)o(en)g(attrib)n(utes,)38
b(and)33 b(return)h(the)f(inde)o(x)g(of)g(the)300 4369
y(located)25 b(channel.)31 b(If)23 b(no)h(such)g(channel)i(e)o(xists,)e
(return)h Fy(-)t(1)p FC(.)0 4558 y Fy(void)47 b
(meta_add_channel_output)o(\(met)o(a)42 b(*m,)51 b(data_channel_index)
43 b(channel,)49 b(io_file_index)0 4671 y(output\))300
4784 y FC(Add)28 b(an)h(output)h(\002le)e(to)g(the)h(speci\002ed)h
(channel.)45 b Fu(Because)30 b Fl(io_)15 b(file)g Fu(s)28
b(ar)m(e)g(curr)m(ently)j(used)e(only)g(for)g(input)300
4897 y(\002les,)24 b(this)g(function)i(is)d(unused.)0
5114 y Fy(void)47 b(meta_check_channel\(meta)41 b(*m,)51
b(data_channel_index)43 b(channel\))300 5227 y FC(Check)30
b(the)f(inte)o(grity)i(of)e(the)h Fy(data_channel)25
b FC(at)k(the)g(gi)n(v)o(en)h(inde)o(x)g(in)f Fy(m)p
FC(.)44 b(Errors)30 b(are)f(reported)j(as)d Fy(assert)300
5340 y FC(f)o(ailures)c(\(i.e.,)e(core)h(dumps\).)p eop
%%Page: 39 39
39 38 bop 0 -165 a Fx(3.3.)51 b(THE)22 b(MET)-8 b(A)21
b(LIBRAR)-6 b(Y)2755 b FC(39)0 63 y Fy(void)47 b
(meta_print_channel\(meta)41 b(*m,)51 b(FILE)c(*file,)j(int)d(indent,)j
(data_channel_index)0 176 y(channel\))300 289 y FC(Pretty-print)38
b(the)f Fy(data_channel)32 b FC(at)j(the)i(gi)n(v)o(en)f(inde)o(x.)67
b(The)36 b(initial)h(indentation)j(le)n(v)o(el)c(is)g(speci\002ed)h(by)
300 402 y Fy(indent)p FC(.)0 616 y Fy(data_channel_mask)43
b(meta_make_channel_mask\(in)o(t)f(tag,)50 b(...\))300
728 y FC(Create)25 b(and)h(return)g(a)f Fy(data_channel)20
b FC(structure,)28 b(initialized)f(according)h(to)d(the)g(tag)g(list)h
(gi)n(v)o(en)f(in)g(the)g(func-)300 841 y(tion)c(ar)n(guments.)29
b(A)19 b(mask)h(de\002nes)h(a)e Fu(matc)o(h)h(set)i FC(of)d
Fy(data_channel)d FC(patterns;)23 b(a)d(particular)i
Fy(data_channel)300 954 y FC(can)28 b(be)g(compared)i(to)e(a)f
Fy(data_channel_mask)c FC(to)28 b(determine)h(if)f(the)g
Fy(data_channel)c FC(meets)k(the)h(criteria)300 1067
y(speci\002ed)c(by)f(the)f(mask,)h(and)g(is)f(therefore)j(a)d(member)h
(of)f(the)h(mask')-5 b(s)24 b(match)g(set.)300 1231 y(The)f(tags)h(and)
g(associated)j(tag)c(v)n(alues)i(for)f(the)g Fy(meta_make_channel_mask)
16 b FC(function)26 b(are)e(these:)300 1444 y Fy(CMA_TAG_DONE)600
1557 y FC(\(No)f(required)j(tag)e(v)n(alues.\))30 b(Marks)24
b(the)g(end)g(of)f(the)h(tag)g(list.)300 1744 y Fy(CMA_MatchesInput)600
1857 y FC(\(Required)k(tag)e(v)n(alues:)36 b Fy(io_file_mask)p
FC(.\))c(Speci\002es)27 b(that)g(the)f(match)g(set)h(should)g
Fu(include)h Fy(data_)600 1970 y(channel)p FC(s)21 b(that)j(refer)h(to)
e(input)i(\002les)e(matching)i(the)f(speci\002ed)h Fy(io_file_mask)p
FC(.)300 2156 y Fy(CMA_ExcludesInput)600 2269 y FC(\(Required)i(tag)f
(v)n(alues:)34 b Fy(io_file_mask)p FC(.\))d(Speci\002es)26
b(that)g(the)g(match)g(set)g(should)h Fu(e)n(xclude)g
Fy(data_)600 2382 y(channel)p FC(s)21 b(that)j(refer)h(to)e(input)i
(\002les)e(matching)i(the)f(speci\002ed)h Fy(io_file_mask)p
FC(.)300 2568 y Fy(CMA_MatchesID)600 2681 y FC(\(Required)20
b(tag)f(v)n(alues:)29 b Fy(char)46 b(*)p FC(.\))26 b(Speci\002es)20
b(that)f(the)g(match)g(set)g(should)h Fu(include)h Fy(data_channel)p
FC(s)600 2794 y(whose)27 b Fy(id)f FC(\002eld)h(matches)h(the)f(gi)n(v)
o(en)g(string.)40 b(Matching)29 b(is)d(done)i(with)f
Fy(strcmp)d FC(\(i.e.,)j(e)o(xact)h(string)600 2907 y(matching\).)300
3094 y Fy(CMA_ExcludesID)600 3206 y FC(\(Required)20
b(tag)e(v)n(alues:)28 b Fy(char)47 b(*)p FC(.\))26 b(Speci\002es)18
b(that)h(the)f(match)h(set)f(should)i Fu(e)n(xclude)g
Fy(data_channel)p FC(s)600 3319 y(whose)k Fy(id)e FC(\002eld)i(matches)
g(the)g(gi)n(v)o(en)g(string.)300 3506 y Fy(CMA_SetFlags)600
3619 y FC(\(Required)k(tag)e(v)n(alues:)36 b Fy(unsigned)45
b(int)p FC(.\))35 b(Speci\002es)27 b(that)g(the)f(match)g(set)h(should)
g(include)h Fy(data_)600 3732 y(channel)p FC(s)h(in)i(which)h(the)f
(speci\002ed)i(\003ags)e(are)g(set.)53 b(Additional)33
b(\003ags)e Fu(may)g FC(be)g(set)h(in)f(the)g Fy(data_)600
3845 y(channel)p FC(,)21 b(b)n(ut)j(only)g(the)g(speci\002ed)h(\003ags)
e(are)h Fu(r)m(equir)m(ed)j FC(to)d(be)f(set.)300 4031
y Fy(CMA_UnsetFlags)600 4144 y FC(\(Required)28 b(tag)e(v)n(alues:)36
b Fy(unsigned)45 b(int)p FC(.\))35 b(Speci\002es)27 b(that)g(the)f
(match)g(set)h(should)g(include)h Fy(data_)600 4257 y(channel)p
FC(s)21 b(in)j(which)g(the)f(speci\002ed)i(\003ags)f(are)f(unset.)0
4449 y Fy(int)47 b(meta_match_channel_mask\()o(meta)41
b(*m,)51 b(data_channel_mask)43 b(*dcm,)51 b(data_channel_index)0
4562 y(channel\))300 4675 y FC(Compare)29 b(the)f(speci\002ed)i
Fy(data_channel)24 b FC(\(i.e.,)29 b(the)g(channel)h(at)e(inde)o(x)h
Fy(channel)d FC(in)i Fy(m)p FC(\))f(against)j(the)f(gi)n(v)o(en)300
4788 y Fy(data_channel_mask)p FC(.)40 b(Return)30 b(a)f(non-zero)i(v)n
(alue)f(if)f(the)g(channel)i(matches)f(the)g(mask)f(\227)f(i.e.,)i(is)f
(in)g(the)300 4900 y(mask')-5 b(s)24 b(match)g(set)g(\227)f(and)h(zero)
g(if)f(it)g(does)i(not.)0 5114 y Fy(void)47 b(meta_squelch_channel\(me)
o(ta)42 b(*m,)51 b(data_channel_index)42 b(channel\))300
5227 y FC(Mark)29 b(the)h(indicated)h(channel)g(as)f(squelched.)48
b(When)29 b(a)g(channel)i(is)e(\223squelched,)-6 b(\224)34
b(Flick)29 b(will)g(not)g(produce)300 5340 y(output)c(from)f(data)g
(structures)i(that)e(refer)g(to)g(that)g(channel.)p eop
%%Page: 40 40
40 39 bop 0 -165 a FC(40)1645 b Fx(CHAPTER)20 b(3.)51
b(MET)-8 b(AD)l(A)e(T)i(A)19 b(\(MET)-8 b(A\))22 b(REPRESENT)-8
b(A)e(TION)0 91 y Fy(void)47 b(meta_squelch_channels\(m)o(eta)41
b(*m,)51 b(data_channel_mask)43 b(mask\))300 204 y FC(Squelch)25
b(all)e(of)h(the)g(channels)h(in)f Fy(m)e FC(that)i(match)g(the)g(gi)n
(v)o(en)g Fy(data_channel_mask)p FC(.)0 395 y Fy(void)47
b(meta_print_channel_mask)o(\(FIL)o(E)42 b(*file,)50
b(int)d(indent,)j(data_channel_mask)43 b(dcm\))300 508
y FC(Pretty-print)26 b(the)e(gi)n(v)o(en)g Fy(data_channel_mask)p
FC(.)0 801 y Ft(3.4)119 b(Summary)30 b(and)g(Comments)0
1008 y FC(In)j(retrospect,)k(it)32 b(is)h(apparent)i(that)e(the)g
(concept)i(of)d(a)g Fy(data_channel)d FC(could)34 b(be)f(generalized)j
(to)c(encompass)j(the)0 1121 y(abilities)25 b(of)d(an)h
Fy(io_file)d FC(structure.)31 b(Currently)-6 b(,)24 b(the)f(only)h
(real)f(dif)n(ference)i(between)f(the)f(tw)o(o)f(structures)k(is)c
(that)i(a)e(\002le)0 1234 y(can)g(ha)n(v)o(e)g(multiple)h(inputs)f
(\227)f(the)h(included)h(\002les)e(\227)g(b)n(ut)h(that)g(a)f(channel)i
(can)f(ha)n(v)o(e)g(only)g(one.)29 b(By)20 b(allo)n(wing)j(channels)0
1347 y(to)f(ha)n(v)o(e)h(multiple)g(inputs,)g(Flick)g(might)f(be)g
(able)h(to)f(e)o(xpress)h(the)f(inclusion)j(\002le)c(graph)j(as)e(well)
f(as)h(other)h(dependencies)0 1460 y(between)i(channels.)p
eop
%%Page: 41 41
41 40 bop 0 714 a Fw(Chapter)44 b(4)0 1129 y FB(Abstract)51
b(Object)f(Interface)h(\(A)-9 b(OI\))0 1378 y(Repr)l(esentation)0
1823 y FC(The)29 b(Abstract)h(Object)f(Interf)o(ace)j(\()r
Fv(AO)t(I)r FC(,)e(pronounced)i(\223o)n(w-ee\224\))e(is)f(a)g(set)g(of)
g(data)h(structures)h(designed)h(to)d(represent)0 1936
y(parsed)23 b Fv(I)t(D)t(L)e FC(\002les.)27 b(Most)20
b(of)f(Flick')-5 b(s)19 b(front)h(ends)g(\227)f(all)g(b)n(ut)g(the)j
Fv(M)t(I)t(G)f FC(front)f(end)g(\227)e(con)l(v)o(ert)23
b Fv(I)t(D)t(L)f FC(into)f Fv(AO)t(I)g FC(and)f(then)g(sa)n(v)o(e)0
2049 y(the)h(resultant)26 b Fv(AO)t(I)d FC(to)e(disk.)28
b(This)21 b(pro)o(vides)i(a)e(le)n(v)o(el)g(of)g(abstraction)k(between)
d(Flick')-5 b(s)22 b(front)g(ends,)g(which)f(simply)h(parse)2
2162 y Fv(I)t(D)t(L)r FC(,)40 b(and)c(Flick')-5 b(s)37
b(presentation)i(generators,)j(which)36 b(map)g(interf)o(ace)i
(speci\002cations)h(onto)e(speci\002c)g(programming)0
2275 y(language)26 b(constructs.)0 2566 y Ft(4.1)119
b(A)-5 b(OI)29 b(Ov)o(er)o(view)0 2773 y FC(The)c Fv(AO)t(I)h
FC(format)e(is)f(intended)j(to)d(satisfy)i(the)f(follo)n(wing)h(goals:)
136 2978 y Fs(\017)46 b Fz(Cleanly)26 b(r)n(epr)n(esent)h(object)f
(interfaces)h(in)e(abstract)i(terms.)37 b Fv(AO)t(I)27
b FC(w)o(as)f(designed)i(to)d(represent)j(object)f(inter)n(-)227
3091 y(f)o(aces)k(and)h Fv(I)t(D)t(L)r FC(s)f(in)e(approximately)k(the)
d(w)o(ay)f(humans)i(design)g(and)f(think)h(about)f(them,)h(irrespecti)n
(v)o(e)h(of)e(ho)n(w)227 3204 y(the)o(y)e(may)e(boil)i(do)n(wn)f(in)g
(implementation.)41 b(F)o(or)26 b(e)o(xample,)31 b Fv(AO)t(I)e
FC(supports)g(separate)g(notions)g(of)e(object)h(meth-)227
3317 y(ods,)f(attrib)n(utes,)i(and)e(e)o(xceptions,)i(since)e(people)h
(tend)f(to)f(think)h(of)f(these)h(as)f(separate)i(concepts,)h(e)n(v)o
(en)d(though)227 3430 y(all)e(of)f(these)i(are)f(lik)o(ely)h(to)e
(become)h(simply)h(\223messages\224)h(e)n(v)o(entually)-6
b(.)136 3615 y Fs(\017)46 b Fz(Support)36 b(the)g(featur)n(es)i(a)n(v)o
(ailable)h(in)c(typical)j(existing)i Fk(I)t(D)t(L)r Fz(s.)71
b Fv(AO)t(I)39 b FC(should)f(be)f(well)g(matched)h(to)e(man)o(y)227
3728 y(e)o(xisting)f Fv(I)t(D)t(L)r FC(s,)f(partly)e(in)f(order)h(to)f
(ful\002ll)g(the)g(abo)o(v)o(e)g(goal)h(\(e)o(xamining)h(a)e(range)h
(of)e(e)o(xisting)35 b Fv(I)t(D)t(L)r FC(s)d(helps)g(to)227
3841 y(identify)f(\223the)f(w)o(ay)f(humans)h(design)g(and)g(think)g
(about)g(them\224\))g(and)g(partly)g(to)f(support)i(the)e(practical)i
(goal)f(of)227 3954 y(being)25 b(able)f(to)g(write)f(front)i(ends)f
(that)g(con)l(v)o(ert)h(human-readable)30 b Fv(I)t(D)t(L)c
FC(\002les)d(into)k Fv(AO)t(I)e FC(format.)136 4139 y
Fs(\017)46 b Fz(Lea)n(v)o(e)31 b(out)f(highly)g(language-speci\002c)i
(or)f(pr)n(esentation-r)n(elated)j(constructs.)50 b FC(Some)32
b Fv(I)t(D)t(L)r FC(s)f(are)g(cluttered)227 4252 y(with)22
b(features)j(that)e(are)f(of)g(little)i(or)e(no)g(importance)j(to)d
(the)h(abstract)j Fv(R)t(P)t(C)e FC(interf)o(ace,)h(such)e(as)f
(pointer)i(attrib)n(utes)227 4365 y(in)31 b Fv(D)t(C)t(E)g
FC(or)d(translation)k(types)e(in)g Fv(M)t(I)t(G)r FC(.)44
b(These)29 b(\223annotations\224)k(describe)e(ho)n(w)d(an)h(interf)o
(ace)h(is)f(to)g(be)f(mapped)227 4477 y(onto)i(a)e(programming)j
(language:)42 b(in)29 b(Flick,)h(the)f(goal)g(is)g(to)g(separate)i(the)
e(notions)h(of)f(abstract)i(interf)o(ace)g(and)227 4590
y(language)e(mapping,)g(in)d(order)i(to)e(pro)o(vide)j(maximum)d(\003e)
o(xibility)-6 b(.)40 b(Therefore,)30 b Fv(AO)t(I)f FC(is)d(designed)j
(to)e(represent)227 4703 y(interf)o(aces)e(in)d(abstract)i(terms)e
(only)-6 b(,)23 b(e)o(xcluding)i(an)o(y)d(presentation-le)n(v)o(el)27
b(\223cruft.)-6 b(\224)30 b(\(T)-7 b(o)21 b(preserv)o(e)j(annotations)h
(in)227 4816 y(an)31 b Fv(I)t(D)t(L)g FC(\002le,)e(one)g(must)g(con)l
(v)o(ert)j Fv(I)t(D)t(L)f FC(directly)g(into)e(a)f(representation)33
b(that)c(describes)i(presentation:)43 b(namely)-6 b(,)229
4929 y Fv(P)t(R)t(E)t(S)p 421 4929 28 4 v 40 w(C)r FC(.)28
b(This)23 b(is)g(ho)n(w)g(Flick')-5 b(s)27 b Fv(M)t(I)t(G)e
FC(front)g(end)f(operates;)i(see)d(Section)i(10.4)f(for)f(further)j
(details.\))136 5114 y Fs(\017)46 b Fz(Cr)n(eate)24 b(similar)g(r)n
(epr)n(esentations)i(f)n(or)d(equi)o(v)o(alent)j Fk(I)t(D)t(L)f
Fz(constructs.)30 b FC(By)22 b(translating)k(equi)n(v)n(alent)f
(constructs)227 5227 y(from)36 b(dif)n(ferent)k Fv(I)t(D)t(L)r
FC(s)d(into)g(similar)f(or)g(identical)41 b Fv(AO)t(I)c
FC(representations,)46 b Fv(AO)t(I)38 b FC(acts)e(as)g(a)f(kind)i(of)f
(multi-)r Fv(I)t(D)t(L)227 5340 y FC(pseudo-language.)43
b(This)27 b(mak)o(es)g(writing)g(later)h(pieces)g(of)e(Flick)h(much)g
(simpler)-5 b(.)39 b(F)o(or)25 b(instance,)k(by)e(making)h(a)1905
5568 y(41)p eop
%%Page: 42 42
42 41 bop 0 -165 a FC(42)877 b Fx(CHAPTER)20 b(4.)51
b(ABSTRA)l(CT)20 b(OBJECT)h(INTERF)-7 b(A)l(CE)21 b(\(A)-5
b(OI\))23 b(REPRESENT)-8 b(A)e(TION)229 91 y Fv(C)t(O)t(R)t(B)r(A)24
b(I)t(D)t(L)g Fy(interface)17 b FC(appear)23 b(similar)e(to)g(an)i
Fv(O)t(N)t(C)h(R)t(P)t(C)h(I)t(D)t(L)f Fy(version)p FC(,)18
b(the)j(code)h(to)f(map)g(these)g(notions)i(to)227 204
y(programming)28 b(languages)f(is)e(also)h(similar)-5
b(.)35 b(This,)25 b(in)g(turn,)h(helps)g(to)f(promote)h(mix-and-match)i
(combinations)227 317 y(of)33 b(Flick')-5 b(s)34 b(front)g(ends)g(and)g
(presentation)j(generators.)60 b(\(See)33 b(Section)h(2.1,)i(ho)n(we)n
(v)o(er)l(,)g(for)d(comments)h(about)227 430 y(mix)o(ed)26
b Fv(I)t(D)t(L)r FC(/presentation)j(combinations.\))141
652 y(Finally)-6 b(,)32 b(because)h Fv(AO)t(I)e FC(acts)f(as)g(the)f
(interf)o(ace)j(between)e(Flick')-5 b(s)31 b(front)f(ends)g(and)g
(presentation)j(generators,)i Fv(AO)t(I)0 765 y FC(w)o(as)23
b(designed)j(to)e(be)f(simple,)h(and)g(easily)h(written)f(to)g(and)g
(read)g(from)f(disk.)0 1068 y Ft(4.2)119 b(A)-5 b(OI)29
b(Data)h(Structur)n(es)0 1279 y FC(Because)g Fv(AO)t(I)f
FC(is)d(written)i(to)f(and)g(read)h(from)e(\002les,)i(the)h
Fv(AO)t(I)g FC(format)e(is)g(de\002ned)g(using)h(the)i
Fv(O)t(N)t(C)g(R)t(P)t(C)h(I)t(D)t(L)r FC(.)39 b(The)27
b(data)0 1392 y(structures)i(are)e(de\002ned)h(in)e Fy(mom/aoi.x)p
FC(;)f(this)i(\002le)f(is)h(processed)i(by)e Fy(rpcgen)d
FC(when)j(Flick)g(is)f(compiled)3445 1359 y Fr(1)3511
1392 y FC(to)g(produce)0 1504 y(functions)f(that)e(write)f(and)h(read)i
Fv(AO)t(I)g FC(data)e(to)f(and)h(from)f(\002les.)28 b(Other)23
b(functions)i(for)d(manipulating)28 b Fv(AO)t(I)c FC(structures)h(are)0
1617 y(de\002ned)f(in)g(the)i Fv(AO)t(I)f FC(library)-6
b(,)25 b(which)f(is)f(contained)j(the)e Fy(libaoi)d FC(directory)-6
b(.)141 1732 y(The)22 b(root)h(of)f(an)i Fv(AO)t(I)g
FC(tree)f(is)f(a)g(structure)i(that)f(holds)g(a)h Fv(M)t(E)t(T)m(A)i
FC(data)c(structure)j(\(as)d(described)j(in)d(Chapter)h(3\))g(and)f(an)
0 1845 y(array)i(of)i Fv(AO)t(I)f FC(de\002nitions)h(corresponding)i
(to)23 b(de\002nitions)j(gi)n(v)o(en)e(in)f(the)h(input)j
Fv(I)t(D)t(L)f FC(\002le\(s\):)0 2069 y Fy(struct)46
b(aoi)h({)382 2181 y(aoi_def)427 b(defs<>;)382 2294 y(meta)571
b(meta_data;)0 2407 y(};)141 2629 y FC(The)32 b Fy(meta_data)d
FC(\002eld)j(holds)i(the)h Fv(M)t(E)t(T)m(A)g FC(information)g
(describing)h(the)c(input)k Fv(I)t(D)t(L)f FC(\002les:)47
b(i.e.,)33 b(the)g(\002le)f(names)0 2742 y(and)26 b(the)f(inclusion)j
(graph.)36 b(The)24 b Fy(defs)g FC(\002eld)h(is)g(an)g(array)i(of)e
(associations)k(between)d(names)g(and)g(bindings,)i(described)0
2855 y(belo)n(w)-6 b(.)0 3115 y FA(4.2.1)99 b(De\002nitions)0
3293 y FC(An)27 b Fv(AO)t(I)h FC(de\002nition)g(\227)d(represented)30
b(by)c(an)g Fy(aoi_def)d FC(structure)29 b(\227)c(consists)j(of)e(a)g
(name,)h(a)e(scope)i(identi\002er)l(,)i(a)c(type)0 3406
y(that)e(is)f(bound)i(to)e(the)h(name,)f(and)h(a)f(reference)j(\(an)e
Fy(io_file_index)p FC(\))18 b(to)k(the)h(source)h(\002le)e(for)g(the)h
(de\002nition.)30 b(The)22 b(\002le)0 3518 y(reference)k(is)d(an)h
(inde)o(x)g(into)g(the)i Fv(M)t(E)t(T)m(A)h FC(array)e(of)e(\002le)g
(descriptions)k(as)c(described)k(in)c(Chapter)i(3.)0
3742 y Fy(struct)46 b(aoi_def)0 3855 y({)382 3968 y(string)189
b(name<>;)382 4081 y(int)333 b(scope;)382 4194 y(io_file_index)44
b(idl_file;)382 4306 y(aoi_type)93 b(binding;)0 4419
y(};)141 4641 y FC(The)31 b Fy(name)e FC(is)i(a)f(string,)k(usually)f
(tak)o(en)f(from)f(the)i Fv(I)t(D)t(L)h FC(\002le)d(without)h(an)o(y)f
(mangling.)52 b(The)31 b Fy(scope)e FC(is)i(a)f(number)0
4754 y(representing)22 b(the)d(le)o(xical)h(scope)g(of)e(the)h
(de\002nition.)29 b(In)21 b Fv(AO)t(I)r FC(,)e(all)g
Fy(aoi_def)d FC(structures)21 b(are)e(contained)i(in)e(a)f(single)i
(array:)0 4867 y(in)k(other)i(w)o(ords,)e(scopes)i(are)f
Fu(not)h FC(represented)h(by)e(nested)h Fy(aoi_def)21
b FC(structures.)34 b(Rather)l(,)25 b(scoping)h(is)f(represented)i(by)0
4980 y(k)o(eeping)f(track)f(of)f(the)g(le)o(xical)h(scoping)h(depth)f
(of)f(each)h(de\002nition,)g(as)f(illustrated)j(in)d(Figure)g(4.1.)30
b(The)23 b Fy(aoi_def)p FC(s)f(are)0 5093 y(arranged)i(so)d(that)i(the)
e(order)i(of)e(the)j Fv(I)t(D)t(L)h FC(source)e(de\002nitions)g(is)f
(preserv)o(ed.)30 b(A)21 b(top)g(le)n(v)o(el)j Fv(I)t(D)t(L)h
FC(de\002nition)e(has)f(a)f(scoping)p 0 5161 1560 4 v
105 5217 a Fq(1)134 5249 y Fp(The)27 b(`)p Fo(.x)p Fp(')f(\002les)f
(that)h(de\002ne)i Fn(A)q(O)t(I)f Fp(and)g(Flick')l(s)e(other)h
(intermediate)h(languages)g(are)g(also)f(processed)h(by)g
Fo(rpcgen)g Fp(when)g(a)f(Flick)f(source)0 5340 y(distrib)o(ution)19
b(is)f(created,)h(so)g(that)g(users)g(do)h(not)f(need)h(to)f(ha)o(v)o
(e)g Fo(rpcgen)h Fp(installed)f(and)g(w)o(orking)h(in)f(order)g(to)g
(compile)h(Flick.)p eop
%%Page: 43 43
43 42 bop 0 -165 a Fx(4.2.)51 b(A)-5 b(OI)23 b(D)l(A)-10
b(T)i(A)21 b(STR)l(UCTURES)2608 b FC(43)p 549 3 2803
4 v 600 82 a Fv(C)t(O)t(R)t(B)r(A)27 b(I)t(D)t(L)p 1667
116 4 113 v 695 w FC(Corresponding)g Fy(aoi_def)21 b
FC(V)-10 b(alues)p 549 120 2803 4 v 1667 232 4 113 v
598 311 a Fy(module)46 b(MyMod_1)21 b({)p 1667 345 V
381 w(name)47 b(=)g("MyMod_1",)j(scope)c(=)h(0,)52 b(...)689
424 y(interface)45 b(MyIntf_1)21 b({)p 1667 458 V 99
w(name)47 b(=)g("MyIntf_1",)i(scope)e(=)g(1,)k(...)780
537 y(typedef)46 b(...)h(T_1;)p 1667 571 V 173 w(name)g(=)g("T_1",)k
(scope)46 b(=)i(2,)j(...)780 650 y(typedef)46 b(...)h(T_2;)p
1667 684 V 173 w(name)g(=)g("T_2",)k(scope)46 b(=)i(2,)j(...)689
763 y(};)p 1667 797 V 689 876 a(interface)45 b(MyIntf_2)21
b({)p 1667 910 V 99 w(name)47 b(=)g("MyIntf_2",)i(scope)e(=)g(1,)k(...)
689 989 y(};)p 1667 1023 V 598 1102 a(};)p 1667 1136
V 598 1215 a(module)46 b(MyMod_2)21 b({)p 1667 1249 V
381 w(name)47 b(=)g("MyMod_2",)j(scope)c(=)h(0,)52 b(...)598
1328 y(};)p 1667 1362 V 549 1365 2803 4 v 1057 1518 a
FC(Figure)24 b(4.1:)29 b(Representation)e(of)f Fv(I)t(D)t(L)g
FC(Scopes)e(in)i Fv(AO)t(I)r FC(.)0 1777 y(depth)d(of)f(zero.)29
b(When)23 b(a)e(de\002nition)j(introduces)h(a)d(ne)n(w)g(scope,)h(the)h
Fv(AO)t(I)g FC(\223current)h(scope\224)e(depth)h(is)e(increased)i(by)e
(one:)0 1890 y(thus,)28 b(the)e Fy(aoi_def)p FC(s)f(within)i(a)f(scope)
h(will)f(ha)n(v)o(e)i Fy(scope)c FC(v)n(alues)j(that)g(are)g(greater)h
(than)f(the)g(the)g Fy(scope)d FC(v)n(alue)k(of)e(the)0
2003 y(containing)32 b Fy(aoi_def)p FC(.)43 b(Ob)o(viously)-6
b(,)32 b(when)d(an)i Fv(I)t(D)t(L)h FC(scope)f(ends,)g(the)g
Fv(AO)t(I)g FC(\223current)g(scope\224)g(depth)f(is)f(decreased)j(by)0
2116 y(one.)41 b(This)28 b(representation)k(of)27 b(scopes)j(mak)o(es)e
(it)f(easy)h(to)g(search)h(for)f(the)g(\223parent\224)i(of)d(an)h
Fy(aoi_def)p FC(:)34 b(simply)29 b(search)0 2229 y(backw)o(ard)j(in)e
(the)h(array)g(of)f Fy(aoi_def)p FC(s)e(for)j(a)f(de\002nition)i(with)e
(a)g(lo)n(wer)g Fy(scope)e FC(v)n(alue,)33 b(handling)f(zero)f(as)g(a)f
(special)0 2342 y(case.)f(Searching)d(for)d(peer)i(and)f(child)g
(de\002nitions)i(is)d(also)h(straightforw)o(ard.)2497
2309 y Fr(2)141 2454 y FC(The)g Fy(binding)d FC(in)j(an)g
Fy(aoi_def)e FC(refers)j(to)f(the)h(de\002nition')-5
b(s)26 b(type,)f(translated)i(from)d(the)i Fv(I)t(D)t(L)h
FC(\002le)c(and)i(represented)0 2567 y(by)f(an)f Fy(aoi_type)p
FC(,)d(to)k(be)f(described)k(shortly)-6 b(.)141 2680
y(Before)22 b(mo)o(ving)g(on,)f(note)h(that)g(an)f Fy(aoi_ref)d
FC(is)j(a)g(reference)i(to)e(an)g Fy(aoi_def)p FC(,)e(implemented)k(as)
e(an)g(inde)o(x)h(into)g(the)0 2793 y Fy(aoi_def)c FC(array)j
(contained)j(in)c(the)h(top-le)n(v)o(el)h Fy(aoi)d FC(structure)k(sho)n
(wn)e(in)f(Section)i(4.2.)27 b(A)20 b(null)h(reference)i(is)d
(represented)0 2906 y(by)k(the)f(special)j(constant)f
Fy(aoi_ref_null)p FC(.)0 3091 y Fy(typedef)46 b(int)h(aoi_ref;)0
3204 y(const)f(aoi_ref_null)f(=)i(-1;)0 3449 y FA(4.2.2)99
b(Fields)0 3623 y FC(An)26 b Fy(aoi_field)d FC(is)j(similar)i(to)e(an)h
Fy(aoi_def)c FC(e)o(xcept)28 b(it)e(is)h(meant)f(for)h(use)g(in)f
(compound)j(types:)36 b(structures,)30 b(unions,)0 3736
y(and)24 b(so)g(on.)29 b(An)23 b Fy(aoi_field)d FC(associates)27
b(a)c(name)h(and)g(an)g(type,)g(b)n(ut)g(does)g(not)g(need)h(a)e(scope)
i(identi\002er)g(or)f(source)h(\002le)0 3849 y(reference.)0
4034 y Fy(struct)46 b(aoi_field)0 4147 y({)382 4260 y(string)475
b(name<>;)382 4373 y(aoi_type)379 b(type;)0 4486 y(};)0
4731 y FA(4.2.3)99 b(T)-7 b(ypes)0 4905 y FC(An)28 b
Fv(I)t(D)t(L)h FC(type)e(is)f(represented)k(by)c(an)g
Fy(aoi_type_u)p FC(:)32 b(a)26 b(discriminated)j(union)f(with)e
(branches)i(that)f(represent)i(all)f Fv(I)t(D)t(L)0 5018
y FC(types.)i(An)21 b Fy(aoi_type)f FC(is)j(a)f(pointer)i(to)f(an)g
Fy(aoi_type_u)p FC(.)h(All)e(kinds)i(of)f(name)g(bindings)i(are)e
(represented)i(as)e(\223types,)-6 b(\224)p 0 5070 1560
4 v 105 5126 a Fq(2)136 5157 y Fn(C)t(O)t(R)t(B)r(A)24
b(I)t(D)t(L)e Fp(mak)o(es)g(searching)h(for)e(peer)h(and)g(child)g
(de\002nitions)g(some)n(what)g(more)g(comple)o(x.)32
b(F)o(or)20 b(instance,)j(because)g(a)e Fo(module)i Fp(can)e(be)0
5249 y(opened)d(man)o(y)f(times,)g(there)f(may)h(be)g(multiple)g
Fo(aoi_def)p Fp(s)h(corresponding)g(to)f(single)g(module,)g(and)g
(therefore)g(one)h(must)e(search)h(for)g(all)f(of)g(those)0
5340 y(de\002nitions.)p eop
%%Page: 44 44
44 43 bop 0 -165 a FC(44)877 b Fx(CHAPTER)20 b(4.)51
b(ABSTRA)l(CT)20 b(OBJECT)h(INTERF)-7 b(A)l(CE)21 b(\(A)-5
b(OI\))23 b(REPRESENT)-8 b(A)e(TION)p 554 1227 2793 4
v 552 1340 4 113 v 605 1306 a Fv(AO)t(I)26 b FC(T)-7
b(ype)23 b(Kind)p 1320 1340 V 223 w(Description)p 3345
1340 V 554 1343 2793 4 v 552 1456 4 113 v 603 1422 a
Fy(AOI_INTEGER)p 1320 1456 V 240 w FC(an)h(inte)o(ger)h(with)e(a)g
(speci\002ed)i(minimum)e(v)n(alue)i(and)f(range)p 3345
1456 V 552 1569 V 603 1535 a Fy(AOI_SCALAR)p 1320 1569
V 288 w FC(an)g(inte)o(ger)h(with)e(range)i(determined)g(by)f(#)f(of)h
(bits)p 3345 1569 V 552 1682 V 603 1648 a Fy(AOI_FLOAT)p
1320 1682 V 336 w FC(a)f(\003oating-point)k(type)d(with)g(a)f
(speci\002ed)i(#)e(of)g(bits)p 3345 1682 V 552 1795 V
603 1761 a Fy(AOI_CHAR)p 1320 1795 V 384 w FC(a)g(character)j(with)d
(\003ags)h(and)g(a)f(speci\002ed)i(#)e(of)h(bits)p 3345
1795 V 552 1908 V 603 1874 a Fy(AOI_VOID)p 1320 1908
V 384 w FC(v)n(oid)p 3345 1908 V 552 2021 V 603 1987
a Fy(AOI_CONST)p 1320 2021 V 336 w FC(an)i Fv(I)t(D)t(L)r
FC(-de\002ned)g(constant)g(v)n(alue)p 3345 2021 V 552
2134 V 1320 2134 V 3345 2134 V 552 2246 V 603 2213 a
Fy(AOI_ENUM)p 1320 2246 V 384 w FC(an)e(enumeration)i(\(i.e.,)d(a)g
(set)h(of)f(symbolic)i(constants\))p 3345 2246 V 552
2359 V 603 2325 a Fy(AOI_ARRAY)p 1320 2359 V 336 w FC(an)f(array)-6
b(,)24 b(\002x)o(ed-)f(or)h(v)n(ariable-length)p 3345
2359 V 552 2472 V 603 2438 a Fy(AOI_STRUCT)p 1320 2472
V 288 w FC(a)f(structure)j(containing)h(named)d(\002elds)p
3345 2472 V 552 2585 V 603 2551 a Fy(AOI_EXCEPTION)p
1320 2585 V 144 w FC(a)f(structure)j(used)e(to)g(signal)h(e)o
(xceptions)p 3345 2585 V 552 2698 V 603 2664 a Fy(AOI_UNION)p
1320 2698 V 336 w FC(a)e(discriminated)k(union)p 3345
2698 V 552 2811 V 603 2777 a Fy(AOI_OPTIONAL)p 1320 2811
V 192 w FC(an)d(optional)h(v)n(alue)g(\(i.e.,)e(possibly)i(no)f(v)n
(alue\))p 3345 2811 V 552 2924 V 603 2890 a Fy(AOI_ANY)p
1320 2924 V 432 w FC(\223an)o(y\224)h(v)n(alue,)f Fu(without)i
FC(a)d(type)h(tag)p 3345 2924 V 552 3037 V 603 3003 a
Fy(AOI_TYPE_TAG)p 1320 3037 V 192 w FC(an)g(opaque)h(type)f
(identi\002er)p 3345 3037 V 552 3150 V 603 3116 a Fy(AOI_TYPED)p
1320 3150 V 336 w FC(a)f(pair:)30 b(a)23 b(type)h(identi\002er)h(and)f
(a)g(v)n(alue)g(of)f(that)h(type)p 3345 3150 V 552 3263
V 1320 3263 V 3345 3263 V 552 3376 V 603 3342 a Fy(AOI_INTERFACE)p
1320 3376 V 144 w FC(an)i Fv(I)t(D)t(L)r FC(-de\002ned)g(interf)o(ace)g
(or)d(object)i(type)p 3345 3376 V 552 3488 V 603 3455
a Fy(AOI_FWD_INTRFC)p 1320 3488 V 96 w FC(a)e(forw)o(ard)i(interf)o
(ace)h(or)d(object)i(declaration)p 3345 3488 V 552 3601
V 603 3567 a Fy(AOI_NAMESPACE)p 1320 3601 V 144 w FC(a)e(namespace)j
(for)e(other)g(de\002nitions)p 3345 3601 V 552 3714 V
1320 3714 V 3345 3714 V 552 3827 V 603 3793 a Fy(AOI_INDIRECT)p
1320 3827 V 192 w FC(a)f(reference)j(to)e(a)f(named)h(type)g(\(an)g
Fy(aoi_def)p FC(\))p 3345 3827 V 552 3940 V 603 3906
a Fy(AOI_ERROR)p 1320 3940 V 336 w Fu(a)f(par)o(se)i(err)l(or)p
3345 3940 V 554 3943 2793 4 v 966 4097 a FC(T)-7 b(able)23
b(4.1:)29 b(Summary)23 b(of)h(the)g(A)-7 b(v)n(ailable)27
b Fv(AO)t(I)e FC(T)-7 b(ype)24 b(Kinds.)p eop
%%Page: 45 45
45 44 bop 0 -165 a Fx(4.2.)51 b(A)-5 b(OI)23 b(D)l(A)-10
b(T)i(A)21 b(STR)l(UCTURES)2608 b FC(45)0 91 y(including)34
b(bindings)h(to)c(constant)j(v)n(alues)f(and)g(references)h(to)e(other)
g(bindings)j(\(i.e.,)e(usage)g(of)e(named)i(types\).)55
b(The)0 204 y(set)36 b(of)g(representable)j(types)e(is)f(determined)i
(by)e(the)g Fy(aoi_kind)d FC(enumeration,)41 b(summarized)d(in)d(T)-7
b(able)36 b(4.1.)66 b(The)0 317 y Fy(aoi_type_u)20 b
FC(union)25 b(has)f(a)g(branch)h(or)e(\223arm\224)h(for)g(each)h
(possible)h Fy(aoi_kind)p FC(.)g(The)d(details)j(of)d(a)h(particular)k
Fv(AO)t(I)d FC(type)0 430 y(de\002nition)g(are)f(speci\002ed)h(by)f
(further)j Fv(AO)t(I)e FC(structures,)h(as)d(sho)n(wn)h(belo)n(w)-6
b(.)0 643 y Fy(enum)47 b(aoi_kind)0 755 y({)382 868 y(AOI_INDIRECT)187
b(=)48 b(1,)382 981 y(...)382 1094 y(AOI_ERROR)331 b(=)48
b(20)0 1207 y(};)0 1433 y(typedef)e(struct)g(aoi_type_u)f(*aoi_type;)0
1659 y(union)h(aoi_type_u)0 1772 y(switch)g(\(aoi_kind)f(kind\))0
1885 y({)382 1997 y(case)h(AOI_INDIRECT:)283 b(aoi_ref)810
b(indirect_ref;)382 2110 y(case)46 b(AOI_INTEGER:)331
b(aoi_integer)618 b(integer_def;)382 2223 y(case)46 b(AOI_SCALAR:)379
b(aoi_scalar)666 b(scalar_def;)382 2336 y(case)46 b(AOI_FLOAT:)427
b(aoi_float)714 b(float_def;)382 2449 y(case)46 b(AOI_CHAR:)475
b(aoi_char)762 b(char_def;)382 2562 y(case)46 b(AOI_ARRAY:)427
b(aoi_array)714 b(array_def;)382 2675 y(case)46 b(AOI_STRUCT:)379
b(aoi_struct)666 b(struct_def;)382 2788 y(case)46 b(AOI_UNION:)427
b(aoi_union)714 b(union_def;)382 2901 y(case)46 b(AOI_INTERFACE:)235
b(aoi_interface)522 b(interface_def;)382 3014 y(case)46
b(AOI_EXCEPTION:)235 b(aoi_exception)522 b(exception_def;)382
3127 y(case)46 b(AOI_ENUM:)475 b(aoi_enum)762 b(enum_def;)382
3240 y(case)46 b(AOI_VOID:)475 b(void;)382 3352 y(case)46
b(AOI_CONST:)427 b(aoi_const_def)522 b(const_def;)382
3465 y(case)46 b(AOI_NAMESPACE:)235 b(void;)382 3578
y(case)46 b(AOI_OPTIONAL:)283 b(aoi_optional)570 b(optional_def;)382
3691 y(case)46 b(AOI_FWD_INTRFC:)187 b(aoi_ref)810 b(fwd_intrfc_def;)
382 3804 y(case)46 b(AOI_ANY:)523 b(void;)382 3917 y(case)46
b(AOI_TYPE_TAG:)283 b(void;)382 4030 y(case)46 b(AOI_TYPED:)427
b(aoi_typed)714 b(typed_def;)382 4143 y(case)46 b(AOI_ERROR:)427
b(void;)0 4256 y(};)141 4468 y FC(The)23 b(current)k
Fv(AO)t(I)f FC(type)e(kinds)h(are)f(described)i(belo)n(w)-6
b(,)23 b(in)h(the)f(order)i(in)e(which)h(the)o(y)g(appear)h(in)f(T)-7
b(able)23 b(4.1.)0 4714 y Fz(Integers)0 4888 y FC(An)31
b Fy(AOI_INTEGER)c FC(represents)34 b(an)d(inte)o(ger)i(type)f(with)f
(a)g(speci\002ed)h(\(constant\))i(minimum)e(v)n(alue)g(and)f(range.)53
b(This)0 5001 y(type)26 b(is)f(used)i(to)e(represent)j(all)d(inte)o
(ger)i(types)g(whose)f(v)n(alues)g(can)g(be)g(represented)i(with)e(not)
f(more)h(that)g(32)f(bits.)35 b(This)0 5114 y(includes)28
b(unsigned)g(and)e(signed)h(32-,)f(16-,)g(and)g(8-bit)h(types,)g(as)e
(well)h(as)f(booleans)j(and)e(certain)i(inte)o(ger)f(\223constants.)-6
b(\224)0 5227 y(\(If)26 b(the)g(speci\002ed)h Fy(range)d
FC(is)i(zero,)h(then)f(the)g Fy(AOI_INTEGER)c FC(describes)29
b(a)c(type)i(with)f(only)g(one)h(possible)h(v)n(alue.)36
b(This)0 5340 y(is)23 b(useful)i(for)f(describing)i(other)f(types)g
(such)f(as)f(\002x)o(ed-length)j(arrays.\))p eop
%%Page: 46 46
46 45 bop 0 -165 a FC(46)877 b Fx(CHAPTER)20 b(4.)51
b(ABSTRA)l(CT)20 b(OBJECT)h(INTERF)-7 b(A)l(CE)21 b(\(A)-5
b(OI\))23 b(REPRESENT)-8 b(A)e(TION)0 91 y Fy(struct)46
b(aoi_integer)0 204 y({)382 317 y(int)285 b(min;)382
430 y(unsigned)45 b(range;)0 543 y(};)0 798 y Fz(Scalars)0
975 y FC(An)20 b Fy(AOI_SCALAR)d FC(describes)23 b(an)e(inte)o(ger)g
(type)h(by)e(specifying)k(the)d(number)g(of)g(bits)g(in)f(its)h(range.)
29 b(The)20 b(minimum)g(v)n(alue)0 1088 y(is)i(determined)h(by)f
(\003ags)g(that)g(indicate)i(whether)f(the)f(type)g(is)g(signed)h(or)e
(unsigned.)31 b(Scalars)22 b(are)g(only)h(used)f(to)g(describe)0
1201 y(inte)o(ger)j(types)f(that)h(an)e Fy(AOI_INTEGER)d
FC(cannot)25 b(represent)h(\(e.g.,)d(64-bit)i(and)f(128-bit)h(inte)o
(gers\).)0 1423 y Fy(typedef)46 b(u_int)g(aoi_scalar_flags;)0
1536 y(const)g(AOI_SCALAR_FLAG_NONE)281 b(=)48 b(0;)0
1648 y(const)e(AOI_SCALAR_FLAG_SIGNED)185 b(=)48 b(1;)0
1761 y(const)e(AOI_SCALAR_FLAG_UNSIGNED)89 b(=)48 b(2;)0
1987 y(struct)e(aoi_scalar)0 2100 y({)382 2213 y(int)667
b(bits;)382 2326 y(aoi_scalar_flags)43 b(flags;)0 2439
y(};)0 2694 y Fz(Floats)0 2871 y FC(An)23 b Fy(AOI_FLOAT)d
FC(describes)26 b(a)d(\003oating)i(point)f(type)h(in)e(terms)h(of)f
(the)h(number)h(of)e(bits)h(in)g(the)f(encoding)j(of)e(the)g(type.)0
3093 y Fy(struct)46 b(aoi_float)0 3206 y({)382 3319 y(int)h(bits;)0
3431 y(};)0 3686 y Fz(Characters)0 3864 y FC(An)28 b
Fy(AOI_CHAR)e FC(describes)31 b(a)d(character)j(type.)45
b(Again,)30 b(the)f(range)h(of)e(the)h(type)h(is)e(described)k(by)c
(the)h(number)h(of)f(bits)0 3977 y(required)d(to)d(encode)i(v)n(alues)g
(of)e(the)h(type)g(\(generally)i(8\).)j(In)23 b(addition,)j(a)d(set)g
(of)h(\003ags)f(describe)i(additional)i(properties,)0
4089 y(such)d(as)g(whether)g(the)g(characters)i(are)e(\223signed\224)i
(or)d(\223unsigned.)-6 b(\224)0 4311 y Fy(typedef)46
b(u_int)g(aoi_char_flags;)0 4424 y(const)g(AOI_CHAR_FLAG_NONE)234
b(=)48 b(0;)0 4537 y(const)e(AOI_CHAR_FLAG_SIGNED)138
b(=)48 b(1;)0 4650 y(const)e(AOI_CHAR_FLAG_UNSIGNED)c(=)48
b(2;)0 4876 y(struct)e(aoi_char)0 4989 y({)382 5102 y(int)572
b(bits;)382 5214 y(aoi_char_flags)44 b(flags;)0 5327
y(};)p eop
%%Page: 47 47
47 46 bop 0 -165 a Fx(4.2.)51 b(A)-5 b(OI)23 b(D)l(A)-10
b(T)i(A)21 b(STR)l(UCTURES)2608 b FC(47)0 91 y Fz(V)-9
b(oids)0 266 y FC(An)23 b Fy(AOI_VOID)d FC(represents)27
b(a)c(v)n(oid)h(type:)30 b(a)23 b(type)i(with)e(no)h(v)n(alues.)0
509 y Fz(Constants)0 684 y FC(An)29 b Fy(AOI_CONST)e
FC(corresponds)33 b(to)d(a)g(literal)h(constant)h(v)n(alue.)49
b(\(An)30 b Fy(aoi_def)d FC(can)j(be)g(used)h(to)f(describe)i(a)e
Fu(symbolic)0 797 y FC(constant.\))52 b(The)31 b(type)g(of)f(the)h
(constant)i(is)d(described)k(by)c(an)h Fy(aoi_type)c
FC(and)32 b(is)e(also)h(manifest)h(in)f(the)f Fy(aoi_const)0
909 y FC(v)n(alue)f(itself.)44 b Fv(AO)t(I)30 b FC(currently)g
(supports)g(inte)o(ger)l(,)h(character)l(,)g(and)d(\003oating-point)j
(literals,)g(and)d(arrays)h(and)g(structures)0 1022 y(b)n(uilt)c(from)e
(these)i(literals.)0 1222 y Fy(typedef)46 b(long)g(aoi_const_int;)0
1335 y(typedef)g(char)g(aoi_const_char;)0 1448 y(typedef)g(double)g
(aoi_const_float;)0 1561 y(typedef)g(aoi_const)f(aoi_const_struct<>;)0
1674 y(typedef)h(aoi_const)f(aoi_const_array<>;)0 1900
y(enum)i(aoi_const_kind)0 2012 y({)382 2125 y(AOI_CONST_INT)521
b(=)48 b(1,)382 2238 y(AOI_CONST_CHAR)473 b(=)48 b(2,)382
2351 y(AOI_CONST_FLOAT)425 b(=)48 b(3,)382 2464 y(AOI_CONST_STRUCT)377
b(=)48 b(4,)382 2577 y(AOI_CONST_ARRAY)425 b(=)48 b(5)0
2690 y(};)0 2916 y(union)e(aoi_const_u)0 3029 y(switch)g
(\(aoi_const_kind)e(kind\))0 3142 y({)382 3254 y(case)i(AOI_CONST_INT:)
235 b(aoi_const_int)522 b(const_int;)382 3367 y(case)46
b(AOI_CONST_CHAR:)187 b(aoi_const_char)474 b(const_char;)382
3480 y(case)46 b(AOI_CONST_FLOAT:)139 b(aoi_const_float)426
b(const_float;)382 3593 y(case)46 b(AOI_CONST_STRUCT:)91
b(aoi_const_struct)378 b(const_struct;)382 3706 y(case)46
b(AOI_CONST_ARRAY:)139 b(aoi_const_array)426 b(const_array;)0
3819 y(};)0 4045 y(struct)46 b(aoi_const_def)0 4158 y({)382
4271 y(aoi_type)379 b(type;)382 4384 y(aoi_const)331
b(value;)0 4496 y(};)0 4740 y Fz(Enumerations)0 4914
y FC(An)20 b Fy(AOI_ENUM)f FC(represents)24 b(an)d(enumerated)i(data)f
(type,)g(i.e.,)f(a)g(set)g(of)g(symbolic)i(constants.)31
b(The)20 b(set)i(is)f(represented)j(as)0 5027 y(an)i(array)h(of)f
Fy(aoi_field)p FC(s,)e(which)i(are)g(name-v)n(alue)i(pairs.)38
b(The)25 b(associated)k(v)n(alues,)f(of)e(course,)i(are)e(e)o(xpected)i
(to)e(be)0 5140 y(constants,)g(not)e(arbitrary)j Fv(AO)t(I)f
FC(types.)k(The)23 b Fy(enum_label)d FC(contains)26 b(an)o(y)f
Fv(I)t(D)t(L)r FC(-speci\002ed)i(label)d(for)g(the)g(enumeration.)0
5340 y Fy(struct)46 b(aoi_enum)p eop
%%Page: 48 48
48 47 bop 0 -165 a FC(48)877 b Fx(CHAPTER)20 b(4.)51
b(ABSTRA)l(CT)20 b(OBJECT)h(INTERF)-7 b(A)l(CE)21 b(\(A)-5
b(OI\))23 b(REPRESENT)-8 b(A)e(TION)0 91 y Fy({)382 204
y(string)523 b(enum_label<>;)382 317 y(struct)46 b(aoi_field)f(defs<>;)
0 430 y(};)0 743 y Fz(Arrays)0 940 y FC(An)21 b Fy(AOI_ARRAY)e
FC(describes)24 b(an)e(array)h(type:)29 b(this)22 b(includes)i(\002x)o
(ed-length)h(arrays,)e(v)n(ariable-length)j(arrays)d(\(what)f(some)2
1053 y Fv(I)t(D)t(L)r FC(s)e(call)g(\223sequences\224\),)j(and)d
(NUL-terminated)g(strings.)29 b(The)19 b(length)h(of)f(an)h(array)g(is)
f(speci\002ed)h(as)f(an)g Fy(AOI_INTEGER)p FC(,)0 1165
y(thus)25 b(gi)n(ving)g(the)f(minimum)g(and)h(maximum)f(lengths)h(of)f
(instances)j(of)d(the)g(array)h(type.)31 b(The)23 b Fy(AOI_ARRAY)e
FC(description)0 1278 y(also)j(refers)h(to)e(the)h(type)g(of)g(the)g
(array)g(elements,)h(as)e(sho)n(wn)h(in)f(the)h(code.)0
1559 y Fy(typedef)46 b(u_int)g(aoi_array_flags;)0 1672
y(const)g(AOI_ARRAY_FLAG_NONE)1093 b(=)47 b(0x00000000;)0
1784 y(const)f(AOI_ARRAY_FLAG_NULL_TERMIN)o(ATE)o(D_ST)o(RING)232
b(=)47 b(0x00000001;)0 1897 y(const)f(AOI_ARRAY_FLAG_OPAQUE)997
b(=)47 b(0x00000002;)0 2010 y(const)f(AOI_ARRAY_FLAG_ALL)1141
b(=)47 b(0x00000003;)0 2236 y(struct)f(aoi_array)0 2349
y({)382 2462 y(aoi_type)523 b(element_type;)382 2575
y(aoi_type)g(length_type;)382 2801 y(aoi_array_flags)187
b(flgs;)0 2914 y(};)141 3183 y FC(Additional)37 b(properties)h(of)d
(the)g(type)g(are)g(speci\002ed)i(as)e(a)f(set)h(of)g(\003ags)g(in)g
(the)g Fy(flgs)e FC(\002eld)h(of)h(the)g Fy(aoi_array)0
3295 y FC(structure.)i(The)25 b Fy(AOI_ARRAY_FLAG_NULL_TERMIN)o(ATED)o
(_ST)o(RING)18 b FC(\003ag)25 b(indicates)j(that)f(the)f(array)g(type)g
(represents)0 3408 y(a)f(NUL-terminated)i(string)g(type.)36
b(At)25 b(one)h(time,)g Fy(AOI_ARRAY_FLAG_OPAQUE)19 b
FC(w)o(as)25 b(used)i(to)e(indicate)j(that)e(the)g(array)0
3521 y(elements)h(should)g(be)f(pack)o(ed)h(together)h(when)d(encoded.)
37 b(This)26 b(\003ag)f(is)g(no)h(longer)h(meaningful,)h(since)f(data)f
(encoding)0 3634 y(decisions)g(are)e(made)f(else)n(where)i(\(i.e.,)e
(by)h(back)g(ends,)g(based)h(on)f(the)f(element)i(types)g(of)g
Fv(M)t(I)t(N)t(T)i FC(arrays\).)0 3947 y Fz(Structur)n(es)0
4144 y FC(An)22 b Fy(AOI_STRUCT)d FC(represents)25 b(a)e(compound)h
(data)g(type)f(with)f(a)h(\002x)o(ed)f(number)i(of)e(named)h(\002elds)g
(\(also)h(kno)n(wn)f(as)f(slots)0 4257 y(or)30 b(data)g(members\).)48
b(The)30 b(structure)i(type)e(is)g(represented)j(as)d(an)f(array)i(of)f
(\(zero)h(or)e(more\))h(slot)h(descriptors,)j(which)0
4370 y(gi)n(v)o(e)23 b(the)f(name)h(and)g(type)g(of)f(each)h(slot.)29
b(The)22 b(order)i(of)e(the)h(slots)g(is)f(preserv)o(ed)j(from)d(the)j
Fv(I)t(D)t(L)g FC(source)f(de\002nition)h(of)d(the)0
4482 y(structure)k(type.)0 4763 y Fy(typedef)46 b(aoi_field)f
(aoi_struct_slot;)0 4876 y(struct)h(aoi_struct)0 4989
y({)382 5102 y(/*)h(Type)g(of)g(each)f(structure)g(slot,)g(in)h(order.)
94 b(*/)382 5214 y(aoi_struct_slot)43 b(slots<>;)0 5327
y(};)p eop
%%Page: 49 49
49 48 bop 0 -165 a Fx(4.2.)51 b(A)-5 b(OI)23 b(D)l(A)-10
b(T)i(A)21 b(STR)l(UCTURES)2608 b FC(49)0 91 y Fz(Exceptions)0
271 y FC(An)29 b Fy(AOI_EXCEPTION)d FC(type)31 b(is)f(similar)h(to)f(a)
g(re)o(gular)h(structure)i(type,)f(b)n(ut)f(with)f(an)g(additional)j
(semantic:)44 b(an)30 b Fy(AOI_)0 384 y(EXCEPTION)23
b FC(represents)29 b(an)f Fv(I)t(D)t(L)r FC(-speci\002ed)i(e)o
(xceptional)f(runtime)e(condition)i(and)e(its)f(associated)j(data)e
(\(if)f(an)o(y\).)38 b(Be-)0 497 y(cause)32 b Fv(I)t(D)t(L)r
FC(s)f(distinguish)h(between)f(normal)f(structure)h(types)f(and)g(e)o
(xception)i(types,)h Fv(AO)t(I)e FC(mak)o(es)f(this)g(distinction)i(as)
0 610 y(well.)0 838 y Fy(typedef)46 b(aoi_field)f(aoi_exception_slot;)0
951 y(struct)h(aoi_exception)0 1064 y({)382 1176 y(aoi_exception_slot)d
(slots<>;)0 1289 y(};)0 1551 y Fz(Unions)0 1730 y FC(An)33
b Fy(AOI_UNION)d FC(represents)36 b(a)d Fu(discriminated)39
b FC(union:)50 b(a)33 b(compound)i(data)f(type)g(containing)i(a)d
(discriminator)k(that)0 1843 y(selects)21 b(from)f(a)f(set)h(of)g
(possible)i(\223arms\224)f(\(also)f(called)h(cases,)h(branches,)g(or)e
(v)n(ariants\).)29 b(The)20 b(v)n(alue)g(of)g(the)g(discriminator)0
1956 y(determines)26 b(which)e(one)g(of)f(the)h(possible)i(union)e
(arms)g(is)f(v)n(alid.)141 2071 y(Each)35 b(arm)f(is)h(represented)i
(by)e(an)g Fy(aoi_union_case)30 b FC(containing)38 b(a)c(discriminator)
k(v)n(alue)d(\227)f(the)h(v)n(alue)h(that)0 2184 y(selects)28
b(the)f(arm)f(\227)f(as)i(well)f(as)g(a)g(name)h(and)g(type)g(for)g
(the)f(arm.)38 b(\(The)28 b Fv(AO)t(I)g FC(representation)j(of)26
b(constant)j(v)n(alues)f(will)0 2297 y(be)c(described)i(shortly)-6
b(.\))141 2413 y(The)23 b(union)i(as)f(a)f(whole)h(is)g(essentially)i
(represented)h(as)d(a)f(kind)h(of)g(structure)i(with)d(a)g
(distinguished)28 b(discriminator)0 2526 y(member)l(,)g(an)e(array)i
(of)e Fy(aoi_union_case)p FC(s)d(representing)30 b(the)d(arms)f(of)h
(the)g(union,)h(and)f(an)g(optional)i(\223def)o(ault\224)g(arm)0
2639 y(that)g(is)e(selected)k(when)d(none)h(of)f(the)g(ordinary)i
(union)g(cases)f(are)f(selected.)44 b(If)28 b(there)h(is)f(no)g(def)o
(ault)i(branch,)g(then)f(the)0 2752 y Fy(dfault)f FC(slot)j(of)g(the)g
Fy(aoi_union)c FC(will)j(be)h(null.)50 b(If)31 b(there)g(is)f(a)h(def)o
(ault)h(case)f(and)g(that)g(def)o(ault)i(case)e(is)f
Fy(void)p FC(,)g(then)0 2864 y Fy(dfault)22 b FC(must)j(refer)h(to)f(a)
f(v)n(alid)i Fy(aoi_field)21 b FC(of)k(type)h Fy(AOI_VOID)p
FC(.)j(Finally)-6 b(,)26 b(the)f Fy(union_label)c FC(slot)26
b(holds)g(the)h Fv(I)t(D)t(L)r FC(-)0 2977 y(speci\002ed)j(name)e(\(if)
g(an)o(y\))h(of)f(the)h(union)h(arms)e(as)g(a)g(whole.)44
b(This)28 b(may)g(be)g(used)h(when)g(mapping)g(the)g(discriminated)0
3090 y(union)37 b(type)f(into)g(an)f(appropriate)j(C/C++)d
(representation)k(\(e.g.,)f(a)d Fy(struct)e FC(with)i(a)g(slot)h(that)g
(is)f(a)g Fy(union)e FC(of)i(the)2 3203 y Fv(AO)t(I)r
FC(-described)27 b(union)e(branches\).)0 3431 y Fy(struct)46
b(aoi_union_case)0 3544 y({)382 3657 y(aoi_const)331
b(val;)382 3770 y(aoi_field)g(var;)0 3883 y(};)0 4109
y(struct)46 b(aoi_union)0 4222 y({)382 4335 y(aoi_field)284
b(discriminator;)382 4448 y(string)428 b(union_label<>;)382
4560 y(aoi_union_case)44 b(cases<>;)382 4673 y(aoi_field)236
b(*dfault;)0 4786 y(};)0 5048 y Fz(Optional)23 b(V)-8
b(alues)0 5227 y FC(An)30 b Fy(AOI_OPTIONAL)c FC(represents)33
b(a)d(\223maybe)h(v)n(alue\224)g(type:)44 b(a)30 b(type)h(that)g(allo)n
(ws)f(for)h(empty)g(v)n(alues.)50 b(Intuiti)n(v)o(ely)-6
b(,)34 b(an)0 5340 y Fy(AOI_OPTIONAL)19 b FC(corresponds)27
b(to)d(a)f(pointer)i(type)g(that)f(may)f(be)g(null.)p
eop
%%Page: 50 50
50 49 bop 0 -165 a FC(50)877 b Fx(CHAPTER)20 b(4.)51
b(ABSTRA)l(CT)20 b(OBJECT)h(INTERF)-7 b(A)l(CE)21 b(\(A)-5
b(OI\))23 b(REPRESENT)-8 b(A)e(TION)141 91 y FC(In)28
b(common)i Fv(I)t(D)t(L)r FC(s,)f(optional)h(data)f(can)f(be)g
(described)i(in)d(se)n(v)o(eral)i(w)o(ays:)38 b(as)27
b(a)h(v)n(ariable-length)k(array)c(of)g(zero)g(or)0 204
y(one)23 b(elements,)g(as)f(a)g(discriminated)k(union)d(with)f(a)g(v)n
(oid)h(v)n(ariant,)h(or)e(as)g(a)g(denoted)i(optional)g(element.)30
b(\(The)24 b Fv(O)t(N)t(C)h(R)t(P)t(C)2 317 y(I)t(D)t(L)k
FC(pro)o(vides)f(\223)p Fy(*)p FC(\224)e(for)g(denoting)j(optional)f
(data.)39 b Fv(C)t(O)t(R)t(B)r(A)29 b(I)t(D)t(L)g FC(does)e(not)f(pro)o
(vide)i(an)e(equi)n(v)n(alent)j(construct.\))39 b(These)0
430 y(techniques)f(for)d(\223optionality\224)k(are)c(logically)i(equi)n
(v)n(alent,)j(b)n(ut)35 b(each)j Fv(I)t(D)t(L)f FC(idiom)e(generally)j
(results)e(in)f(a)f(dif)n(ferent)0 543 y(presentation)g(\227)c(that)h
(is,)h(a)e(dif)n(ferent)j(set)e(of)f(generated)k(programming)e
(language)i(types.)51 b(Thus,)32 b(no)f(technique)i(for)0
656 y(describing)39 b(optional)g(data)e(is)f(redundant,)42
b(and)d Fv(AO)t(I)f FC(must)f(describe)h(them)f(all.)67
b Fy(AOI_OPTIONAL)32 b FC(corresponds)40 b(to)0 769 y(denoted)26
b(optional)f(data)f(types;)h(i.e.,)e(the)j Fv(O)t(N)t(C)g(R)t(P)t(C)i
(I)t(D)t(L)e FC(\223)p Fy(*)p FC(\224)e(construct.)0
974 y Fy(struct)46 b(aoi_optional)0 1087 y({)382 1200
y(aoi_type)f(type;)0 1313 y(};)0 1558 y Fz(Anys)0 1732
y FC(An)25 b Fy(AOI_ANY)e FC(represents)29 b(\223an)o(y)d(type,)-6
b(\224)27 b(the)f(type)h(of)e(all)h(possible)i(v)n(alues.)37
b(Because)27 b Fy(AOI_ANY)c FC(is)j(all-encompassing,)0
1845 y(there)e(is)g(no)f(additional)k(data)d(associated)i(with)e(an)f
Fy(AOI_ANY)p FC(.)141 1958 y(Unlik)o(e)30 b(the)f Fy(any)e
FC(types)j(speci\002ed)g(by)f(some)i Fv(I)t(D)t(L)r FC(s,)h(an)d
Fy(AOI_ANY)d FC(does)j Fu(not)i FC(contain)g(an)e(implicit)h(type)g
(tag.)45 b(The)0 2071 y(notion)26 b(of)f(a)f(type-tagged)k(v)n(alue)d
(is)g(represented)j(by)c(a)h(separate)j Fv(AO)t(I)f FC(notion)f(called)
g Fy(AOI_TYPED)p FC(.)31 b Fv(AO)t(I)26 b FC(distinguishes)0
2184 y(between)f(tagged)g(and)f(untagged)i(\223an)o(y\224)e(v)n(alues)h
(in)e(order)i(to)e(pro)o(vide)i(\003e)o(xibility)-6 b(.)0
2428 y Fz(T)f(ype)23 b(T)-8 b(ags)0 2603 y FC(An)33 b
Fy(AOI_TYPE_TAG)d FC(represents)37 b(an)c(opaque)j(indicator)g(of)e(a)g
(type.)60 b(In)34 b(other)h(w)o(ords,)h(the)f(v)n(alue)f(of)g(a)g(type)
g(tag)g(is)0 2716 y(a)g(description)39 b(of)34 b(type.)64
b(T)-7 b(ags)34 b(are)h(opaque)i(in)e(the)g(sense)h(that)f(the)h
(compiler)g(portions)h(of)e(Flick)g(do)g(not)g(pro)o(vide,)0
2829 y(understand,)28 b(or)d(enforce)i(an)o(y)e(semantics)i(for)f(type)
f(tags.)34 b(Other)26 b(than)g(marshaling)h(and)e(unmarshaling)k(tag)c
(instances,)0 2941 y(Flick)f(does)g(nothing)i(with)d(tags.)29
b(Semantics)c(must)e(be)h(pro)o(vided)h(by)f(runtime)h(libraries.)141
3054 y(Since)f(type)g(tags)g(are)g(opaque,)h(an)f Fy(AOI_TYPE_TAG)19
b FC(has)24 b(no)g(attrib)n(utes.)0 3299 y Fz(T)-7 b(yped)23
b(V)-8 b(alues)0 3473 y FC(Combining)22 b(the)g(tw)o(o)e(notions)j(abo)
o(v)o(e,)f(an)f Fy(AOI_TYPED)c FC(represents)24 b(a)d(pair)g
(containing)j(a)d(type)g(description)j(and)e(a)e(v)n(alue)0
3586 y(of)31 b(the)h(described)i(type.)54 b(In)32 b(other)g(w)o(ords,)i
(an)d Fy(AOI_TYPED)e FC(represents)34 b(type-tagged)h(v)n(alues.)54
b(The)31 b Fy(tag)f FC(and)i Fy(type)0 3699 y FC(\002elds)i(of)g(an)g
Fy(aoi_typed)c FC(structure)37 b(may)c(conceptually)38
b(refer)d(to)e(an)o(y)j Fv(AO)t(I)g FC(type,)h(b)n(ut)e(in)f(practice,)
k(the)c(former)g(is)0 3812 y(al)o(w)o(ays)24 b(an)g Fy(AOI_TYPE_TAG)19
b FC(and)24 b(the)g(latter)h(is)e(al)o(w)o(ays)h(an)g
Fy(AOI_ANY)p FC(.)0 4018 y Fy(struct)46 b(aoi_typed)0
4131 y({)382 4244 y(aoi_type)379 b(tag;)382 4356 y(aoi_type)g(type;)0
4469 y(};)0 4714 y Fz(Interfaces)0 4888 y FC(An)23 b
Fy(AOI_INTERFACE)d FC(represents)26 b(an)g Fv(I)t(D)t(L)r
FC(-de\002ned)g(interf)o(ace)h(or)c(object)i(type.)33
b Fv(AO)t(I)r FC(')-5 b(s)24 b(notion)h(of)f(an)g(interf)o(ace)i(is)e
(\003e)o(x-)0 5001 y(ible)j(enough)h(to)f(represent)j
Fv(C)t(O)t(R)t(B)r(A)e Fy(interface)23 b FC(declarations)30
b(and)e Fv(O)t(N)t(C)i(R)t(P)t(C)f Fy(version)23 b FC(declarations,)31
b(and)c(should)0 5114 y(be)d(\003e)o(xible)g(enough)h(to)e(represent)j
(the)e(corresponding)k(notions)d(of)f(other)i Fv(I)t(D)t(L)r
FC(s)f(as)f(well.)141 5227 y(An)19 b Fy(AOI_INTERFACE)14
b FC(supports)22 b(separate)f(notions)g(for)e(attrib)n(utes)j
(\(\223data)f(members\224\))f(and)f(operations)j(\(\223function)0
5340 y(members\224\).)43 b(Interf)o(ace)31 b(operations)f(are)f(stored)
g(in)f Fy(aoi_operation)c FC(structures,)31 b(which)d(are)h(contained)h
(within)f(the)p eop
%%Page: 51 51
51 50 bop 0 -165 a Fx(4.2.)51 b(A)-5 b(OI)23 b(D)l(A)-10
b(T)i(A)21 b(STR)l(UCTURES)2608 b FC(51)0 91 y Fy(aoi_interface)26
b FC(structure)33 b(sho)n(wn)e(belo)n(w)-6 b(.)49 b(Each)31
b Fy(aoi_operation)26 b FC(contains)32 b(se)n(v)o(eral)g(bits)f(of)f
(information:)46 b(the)0 204 y(operation)24 b(name,)d(its)g(request)i
(and)f(reply)g(message)g(identi\002ers,)h(the)f(parameters,)h(e)o
(xceptions)h(that)d(may)g(be)g(raised,)i(and)0 317 y(v)n(arious)31
b(\003ags.)48 b(The)31 b Fv(AO)t(I)h FC(data)e(structures)j(for)d
(representing)j(these)e(operation)h(data)f(are)f(sho)n(wn)g(in)g(the)g
(code)g(belo)n(w)-6 b(.)0 430 y(Most)34 b(of)g(these)h(are)g(what)f
(one)g(w)o(ould)h(e)o(xpect,)j(e)o(xcept)d(perhaps)h(for)e(the)h
(request)h(and)e(reply)h(message)h(identi\002ers.)0 543
y(These)28 b(are)g(intended)j(to)d(be)i Fv(I)t(D)t(L)r
FC(-speci\002ed)h(\223suggestions\224)h(to)c(the)g(presentation)k
(generator)e(and)f(back)f(end)h(stages)g(of)0 656 y(Flick.)54
b(These)32 b(later)h(stages)g(are)f(responsible)j(for)e(deciding)h(the)
e(actual)h(identi\002ers)h(and)e(codes)h(used)g(to)f(implement)0
769 y(an)c(interf)o(ace.)43 b(A)27 b(presentation)k(generator)f(and)f
(back)f(end)g(can)h(use)f(identi\002ers)h(that)g(come)e(from)h(the)i
Fv(I)t(D)t(L)h FC(\(as)d(passed)0 882 y(through)g Fv(AO)t(I)r
FC(\),)23 b(b)n(ut)h(are)g(not)g Fu(r)m(equir)m(ed)j
FC(to)d(use)g(them.)1703 849 y Fr(3)141 999 y FC(Interf)o(ace)g(attrib)
n(utes)h(are)d(stored)h(separately)i(from)d(general)h(operations)i(and)
d(are)g(represented)k(as)21 b(special)j(f)o(acilities)0
1112 y(for)g(reading)i(and)f(writing)g(and)g(interf)o(ace')-5
b(s)27 b(\223data)e(members.)-6 b(\224)31 b(An)23 b Fy(aoi_attribute)d
FC(speci\002es)26 b(four)f(separate)h(codes:)0 1225 y(tw)o(o)h(for)h
(reading)h(\(request)g(and)f(reply\))h(and)f(tw)o(o)f(for)h(writing.)41
b(The)27 b(type)h(of)f(the)h(interf)o(ace)i(attrib)n(ute)g(is)d(stored)
i(in)e(the)0 1338 y Fy(aoi_attribute)19 b FC(structure.)141
1455 y Fu(Note)h(that)h(all)g(of)f(an)g(interface')l(s)k(oper)o(ation)e
(and)f(attrib)n(ute)i(r)m(equest)f(and)f(r)m(eply)f(codes)i(must)e(be)g
(unique)o(.)29 b(Mor)m(eo)o(ver)-10 b(,)0 1568 y(the)20
b(r)m(equest)g(and)g(r)m(eply)g(codes)g(for)g(a)f(single)h(oper)o
(ation)i(or)d(attrib)n(ute)j(cannot)f(be)e(identical.)30
b FC(These)20 b(restrictions)i(ease)e(the)0 1681 y(translation)31
b(of)f Fv(AO)t(I)h FC(into)f Fv(M)t(I)t(N)t(T)i FC(during)e
(presentation)h(generation.)46 b(\(See)28 b(Section)h(11.2.1)g(for)f
(details.\))45 b(In)28 b(addition,)0 1794 y(because)33
b(operations)h(and)e(attrib)n(utes)i(are)e(quite)g(similar)l(,)i(some)e
(presentation)j(generators)f(may)d(choose)i(to)e(translate)0
1907 y Fy(aoi_attribute)p FC(s)20 b(into)k(v)n(arious)h
Fy(aoi_operation)p FC(s)19 b(for)24 b(accessing)i(the)e(attrib)n(utes.)
0 2146 y Fy(enum)47 b(aoi_direction)0 2259 y({)382 2372
y(AOI_DIR_IN)283 b(=)48 b(1,)382 2485 y(AOI_DIR_OUT)235
b(=)48 b(2,)382 2598 y(AOI_DIR_INOUT)139 b(=)48 b(3,)382
2711 y(AOI_DIR_RET)235 b(=)48 b(4)0 2824 y(};)0 3050
y(struct)e(aoi_parameter)0 3163 y({)382 3275 y(string)475
b(name<>;)382 3388 y(aoi_direction)139 b(direction;)382
3501 y(aoi_type)379 b(type;)0 3614 y(};)0 3840 y(typedef)46
b(u_int)g(aoi_op_flags;)0 3953 y(const)g(AOI_OP_FLAG_NONE)473
b(=)48 b(0x00000000;)0 4066 y(const)e(AOI_OP_FLAG_ONEWAY)377
b(=)48 b(0x00000001;)0 4179 y(const)e(AOI_OP_FLAG_IDEMPOTENT)185
b(=)48 b(0x00000002;)0 4292 y(const)e(AOI_OP_FLAG_SETTER)377
b(=)48 b(0x00000004;)0 4405 y(const)e(AOI_OP_FLAG_GETTER)377
b(=)48 b(0x00000008;)0 4630 y(struct)e(aoi_operation)0
4743 y({)382 4856 y(string)475 b(name<>;)382 5082 y(/*)p
0 5161 1560 4 v 105 5217 a Fq(3)134 5249 y Fp(In)25 b(practice,)g(the)f
(current)g(scheme)h(for)f(tracking)j Fn(I)t(D)t(L)r Fp(-speci\002ed)c
(identi\002ers)h(has)g(pro)o(v)o(en)h(to)f(be)h(too)f(restricti)n(v)o
(e)g(in)f(some)i(circumstances.)0 5340 y(This)19 b(is)f(brie\003y)h
(discussed)h(in)f(Section)g(4.5.)p eop
%%Page: 52 52
52 51 bop 0 -165 a FC(52)877 b Fx(CHAPTER)20 b(4.)51
b(ABSTRA)l(CT)20 b(OBJECT)h(INTERF)-7 b(A)l(CE)21 b(\(A)-5
b(OI\))23 b(REPRESENT)-8 b(A)e(TION)430 91 y Fy(*)47
b(Code)g(uniquely)e(identifying)g(this)i(operation)e(within)h(this)h
(interface;)430 204 y(*)g(works)f(the)h(same)g(way)g(as)g(the)g
(code_type)e(and)i(code)g(in)g(aoi_interface.)430 317
y(*/)382 430 y(aoi_const)331 b(request_code;)382 543
y(aoi_const)g(reply_code;)382 769 y(aoi_op_flags)187
b(flags;)382 995 y(/*)47 b(Parameters)e(to/from)h(this)g(operation.)93
b(*/)382 1108 y(aoi_parameter)139 b(params<>;)382 1333
y(/*)47 b(Return)f(type,)g(if)i(any.)e(*/)382 1446 y(aoi_type)379
b(return_type;)382 1672 y(/*)430 1785 y(*)47 b(Exceptions)e(that)i(can)
g(be)g(raised)f(by)h(this)g(method.)93 b(These)47 b(must)f(be)430
1898 y(*)h(AOI_INDIRECTS)d(so)j(that)g(we)g(can)g(access)f(the)h
(exceptions')e(names.)430 2011 y(*/)382 2124 y(aoi_type)379
b(exceps<>;)0 2237 y(};)0 2462 y(struct)46 b(aoi_attribute)0
2575 y({)382 2688 y(string)189 b(name<>;)382 2914 y(/*)47
b(Attribute)e(code/identifier.)91 b(*/)382 3027 y(aoi_const)45
b(read_request_code;)382 3140 y(aoi_const)g(read_reply_code;)382
3253 y(aoi_const)g(write_request_code;)382 3366 y(aoi_const)g
(write_reply_code;)382 3592 y(/*)i(Type)g(of)g(this)f(attribute.)93
b(*/)382 3704 y(aoi_type)g(type;)382 3930 y(/*)47 b(Is)g(the)g
(attribute)e(readonly)h(*/)382 4043 y(bool)285 b(readonly;)0
4156 y(};)0 4382 y(struct)46 b(aoi_interface)0 4495 y({)382
4608 y(/*)h(IDL)g(this)g(interface)e(was)i(defined)f(in)h(-)g
("top-level")e(interface)g(ID.)95 b(*/)382 4721 y(aoi_idl_id)283
b(idl;)382 4946 y(/*)430 5059 y(*)47 b(`code_type')e(is)i(the)g(type)f
(of)i(the)f(identifying)d(interface,)h(e.g.)i(a)430 5172
y(*)g(char-array)e(\(string\))h(for)g(CORBA,)h(a)g(number)f(for)h(MIG,)
g(a)g(struct)f(for)h(DCE)430 5285 y(*)g(uuid's,)f(etc.)94
b(`code')46 b(is)h(the)g(actual)f(code)h(identifying)e(this)h
(interface.)p eop
%%Page: 53 53
53 52 bop 0 -165 a Fx(4.2.)51 b(A)-5 b(OI)23 b(D)l(A)-10
b(T)i(A)21 b(STR)l(UCTURES)2608 b FC(53)430 91 y Fy(*/)382
204 y(aoi_type)379 b(code_type;)382 317 y(aoi_const)331
b(code;)382 543 y(/*)47 b(Other)f(interfaces)f(this)i(inherits)f(from.)
g(*/)382 656 y(aoi_type)379 b(parents<>;)382 882 y(/*)47
b(Type)g(of)g(the)g(identifying)d(code)j(of)g(each)g
(attribute/operation.)90 b(*/)382 995 y(aoi_type)379
b(op_code_type;)382 1220 y(/*)47 b(Operations)e(and)i(attributes)e
(accessible)g(through)h(this)g(interface.)f(*/)382 1333
y(aoi_operation)139 b(ops<>;)382 1446 y(aoi_attribute)g(attribs<>;)382
1672 y(/*)47 b(Exceptions)e(that)i(can)g(be)g(raised)f(by)h(any)g
(method)f(in)h(this)g(interface.)93 b(*/)382 1785 y(aoi_type)379
b(excepts<>;)0 1898 y(};)141 2121 y FC(Note)25 b(that)h(the)f
Fy(idl)e FC(and)j Fy(excepts)c FC(slots)k(of)f(an)g Fy(aoi_interface)c
FC(are)k(not)h(currently)h(used)f(for)f(an)o(ything)i(useful.)0
2234 y(\(The)22 b Fy(idl)f FC(slot)i(is)f(occasionally)k(used)e(to)e(w)
o(ork)g(around)i(certain)g(translation)i(problems)e(in)e(the)h
(presentation)j(generator)0 2347 y(and)e(back)g(end)g(stages)h(of)f
(Flick,)f(b)n(ut)h(all)g(of)f(these)i(cases)f(should)i(be)d(handled)j
(in)d(more)h(principled)i(w)o(ays.\))0 2606 y Fz(F)n(orward)d
(Interfaces)0 2784 y FC(An)29 b Fy(AOI_FWD_INTRFC)c FC(is)30
b(essentially)i(a)e(placeholder)j(for)d(an)f(interf)o(ace)j(or)e
(object)h(type)f(that)h(has)f(been)g(named)h(b)n(ut)0
2897 y(not)f(yet)g(de\002ned.)48 b(After)29 b(the)h(input)j
Fv(I)t(D)t(L)g FC(has)d(been)g(parsed,)i(a)e(front)g(end)g(must)g(mak)o
(e)g(a)f(cleanup)i(pass)g(o)o(v)o(er)e(the)j Fv(AO)t(I)0
3010 y FC(in)23 b(order)i(to)e(attach)h Fy(AOI_FWD_INTRFC)19
b FC(de\002nitions)26 b(to)d(the)g(corresponding)28 b(\223real\224)d
Fy(AOI_INTERFACE)19 b FC(de\002nitions.)30 b(In)0 3123
y(some)c Fv(I)t(D)t(L)r FC(s)e(\(e.g.,)h Fv(C)t(O)t(R)t(B)r(A)i(I)t(D)t
(L)r FC(\),)d(it)f(is)h(an)f(error)i(to)e(forw)o(ard-declare)k(and)d
(interf)o(ace)i(and)e(then)g(not)g(de\002ne)g(it.)0 3382
y Fz(Namespaces)0 3560 y FC(An)19 b Fy(AOI_NAMESPACE)14
b FC(describes)22 b(a)d(namespace)i(in)e(the)h(input)i
Fv(I)t(D)t(L)g FC(\002le\(s\).)28 b(These)19 b(are)h(used,)g(for)g
(instance,)i(to)d(represent)2 3673 y Fv(C)t(O)t(R)t(B)r(A)26
b Fy(module)d FC(constructs.)37 b(At)25 b(present,)i
Fy(AOI_NAMESPACE)p FC(s)21 b(are)26 b(not)g(entirely)h(suitable)h(for)d
(describing)30 b Fv(O)t(N)t(C)f(R)t(P)t(C)0 3786 y Fy(program)p
FC(s)24 b(because)k(an)e Fy(AOI_NAMESPACE)21 b FC(pro)o(vides)28
b(no)n(where)f(to)f(store)h(the)g(program)g(identi\002er)-5
b(.)37 b(See)26 b(Section)h(10.3)0 3899 y(for)d(details.)0
4158 y Fz(Indir)n(ect)g(Refer)n(ences)0 4336 y FC(An)34
b Fy(AOI_INDIRECT)c FC(represents)37 b(a)d(reference)j(to)d(another)j
Fy(aoi_def)p FC(,)d(i.e.,)i(a)e(reference)j(to)d(a)g(name)g(binding.)64
b(An)0 4449 y Fy(AOI_INDIRECT)32 b FC(is)37 b(used)g(whene)n(v)o(er)h
(an)g Fv(I)t(D)t(L)i FC(source)e(construct)h(refers)f(to)e(a)g(named)h
(type)h(\227)d(e.g.,)k(a)d(pre)n(viously)0 4562 y Fy(typedef)p
FC('ed)22 b(type)i(\227)f(or)g(to)h(a)f(named)h(constant,)h(or)f(to)f
(an)o(y)h(other)g(kind)h(of)e(name)h(binding.)141 4677
y(The)31 b Fy(indirect_ref)c FC(v)n(alue)32 b(within)g(an)f
Fy(AOI_INDIRECT)d FC(in)j(the)g(inde)o(x)h(of)g(the)f
Fy(aoi_def)e FC(that)i(is)h(being)g(refer)n(-)0 4790
y(enced.)e(\(Remember)24 b(that)g(all)i Fv(AO)t(I)f FC(de\002nitions)h
(are)d(stored)i(in)f(a)f(single)i(array)-6 b(.\))0 5049
y Fz(Err)n(ors)0 5227 y FC(Finally)g(,)37 b Fy(AOI_ERROR)30
b FC(is)k(a)f(placeholder)k(used)e(by)f(Flick')-5 b(s)34
b(front)h(ends)f(to)g(handle)j Fv(I)t(D)t(L)g FC(parse)d(errors)h(in)f
(a)f(graceful)0 5340 y(manner)-5 b(.)30 b(Instances)c(of)d
Fy(AOI_ERROR)d FC(should)25 b(ne)n(v)o(er)f(be)g(written)g(to)g(an)h
Fv(AO)t(I)h FC(\002le.)p eop
%%Page: 54 54
54 53 bop 0 -165 a FC(54)877 b Fx(CHAPTER)20 b(4.)51
b(ABSTRA)l(CT)20 b(OBJECT)h(INTERF)-7 b(A)l(CE)21 b(\(A)-5
b(OI\))23 b(REPRESENT)-8 b(A)e(TION)0 91 y Ft(4.3)119
b(The)30 b(A)-5 b(OI)30 b(Library)0 299 y FC(Common)e(functions)j(for)e
(creating)i(and)e(manipulating)k Fv(AO)t(I)e FC(data)e(structures)i
(are)e(contained)i(in)e(Flick')-5 b(s)31 b Fv(AO)t(I)g
FC(library)-6 b(.)0 412 y(The)21 b(source)i(code)f(for)f(the)h(library)
h(is)e(in)g(the)g Fy(libaoi)e FC(directory)-6 b(,)24
b(and)e(the)f(library)i(header)g(\002le)e(is)g Fy(mom/libaoi.h)p
FC(.)j(The)0 525 y(library)h(functions)h(are)e(summarized)h(belo)n(w)-6
b(.)0 714 y Fy(aoi_const)45 b(aoi_new_const\(aoi_const_k)o(ind)c
(kind\))300 827 y FC(Return)28 b(an)f Fy(aoi_const)c
FC(that)28 b(points)g(to)f(a)g(ne)n(wly)g(allocated)i
Fy(aoi_const_u)23 b FC(structure)29 b(initialized)h(with)d(the)300
940 y(gi)n(v)o(en)f Fv(AO)t(I)g FC(constant)f Fy(kind)p
FC(.)300 1094 y(In)j(the)h(structure)h(returned)h(by)d
Fy(aoi_new_const)p FC(,)d(an)o(y)j(additional)j(\002elds)d(for)h
(describing)i(the)e(constant)h(are)300 1207 y(uninitialized)d(and)c
(must)g(be)g(set)g(by)g(the)g(caller)-5 b(.)29 b(F)o(or)22
b(this)i(reason,)g(it)e(is)h(often)h(more)f(con)l(v)o(enient)j(to)d
(call)g(one)g(of)300 1320 y(the)h(follo)n(wing,)h(more)e(speci\002c)i
(constant)g(constructors:)300 1513 y Fy(aoi_const)45
b(aoi_new_const_char\(char)d(c\))600 1626 y FC(Return)24
b(an)f Fy(aoi_const)d FC(that)j(points)i(to)e(a)g(ne)n(w)f
Fy(aoi_const_u)d FC(describing)26 b(the)e(constant)h(character)600
1739 y Fy(c)p FC(.)300 1910 y Fy(aoi_const)45 b(aoi_new_const_int\(int)
d(val\))600 2023 y FC(Return)31 b(an)f Fy(aoi_const)c
FC(that)31 b(points)g(to)f(a)f(ne)n(w)h Fy(aoi_const_u)c
FC(describing)33 b(the)d(constant)i(inte)o(ger)600 2136
y Fy(val)p FC(.)300 2307 y Fy(aoi_const)45 b
(aoi_new_const_float\(doubl)o(e)d(val\))600 2420 y FC(Return)26
b(an)f Fy(aoi_const)d FC(that)k(points)g(to)f(a)g(ne)n(w)g
Fy(aoi_const_u)c FC(describing)28 b(the)e(constant)h(\003oating-)600
2533 y(point)e Fy(val)p FC(.)300 2705 y Fy(aoi_const)45
b(aoi_new_const_string\(cons)o(t)d(char)47 b(*s\))600
2817 y FC(Return)26 b(an)g Fy(aoi_const)c FC(that)27
b(points)g(to)e(a)g(ne)n(w)g Fy(aoi_const_u)d FC(describing)29
b(the)d(constant)i(string)f Fy(s)p FC(.)600 2930 y(Note)c(that)i(a)e
(string)h(is)g(represented)j(as)c(an)h(array)g(of)f(characters,)j
Fu(without)h FC(a)c(terminating)j(NUL.)300 3102 y Fy(aoi_const)45
b(aoi_new_const_string_cat\()o(cons)o(t)d(char)k(*s1,)51
b(const)c(char)f(*s2\))600 3215 y FC(Return)28 b(an)g
Fy(aoi_const)d FC(that)j(points)h(to)f(a)f(ne)n(w)g Fy(aoi_const_u)d
FC(describing)30 b(the)e(concatenation)k(of)600 3328
y Fy(s1)22 b FC(and)i Fy(s2)p FC(.)0 3520 y Fy(int)47
b(aoi_const_eq\(aoi_const)42 b(c1,)51 b(aoi_const)45
b(c2\))300 3633 y FC(Returns)27 b Fy(1)e FC(if)h(the)h(tw)o(o)f
(constants)i(are)f(equal)g(\(i.e.,)f(structurally)k(identical,)f
(representing)g(the)e(same)f(constant)300 3746 y(v)n(alue\))f(and)f
Fy(0)e FC(if)h(the)o(y)h(are)g(not.)0 3939 y Fy(void)47
b(aoi_get_int_size\(aoi_in)o(tege)o(r)42 b(*ai,)50 b(int)d(*out_bits,)j
(int)c(*out_is_signed\))300 4052 y FC(Determine)22 b(the)f(number)g(of)
g(bits)g(\(1,)g(8,)g(16,)g(or)f(32\))h(required)i(to)e(represent)i(the)
e(gi)n(v)o(en)g Fy(aoi_integer)c FC(type.)28 b(In)300
4164 y(essence,)21 b(this)e(function)i(con)l(v)o(erts)g(a)d
(description)k(of)d(an)g(inte)o(ger)h(range)f(into)h(a)e
(bits/signedness)23 b(representation.)300 4277 y(The)28
b(required)j(number)e(of)g(bits)g(is)f(stored)i(in)f
Fy(*out_bits)c FC(and)k(the)g(signedness)i(indicator)g(\(zero)f(or)e
(one\))h(is)300 4390 y(stored)c(in)e Fy(*out_is_signed)p
FC(.)0 4583 y Fy(void)47 b(aoi_get_array_len\(aoi)42
b(*a,)51 b(aoi_array)45 b(*at,)51 b(unsigned)45 b(*min,)51
b(unsigned)45 b(*max\))300 4696 y FC(Determine)22 b(the)g(minimum)f
(and)g(maximum)h(lengths)h(of)e(the)g(gi)n(v)o(en)h Fy(aoi_array)c
FC(type.)29 b(The)21 b(minimum)g(length)300 4809 y(is)29
b(stored)i(in)f Fy(*min)e FC(and)i(the)g(maximum)f(is)h(stored)h(in)e
Fy(*max)p FC(.)46 b(\(If)29 b(the)h(lengths)i(are)d(equal,)j(then)f
(the)f(array)g(is)300 4922 y(\002x)o(ed-length.\))j(Note)24
b(that)h(the)f(entire)i Fy(aoi)c FC(structure)27 b(must)d(be)g(passed)i
(to)e(this)h(function,)h(because)g(the)f(length)300 5035
y(of)e(the)h(array)h(may)e(be)h(an)f Fy(AOI_INDIRECT)d
FC(to)j(another)k Fv(AO)t(I)f FC(type)e(de\002nition.)0
5227 y Fy(aoi_ref)46 b(aoi_get_parent_scope\(aoi)41 b(*the_aoi,)49
b(aoi_ref)d(ref\))300 5340 y FC(Return)20 b(the)f(inde)o(x)i(\()p
Fy(aoi_ref)p FC(\))c(of)i(the)i Fv(AO)t(I)h FC(de\002nition)f(that)e
(started)i(the)f(scope)g(in)g(which)f(the)h(de\002nition)h(at)e
Fy(ref)p eop
%%Page: 55 55
55 54 bop 0 -165 a Fx(4.3.)51 b(THE)22 b(A)-5 b(OI)22
b(LIBRAR)-6 b(Y)2848 b FC(55)300 91 y(is)24 b(contained.)32
b(More)23 b(simply)i(put,)f(\002nd)f(the)h(de\002nition)i(of)e(the)g
(parent)h(scope)g(of)e Fy(ref)p FC(.)28 b(If)c Fy(ref)e
FC(refers)j(to)e(a)h(top-)300 204 y(le)n(v)o(el)c(de\002nition)i
(\(i.e.,)e(a)f(de\002nition)j(in)e(scope)h(zero\),)g(then)g(the)f
(return)i(v)n(alue)e(is)g(the)g(constant)j Fy(aoi_ref_null)p
FC(.)0 411 y Fy(char)47 b(*aoi_get_scoped_name\(ao)o(i_re)o(f)42
b(ref,)50 b(const)d(char)f(*separator\))300 524 y FC(Compute)22
b(and)g(return)h(the)f(fully)g(scoped)h(name)f(of)f(the)j
Fv(AO)t(I)f FC(de\002nition)h(referenced)g(by)d Fy(ref)p
FC(,)f(according)k(to)e(the)302 637 y Fv(AO)t(I)29 b
FC(representation)i(of)26 b(scopes)i(\(described)i(in)d(Section)g
(4.2.1\).)39 b(The)26 b(name)h(components)i(are)e(separated)i(by)300
750 y(the)24 b Fy(separator)c FC(string.)0 935 y Fy(int)47
b(aoi_def_find_member\(aoi)41 b(*in_aoi,)50 b(aoi_def)c(*d,)51
b(const)46 b(char)h(*name,)j(aoi_def)0 1048 y(**out_d,)g(int)d
(*out_memindex\))300 1161 y FC(Search)26 b(through)h(the)e(gi)n(v)o(en)
h Fy(aoi_def)c(d)i FC(for)h(an)o(y)g(members)h(that)g(ha)n(v)o(e)f(the)
h(gi)n(v)o(en)f Fy(name)p FC(.)32 b(The)24 b(kinds)j(of)e(def-)300
1274 y(initions)k(that)e(contain)i(named)e(members)h(are)f
Fy(AOI_STRUCT)p FC(,)c Fy(AOI_UNION)p FC(,)h Fy(AOI_EXCEPTION)p
FC(,)f Fy(AOI_ENUM)p FC(,)300 1387 y(and)h Fy(AOI_INTERFACE)p
FC(.)g(In)g(the)g(case)g(of)f(interf)o(aces,)j(parents)f(are)f(also)g
(searched)i(for)e(the)g(gi)n(v)o(en)g Fy(name)p FC(.)300
1547 y(If)19 b(a)g(matching)i(member)e(is)g(found,)i(this)f(function)h
(returns)g(true)f(\()p Fy(1)p FC(\))f(and)h(sets)f Fy(**out_d)e
FC(and)j Fy(*out_memindex)300 1660 y FC(to)g(refer)g(to)g(the)g
(location)i(of)e(the)g(member)-5 b(.)27 b Fy(**out_d)17
b FC(is)j(set)g(to)g(point)h(to)e(the)i Fy(aoi_def)c
FC(in)i(which)i(the)f(matching)300 1773 y(member)28 b(w)o(as)f(found;)k
(this)d(will)f(al)o(w)o(ays)h(be)f(the)h(same)f(as)h(the)f(original)j
(de\002nition)f(e)o(xcept)g(when)e(a)g(member)300 1886
y(is)h(located)i(in)e(a)f(parent)j(interf)o(ace.)44 b
Fy(*out_memindex)24 b FC(is)k(set)g(to)g(the)h(inde)o(x)f(of)g(the)h
(member)f(in)g(the)g(array)h(of)300 1999 y(named)e(elements)i(in)d(the)
h(de\002nition)i(\(e.g.,)e(the)g(array)h(of)f(slots)g(in)g(an)g
Fy(AOI_STRUCT)p FC(,)d(or)i(the)i(array)f(of)g(v)n(alues)300
2112 y(inside)k(an)f Fy(AOI_ENUM)p FC(\).)44 b(Because)30
b(interf)o(aces)i(ha)n(v)o(e)f(tw)o(o)e(lists)h(of)g(names)g(\227)e
(operations)33 b(and)d(attrib)n(utes)i(\227)300 2225
y Fy(*out_memindex)18 b FC(may)k(be)g(set)h(specially)-6
b(.)31 b(If)22 b(the)g(matching)i(member)f(is)f(an)g(attrib)n(ute,)j
(the)e Fy(*out_memindex)300 2338 y FC(is)h(of)n(fset)h(by)f(the)h
(number)g(of)f(operations)j(in)d(the)g(interf)o(ace.)33
b(F)o(or)23 b(e)o(xample,)i(if)f(there)h(were)f(\002)n(v)o(e)f
(operations)k(\(at)300 2451 y(array)k(indices)h(zero)e(through)i
(four\),)h(a)c Fy(*out_memindex)d FC(v)n(alue)31 b(of)e(six)i(w)o(ould)
f(correspond)j(to)d(the)h(second)300 2564 y(attrib)n(ute.)300
2724 y(Of)23 b(course,)h(if)g(no)f(matching)i(member)f(is)f(found,)i
Fy(aoi_def_find_member)17 b FC(returns)26 b(f)o(alse)e(\()p
Fy(0)p FC(\).)0 2931 y Fy(int)47 b(aoi_def_has_member\(aoi)42
b(*in_aoi,)49 b(aoi_def)d(*d,)51 b(const)c(char)f(*name\))300
3044 y FC(Returns)33 b(true)f(if)g(the)g(gi)n(v)o(en)g
Fy(aoi_def)d FC(contains)34 b(a)e(member)g(with)f(the)h(gi)n(v)o(en)h
(name.)54 b(This)31 b(is)h(a)f(simpli\002ed)300 3157
y(interf)o(ace)26 b(to)d(the)h Fy(aoi_def_find_member)18
b FC(function)25 b(described)h(abo)o(v)o(e.)0 3363 y
Fy(aoi_type)46 b(aoi_indir\(aoi)e(*a,)51 b(aoi_type)45
b(t\))300 3476 y FC(F)o(ollo)n(w)24 b(a)g(chain)h(of)g
Fy(AOI_INDIRECT)20 b FC(type)25 b(de\002nitions,)i(starting)f(at)f
Fy(t)p FC(,)e(to)h(determine)j(the)d(underlying)k(\223real\224)300
3589 y(type.)g(Return)21 b(the)f(located)h Fy(aoi_type)c
FC(\(a)j(pointer)h(to)f(the)g Fy(aoi_type_u)d FC(structure)22
b(contained)g(in)e(the)g(terminal)300 3702 y Fy(aoi_def)p
FC(\).)26 b(Note)e(that)g(if)f Fy(t)g FC(is)g(not)h(an)f(indirect)j
(de\002nition,)f(then)f Fy(t)f FC(is)g(its)h(o)n(wn)f(underlying)j
(type.)0 3909 y Fy(aoi_type)46 b(aoi_indir_1\(aoi)d(*a,)51
b(aoi_type)46 b(t\))300 4022 y FC(F)o(ollo)n(w)29 b(a)h(single)i(le)n
(v)o(el)e(of)g(an)g Fy(AOI_INDIRECT)d FC(chain;)34 b(in)c(other)i(w)o
(ords,)g(\223dereference\224)i Fy(t)29 b FC(and)h(return)i(the)300
4135 y(referenced)26 b Fy(aoi_type)p FC(.)g(If)d Fy(t)g
FC(is)g(not)h(an)g(indirect)h(de\002nition,)g(then)f(this)g(function)i
(simply)e(returns)i Fy(t)p FC(.)0 4342 y Fy(aoi_ref)46
b(aoi_deref_fwd\(aoi)d(*a,)51 b(aoi_ref)46 b(fwd\))300
4455 y FC(Locate)39 b(and)g(return)h(the)f(inde)o(x)g(of)g(the)g
Fy(AOI_INTERFACE)34 b FC(de\002nition)40 b(corresponding)j(to)38
b(the)h Fy(AOI_FWD_)300 4567 y(INTRFC)21 b FC(de\002nition)k(at)g
Fv(AO)t(I)g FC(inde)o(x)f Fy(fwd)p FC(.)j(If)c(the)h(\223real\224)g
(interf)o(ace)i(de\002nition)f(cannot)g(be)e(found,)h(this)g(function)
300 4680 y(returns)h Fy(aoi_ref_null)p FC(.)300 4841
y(\(If)j Fy(fwd)e FC(refers)k(to)d(an)h(actual)i Fy(AOI_INTERFACE)p
FC(,)24 b(then)29 b Fy(fwd)d FC(is)i(returned.)45 b(If)27
b Fy(fwd)g FC(refers)i(to)f(a)f(non-interf)o(ace)300
4954 y(type,)d(then)g Fy(aoi_ref_null)c FC(is)j(returned.\))300
5114 y(This)e(function)i(is)e(primarily)i(useful)f(for)f(front)h(ends)g
(only)-6 b(.)29 b(Other)21 b(stages)i(of)e(compilation)i(can)f(simply)f
(refer)h(to)300 5227 y(the)j Fy(aoi_ref)e FC(contained)k(within)f(an)f
Fy(AOI_FWD_INTRFC)20 b FC(de\002nition)27 b(in)e(order)h(to)f(\002nd)g
(the)g(actual)h(de\002nition)300 5340 y(of)d(an)h(interf)o(ace.)p
eop
%%Page: 56 56
56 55 bop 0 -165 a FC(56)877 b Fx(CHAPTER)20 b(4.)51
b(ABSTRA)l(CT)20 b(OBJECT)h(INTERF)-7 b(A)l(CE)21 b(\(A)-5
b(OI\))23 b(REPRESENT)-8 b(A)e(TION)0 91 y Fy(void)47
b(aoi_check\(aoi)d(*dest\))300 204 y FC(Check)24 b(the)g(v)n(alidity)h
(of)f(the)f(gi)n(v)o(en)h Fy(aoi)e FC(structure.)31 b
Fu(At)23 b(pr)m(esent,)i(this)f(is)f(lar)m(g)o(ely)i(unimplemented.)0
396 y Fy(void)47 b(aoi_readfh\(aoi)d(*dest,)50 b(FILE)c(*fh\))300
508 y FC(Read)21 b(an)h Fy(aoi)d FC(structure)24 b(from)d
Fy(fh)f FC(into)i Fy(dest)p FC(.)27 b(\(The)21 b(disk)h(data)g(is)f
(stored)i(in)g Fv(X)t(D)t(R)g FC(format,)f(and)g(the)f(actual)i(I/O)300
621 y(is)g(performed)h(by)f(functions)j(that)d(are)g(generated)i(by)e
Fy(rpcgen)d FC(from)j(the)g Fy(mom/aoi.x)d FC(\002le.\))28
b(If)22 b(input)i(f)o(ails)g(for)300 734 y(some)j(reason,)h(this)f
(function)i(in)l(v)n(ok)o(es)g Fy(panic)p FC(,)c(which)i(causes)h(the)f
(process)i(to)d(print)i(an)e(error)i(message)g(and)300
847 y(e)o(xit.)0 1038 y Fy(void)47 b(aoi_writefh\(aoi)c(*dest,)51
b(FILE)46 b(*fh\))300 1151 y FC(Write)30 b(the)g(gi)n(v)o(en)g
Fy(aoi)e FC(structure)k(to)e Fy(fh)p FC(.)46 b(\(As)29
b(before,)j(the)e(data)g(in)g(the)g(\002le)f(is)h(stored)h(in)g
Fv(X)t(D)t(R)g FC(format,)h(and)300 1264 y(the)27 b(actual)g(I/O)f(is)g
(performed)i(by)f Fy(rpcgen)p FC(-generated)g(functions.\))40
b(This)27 b(function)h(in)l(v)n(ok)o(es)h Fy(aoi_check)23
b FC(to)300 1377 y(v)o(erify)29 b(the)g(v)n(alidity)h(of)e(the)j
Fv(AO)t(I)f FC(data)f(before)h(writing)f(the)g(data)g(to)g(disk.)44
b(If)28 b(output)i(f)o(ails)f(for)g(some)f(reason,)300
1490 y(this)c(function)i(calls)e Fy(panic)p FC(.)0 1681
y Fy(void)47 b(translate_aoi_to_mint\(\))300 1794 y FC(Con)l(v)o(ert)26
b(a)f(set)g(of)i Fv(AO)t(I)g FC(de\002nitions)h(into)d(an)g(equi)n(v)n
(alent)30 b Fv(M)t(I)t(N)t(T)e FC(\(Message)f(Interf)o(ace\))g
(representation.)40 b Fv(M)t(I)t(N)t(T)300 1907 y FC(is)22
b(the)h(intermediate)i(language)g(for)e(describing,)i(in)e(an)f
(abstract)j(w)o(ay)-6 b(,)22 b(the)h(messages)h(that)f(will)f(be)h(e)o
(xchanged)300 2020 y(between)28 b(clients)h(and)f(serv)o(ers.)41
b(Chapter)28 b(5)f(describes)k Fv(M)t(I)t(N)t(T)g FC(in)c(detail,)i
(and)e(Chapter)i(11)e(describes)i(Flick')-5 b(s)300 2133
y(presentation)27 b(generators,)f(which)e(in)l(v)n(ok)o(e)i(the)g
Fv(AO)t(I)r FC(-to-)r Fv(M)t(I)t(N)t(T)i FC(translator)-5
b(.)0 2426 y Ft(4.4)119 b Fj(aoid)p Ft(,)28 b(the)i(A)-5
b(OI)29 b(Printing)i(Utility)0 2633 y FC(The)c Fy(aoid)f
FC(program)i(is)g(a)f(simple)h(pretty-printer)j(that)d(tak)o(es)j
Fv(AO)t(I)f FC(input)e(from)g(a)f(\002le)g(or)g(standard)j(input)e(and)
g(outputs)0 2746 y(a)33 b(human-readable,)40 b(ASCII)32
b(translation.)63 b(If)33 b(the)j Fv(AO)t(I)g FC(input)e(comes)h(from)e
(a)h(\002le,)h(the)f(output)h(is)f(a)f(corresponding)0
2859 y(`)p Fy(.aod)p FC(')24 b(\()r Fv(AO)t(I)k FC(dump\))e(\002le.)35
b(Otherwise,)26 b(if)g(the)i Fv(AO)t(I)f FC(input)g(comes)f(from)g
Fy(stdin)p FC(,)d(the)j(human-readable)k(output)d(is)f(sent)0
2972 y(to)k Fy(stdout)p FC(.)46 b(Note)31 b(that)f(as)g(the)j
Fv(AO)t(I)f FC(format)f(changes,)i(this)e(program)h(must)e(also)h(be)f
(changed)i(to)e(support)j(an)o(y)d(ne)n(w)0 3085 y(constructs,)c(or)e
(modi\002cations)h(to)f(e)o(xisting)h(ones.)0 3377 y
Ft(4.5)119 b(Summary)30 b(and)g(Comments)0 3585 y FC(Because)24
b Fv(AO)t(I)f FC(has)e(a)f(relati)n(v)o(ely)j(simple)e(purpose,)i(the)g
Fv(AO)t(I)g FC(format)e(has)g(been)h(quite)f(stable.)30
b(When)21 b(features)h(are)f(added,)0 3697 y(it)h(is)h(generally)i(to)d
(support)j(ne)n(w)d(\(or)g(pre)n(viously)k(unsupported\))i
Fv(I)t(D)t(L)e FC(constructs:)31 b(only)24 b(rarely)f(has)i
Fv(AO)t(I)g FC(been)e(changed)0 3810 y(in)h(order)g(to)g(support)h(the)
f(needs)h(of)e(presentation)28 b(generators.)j(Still,)24
b(there)g(are)g(se)n(v)o(eral)h(ideas)f(for)g(impro)o(ving)j
Fv(AO)t(I)f FC(and)0 3923 y(its)e(library)-6 b(,)25 b(principally)h(to)
e(support)h(Flick')-5 b(s)24 b(later)h(stages)g(of)e(compilation:)0
4136 y Fz(Unif)n(orm)g(Handling)f(of)i(Names.)45 b FC(Not)20
b(all)g(name)h(bindings)h(are)e(represented)k(as)c Fy(aoi_def)d
FC(structures.)30 b(Most)20 b(notably)-6 b(,)227 4249
y(operation)32 b(and)e(attrib)n(ute)i(names)e(are)g(stored)h(within)f
(an)g(interf)o(ace)h(type,)h(not)e(within)g(the)g(top-le)n(v)o(el)h
Fy(aoi_def)227 4362 y FC(array)-6 b(.)31 b(The)24 b(same)g(problem)h
(applies)h(to)e(structure,)i(union,)f(enumeration,)i(and)d(e)o
(xception)i(members.)31 b(The)23 b(non-)227 4475 y(uniform)29
b(handling)i(of)d(names)g(mak)o(es)h(it)f(more)g(dif)n(\002cult)g(to)g
(locate)i(and)e(refer)h(to)f(certain)h(entities;)35 b
Fv(AO)t(I)30 b FC(w)o(ould)227 4588 y(lik)o(ely)25 b(be)f(impro)o(v)o
(ed)g(if)f(all)h(names)g(were)f(handled)j(in)d(the)h(same)g(w)o(ay)-6
b(.)0 4775 y Fz(Multiple)23 b(Names.)46 b FC(Some)20
b Fv(I)t(D)t(L)r FC(s)f(pro)o(vide)h(multiple)g(names)f(for)g
(entities.)29 b(F)o(or)17 b(e)o(xample,)j(in)h Fv(O)t(N)t(C)g(R)t(P)t
(C)i(I)t(D)t(L)r FC(,)d(a)e Fy(program)227 4888 y FC(has)31
b(both)g(a)f(name)g(and)h(a)f(code.)51 b Fv(O)t(N)t(C)34
b(R)t(P)t(C)e Fy(version)p FC(s)c(and)j(operations)i(also)e(ha)n(v)o(e)
g(both)g(names)g(and)f(codes.)227 5001 y(These)c(cases)h(are)f(handled)
h(specially)h(in)g Fv(AO)t(I)r FC(,)d(b)n(ut)i(in)e(general,)30
b Fv(AO)t(I)d FC(should)g(be)f(designed)i(to)d(support)j(multiple)227
5114 y(identi\002ers)h(\(in)e(multiple)h(identi\002er)h(spaces\))f(for)
f(all)g(nameable)i(objects.)41 b(This)26 b(w)o(ould)i(be)f(useful)h
(not)f(only)h(for)229 5227 y Fv(O)t(N)t(C)e(R)t(P)t(C)g(I)t(D)t(L)r
FC(,)d(b)n(ut)f(also)h(for)i Fv(C)t(O)t(R)t(B)r(A)f(I)t(D)t(L)h
FC(\(which)e(has)g(both)i Fv(I)t(D)t(L)r FC(-gi)n(v)o(en)f(names)f(and)
f(\223repository)k(identi\002ers\224\))227 5340 y(and)g
Fv(M)t(I)t(G)i(I)t(D)t(L)e FC(\(in)e(which)g(a)f Fy(subsystem)d
FC(has)k(both)h(a)e(name)g(and)h(a)f(\223message)i(base)g
(identi\002er\224\).)p eop
%%Page: 57 57
57 56 bop 0 -165 a Fx(4.5.)51 b(SUMMAR)-6 b(Y)21 b(AND)g(COMMENTS)2398
b FC(57)227 91 y(Note)27 b(that)h(if)h Fv(AO)t(I)g FC(were)e(impro)o(v)
o(ed)h(in)f(this)h(w)o(ay)-6 b(,)27 b(then)j Fv(M)t(I)t(N)t(T)g
FC(w)o(ould)e(need)g(to)f(be)g(e)o(xtended)i(in)e(a)g(similar)h(w)o(ay)
-6 b(.)227 204 y(This)26 b(w)o(ould)h(in)f(f)o(act)g(solv)o(e)h(an)f
(outstanding)j(problem)f(with)g Fv(M)t(I)t(N)t(T)r FC(:)35
b(namely)-6 b(,)27 b(that)g(the)f(top)g(le)n(v)o(els)h(of)f(the)i
Fv(M)t(I)t(N)t(T)227 317 y FC(tree)d(are)f(too)h(speci\002c.)31
b(Interf)o(ace)c(and)e(operation)h(identi\002ers)g(in)g
Fv(M)t(I)t(N)t(T)i FC(are)c(too)g(speci\002c,)h(are)g(singular)l(,)h
(and)f(are)227 430 y(chosen)31 b(by)e(the)g(presentation)k(generator)-5
b(.)48 b(This)28 b(mak)o(es)i(it)f(dif)n(\002cult)h(for)f(back)h(ends)f
(to)g(construct)j(on-the-wire)227 543 y(message)e(identi\002ers)g
(appropriate)i(to)c(their)h(message)h(formats.)2323 510
y Fr(4)2404 543 y FC(This)f(problem)g(could)h(lar)n(gely)g(be)f(solv)o
(ed)g(by)227 656 y(allo)n(wing)35 b Fv(AO)t(I)e FC(to)e(k)o(eep)i
(multiple)f(names,)i(and)d(e)o(xtending)36 b Fv(M)t(I)t(N)t(T)f
FC(to)c(preserv)o(e)i(the)e(names)h(as)g(\223hints\224)h(to)e(the)227
769 y(presentation)c(generator)f(and)e(back)h(end.)0
956 y Fz(Annotations.)46 b FC(Experience)27 b(has)f(sho)n(wn)f(that)j
Fv(AO)t(I)r FC(')-5 b(s)25 b(\223purity\224)j(is)d(practically)j(incon)
l(v)o(enient.)37 b(It)25 b(is)g(useful)h(and)g(neces-)227
1069 y(sary)h(to)f(distinguish)k(interf)o(ace)e(speci\002cation)h(from)
d(presentation-le)n(v)o(el)31 b(\223cruft\224)d(when)e(designing)j(and)
e(imple-)227 1182 y(menting)c(a)f(\003e)o(xible)i Fv(I)t(D)t(L)h
FC(compiler)e(such)g(as)f(Flick.)28 b(Ho)n(we)n(v)o(er)l(,)22
b(the)g(decision)i(to)e(e)o(xclude)h(all)f(presentation-le)n(v)o(el)227
1295 y(details)35 b(from)g Fv(AO)t(I)g FC(\227)e(and)h(to)f(represent)i
(only)f(\223pure\224)h(interf)o(ace)h(speci\002cations)g(\227)c(means)i
(that)i Fv(I)t(D)t(L)r FC(s)e(with)227 1408 y(annotations)27
b(cannot)e(be)f(supported.)227 1558 y(An)32 b(e)o(xtended)37
b Fv(AO)t(I)d FC(format)f(with)g(support)h(for)f(annotations)j(w)o
(ould)d(be)f(useful)i(for)f(a)f(number)i(of)e(interesting)227
1671 y(projects.)63 b(Immediately)-6 b(,)39 b(it)34 b(w)o(ould)g(mak)o
(e)h(it)f(possible)i(for)f(one)f(to)g(rearchitect)k(Flick')-5
b(s)37 b Fv(M)t(I)t(G)f FC(front)f(end)g(and)227 1784
y(presentation)27 b(generator)f(to)e(use)i Fv(AO)t(I)f
FC(as)e(an)h(intermediate)i(format.)j(Later)l(,)24 b(an)f(annotatable)
29 b Fv(AO)t(I)d FC(w)o(ould)e(mak)o(e)f(it)227 1897
y(easier)j(for)e(people)i(to)e(e)o(xperiment)j(with)d(annotated)29
b Fv(I)t(D)t(L)e FC(speci\002cations,)g(e.g.,)d(speci\002cations)j
(with)d(embedded)227 2010 y(quality-of-service)29 b(constraints\).)0
2198 y Fy(AOI_INTEGER)20 b Fz(V)-9 b(ersus)23 b Fy(AOI_SCALAR)p
Fz(.)42 b FC(Ob)o(viously)-6 b(,)25 b(these)g(tw)o(o)e(types)i(should)g
(be)f(uni\002ed)g(in)f(some)h(w)o(ay)-6 b(.)0 2385 y
Fz(Using)23 b Fy(rpcgen)p Fz(.)44 b FC(See)24 b(Section)h(2.1)g(for)g
(general)i(comments)e(about)h(using)i Fv(O)t(N)t(C)g(R)t(P)t(C)h(I)t(D)
t(L)f FC(to)c(de\002ne)h(Flick')-5 b(s)26 b(interme-)227
2498 y(diate)i(languages.)41 b(The)28 b Fv(AO)t(I)g FC(library)h(in)d
(particular)j(needs)f(more)f(functions)i(that)e(abstract)i(the)e
(underlying)k Fv(AO)t(I)227 2611 y FC(data)i(structures.)57
b(\(Some)32 b(of)g(these)h(functions)i(already)f(e)o(xist)f(in)f(the)g
(indi)n(vidual)j(front)e(ends,)i(and)d(should)i(be)227
2724 y(relocated)26 b(into)e Fy(libaoi)p FC(.\))p 0 5161
1560 4 v 105 5217 a Fq(4)134 5249 y Fp(The)31 b Fn(O)t(N)t(C)t
Fp(/)t Fn(T)t(C)t(P)d Fp(back)i(end,)h(for)e(e)o(xample,)j(goes)d(to)g
(painful)g(lengths)g(to)g(generate)g Fo(program)p Fp(/)p
Fo(version)p Fp(-style)j(message)e(identi\002ers)e(for)0
5340 y(operations)20 b(de\002ned)g(in)e(\223foreign\224)k
Fn(I)t(D)t(L)r Fp(s.)p eop
%%Page: 58 58
58 57 bop 0 -165 a FC(58)877 b Fx(CHAPTER)20 b(4.)51
b(ABSTRA)l(CT)20 b(OBJECT)h(INTERF)-7 b(A)l(CE)21 b(\(A)-5
b(OI\))23 b(REPRESENT)-8 b(A)e(TION)p eop
%%Page: 59 59
59 58 bop 0 715 a Fw(Chapter)44 b(5)0 1131 y FB(Message)52
b(Interface)f(\(MINT\))g(Repr)l(esentation)0 1578 y FC(The)28
b(Message)h(Interf)o(ace)h(\()r Fv(M)t(I)t(N)t(T)r FC(\))g
(intermediate)g(language)h(is)d(designed)i(to)e(represent)i(a)e
(collection)j(of)f Fv(R)t(P)t(C)r FC(/)r Fv(R)t(M)t(I)h
FC(in-)0 1690 y(terf)o(aces)j(in)f(terms)g(of)f(the)h(messages)h(\227)e
(requests)i(and)f(replies)h(\227)e(that)h(will)f(be)h(e)o(xchanged)i
(between)f(clients)g(and)0 1803 y(serv)o(ers.)57 b(Lik)o(e)35
b Fv(AO)t(I)r FC(,)h Fv(M)t(I)t(N)t(T)g FC(descriptions)g(are)d
Fu(abstr)o(act)r FC(:)49 b(not)33 b(concerned)i(with)e(particular)i
(message)f(formats,)i(data)0 1916 y(encoding)26 b(schemes,)f(or)f(stub)
g(styles.)31 b(These)24 b(concrete)i(notions)g(are)e(determined)i(by)e
(Flick')-5 b(s)24 b(presentation)j(generators)0 2029
y(and)d(back)g(ends,)g Fu(after)j FC(the)f Fv(M)t(I)t(N)t(T)g
FC(representation)i(of)c(the)f(interf)o(aces)k(has)c(been)i(b)n(uilt.)
143 2143 y Fv(M)t(I)t(N)t(T)31 b FC(does)e(not)f(generally)i(stand)f
(on)f(its)g(o)n(wn,)g(because)i(by)e(itself,)k Fv(M)t(I)t(N)t(T)e
FC(does)f(not)f(carry)h(enough)h(information)0 2256 y(to)f(completely)i
(represent)g(an)e(interf)o(ace.)46 b(Rather)l(,)33 b
Fv(M)t(I)t(N)t(T)f FC(is)c(a)h(part)g(of)g(the)g(more)f(e)o(xpressi)n
(v)o(e)j(and)e(complete)k Fv(P)t(R)t(E)t(S)p 3817 2256
28 4 v 39 w(C)0 2369 y FC(language.)44 b Fv(M)t(I)t(N)t(T)30
b FC(simply)e(describes)h(collections)i(of)c(abstract)i(messages;)h
(other)e(parts)g(of)h Fv(P)t(R)t(E)t(S)p 3198 2369 V
40 w(C)f FC(attach)h(meanings)0 2482 y(to)23 b(those)i(messages,)g
(thus)f(creating)i(a)d(complete)i(representation)j(language)d(for)f
(interf)o(ace)i(description.)0 2782 y Ft(5.1)119 b(MINT)29
b(Ov)o(er)o(view)2 2991 y Fv(M)t(I)t(N)t(T)h FC(represents)h(a)c
(collection)j(of)d(interf)o(aces)k(as)c(a)g(tree,)i(as)e(illustrated)j
(in)e(Figure)g(5.1.)40 b(\(In)28 b(truth,)j Fv(M)t(I)t(N)t(T)f
FC(represents)0 3104 y(graphs,)c(not)f(trees,)g(b)n(ut)g(the)g(\223top)
g(le)n(v)o(el\224)g(of)f(the)h(graph)g(is)g(al)o(w)o(ays)g(a)f(tree.\))
32 b(At)23 b(the)i(root)g(of)f(the)h(tree)g(is)f(a)g(discriminated)0
3217 y(union,)41 b(representing)g(the)c(collection)j(of)c(dif)n(ferent)
41 b Fv(I)t(D)t(L)r FC(s.)70 b(The)37 b(separate)i(branches)g(of)e(the)
g(union)h(correspond)i(to)0 3330 y(dif)n(ferent)35 b
Fv(I)t(D)t(L)r FC(s:)49 b Fv(C)t(O)t(R)t(B)r(A)r FC(,)33
b Fv(O)t(N)t(C)i(R)t(P)t(C)r FC(,)g Fv(M)t(I)t(G)r FC(,)f(or)d(other)j
Fv(I)t(D)t(L)r FC(s)f(to)e(be)h(supported.)55 b(Although)35
b Fv(M)t(I)t(N)t(T)f FC(w)o(as)d(designed)j(to)0 3442
y(support)27 b(interf)o(aces)h(from)d(multiple)k Fv(I)t(D)t(L)r
FC(s)d(at)f(the)h(same)f(time,)h(b)n(ut)f(in)h(current)h(practice,)g
(only)f(one)i Fv(I)t(D)t(L)g FC(is)d(represented)0 3555
y(by)f(an)o(y)f(one)j Fv(M)t(I)t(N)t(T)h FC(tree.)141
3669 y(At)18 b(the)i(ne)o(xt)f(le)n(v)o(el)h(of)f(the)h(tree,)g(a)f
(node)h(represents)i(a)c(collection)k(of)d(de\002ned)h(interf)o(aces)i
(or)d(object)i(type.)28 b(Here,)19 b(each)0 3782 y(branch)25
b(corresponds)i(to)c(a)g(dif)n(ferent)j(interf)o(ace)g(type.)j(At)23
b(the)g(third)i(le)n(v)o(el,)e(a)i Fv(M)t(I)t(N)t(T)i
FC(node)d(represents)i(the)e(collection)i(of)0 3895 y(messages,)k(both)
f(requests)h(and)e(replies,)j(that)d(are)g(part)g(of)g(the)g(interf)o
(ace.)44 b(F)o(or)27 b(each)i(request,)i(there)d(is)g(a)f(fourth-le)n
(v)o(el)0 4008 y(node)k(\(a)g Fy(MINT_STRUCT)p FC(\))c(that)k
(describes)i(the)e(request)h(parameter)g(types.)51 b(F)o(or)30
b(each)h(reply)-6 b(,)33 b(there)f(is)e(a)g(fourth-le)n(v)o(el)0
4121 y(node)22 b(\(a)f Fy(MINT_UNION)p FC(\))c(that)22
b(describes)h(the)f(types)g(of)f(the)g(reply)h(data.)29
b(A)19 b(reply)j(is)f(a)g(union)h(because)h(it)e(represents)i(both)0
4234 y(normal)h(and)g(e)o(xceptional)j(reply)d(messages.)141
4348 y(Be)o(yond)j(the)f(fourth)i(le)n(v)o(el)e(of)g(the)h(tree,)i
Fv(M)t(I)t(N)t(T)g FC(describes)f(the)f(types)g(of)f(indi)n(vidual)j
(message)e(elements,)h(much)e(as)2 4461 y Fv(AO)t(I)i
FC(describes)h(the)e(types)h(of)g Fv(I)t(D)t(L)h FC(operation)g
(parameters.)40 b(Mapping)28 b(from)e(the)j Fv(AO)t(I)f
FC(representation)j(of)26 b(an)h(interf)o(ace)0 4574
y(and)i(its)g(operations)i(to)d(the)h(corresponding)35
b Fv(M)t(I)t(N)t(T)c FC(representation)i(is)28 b(straightforw)o(ard.)48
b(Since)28 b(both)k Fv(AO)t(I)e FC(and)h Fv(M)t(I)t(N)t(T)0
4687 y FC(are)e(abstract)h(description)h(languages,)h(the)d
(translation)i(can)e(in)f(f)o(act)h(be)g(implemented)h(by)e(a)g
(library)i(function)h(shared)0 4800 y(by)d(all)g(of)g(Flick')-5
b(s)28 b(presentation)k(generators.)1483 4767 y Fr(1)1565
4800 y FC(The)27 b(translation)k(from)f Fv(AO)t(I)g FC(to)f
Fv(M)t(I)t(N)t(T)i FC(is)d(\223lossy)-6 b(,)g(\224)30
b(ho)n(we)n(v)o(er:)38 b(some)28 b(of)0 4913 y(the)23
b(information)i(in)e(the)i Fv(AO)t(I)g FC(description)h(of)c(an)h
(interf)o(ace)i(or)g Fv(I)t(D)t(L)r FC(-de\002ned)h(type)d(is)g(lost.)
29 b(This)22 b(is)h(because)k Fv(M)t(I)t(N)t(T)e FC(only)p
0 4979 1560 4 v 105 5034 a Fq(1)134 5066 y Fp(Currently)-5
b(,)24 b(Flick)e(pro)o(vides)i(certain)e(hooks)i(so)f(that)g
(presentation)g(generators)h(can)f(\223tune\224)h(the)e(union)i
(discriminator)f(v)n(alues)g(that)g(appear)0 5157 y(in)c(the)h(top)f
(le)n(v)o(els)h(of)f(the)j Fn(M)t(I)t(N)t(T)e Fp(tree.)k(This)19
b(means)h(that)f(the)h(translation)g(from)h Fn(A)q(O)t(I)f
Fp(to)i Fn(M)t(I)t(N)t(T)d Fp(is)g(not)h(entirely)f(independent)j(of)d
(the)h(presentation)0 5249 y(generator)f(being)g(used.)k(This)18
b(should)h(be)f(\002x)o(ed)h(in)e(the)i(future,)f(perhaps)h(through)g
(support)g(for)f(\003e)o(xible)g(naming)h(in)h Fn(A)q(O)t(I)f
Fp(and)h Fn(M)t(I)t(N)t(T)f Fp(as)f(described)0 5340
y(in)h(Section)g(4.5.)1905 5568 y FC(59)p eop
%%Page: 60 60
60 59 bop 0 -165 a FC(60)1208 b Fx(CHAPTER)20 b(5.)51
b(MESSA)l(GE)21 b(INTERF)-7 b(A)l(CE)20 b(\(MINT\))j(REPRESENT)-8
b(A)e(TION)0 4147 y @beginspecial 0 @llx 0 @lly 566 @urx
460 @ury 4680 @rwi @setspecial
%%BeginDocument: mint.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: /home/css/eeide/csl/mom/rel/mom/doc/guts/mint.fig
%%Creator: fig2dev Version 3.2 Patchlevel 0-beta3
%%CreationDate: Mon Nov 15 16:17:59 1999
%%For: eeide@ioka.cs.utah.edu (Eric Eide,4560 MEB,585-5512,272-2284)
%%Orientation: Portrait
%%BoundingBox: 0 0 566 460
%%Pages: 0
%%BeginSetup
%%EndSetup
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
-9.0 490.0 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y tr xrad yrad sc 0 0 1 startangle endangle arc
	closepath
	savematrix setmatrix
	} def

/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def
%%EndProlog

$F2psBegin
10 setmiterlimit
n -1000 9154 m -1000 -1000 l 10576 -1000 l 10576 9154 l cp clip
 0.06000 0.06000 sc
/Courier-Bold ff 180.00 scf sf
5475 5775 m
gs 1 -1 sc (OP1_REPLY) dup sw pop 2 div neg 0 rm  col0 sh gr
% Polyline
15.000 slw
n 6075 4725 m 6075 5925 l gs col0 s gr 
% Polyline
n 6225 4725 m 8175 5925 l gs col0 s gr 
% Polyline
n 6225 2915 m 9300 4125 l gs col0 s gr 
% Polyline
n 6375 4650 m 9300 5925 l gs col0 s gr 
% Polyline
n 5775 1115 m 2700 2325 l gs col0 s gr 
% Polyline
n 6225 1115 m 9300 2325 l gs col0 s gr 
% Polyline
n 5775 2915 m 2700 4125 l gs col0 s gr 
/Courier-Bold ff 180.00 scf sf
3600 3450 m
gs 1 -1 sc (INTERFACE_1) dup sw pop 2 div neg 0 rm  col0 sh gr
/Courier-Bold ff 180.00 scf sf
5325 3750 m
gs 1 -1 sc (INTERFACE_2) dup sw pop 2 div neg 0 rm  col0 sh gr
/Courier-Bold ff 180.00 scf sf
8175 3375 m
gs 1 -1 sc (INTERFACE_3) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Bold ff 210.00 scf sf
150 4500 m
gs 1 -1 sc (Union of Messages) col0 sh gr
/Times-Bold ff 210.00 scf sf
150 2700 m
gs 1 -1 sc (Union of Interfaces) col0 sh gr
/Times-Bold ff 210.00 scf sf
150 900 m
gs 1 -1 sc (Union of IDLs) col0 sh gr
/Times-Bold ff 210.00 scf sf
150 6450 m
gs 1 -1 sc (Message Descriptions) col0 sh gr
/Times-Bold ff 210.00 scf sf
150 6225 m
gs 1 -1 sc (Request/Reply) col0 sh gr
/Courier-Bold ff 180.00 scf sf
8625 5325 m
gs 1 -1 sc (OP2_REPLY) dup sw pop 2 div neg 0 rm  col0 sh gr
/Courier-Bold ff 180.00 scf sf
6975 5775 m
gs 1 -1 sc (OP2_REQUEST) dup sw pop 2 div neg 0 rm  col0 sh gr
/Courier-Bold ff 180.00 scf sf
4050 5325 m
gs 1 -1 sc (OP1_REQUEST) dup sw pop 2 div neg 0 rm  col0 sh gr
% Polyline
n 3600 6525 m 3600 7500 l gs col0 s gr 
% Polyline
n 3450 6525 m 3300 7500 l gs col0 s gr 
% Polyline
n 3300 6450 m 3000 7500 l gs col0 s gr 
% Polyline
n 3750 6525 m 3900 7500 l gs col0 s gr 
% Polyline
n 3900 6450 m 4200 7500 l gs col0 s gr 
/Courier-Bold ff 180.00 scf sf
3675 7875 m
gs 1 -1 sc (parameters...) dup sw pop 2 div neg 0 rm  col0 sh gr
% Polyline
n 6075 6525 m 6075 7800 l gs col0 s gr 
% Polyline
n 5925 6525 m 5400 7500 l gs col0 s gr 
% Polyline
n 6225 6525 m 6750 7500 l gs col0 s gr 
/Courier-Bold ff 180.00 scf sf
6075 8100 m
gs 1 -1 sc (user exception) dup sw pop 2 div neg 0 rm  col0 sh gr
/Courier-Bold ff 180.00 scf sf
7350 7800 m
gs 1 -1 sc (system exception) dup sw pop 2 div neg 0 rm  col0 sh gr
/Courier-Bold ff 180.00 scf sf
5250 7800 m
gs 1 -1 sc (normal reply) dup sw pop 2 div neg 0 rm  col0 sh gr
% Polyline
n 6000 1125 m 6000 2325 l gs col0 s gr 
% Polyline
n 6000 2925 m 6000 4125 l gs col0 s gr 
% Polyline
n 5925 4725 m 3600 5925 l gs col0 s gr 
% Ellipse
n 3600 6225 750 300 0 360 DrawEllipse gs col7 1.00 shd ef gr gs col0 s gr

% Ellipse
n 6000 825 750 300 0 360 DrawEllipse gs col7 1.00 shd ef gr gs col0 s gr

% Ellipse
n 6075 6225 750 300 0 360 DrawEllipse gs col7 1.00 shd ef gr gs col0 s gr

% Ellipse
n 6000 4425 750 300 0 360 DrawEllipse gs col7 1.00 shd ef gr gs col0 s gr

% Ellipse
n 6000 2625 750 300 0 360 DrawEllipse gs col7 1.00 shd ef gr gs col0 s gr

/Courier-Bold ff 180.00 scf sf
6000 4500 m
gs 1 -1 sc (MINT_UNION) dup sw pop 2 div neg 0 rm  col0 sh gr
/Courier-Bold ff 180.00 scf sf
6000 2700 m
gs 1 -1 sc (MINT_UNION) dup sw pop 2 div neg 0 rm  col0 sh gr
/Courier-Bold ff 180.00 scf sf
6000 900 m
gs 1 -1 sc (MINT_UNION) dup sw pop 2 div neg 0 rm  col0 sh gr
/Courier-Bold ff 180.00 scf sf
3600 6300 m
gs 1 -1 sc (MINT_STRUCT) dup sw pop 2 div neg 0 rm  col0 sh gr
/Courier-Bold ff 300.00 scf sf
8775 6300 m
gs 1 -1 sc (...) dup sw pop 2 div neg 0 rm  col0 sh gr
/Courier-Bold ff 180.00 scf sf
6075 6300 m
gs 1 -1 sc (MINT_UNION) dup sw pop 2 div neg 0 rm  col0 sh gr
/Courier-Bold ff 300.00 scf sf
2700 4425 m
gs 1 -1 sc (...) dup sw pop 2 div neg 0 rm  col0 sh gr
/Courier-Bold ff 300.00 scf sf
9300 4425 m
gs 1 -1 sc (...) dup sw pop 2 div neg 0 rm  col0 sh gr
/Courier-Bold ff 300.00 scf sf
2700 2625 m
gs 1 -1 sc (...) dup sw pop 2 div neg 0 rm  col0 sh gr
/Courier-Bold ff 300.00 scf sf
9300 2625 m
gs 1 -1 sc (...) dup sw pop 2 div neg 0 rm  col0 sh gr
/Courier-Bold ff 180.00 scf sf
5625 1875 m
gs 1 -1 sc (CORBA) dup sw pop 2 div neg 0 rm  col0 sh gr
/Courier-Bold ff 180.00 scf sf
7800 1575 m
gs 1 -1 sc (MIG) dup sw pop 2 div neg 0 rm  col0 sh gr
/Courier-Bold ff 180.00 scf sf
3900 1575 m
gs 1 -1 sc (ONC RPC) dup sw pop 2 div neg 0 rm  col0 sh gr
$F2psEnd
rs

%%EndDocument
 @endspecial 1075 4343 a FC(Figure)24 b(5.1:)29 b(The)23
b(Message)i(Interf)o(ace)h(\()r Fv(M)t(I)t(N)t(T)r FC(\))f(T)m(ree.)p
eop
%%Page: 61 61
61 60 bop 0 -165 a Fx(5.2.)51 b(MINT)22 b(D)l(A)-10 b(T)i(A)21
b(STR)l(UCTURES)2533 b FC(61)0 91 y(represents)25 b(the)e
Fu(structur)m(e)i FC(or)e Fu(syntax)h FC(of)f(messages)h(that)f(will)f
(be)h(e)o(xchanged)i(between)f(clients)g(and)f(serv)o(ers.)30
b Fu(Semantic)0 204 y FC(notions)i(\227)e(names)g(\(type)i(names,)g
(structure)h(slot)d(names,)j(.)14 b(.)g(.)g(\),)29 b(inheritance,)35
b(e)o(xceptions,)f(and)d(so)f(on)h(\227)e(that)i(gi)n(v)o(e)0
317 y(meanings)h(to)f(messages)h(are)f(discarded)i(when)g
Fv(AO)t(I)f FC(is)f(translated)i(into)g Fv(M)t(I)t(N)t(T)r
FC(.)51 b(These)31 b(semantics)i(are)e(\223reco)o(v)o(ered\224)0
430 y(when)21 b(the)h(presentation)j(generator)f(mak)o(es)e(a)f(second)
i(pass)f(o)o(v)o(er)f(the)j Fv(AO)t(I)f FC(while)f(b)n(uilding)h(the)h
Fv(P)t(R)t(E)t(S)p 3281 430 28 4 v 39 w(C)f FC(representation)0
543 y(of)g(the)h(types,)h(stubs,)f(and)g(sk)o(eletons)i(that)e(will)f
(ultimately)j(implement)f(the)e(interf)o(ace.)0 843 y
Ft(5.2)119 b(MINT)29 b(Data)h(Structur)n(es)0 1053 y
FC(Lik)o(e)24 b Fv(AO)t(I)r FC(,)g Fv(M)t(I)t(N)t(T)i
FC(must)c(be)g(written)i(to)e(and)h(read)g(from)f(\002les,)g(and)h(it)f
(therefore)i(de\002ned)f(using)h(the)h Fv(O)t(N)t(C)g(R)t(P)t(C)h(I)t
(D)t(L)r FC(.)k(The)0 1165 y(data)24 b(structures)i(are)e(de\002ned)g
(in)g Fy(mom/mint.x)p FC(.)141 1280 y(The)e(top-le)n(v)o(el)k
Fv(M)t(I)t(N)t(T)f FC(data)e(structure)h(is)e(called)h
Fy(mint_1)d FC(and)i(contains)j(tw)o(o)d(slots.)29 b(The)21
b(\002rst)h(slot,)h Fy(defs)p FC(,)d(contains)0 1393
y(a)30 b Fv(M)t(I)t(N)t(T)h FC(type)d(graph,)i(represented)i(as)c(a)f
(single)i(array)g(of)f(type)h(de\002nitions,)i(with)d(each)h
(de\002nition)g(represented)j(by)c(a)0 1505 y Fy(mint_def)e
FC(structure.)49 b Fv(M)t(I)t(N)t(T)32 b FC(de\002nitions)f(will)d(be)h
(described)i(shortly)-6 b(,)32 b(in)d(Section)h(5.2.1.)44
b(Unlik)o(e)32 b Fv(AO)t(I)r FC(,)e(there)f(is)g(no)0
1618 y(semantic)c(signi\002cance)h(to)d(the)h(order)h(of)e(the)h
(de\002nitions)i(in)d(the)h(array)-6 b(.)141 1733 y(The)19
b(second)h(slot)g(in)e(a)h Fy(mint_1)d FC(is)j(called)h
Fy(standard_refs)15 b FC(and)k(contains)i(a)e(references)i(to)e
(certain)h(\223well)f(kno)n(wn\224)0 1845 y(and)27 b(common)i
Fv(M)t(I)t(N)t(T)g FC(type)f(de\002nitions.)40 b(It)26
b(is)g(con)l(v)o(enient)k(to)c(k)o(eep)i(these)f(references)i(around)g
(because)f(certain)g(basic)0 1958 y(types)c(are)e(used)i(again)f(and)g
(again.)29 b(A)21 b(reference)k(to)d(a)i Fv(M)t(I)t(N)t(T)i
FC(type)d(de\002nition)h(is)f(a)f Fy(mint_ref)p FC(,)d(which)k(is)f
(implemented)0 2071 y(as)h(an)h(inde)o(x)g(into)g(the)f
Fy(mint_1)e FC(array)j(of)f Fy(mint_def)p FC(s.)j(A)c(null)i(reference)
i(is)d(represented)k(by)c(the)h(special)g Fy(mint_ref_)0
2184 y(null)e FC(v)n(alue.)0 2404 y Fy(typedef)46 b(int)h(mint_ref;)0
2517 y(const)f(mint_ref_null)f(=)i(-1;)0 2743 y(struct)f(mint_1)0
2856 y({)382 2969 y(mint_def)761 b(defs<>;)382 3195 y(/*)47
b(`standard_refs')d(are)j(initialized)d(by)j(`mint_add_standard_defs'.)
41 b(*/)382 3308 y(mint_standard_refs)281 b(standard_refs;)0
3421 y(};)0 3646 y(/*)48 3759 y(*)47 b(A)h(`mint_standard_refs')42
b(contains)j(`mint_ref's)g(for)i(commonly-used)d(MINT)j(types.)48
3872 y(*)g(It)g(is)h(useful)e(to)h(have)f(immediate)g(access)g(to)h
(these)f(basic)h(building)e(blocks.)48 3985 y(*/)0 4098
y(struct)h(mint_standard_refs)0 4211 y({)382 4324 y(mint_ref)f
(void_ref;)382 4550 y(mint_ref)g(bool_ref;)382 4663 y(mint_ref)g
(signed8_ref;)382 4775 y(mint_ref)g(signed16_ref;)382
4888 y(mint_ref)g(signed32_ref;)382 5001 y(mint_ref)g(signed64_ref;)382
5114 y(mint_ref)g(unsigned8_ref;)382 5227 y(mint_ref)g(unsigned16_ref;)
382 5340 y(mint_ref)g(unsigned32_ref;)p eop
%%Page: 62 62
62 61 bop 0 -165 a FC(62)1208 b Fx(CHAPTER)20 b(5.)51
b(MESSA)l(GE)21 b(INTERF)-7 b(A)l(CE)20 b(\(MINT\))j(REPRESENT)-8
b(A)e(TION)p 387 3 3127 4 v 385 116 4 113 v 438 82 a
Fv(AO)t(I)26 b FC(T)-7 b(ype)23 b(Kind)p 1487 116 V 557
w(Description)p 3512 116 V 387 120 3127 4 v 385 232 4
113 v 436 199 a Fy(MINT_INTEGER)p 1487 232 V 526 w FC(an)h(inte)o(ger)h
(with)e(a)g(speci\002ed)i(minimum)e(v)n(alue)i(and)f(range)p
3512 232 V 385 345 V 436 311 a Fy(MINT_SCALAR)p 1487
345 V 574 w FC(an)g(inte)o(ger)h(with)e(range)i(determined)g(by)f(#)f
(of)h(bits)p 3512 345 V 385 458 V 436 424 a Fy(MINT_FLOAT)p
1487 458 V 622 w FC(a)f(\003oating-point)k(type)d(with)g(a)f
(speci\002ed)i(#)e(of)g(bits)p 3512 458 V 385 571 V 436
537 a Fy(MINT_CHAR)p 1487 571 V 670 w FC(a)g(character)j(with)e
(\003ags)f(and)h(a)f(speci\002ed)i(#)e(of)h(bits)p 3512
571 V 385 684 V 436 650 a Fy(MINT_BOOLEAN)p 1487 684
V 526 w FC(true)g(or)g(f)o(alse)p 3512 684 V 385 797
V 436 763 a Fy(MINT_VOID)p 1487 797 V 670 w FC(v)n(oid)p
3512 797 V 385 910 V 1487 910 V 3512 910 V 385 1023 V
436 989 a Fy(MINT_ARRAY)p 1487 1023 V 622 w FC(an)g(array)-6
b(,)24 b(\002x)o(ed-)g(or)f(v)n(ariable-length)p 3512
1023 V 385 1136 V 436 1102 a Fy(MINT_STRUCT)p 1487 1136
V 574 w FC(a)g(collection)k(of)c(unnamed,)i(unordered)h(\002elds)p
3512 1136 V 385 1249 V 436 1215 a Fy(MINT_UNION)p 1487
1249 V 622 w FC(a)d(discriminated)k(union)p 3512 1249
V 385 1362 V 436 1328 a Fy(MINT_ANY)p 1487 1362 V 718
w FC(\223an)o(y\224)e(v)n(alue,)f Fu(without)i FC(a)d(type)h(tag)p
3512 1362 V 385 1474 V 436 1441 a Fy(MINT_TYPE_TAG)p
1487 1474 V 478 w FC(an)g(opaque)h(type)f(identi\002er)p
3512 1474 V 385 1587 V 436 1554 a Fy(MINT_TYPED)p 1487
1587 V 622 w FC(a)f(pair:)30 b(a)23 b(type)i(identi\002er)g(and)f(a)f
(v)n(alue)h(of)f(that)i(type)p 3512 1587 V 385 1700 V
1487 1700 V 3512 1700 V 385 1813 V 436 1779 a Fy(MINT_INTERFACE)p
1487 1813 V 430 w FC(a)e(reference)j(to)e(an)f(object)i(instance)p
3512 1813 V 385 1926 V 436 1892 a Fy(MINT_SYSTEM_EXCEPTION)p
1487 1926 V 94 w FC(an)f(opaque,)h(system-generated)j(e)o(xception)p
3512 1926 V 387 1929 3127 4 v 933 2083 a(T)-7 b(able)23
b(5.1:)30 b(Summary)23 b(of)g(the)h(A)-7 b(v)n(ailable)27
b Fv(M)t(I)t(N)t(T)g FC(T)-7 b(ype)23 b(Kinds.)382 2350
y Fy(mint_ref)45 b(unsigned64_ref;)382 2576 y(mint_ref)g(char8_ref;)382
2689 y(mint_ref)g(float32_ref;)382 2802 y(mint_ref)g(float64_ref;)382
3027 y(mint_ref)g(interface_name_ref;)382 3140 y(mint_ref)g
(interface_invoke_ref;)382 3253 y(mint_ref)g
(interface_invoke_once_ref;)382 3366 y(mint_ref)g
(interface_service_ref;)382 3479 y(mint_ref)g(system_exception_ref;)0
3592 y(};)0 3839 y FA(5.2.1)99 b(T)-7 b(ype)25 b(De\002nitions)0
4013 y FC(A)37 b Fv(M)t(I)t(N)t(T)h FC(type)f(de\002nition)g(is)f
(implemented)i(by)e(a)f(discriminated)k(union)e(of)f(the)g(possible)i
(type)e(kinds,)k(which)c(are)0 4126 y(summarized)28 b(in)f(T)-7
b(able)27 b(5.1.)38 b(The)26 b(details)i(of)f(indi)n(vidual)k
Fv(M)t(I)t(N)t(T)f FC(types)e(are)f(speci\002ed)h(by)f(further)j
Fv(M)t(I)t(N)t(T)g FC(structures)f(as)0 4239 y(sho)n(wn)24
b(in)f(the)h(code)g(belo)n(w)-6 b(.)141 4352 y(It)20
b(is)h(important)h(to)f(note)g(the)g(dif)n(ferences)i(between)f(an)e
Fy(aoi_def)e FC(\(described)24 b(in)c(Section)h(4.2.1\))g(and)g(a)f
Fy(mint_def)p FC(.)0 4465 y(Unlik)o(e)31 b(an)g Fy(aoi_def)p
FC(,)e(a)i Fy(mint_def)c FC(does)32 b(not)f(include)h(a)e(name,)j(a)d
(scope,)j(or)e(an)o(y)f(other)i(\223semantic\224)h(information)0
4578 y(be)o(yond)25 b(the)f(essential)i(structure)f(of)f(the)g(type.)0
4775 y Fy(union)46 b(mint_def)0 4888 y(switch)g(\(mint_def_kind)e
(kind\))0 5001 y({)382 5114 y(case)i(MINT_VOID:)809 b(void;)382
5227 y(case)46 b(MINT_BOOLEAN:)665 b(void;)382 5340 y(case)46
b(MINT_INTEGER:)665 b(mint_integer_def)378 b(integer_def;)p
eop
%%Page: 63 63
63 62 bop 0 -165 a Fx(5.2.)51 b(MINT)22 b(D)l(A)-10 b(T)i(A)21
b(STR)l(UCTURES)2533 b FC(63)382 91 y Fy(case)46 b(MINT_SCALAR:)713
b(mint_scalar_def)426 b(scalar_def;)382 204 y(case)46
b(MINT_FLOAT:)761 b(mint_float_def)474 b(float_def;)382
317 y(case)46 b(MINT_CHAR:)809 b(mint_char_def)522 b(char_def;)382
430 y(case)46 b(MINT_ARRAY:)761 b(mint_array_def)474
b(array_def;)382 543 y(case)46 b(MINT_STRUCT:)713 b(mint_struct_def)426
b(struct_def;)382 656 y(case)46 b(MINT_UNION:)761 b(mint_union_def)474
b(union_def;)382 882 y(case)46 b(MINT_INTERFACE:)569
b(mint_interface_def)282 b(interface_def;)382 995 y(case)46
b(MINT_SYSTEM_EXCEPTION:)233 b(void;)382 1220 y(case)46
b(MINT_ANY:)857 b(void;)382 1446 y(case)46 b(MINT_TYPE_TAG:)617
b(void;)382 1559 y(case)46 b(MINT_TYPED:)761 b(mint_typed_def)474
b(typed_def;)0 1672 y(};)141 1890 y FC(The)23 b(current)k
Fv(M)t(I)t(N)t(T)g FC(type)d(kinds)h(are)f(described)i(belo)n(w)-6
b(,)23 b(in)h(the)f(order)i(in)e(which)h(the)o(y)g(appear)h(in)f(T)-7
b(able)23 b(5.1.)0 2142 y Fz(Integers)0 2319 y FC(A)30
b Fy(MINT_INTEGER)d FC(represents)34 b(an)d(inte)o(ger)h(type)g(with)f
(a)g(speci\002ed)h(\(constant\))i(minimum)d(v)n(alue)h(and)g(range.)52
b(This)0 2432 y(type)26 b(is)f(used)i(to)e(represent)j(all)d(inte)o
(ger)i(types)g(whose)f(v)n(alues)g(can)g(be)g(represented)i(with)e(not)
f(more)h(that)g(32)f(bits.)35 b(This)0 2545 y(includes)28
b(unsigned)g(and)e(signed)h(32-,)f(16-,)g(and)g(8-bit)h(types,)g(as)e
(well)h(as)f(booleans)j(and)e(certain)i(inte)o(ger)f(\223constants.)-6
b(\224)0 2658 y(\(If)23 b(the)h(speci\002ed)h Fy(range)c
FC(is)i(zero,)h(then)g(the)g Fy(MINT_INTEGER)19 b FC(describes)26
b(a)d(type)h(with)f(only)h(one)g(possible)i(v)n(alue.)j(This)0
2770 y(is)23 b(useful)i(for)f(describing)i(other)f(types)g(such)f(as)f
(\002x)o(ed-length)j(arrays.\))141 2884 y(Ob)o(viously)-6
b(,)25 b Fy(MINT_INTEGER)20 b FC(has)j(a)h(direct)g(correspondence)k
(with)c Fy(AOI_INTEGER)p FC(.)0 3104 y Fy(struct)46 b(mint_integer_def)
0 3216 y({)382 3329 y(/*)h(Lowest)f(possible)g(value)g(this)h(integer)e
(can)i(take.)525 3442 y(If)g(>=)g(0,)h(it's)e(an)h(unsigned)f(integer.)
93 b(*/)382 3555 y(int)47 b(min;)382 3781 y(/*)g(Number)f(of)h
(possible)f(values)g(this)h(integer)e(can)i(take)g(in)g(addition)f(to)
525 3894 y(`min'.)94 b(The)47 b(maximum)f(legal)g(value)g(is)h(`min)g
(+)h(range'.)525 4007 y(If)f(range)g(is)g(0,)g(the)g(integer)f(can)h
(take)f(only)h(one)g(value)f(-)525 4120 y(i.e.)h(it)g(carries)f(no)h
(information;)d(useful)i(for)h(representing)e(fixed-length)525
4233 y(arrays.)525 4346 y(If)i(range)g(is)g(1,)g(it's)g(a)g(boolean.)93
b(*/)382 4458 y(unsigned)45 b(range;)0 4571 y(};)0 4824
y Fz(Scalars)0 5000 y FC(A)19 b Fy(MINT_SCALAR)e FC(describes)23
b(an)d(inte)o(ger)i(type)f(by)g(specifying)i(the)e(number)g(of)f(bits)h
(in)g(its)f(range.)29 b(The)20 b(minimum)g(v)n(alue)0
5113 y(is)i(determined)h(by)f(\003ags)g(that)g(indicate)i(whether)f
(the)f(type)g(is)g(signed)h(or)e(unsigned.)31 b(Scalars)22
b(are)g(only)h(used)f(to)g(describe)0 5226 y(inte)o(ger)j(types)f(that)
h(a)e Fy(MINT_INTEGER)c FC(cannot)25 b(represent)h(\(e.g.,)d(64-bit)i
(and)f(128-bit)h(inte)o(gers\).)141 5340 y(Ob)o(viously)-6
b(,)25 b Fy(MINT_SCALAR)20 b FC(is)j(the)j Fv(M)t(I)t(N)t(T)h
FC(equi)n(v)n(alent)e(of)h Fv(AO)t(I)r FC(')-5 b(s)24
b Fy(AOI_SCALAR)c FC(type.)p eop
%%Page: 64 64
64 63 bop 0 -165 a FC(64)1208 b Fx(CHAPTER)20 b(5.)51
b(MESSA)l(GE)21 b(INTERF)-7 b(A)l(CE)20 b(\(MINT\))j(REPRESENT)-8
b(A)e(TION)0 91 y Fy(typedef)46 b(u_int)g(mint_scalar_flags;)0
204 y(const)g(MINT_SCALAR_FLAG_NONE)233 b(=)48 b(0;)0
317 y(const)e(MINT_SCALAR_FLAG_SIGNED)137 b(=)48 b(1;)0
430 y(const)e(MINT_SCALAR_FLAG_UNSIGNED)41 b(=)48 b(2;)0
656 y(struct)e(mint_scalar_def)0 769 y({)382 882 y(int)1001
b(bits;)382 995 y(mint_scalar_flags)329 b(flags;)0 1108
y(};)0 1401 y Fz(Floats)0 1592 y FC(A)28 b Fy(MINT_FLOAT)d
FC(describes)31 b(a)d(\003oating)i(point)g(type)g(in)e(terms)h(of)g
(the)g(number)h(of)f(bits)g(in)g(the)g(encoding)i(of)e(the)g(type.)0
1705 y(Again,)23 b(there)i(is)e(an)h(ob)o(vious)h(and)f(direct)h
(correspondence)j(with)23 b(the)h(equi)n(v)n(alent)k
Fv(AO)t(I)d FC(type.)0 1966 y Fy(struct)46 b(mint_float_def)0
2078 y({)382 2191 y(/*)h(Currently)e(may)i(be)g(32)h(or)f(64.)94
b(*/)382 2304 y(int)238 b(bits;)0 2417 y(};)0 2711 y
Fz(Characters)0 2901 y FC(A)27 b Fy(MINT_CHAR)f FC(describes)31
b(a)d(character)j(type.)45 b(Again,)29 b(the)g(range)h(of)e(the)h(type)
g(is)g(described)i(by)e(the)g(number)g(of)g(bits)0 3014
y(required)d(to)d(encode)i(v)n(alues)g(of)e(the)h(type)g(\(generally)i
(8\).)j(In)23 b(addition,)j(a)d(set)g(of)h(\003ags)f(describe)i
(additional)i(properties,)0 3127 y(such)22 b(as)f(whether)h(the)f
(characters)i(are)f(\223signed\224)h(or)e(\223unsigned.)-6
b(\224)30 b(As)21 b(with)f(most)h(primiti)n(v)o(e)h(types,)g(the)g
(representations)0 3240 y(of)j Fv(M)t(I)t(N)t(T)i FC(and)f
Fv(AO)t(I)f FC(characters)i(are)c(identical.)0 3501 y
Fy(/*)47 b(These)g(are)f(flags)h(to)g(modify)f(mint_char's:)f(signed,)g
(unsigned,)h(or)h(default.)e(*/)0 3614 y(typedef)h(u_int)g
(mint_char_flags;)0 3727 y(const)g(MINT_CHAR_FLAG_NONE)234
b(=)47 b(0;)0 3840 y(const)f(MINT_CHAR_FLAG_SIGNED)138
b(=)47 b(1;)0 3953 y(const)f(MINT_CHAR_FLAG_UNSIGNED)c(=)47
b(2;)0 4178 y(struct)f(mint_char_def)0 4291 y({)382 4404
y(/*)h(Currently,)e(`bits')h(may)h(be)g(8)h(\(char\))e(or)h(16)g
(\(wchar\).)93 b(*/)382 4517 y(int)238 b(bits;)382 4630
y(mint_char_flags)43 b(flags;)0 4743 y(};)0 5037 y Fz(Booleans)0
5227 y FC(A)29 b Fy(MINT_BOOLEAN)d FC(represents)33 b(the)e(standard)h
(boolean)g(type:)44 b(true)30 b(or)h(f)o(alse.)49 b(Currently)-6
b(,)34 b(this)d(type)f(is)h(unused:)44 b(the)0 5340 y(boolean)26
b(type)e(is)f(instead)i(represented)i(as)d(a)f(kind)h(of)g
Fy(MINT_INTEGER)p FC(.)p eop
%%Page: 65 65
65 64 bop 0 -165 a Fx(5.2.)51 b(MINT)22 b(D)l(A)-10 b(T)i(A)21
b(STR)l(UCTURES)2533 b FC(65)0 91 y Fz(V)-9 b(oids)0
291 y FC(A)22 b Fy(MINT_VOID)f FC(represents)26 b(a)d(v)n(oid)i(type:)
30 b(a)23 b(type)h(with)f(no)h(v)n(alues.)0 613 y Fz(Arrays)0
813 y FC(A)h Fy(MINT_ARRAY)d FC(describes)28 b(an)e(array)g(type:)34
b(a)26 b(numbered)h(and)f(ordered)i(collection)g(of)e(v)n(alues)h(of)e
(a)h(single)h(\(element\))0 926 y(type.)40 b(The)27 b(set)g(of)h
(possible)h(array)f(lengths)h(is)e(described)j(by)d(a)g
Fy(MINT_INTEGER)p FC(,)c(referenced)30 b(by)e(the)f Fy(length_type)0
1039 y FC(slot)36 b(of)g(the)g Fy(mint_array_def)p FC(.)60
b(The)36 b(array)g(may)g(be)f(v)n(ariable-length)40 b(\(if)c(the)g
Fy(MINT_INTEGER)c FC(has)k(a)f(non-zero)0 1152 y(range\))e(or)f(\002x)o
(ed-length)h(\(if)f(the)g Fy(MINT_INTEGER)c FC(has)k(a)f(zero)h
(range\).)55 b(Ob)o(viously)-6 b(,)35 b(the)d Fy(MINT_ARRAY)c
FC(description)0 1265 y(also)c(contains)i(a)d(reference)j(to)d(the)h
(type)g(of)g(the)g(array)g(elements,)h(as)e(sho)n(wn)h(belo)n(w)-6
b(.)141 1390 y(Note)22 b(that)g(unlik)o(e)h(an)f Fy(AOI_ARRAY)p
FC(,)c(a)j Fy(MINT_ARRAY)e FC(de\002nition)k(does)f(not)g(ha)n(v)o(e)h
(a)e(set)h(of)f(\003ags)h(describing)i(seman-)0 1503
y(tic)g(properties)i(of)d(the)h(array)h(\(e.g.,)e(NUL-termination\).)0
1793 y Fy(struct)46 b(mint_array_def)0 1906 y({)382 2019
y(/*)h(Type)g(of)g(each)f(of)i(the)f(elements)e(in)i(this)g(array.)94
b(*/)382 2132 y(mint_ref)45 b(element_type;)382 2358
y(/*)i(Type)g(representing)d(the)j(possible)f(lengths)f(of)j(this)e
(array.)525 2471 y(Must)h(be)g(an)g(integer)f(type)g(of)i(some)e(kind.)
525 2583 y(If)h(the)g(integer's)e(`range')h(is)h(zero,)g(it's)f(a)i
(fixed-length)c(array.)94 b(*/)382 2696 y(mint_ref)45
b(length_type;)0 2809 y(};)0 3131 y Fz(Structur)n(es)0
3331 y FC(A)35 b Fy(MINT_STRUCT)e FC(describes)39 b(a)d(collection)j
(of)e Fu(unor)m(der)m(ed)p FC(,)k Fu(unnamed)g FC(v)n(alues)c(of)g
(heterogeneous)j(types.)69 b(This)36 b(is)0 3444 y(dif)n(ferent)d(that)
e(the)g(usual)g(notion)i(of)d(a)g(\223structure\224)k(type)d(in)g(most)
g(programming)h(languages.)53 b(Here,)32 b(a)e(structure)j(is)0
3557 y(simply)f(a)f(set)g(of)g(\(zero)h(or)f(more\))h(independent)i
(data)e(elements.)53 b(Each)31 b(element)i(has)e(a)g(speci\002c)h
(type,)i(b)n(ut)d(there)h(is)0 3670 y(no)25 b(signi\002cance)i(to)e
(the)g(order)h(of)f(the)g(elements,)h(nor)g(are)f(there)g(an)o(y)g
(semantic)i(connections)h(between)e(elements.)34 b(F)o(or)0
3783 y(e)o(xample,)24 b(no)g(element)g(describes)i(the)e
(\223length\224)i(or)d(the)h(\223type\224)h(of)f(another)-5
b(.)141 3909 y(In)20 b(truth,)h(the)f(elements)h(of)f(a)g
Fy(MINT_STRUCT)c FC(are)k(ordered)h(in)f(the)g(sense)h(that)g(order)g
(is)e(preserv)o(ed)j(when)e(translating)0 4021 y(from)32
b(an)g Fy(AOI_STRUCT)p FC(,)e(and)i(the)g(order)h(of)e(elements)j(in)d
(an)h Fy(AOI_STRUCT)c FC(is)k(the)g(order)h(in)e(which)i(the)f(slots)g
(were)0 4134 y(named)25 b(in)g(the)h(original)i Fv(I)t(D)t(L)g
FC(input.)34 b(Order)25 b(is)g(also)h(important)g(when)f(Flick)g(must)g
(create)h(constant)i(v)n(alues)e(that)f(are)g(of)0 4247
y(speci\002c)g(structure)g(types.)30 b(But)24 b(this)g(ordering)i(of)d
(slots)i(is)e(only)h(\223coincidental\224)k(to)c(the)g(meaning)h(of)e
(a)g Fy(MINT_STRUCT)p FC(.)0 4360 y(The)i(ordering)k(of)c(the)i(slots)f
(in)g(a)g Fy(MINT_STRUCT)c FC(does)k(not,)h(for)f(e)o(xample,)h
(specify)h(or)e(constrain)i(the)e(order)h(in)f(which)0
4473 y(the)k(structure)h(elements)g(might)e(e)n(v)o(entually)j(be)d
(written)h(into)g(memory)g(or)f(into)h(a)f(request)i(or)e(reply)h
(message.)47 b(Flick)0 4586 y(presentation)30 b(generators)e(and)f
(back)g(ends)g(can)f(choose)i(to)e(process)i(the)e Fy(MINT_STRUCT)c
FC(elements)28 b(in)e(an)o(y)g(order)h(the)o(y)0 4699
y(see)d(\002t.)0 4989 y Fy(struct)46 b(mint_struct_def)0
5102 y({)382 5214 y(mint_ref)f(slots<>;)0 5327 y(};)p
eop
%%Page: 66 66
66 65 bop 0 -165 a FC(66)1208 b Fx(CHAPTER)20 b(5.)51
b(MESSA)l(GE)21 b(INTERF)-7 b(A)l(CE)20 b(\(MINT\))j(REPRESENT)-8
b(A)e(TION)0 91 y Fz(Unions)0 281 y FC(A)32 b Fy(MINT_UNION)e
FC(represents)36 b(a)c Fu(discriminated)39 b FC(union:)50
b(a)33 b(compound)i(data)f(type)g(containing)i(a)c(discriminator)37
b(that)0 394 y(selects)28 b(from)e(a)g(set)h(of)f(possible)j
(\223arms\224)e(or)f(cases.)38 b(The)26 b(v)n(alue)h(of)g(the)f
(discriminator)k(determines)e(which)f(one)g(of)f(the)0
507 y(possible)g(union)f(cases)f(is)f(v)n(alid)i(\(i.e.,)e(part)h(of)f
(the)h(complete)h(v)n(alue)f(of)g(the)g(union\).)141
628 y(Note)i(that)h(the)f(discriminator)j(does)e(not)f(ha)n(v)o(e)h(to)
f(be)g(a)g(simple)g(inte)o(ger)i(type:)35 b(it)26 b(can)g(be)g(a)g
(comple)o(x)h(type)f(such)h(as)0 741 y(an)c(array)i(of)e(characters)j
(or)e(a)f(structure.)31 b(This)23 b(allo)n(ws)j Fv(M)t(I)t(N)t(T)g
FC(to)e(describe)h(unions)g(in)f(which)g(the)g(discriminator)i(v)n
(alues)0 854 y(are)h(strings)h(\(e.g.,)f(interf)o(ace)i(or)e(operation)
i(names\))e(or)g(other)h(comple)o(x)f(v)n(alues)h(\(e.g.,)h
Fv(O)t(N)t(C)t FC(/)t Fv(T)t(C)t(P)i Fy(program)p FC(/)p
Fy(version)0 967 y FC(pairs,)24 b(or)i Fv(D)t(C)t(E)f
Fy(uuid)p FC(s\).)141 1088 y(Each)35 b(arm)f(is)g(represented)k(by)c(a)
h Fy(mint_union_case)29 b FC(containing)38 b(a)c(discriminator)j(v)n
(alue)f(\227)d(the)i(v)n(alue)h(that)0 1201 y(selects)31
b(the)f(arm)f(\227)g(and)h(type)g(for)g(the)g(arm.)46
b(The)31 b Fv(M)t(I)t(N)t(T)i FC(representation)g(of)d(constant)i(v)n
(alues)e(is)g(described)i(in)d(Sec-)0 1314 y(tion)d(5.2.2.)35
b(The)25 b(union)i(cases)f(come)g(in)f(no)h(particular)i(order)e
(\(although)j(order)d(is)f(preserv)o(ed)j(when)e(translating)i(from)0
1427 y(an)c Fy(AOI_UNION)p FC(\).)141 1547 y(The)f(union)i(as)f(a)f
(whole)h(is)g(essentially)i(represented)h(as)d(a)f(kind)h(of)g
(structure)i(with)d(a)g(distinguished)28 b(discriminator)0
1660 y(member)l(,)c(an)f(array)i(of)e Fy(mint_union_case)p
FC(s)c(representing)27 b(the)d(arms)g(of)f(the)h(union,)g(and)g(an)g
(optional)i(\223def)o(ault\224)g(arm)0 1773 y(that)j(is)e(selected)k
(when)d(none)h(of)f(the)g(ordinary)i(union)g(cases)f(are)f(selected.)44
b(If)28 b(there)h(is)f(no)g(def)o(ault)i(branch,)g(then)f(the)0
1886 y Fy(dfault)g FC(slot)j(of)f(the)g Fy(mint_union_def)c
FC(will)k(be)g(set)g(to)g Fy(mint_ref_null)p FC(.)48
b(In)31 b(this)h(case,)h(a)e(discriminator)j(v)n(alue)0
1999 y(that)28 b(does)h(not)f(match)f(an)o(y)h(of)g(the)g(cases)g(is)f
(considered)k(ille)o(gal)d(\(i.e.,)g(decoding)i(will)d(f)o(ail)i(on)e
(an)h(incoming)h(message)0 2112 y(containing)k(a)c(union)i(with)f(a)f
(bad)i(discriminator\).)51 b(If)29 b(there)i(is)f(a)f(def)o(ault)i
(case)g(and)f(that)h(def)o(ault)g(case)g(is)e(v)n(oid,)j(then)0
2225 y Fy(dfault)21 b FC(must)j(refer)g(to)f(a)g(v)n(alid)i
Fy(MINT_VOID)20 b FC(type)k(node.)0 2485 y Fy(struct)46
b(mint_union_case)0 2598 y({)382 2711 y(mint_const)283
b(val;)382 2824 y(mint_ref)379 b(var;)0 2937 y(};)0 3163
y(struct)46 b(mint_union_def)0 3276 y({)382 3389 y(/*)h(Union)f
(discriminator)f(variable.)525 3502 y(Type)i(must)f(be)h(based)g(on)g
(an)g(int)g(or)g(enum)g(prim_type.)93 b(*/)382 3615 y(mint_ref)45
b(discrim;)382 3840 y(/*)i(Variable)f(for)g(each)h(non-default)e(case.)
525 3953 y(Any)i(case)g(can)f(be)i(void,)e(meaning)g(no)h(additional)e
(data.)h(*/)382 4066 y(mint_union_case)d(cases<>;)382
4292 y(/*)k(Variable)f(for)g(the)h(default)f(case,)h(`mint_ref_null')c
(if)k(no)h(default.)525 4405 y(\(If)f(there's)f(a)h(default)f(case)h
(but)g(it's)f(void,)h(then)f(`dfault')g(should)525 4518
y(point)g(to)i(a)f(MINT_VOID.\))e(*/)382 4631 y(mint_ref)g(dfault;)0
4744 y(};)0 5037 y Fz(Anys)0 5227 y FC(A)21 b Fy(MINT_ANY)f
FC(represents)25 b(\223an)o(y)e(type,)-6 b(\224)24 b(the)e(type)i(of)e
(all)h(possible)i(v)n(alues.)k(Because)24 b Fy(MINT_ANY)c
FC(is)i(all-encompassing,)0 5340 y(there)i(is)g(no)f(additional)k(data)
d(associated)i(with)e(a)f Fy(MINT_ANY)p FC(.)p eop
%%Page: 67 67
67 66 bop 0 -165 a Fx(5.2.)51 b(MINT)22 b(D)l(A)-10 b(T)i(A)21
b(STR)l(UCTURES)2533 b FC(67)0 91 y Fz(T)-7 b(ype)23
b(T)-8 b(ags)0 269 y FC(A)33 b Fy(MINT_TYPE_TAG)c FC(represents)37
b(an)c(opaque)j(indicator)g(of)e(a)f(type.)60 b(In)34
b(other)h(w)o(ords,)h(the)e(v)n(alue)h(of)e(a)h(type)g(tag)g(is)0
382 y(a)29 b(description)k(of)d(type.)48 b(Lik)o(e)30
b Fy(AOI_TYPE_TAG)p FC(s,)d Fy(MINT_TYPE_TAG)p FC(s)f(are)k(opaque)i
(in)d(the)h(sense)h(that)g(the)f(compiler)0 495 y(portions)c(of)e
(Flick)g(do)g(not)g(pro)o(vide,)h(understand,)i(or)d(enforce)i(an)o(y)e
(semantics)h(for)f(type)h(tags.)30 b(Other)24 b(than)h(marshaling)0
608 y(and)36 b(unmarshaling)i(tag)d(instances,)41 b(Flick)35
b(does)h(nothing)h(with)e(tags.)64 b(Semantics)36 b(must)g(be)f(pro)o
(vided)i(by)e(runtime)0 721 y(libraries.)141 836 y(Since)24
b(type)g(tags)g(are)g(opaque,)h(a)e Fy(MINT_TYPE_TAG)c
FC(has)24 b(no)g(attrib)n(utes.)0 1093 y Fz(T)-7 b(yped)23
b(V)-8 b(alues)0 1271 y FC(A)30 b Fy(MINT_TYPED)e FC(describes)35
b(pairs)d(containing)j(a)c(type)h(description)j(and)d(a)f(v)n(alue)i
(of)e(the)h(described)i(type.)54 b(In)31 b(other)0 1384
y(w)o(ords,)25 b(a)f Fy(MINT_TYPED)d FC(represents)28
b(type-tagged)f(v)n(alues.)34 b(The)24 b Fy(tag)f FC(and)i
Fy(ref)e FC(\002elds)h(of)h(a)f Fy(mint_typed_def)c FC(struc-)0
1496 y(ture)26 b(may)g(conceptually)j(refer)e(to)e(an)o(y)j
Fv(M)t(I)t(N)t(T)h FC(type,)e(b)n(ut)f(in)g(practice,)i(the)e(former)g
(is)f(al)o(w)o(ays)i(a)e Fy(MINT_TYPE_TAG)d FC(and)0
1609 y(the)i(latter)g(is)g(al)o(w)o(ays)g(a)f Fy(MINT_ANY)p
FC(.)141 1724 y(There)d(is)f(an)h(ob)o(vious)h(and)f(direct)h
(correspondence)j(between)d(the)g Fv(M)t(I)t(N)t(T)i
FC(and)f Fv(AO)t(I)f FC(representations)j(of)c(type-tagged)0
1837 y(\223an)o(y\224)k(v)n(alues.)0 2061 y Fy(/*)47
b(used)g(for)g(type-tagged)d(data,)j(e.g.)f(MIG's)h(polymorphic)e(type)
h(*/)0 2174 y(struct)g(mint_typed_def)0 2287 y({)382
2400 y(mint_ref)379 b(tag;)382 2512 y(mint_ref)g(ref;)0
2625 y(};)0 2882 y Fz(Interfaces)0 3060 y FC(A)28 b Fy(MINT_INTERFACE)c
FC(represents)31 b(a)e(reference)i(to)e(an)f(instance)j(of)e(an)i
Fv(I)t(D)t(L)r FC(-de\002ned)g(object)g(type.)45 b(Note)29
b(that)g(this)g(is)0 3173 y(quite)c(dif)n(ferent)g(than)g(the)f(notion)
h(described)h(by)e(an)g Fy(AOI_INTERFACE)p FC(.)g(An)f
Fy(AOI_INTERFACE)d FC(describes)26 b(the)e(type)g(of)0
3286 y(object)j(instances;)j(a)25 b Fy(MINT_INTERFACE)d
FC(describes)28 b(the)e(type)g(of)g(object)h Fu(r)m(efer)m(ences)p
FC(.)38 b(In)26 b(common)i Fv(I)t(D)t(L)r FC(s,)f(one)g(passes)0
3399 y(object)e(references)h(in)e(messages,)g(not)g(the)g(objects)h
(themselv)o(es.)2099 3366 y Fr(2)141 3514 y FC(A)h Fy(MINT_INTERFACE)d
FC(has)k(a)g(single)i(datum)e(describing)j(the)e(high-le)n(v)o(el)j
Fv(R)t(P)t(C)f FC(characteristics)h(of)c(the)h(reference:)0
3627 y(e.g.,)20 b(whether)h(the)f(reference)j(is)d(for)g(sending)i(or)e
(recei)n(ving)i(requests.)30 b(\(The)20 b(current)h(set)g(of)f
(characteristics)k(are)c(deri)n(v)o(ed)0 3740 y(from)27
b(those)h(implemented)h(in)e(the)g(Mach)h(operating)h(system.\))40
b(More)27 b(speci\002c)h(properties,)j(such)d(as)f(the)g(on-the-wire)0
3853 y(encoding)h(of)e(object)i(references,)h(are)d(not)g(represented)j
(by)g Fv(M)t(I)t(N)t(T)r FC(:)35 b(by)26 b(being)h(abstract,)j
Fv(M)t(I)t(N)t(T)f FC(allo)n(ws)d(dif)n(ferent)i(back)0
3965 y(ends)c(to)g(choose)h(dif)n(ferent)g(encodings.)0
4189 y Fy(enum)47 b(mint_interface_right)0 4302 y({)382
4415 y(MINT_INTERFACE_NAME)615 b(=)48 b(0,)190 b(/*)47
b(just)g(names)f(a)i(interface)140 b(*/)382 4528 y
(MINT_INTERFACE_INVOKE)519 b(=)48 b(1,)190 b(/*)47 b(can)g(invoke)f(an)
h(interface)93 b(*/)382 4641 y(MINT_INTERFACE_INVOKE_ON)o(CE)280
b(=)48 b(2,)190 b(/*)47 b(can)g(invoke)f(only)h(once)237
b(*/)382 4754 y(MINT_INTERFACE_SERVICE)471 b(=)48 b(3)238
b(/*)47 b(can)g(service)f(an)h(interface)e(*/)0 4867
y(};)0 5092 y(struct)h(mint_interface_def)p 0 5161 1560
4 v 105 5217 a Fq(2)136 5249 y Fn(C)t(O)t(R)t(B)r(A)17
b Fp(2.3)h(introduced)g(a)f(notion)g(of)g(\223objects)h(by)f(v)n(alue,)
-5 b(\224)18 b(which)f(Flick)f(does)i(not)f(yet)g(support.)23
b(It)16 b(is)h(lik)o(ely)g(that)g(the)i Fn(M)t(I)t(N)t(T)e
Fp(representation)0 5340 y(of)i(a)g(by-v)n(alue)h(object)f(type)h(w)o
(ould)f(simply)h(be)f(a)g Fo(MINT_STRUCT)p Fp(.)p eop
%%Page: 68 68
68 67 bop 0 -165 a FC(68)1208 b Fx(CHAPTER)20 b(5.)51
b(MESSA)l(GE)21 b(INTERF)-7 b(A)l(CE)20 b(\(MINT\))j(REPRESENT)-8
b(A)e(TION)0 91 y Fy({)382 204 y(mint_interface_right)185
b(right;)0 317 y(};)0 594 y Fz(System)23 b(Exceptions)0
779 y FC(Finally)-6 b(,)32 b(a)d Fy(MINT_SYSTEM_EXCEPTION)23
b FC(describes)33 b(the)d(type)g(of)g(e)o(xceptions)i(generated)g(by)e
(the)i Fv(R)t(P)t(C)r FC(/)r Fv(R)t(M)t(I)h FC(runtime)0
892 y(layers.)c(These)20 b(are)f Fu(implicit)k FC(e)o(xceptions,)f(not)
e(generally)i(de\002ned)f(by)f(in)h Fv(I)t(D)t(L)r FC(.)28
b Fu(Explicit)23 b FC(e)o(xceptions,)f(on)e(the)g(other)h(hand,)0
1005 y(are)28 b(de\002ned)g(in)h Fv(I)t(D)t(L)h FC(to)e(be)f(a)g(part)h
(of)f(an)h(interf)o(ace.)42 b(Explicit)29 b(e)o(xceptions)h(are)d
(represented)k(as)c(ordinary)32 b Fv(M)t(I)t(N)t(T)e
FC(types)0 1118 y(\(e.g.,)h(as)e Fy(MINT_STRUCT)p FC(\);)h(only)g
(implicit,)i(\223system-generated\224)j(e)o(xceptions)d(are)e
(represented)j(by)c Fy(MINT_SYSTEM_)0 1230 y(EXCEPTION)p
FC(.)141 1349 y(System)c(e)o(xceptions)i(are)e(handled)i(specially)g
(because)f(dif)n(ferent)j Fv(R)t(P)t(C)e FC(standards)g(de\002ne)e(dif)
n(ferent)i(properties)g(for)0 1461 y(system)34 b(e)o(xceptions.)60
b(F)o(or)32 b(e)o(xample,)38 b Fv(C)t(O)t(R)t(B)r(A)c
FC(de\002nes)g(a)f(standard)i(set)f(of)f(e)o(xceptions)i(that)f(may)f
(be)g(raised)i(by)e(the)0 1574 y(underlying)f Fv(O)t(R)t(B)r
FC(,)27 b(and)h(also)g(de\002nes)f(the)h(data)g(to)f(be)g(communicated)
i(within)f(these)g(system)g(e)o(xceptions.)44 b Fv(O)t(N)t(C)30
b(R)t(P)t(C)r FC(,)0 1687 y(on)24 b(the)f(other)i(hand,)f(de\002nes)g
(a)g(completely)h(dif)n(ferent)h(method)e(for)g(communicating)k
Fv(R)t(P)t(C)e FC(errors)f(to)e(client)i(programs.)141
1805 y(Thus,)31 b(in)f(order)g(to)g(be)f(general,)35
b Fv(M)t(I)t(N)t(T)d FC(must)e(support)i(system)e(e)o(xceptions)i(in)e
(an)f(abstract)j(w)o(ay:)43 b Fv(M)t(I)t(N)t(T)32 b FC(de\002nes)0
1918 y(when)e(the)o(y)g(may)g(occur)l(,)j(b)n(ut)e(does)f(not)h
(de\002ne)f(the)g(actual)i(content)f(or)f(structure)j(of)c
(system-generated)35 b(e)o(xceptions.)0 2031 y(\(These)28
b(things)h(are)f(determined)i(by)e(Flick')-5 b(s)28 b(indi)n(vidual)j
(back)d(ends,)i(long)e(after)h(the)f(translation)i(from)g
Fv(AO)t(I)g FC(to)f Fv(M)t(I)t(N)t(T)0 2144 y FC(tak)o(es)24
b(place.\))30 b(In)22 b(a)h(sense,)h(a)e Fy(MINT_SYSTEM_EXCEPTION)16
b FC(is)23 b(a)f(kind)i(of)f(placeholder)j(that)d(a)g(back)g(end)h
(must)e(\002ll)h(in)f(as)0 2257 y(part)i(of)g(implementing)h(a)e
(complete)i(message)g(protocol.)141 2375 y(Because)g(system)f(e)o
(xceptions)i(are)e(opaque)h(to)h Fv(M)t(I)t(N)t(T)r FC(,)e(a)f
Fy(MINT_SYSTEM_EXCEPTION)17 b FC(has)24 b(no)g(attrib)n(utes.)0
2656 y FA(5.2.2)99 b(Constants)0 2840 y FC(In)29 b(general,)34
b Fv(M)t(I)t(N)t(T)f FC(is)c(only)h(concerned)i(with)d(the)h(structure)
i(of)d(data,)i(not)f(with)f(particular)j(data)e(v)n(alues.)47
b(Some)29 b(data)0 2953 y(types,)c(ho)n(we)n(v)o(er)l(,)h(incorporate)h
(constants)g(as)d(part)h(of)g(their)g(descriptions.)35
b(Discriminated)27 b(unions)f(are)e(a)g(prime)h(e)o(xam-)0
3066 y(ple.)j(\(In)22 b(f)o(act,)h(discriminated)i(unions)e(are)f(the)g
(only)j Fv(M)t(I)t(N)t(T)f FC(type)f(that)f(currently)i(mak)o(es)f(use)
f(of)g(constants.\))31 b(T)-7 b(o)20 b(support)0 3179
y(union)29 b(discriminators)i(and)d(possibly)i(other)e(future)j
Fv(M)t(I)t(N)t(T)g FC(type)d(kinds,)k Fv(M)t(I)t(N)t(T)e
FC(pro)o(vides)g(a)d(w)o(ay)g(to)h(e)o(xpress)h(constant)0
3292 y(v)n(alues.)141 3410 y(A)24 b(constant)j(is)e(represented)j(as)c
(a)h Fy(mint_const)p FC(,)c(which)k(is)g(a)f(pointer)j(to)e(a)f
Fy(mint_const_u)p FC(.)29 b(A)23 b Fy(mint_const_u)0
3523 y FC(is)d(a)f(discriminated)k(union)f(of)e(the)g(possible)i
(constant)g(kinds,)g(as)e(sho)n(wn)g(in)g(the)g(code)h(belo)n(w)-6
b(.)28 b(There)20 b(are)g(three)h(primiti)n(v)o(e)0 3636
y(constant)26 b(types)e(\(inte)o(gers,)i(characters,)f(and)f
(\003oats\))g(and)g(tw)o(o)g(constructed)i(types)f(\(structures)i(and)d
(arrays\).)141 3754 y(A)33 b(primiti)n(v)o(e)h(constant)i(can)e(be)g
(described)i(as)d(a)g(literal)i(v)n(alue)g(\(a)e Fy(MINT_CONST_LITERAL)
p FC(\))28 b(or)34 b(as)f(a)h(symbolic)0 3867 y(v)n(alue)24
b(\(a)f Fy(MINT_CONST_SYMBOLIC)p FC(\).)g(Symbolic)h(v)n(alues)g(are)g
(used)g(when)f(the)g(speci\002c)i(v)n(alue)f(of)f(a)f(constant)k(is)d
(unim-)0 3980 y(portant)30 b(in)f(terms)g(of)g(abstract)h(message)g
(format;)j(in)28 b(general,)34 b Fv(I)t(D)t(L)r FC(-speci\002ed)e
(constants)f(are)e(represented)j(as)d(literals)0 4093
y(and)35 b Fv(I)t(D)t(L)r FC(-unspeci\002ed)j(constants)d(\(e.g.,)g
(the)e(discriminator)j(v)n(alues)e(that)g(select)g(between)g(normal)g
(and)f(e)o(xceptional)0 4206 y(reply)24 b(messages\))h(are)e(symbolic.)
30 b(In)25 b Fv(M)t(I)t(N)t(T)r FC(,)e(it)g(is)g(not)g(necessary)i(to)e
(de\002ne)g(the)h(v)n(alue)f(of)g(a)g(symbolic)h(constant:)33
b Fv(M)t(I)t(N)t(T)0 4319 y FC(really)c(only)g(concerns)h(itself)f
(with)e(types,)j(not)e(speci\002c)h(v)n(alues.)43 b(Of)27
b(course,)j(a)d(symbolic)j(constant)g(must)e Fu(e)o(ventually)0
4431 y FC(be)d(assigned)h(a)f(v)n(alue)g(if)f(the)h(constant)i(is)e(to)
f(be)h(used)g(in)g(generated)i(stub)e(code.)33 b(This)24
b(v)n(alue)i(is)e(generally)j(assigned)g(by)0 4544 y(a)e(Flick)g(back)h
(end)f(or)g(by)g(one)h(of)e(Flick')-5 b(s)26 b(runtime)g(library)h
(header)f(\002les.)33 b(In)25 b(an)o(y)g(case,)h(it)f(happens)i
(outside)g(the)e(scope)0 4657 y(of)g Fv(M)t(I)t(N)t(T)r
FC(.)141 4775 y(A)31 b(compound)i(\(array)g(or)f(structure\))i
(constant)g(is)d(simply)h(represented)j(as)d(an)g(array)g(of)g(other)i
Fv(M)t(I)t(N)t(T)h FC(constants.)0 4888 y(In)30 b(a)g
Fy(MINT_CONST_ARRAY)p FC(,)d(the)k(number)g(of)f(sub-nodes)j(is)e(the)f
(array)i(length,)h(and)e(the)f(nodes)i(themselv)o(es)g(are)f(the)0
5001 y(array)26 b(elements,)h(in)f(order)-5 b(.)36 b(In)25
b(a)g Fy(MINT_CONST_STRUCT)p FC(,)20 b(the)26 b(number)g(of)g
(sub-nodes)i(is)d(the)h(number)h(of)e(slots)h(in)g(the)0
5114 y(structure)d(type.)29 b(When)21 b(matching)i(a)d(constant)k
(structure)f(against)f(a)f(particular)i Fy(MINT_STRUCT)18
b FC(type)k(description)i(\(e.g.,)0 5227 y(when)g(interpreting)j(a)d
(union)h(discriminator)i(v)n(alue)e(in)e(terms)i(of)e(the)i(de\002ned)f
(union)i(discriminator)g(type\),)f(the)f(slots)h(of)0
5340 y(the)f(constant)i(and)e(type)g(descriptions)j(are)d(paired)h(in)e
(order)-5 b(.)30 b(The)23 b(number)h(of)g(elements)h(in)e(each)h(must)g
(be)f(the)h(same.)p eop
%%Page: 69 69
69 68 bop 0 -165 a Fx(5.2.)51 b(MINT)22 b(D)l(A)-10 b(T)i(A)21
b(STR)l(UCTURES)2533 b FC(69)141 91 y(Other)22 b(kinds)h(of)f(comple)o
(x)h(constants)h(\(e.g.,)e(unions\))i(are)e(not)g(currently)j
(supported,)f(b)n(ut)f(may)f(be)f(supported)k(in)d(the)0
204 y(future)j(if)e(need)h(arises.)0 372 y Fy(typedef)46
b(struct)g(mint_const_u)e(*mint_const;)0 598 y(enum)j(mint_const_kind)0
711 y({)382 824 y(MINT_CONST_INT)473 b(=)48 b(1,)382
937 y(MINT_CONST_CHAR)425 b(=)48 b(2,)382 1049 y(MINT_CONST_FLOAT)377
b(=)48 b(3,)382 1162 y(MINT_CONST_STRUCT)329 b(=)48 b(4,)382
1275 y(MINT_CONST_ARRAY)377 b(=)48 b(5)0 1388 y(};)0
1614 y(enum)f(mint_const_category)0 1727 y({)382 1840
y(MINT_CONST_LITERAL)281 b(=)48 b(1,)382 1953 y(MINT_CONST_SYMBOLIC)233
b(=)48 b(2)0 2066 y(};)0 2291 y(union)e(mint_const_int_u)0
2404 y(switch)g(\(mint_const_category)c(kind\))0 2517
y({)382 2630 y(case)k(MINT_CONST_LITERAL:)377 b(long)572
b(value;)382 2743 y(case)46 b(MINT_CONST_SYMBOLIC:)329
b(string)476 b(name<>;)0 2856 y(};)0 3082 y(union)46
b(mint_const_char_u)0 3195 y(switch)g(\(mint_const_category)c(kind\))0
3308 y({)382 3421 y(case)k(MINT_CONST_LITERAL:)377 b(char)572
b(value;)382 3533 y(case)46 b(MINT_CONST_SYMBOLIC:)329
b(string)476 b(name<>;)0 3646 y(};)0 3872 y(union)46
b(mint_const_float_u)0 3985 y(switch)g(\(mint_const_category)c(kind\))0
4098 y({)382 4211 y(case)k(MINT_CONST_LITERAL:)377 b(double)476
b(value;)382 4324 y(case)46 b(MINT_CONST_SYMBOLIC:)329
b(string)476 b(name<>;)0 4437 y(};)0 4663 y(typedef)46
b(mint_const)f(mint_const_struct<>;)0 4775 y(typedef)h(mint_const)f
(mint_const_array<>;)0 5001 y(union)h(mint_const_u)0
5114 y(switch)g(\(mint_const_kind)d(kind\))0 5227 y({)382
5340 y(case)j(MINT_CONST_INT:)187 b(mint_const_int_u)378
b(const_int;)p eop
%%Page: 70 70
70 69 bop 0 -165 a FC(70)1208 b Fx(CHAPTER)20 b(5.)51
b(MESSA)l(GE)21 b(INTERF)-7 b(A)l(CE)20 b(\(MINT\))j(REPRESENT)-8
b(A)e(TION)382 91 y Fy(case)46 b(MINT_CONST_CHAR:)139
b(mint_const_char_u)330 b(const_char;)382 204 y(case)46
b(MINT_CONST_FLOAT:)91 b(mint_const_float_u)282 b(const_float;)382
317 y(case)46 b(MINT_CONST_STRUCT:)d(mint_const_struct)330
b(const_struct;)382 430 y(case)46 b(MINT_CONST_ARRAY:)91
b(mint_const_array)378 b(const_array;)0 543 y(};)0 792
y FA(5.2.3)99 b(Differ)n(ences)26 b(Between)h(A)l(OI)c(and)j(MINT)f(T)
-7 b(ypes)0 967 y FC(Comparing)27 b Fv(AO)t(I)e FC(and)h
Fv(M)t(I)t(N)t(T)r FC(,)f(one)f(notices)h(that)f(certain)j
Fv(AO)t(I)e FC(types)g(are)f(missing)g(from)i Fv(M)t(I)t(N)t(T)r
FC(:)0 1154 y Fy(AOI_ENUM)302 1267 y Fv(AO)t(I)f FC(enumeration)g
(types)f(describe)h(associations)h(between)e(names)f(and)g(v)n(alues.)
30 b(In)24 b Fv(M)t(I)t(N)t(T)r FC(,)g(names)f(are)g(unim-)300
1380 y(portant.)42 b(Therefore,)32 b Fv(AO)t(I)e FC(enumeration)g
(types)f(can)e(simply)i(be)e(\223reduced\224)j(to)e Fy(MINT_INTEGER)23
b FC(types,)30 b(and)300 1493 y(references)c(to)e(speci\002c)g
(enumeration)i(v)n(alues)f(can)f(be)f(reduced)j(to)d(\(literal\))j
Fy(MINT_CONST_INTEGER)p FC(s.)0 1684 y Fy(AOI_CONST)302
1797 y Fv(AO)t(I)35 b FC(constants)h(de\002nitions)f(are)f(similarly)g
(\223compiled)i(a)o(w)o(ay)-6 b(.)g(\224)57 b(When)34
b(needed,)j(an)e Fv(AO)t(I)g FC(constant)h(can)d(be)300
1910 y(translated)26 b(into)e(a)f(literal)k Fv(M)t(I)t(N)t(T)g
FC(constant.)0 2102 y Fy(AOI_EXCEPTION)300 2215 y FC(An)36
b Fy(AOI_EXCEPTION)31 b FC(represents)39 b(an)g Fv(I)t(D)t(L)r
FC(-described)h(e)o(xception,)i(i.e.,)c(what)g Fv(C)t(O)t(R)t(B)r(A)f
FC(calls)g(a)f(\223user)h(e)o(x-)300 2327 y(ception.)-6
b(\224)68 b(Except)37 b(for)f(the)g(semantic)i(that)f(these)g(types)g
(are)f(associated)j(with)d(runtime)h(errors,)j(an)c Fy(AOI_)300
2440 y(EXCEPTION)20 b FC(simply)25 b(describes)h(a)d(structure,)i(and)f
(so)g(the)o(y)g(are)f(translated)k(into)d Fy(MINT_STRUCT)19
b FC(types.)0 2632 y Fy(AOI_OPTIONAL)300 2745 y FC(An)k(optional)j
(type)e(is)f(represented)k(as)c(a)g Fy(MINT_ARRAY)d FC(containing)27
b(zero)d(or)g(one)g(elements.)0 2936 y Fy(AOI_NAMESPACE)300
3049 y FC(Namespaces)34 b(are)e(le)o(xical)h(notions,)j(which)d(ha)n(v)
o(e)g(no)f(importance)j(to)f Fv(M)t(I)t(N)t(T)r FC(.)55
b(Namespace)34 b(de\002nitions)g(are)300 3162 y(simply)24
b(discarded)i(in)e(the)g(translation)i(from)g Fv(AO)t(I)f
FC(to)h Fv(M)t(I)t(N)t(T)r FC(.)0 3353 y Fy(AOI_FWD_INTRFC)300
3466 y FC(Similarly)-6 b(,)24 b(forw)o(ard)h(interf)o(ace)g
(declarations)i(are)d(le)o(xical)h(notions)g(and)f(are)g(unimportant)i
(to)g Fv(M)t(I)t(N)t(T)r FC(.)0 3657 y Fy(AOI_INDIRECT)300
3770 y FC(An)18 b Fy(AOI_INDIRECT)d FC(is)j(a)h(reference)i(to)d(a)h
(named)g(type.)28 b(Because)20 b(names)f(are)g(unimportant)i(to)g
Fv(M)t(I)t(N)t(T)r FC(,)f(indirect)300 3883 y(references)26
b(can)e(simply)g(be)g(compiled)h(a)o(w)o(ay)e(by)h
(\223dereferencing\224)k(the)c Fy(AOI_INDIRECT)19 b FC(type.)0
4074 y Fy(AOI_ERROR)300 4187 y FC(An)k Fy(AOI_ERROR)d
FC(represents)26 b(an)g Fv(I)t(D)t(L)g FC(parse)f(error)f(\227)f(ob)o
(viously)-6 b(,)26 b(not)e(something)j Fv(M)t(I)t(N)t(T)g
FC(needs)d(to)g(describe!)141 4375 y(In)f(addition,)j
Fy(AOI_INTERFACE)19 b FC(and)k Fy(MINT_INTERFACE)c FC(represent)26
b(dif)n(ferent)f(notions)g(as)f(described)h(pre)n(viously)0
4488 y(in)e(Section)i(5.2.1.)k(The)23 b(dif)n(ferent)i(parts)g(of)e(an)
j Fv(AO)t(I)f FC(interf)o(ace)h(type)e(declaration)j(become)d(dif)n
(ferent)k Fv(M)t(I)t(N)t(T)e FC(constructs:)136 4701
y Fs(\017)46 b FC(An)26 b(interf)o(ace)j(or)d(object)i(type)f
(declaration)i(is)e(\223translated\224)i(as)e(a)f Fy(MINT_UNION)d
FC(representing)30 b(the)c(set)h(of)f(mes-)227 4813 y(sages)32
b(that)f(may)f(be)h(sent)g(to)g(and)g(from)f(instances)j(of)e(the)g
(interf)o(ace.)52 b(These)31 b(are)g(the)g(third-tier)i(nodes)e(in)g
(the)229 4926 y Fv(M)t(I)t(N)t(T)c FC(tree)d(sho)n(wn)g(in)f(Figure)h
(5.1.)136 5114 y Fs(\017)46 b FC(The)20 b Fy(code)d FC(slot)k(of)e(an)h
Fy(aoi_interface)15 b FC(structure)22 b(becomes)f(the)h
Fv(M)t(I)t(N)t(T)h FC(constant)f(that)e(selects)h(the)f(represented)227
5227 y(interf)o(ace)30 b(from)e(the)g(second-tier)j Fy(MINT_UNION)25
b FC(representing)31 b(the)d(collection)j(of)c(all)h(de\002ned)h
(interf)o(ace)h(types)227 5340 y(for)24 b(a)f(single)k
Fv(I)t(D)t(L)r FC(.)p eop
%%Page: 71 71
71 70 bop 0 -165 a Fx(5.3.)51 b(THE)22 b(MINT)g(LIBRAR)-6
b(Y)2772 b FC(71)136 91 y Fs(\017)46 b FC(The)31 b(operations)j(and)e
(attrib)n(utes)i(within)d(an)j Fv(AO)t(I)f FC(interf)o(ace)g(become)f
(branches)i(from)d(the)g(\(third-tier\))j Fy(MINT_)227
204 y(UNION)22 b FC(that)i(represents)i(the)e(interf)o(ace.)31
b(The)23 b(request)j(and)e(reply)g(codes)h(become)g(the)e(union)i
(discriminator)i(v)n(al-)227 317 y(ues.)37 b(An)27 b
Fv(AO)t(I)r FC(-de\002ned)h(operation)g(therefore)g(becomes)f(tw)o(o)f
(branches)i(from)e(the)g(union)h(\(request)h(and)f(reply\),)3861
284 y Fr(3)227 430 y FC(and)d(an)g(attrib)n(ute)i(becomes)f(tw)o(o)e
(or)g(four)h(\(depending)j(on)d(whether)g(or)g(not)g(the)f(attrib)n
(ute)j(is)e(read-only\).)136 628 y Fs(\017)46 b FC(The)24
b(data)h(types)g(for)g(a)e(request)j(message)g(\(i.e.,)d(the)i
Fy(in)e FC(and)i Fy(inout)d FC(parameters\))k(are)e(gathered)i
(together)h(into)e(a)227 741 y(fourth-tier)i Fy(MINT_STRUCT)p
FC(.)136 938 y Fs(\017)46 b FC(The)34 b(data)g(types)h(for)f(a)f(reply)
i(message)g(\(i.e.,)h(the)e Fy(inout)p FC(,)g Fy(out)p
FC(,)g(and)h Fy(return)c FC(v)n(alues\))k(are)f(gathered)i(under)227
1051 y(the)e(\223normal\224)g(reply)h(branch)g(of)e(the)g
(\(fourth-tier\))k Fy(MINT_UNION)29 b FC(that)34 b(represents)i(the)e
(structure)h(of)e(a)g(reply)227 1164 y(message.)46 b(The)28
b Fy(MINT_UNION)e FC(itself)k(has)f(branches)i(for)e(normal)h(replies,)
j Fv(I)t(D)t(L)r FC(-de\002ned)f(\(\223user\224\))e(e)o(xceptional)227
1277 y(replies,)25 b(and)f(system)g(e)o(xceptions.)136
1475 y Fs(\017)46 b FC(An)19 b(object)i(reference)h(\227)d(i.e.,)h(an)g
(operation)i(parameter)f(that)g(is)e(a)h(reference)i(to)d(an)h(object)h
(instance)h(\227)d(becomes)227 1588 y(a)i Fy(MINT_INTERFACE)c
FC(within)k(the)h(description)i(of)d(the)h(request)h(or)e(reply)h
(message)h(that)e(contains)j(the)d(reference.)141 1813
y(T)-7 b(o)19 b(summarize,)i(the)f(primary)h(distinction)i(between)g
Fv(AO)t(I)f FC(and)g Fv(M)t(I)t(N)t(T)h FC(is)d(that)i
Fv(AO)t(I)g FC(describes)g(interf)o(aces)h(in)f Fv(I)t(D)t(L)r
FC(-lik)o(e)0 1926 y(terms,)h(and)j Fv(M)t(I)t(N)t(T)h
FC(describes)f(interf)o(aces)g(in)e(terms)f(of)h(the)g(messages)h(that)
f(will)f(implement)i(an)e(interf)o(ace.)0 2233 y Ft(5.3)119
b(The)30 b(MINT)f(Library)0 2445 y FC(The)j Fy(libmint)d
FC(library)k(is)f(pro)o(vided)i(to)e(help)h(deal)f(with)g(constructing)
j(and)e(manipulating)i(the)d(v)n(arious)k Fv(M)t(I)t(N)t(T)f
FC(data)0 2558 y(structures.)c(Its)24 b(header)h(\002le)e(is)g
Fy(mom/libmint.h)c FC(and)24 b(has)g(the)g(follo)n(wing)h(functions:)0
2756 y Fy(void)47 b(mint_add_standard_defs\()o(mint)o(_1)41
b(*mint\))300 2869 y FC(Create)27 b(the)f(standard)j(set)d(of)i
Fv(M)t(I)t(N)t(T)h FC(type)e(de\002nitions)i(as)d(described)j(by)d(the)
g Fy(mint_standard_refs)21 b FC(struc-)300 2982 y(ture)j(type,)h
(described)h(in)e(Section)h(5.2.)30 b(The)25 b Fv(M)t(I)t(N)t(T)i
FC(type)e(de\002nitions)h(are)e(added)h(to)f(the)g(array)h(of)f
Fy(mint_def)p FC(s)300 3095 y(in)k Fy(mint)p FC(,)f(and)h(the)h
Fy(mint_ref)p FC(s)c(within)k Fy(mint-)t(>)t(standard_refs)22
b FC(are)28 b(set)h(to)f(point)h(to)f(the)g(proper)i(de\002ni-)300
3208 y(tions.)0 3408 y Fy(mint_ref)46 b(mint_add_def\(mint_1)c(*mint\))
300 3521 y FC(Return)27 b(a)g Fy(mint_ref)c FC(that)k(refers)h(to)f(a)f
(ne)n(wly)h(allocated)k Fv(M)t(I)t(N)t(T)f FC(type)d(de\002nition)h(\()
p Fy(mint_def)p FC(\).)36 b(The)26 b Fy(mint_)300 3633
y(def)e FC(is)i(completely)i(uninitialized)i(and)c(must)g(be)g
(\002lled)g(in)g(by)g(the)g(caller)-5 b(.)37 b(F)o(or)26
b(this)g(reason,)i(it)d(is)h(often)h(more)300 3746 y(con)l(v)o(enient)g
(to)c(call)h(one)g(of)g(the)f(follo)n(wing,)i(more)f(speci\002c)g
(constant)i(constructors:)300 3946 y Fy(mint_ref)46 b
(mint_add_union_def\(mint)o(_1)41 b(*mint,)51 b(mint_ref)45
b(discrim_type,)k(int)d(len\))600 4059 y FC(Return)21
b(a)e Fy(mint_ref)e FC(to)j(a)g(ne)n(wly)g(allocated)j
Fy(MINT_UNION)16 b FC(with)k(the)g(gi)n(v)o(en)h(discriminator)i(type)e
(and)600 4172 y(number)j(of)g(cases.)30 b(The)23 b(cases)h(are)g
(uninitialized;)k(the)23 b(def)o(ault)j(case)e(is)f(set)h(to)f
Fy(mint_ref_null)p FC(.)300 4349 y Fy(mint_ref)46 b
(mint_add_integer_def\(mi)o(nt_)o(1)c(*mint,)50 b(int)d(min,)k
(unsigned)45 b(range\))600 4462 y FC(Return)33 b(a)f
Fy(mint_ref)d FC(to)k(a)f(ne)n(wly)g(allocated)j Fy(MINT_INTEGER)28
b FC(with)33 b(the)f(gi)n(v)o(en)h(minimum)f(v)n(alue)600
4575 y(and)24 b(range.)300 4730 y Fy(mint_ref)46 b
(mint_add_array_def\(mint)o(_1)41 b(*mint,)51 b(mint_ref)45
b(element_type,)k(unsigned)300 4842 y(min_len,)h(unsigned)45
b(max_len\))600 4955 y FC(Return)30 b(a)e Fy(mint_ref)e
FC(to)j(a)g Fy(MINT_ARRAY)c FC(with)k(the)g(gi)n(v)o(en)h(element)g
(type,)g(minimum)f(length,)j(and)600 5068 y(maximum)20
b(length.)29 b(If)20 b(a)h Fv(M)t(I)t(N)t(T)i FC(array)e(de\002nition)h
(with)d(the)i(gi)n(v)o(en)f(attrib)n(utes)j(already)f(e)o(xists)e(in)g
Fy(mint)p FC(,)600 5181 y(return)25 b(a)e(reference)j(to)d(it.)29
b(Otherwise,)24 b(allocate)h(and)f(initialize)i(a)d(ne)n(w)g
Fy(MINT_ARRAY)d FC(de\002nition.)p 0 5253 1560 4 v 105
5308 a Fq(3)134 5340 y Fp(At)f(present,)i Fn(M)t(I)t(N)t(T)e
Fp(is)g(produced)h(e)n(v)o(en)g(for)f(the)g(none)o(xistent)h
(\223replies\224)f(of)g Fo(oneway)h Fp(functions.)p eop
%%Page: 72 72
72 71 bop 0 -165 a FC(72)1208 b Fx(CHAPTER)20 b(5.)51
b(MESSA)l(GE)21 b(INTERF)-7 b(A)l(CE)20 b(\(MINT\))j(REPRESENT)-8
b(A)e(TION)300 91 y Fy(mint_ref)46 b(mint_add_def_tags\(mint_)o(def)o
(_kin)o(d)c(kind,)50 b(mint_1)c(*mint,)51 b(int)c(tag,)j(...\))600
204 y FC(Return)24 b(a)f Fy(mint_ref)d FC(to)j(a)i Fv(M)t(I)t(N)t(T)i
FC(de\002nition)e(of)e(the)g(gi)n(v)o(en)h Fy(kind)p
FC(,)e(with)h(the)g(de\002nition)i(slots)g(initial-)600
317 y(ized)h(according)h(to)e(the)g(list)g(of)g(tags.)34
b(The)24 b(tags)i(and)f(associated)j(tag)d(v)n(alues)h(are)f(listed)h
(belo)n(w)-6 b(.)33 b Fu(Note)600 430 y(that)21 b(most)g(ta)o(gs)g(ar)m
(e)g(appr)l(opriate)j(for)d(only)g(certain)k Fv(M)t(I)t(N)t(T)e
Fu(type)f(kinds.)28 b Fy(mint_def_add_tags)16 b FC(will)600
543 y(call)24 b Fy(panic)d FC(if)j(gi)n(v)o(en)g(a)f(tag)h(that)g(is)f
(inappropriate)28 b(for)23 b(the)h(speci\002ed)j Fv(M)t(I)t(N)t(T)g
FC(type)d Fy(kind)p FC(.)600 716 y Fy(MINT_TAG_DONE)900
829 y FC(\(No)f(required)j(tag)e(v)n(alues.\))30 b(Marks)24
b(the)g(end)g(of)f(the)h(tag)g(list.)600 1002 y Fy(MDA_Min)900
1115 y FC(\(Required)h(tag)f(v)n(alues:)31 b Fy(int)p
FC(.\))c(The)c(minimum)g(v)n(alue)i(of)e(a)g Fy(MINT_INTEGER)d
FC(type.)600 1289 y Fy(MDA_Range)900 1402 y FC(\(Required)25
b(tag)f(v)n(alues:)31 b Fy(int)p FC(.\))c(The)c(range)i(of)e(a)g
Fy(MINT_INTEGER)d FC(type.)600 1575 y Fy(MDA_Bits)900
1688 y FC(\(Required)25 b(tag)e(v)n(alues:)30 b Fy(int)p
FC(.\))d(The)22 b(number)i(of)f(bits)g(for)g(a)f Fy(MINT_SCALAR)p
FC(,)d Fy(MINT_FLOAT)p FC(,)900 1801 y(or)k Fy(MINT_CHAR)p
FC(.)600 1974 y Fy(MDA_Flags)900 2087 y FC(\(Required)i(tag)g(v)n
(alues:)30 b Fy(mint_scalar_flags)19 b FC(or)k Fy(mint_char_flags)p
FC(.\))i(The)e(\003ags)h(for)900 2200 y(a)f(scalar)i(or)e(character)j
(type.)600 2373 y Fy(MDA_ElementType)900 2486 y FC(\(Required)f(tag)f
(v)n(alues:)31 b Fy(mint_ref)p FC(.\))26 b(The)d(element)h(type)g(for)g
(a)f Fy(MINT_ARRAY)p FC(.)600 2659 y Fy(MDA_LengthType)900
2772 y FC(\(Required)i(tag)f(v)n(alues:)31 b Fy(mint_ref)p
FC(.\))26 b(The)d(length)i(type)f(for)g(a)f Fy(MINT_ARRAY)p
FC(.)600 2945 y Fy(MDA_Slot)900 3058 y FC(\(Required)33
b(tag)e(v)n(alues:)46 b Fy(mint_ref)p FC(.\))j(A)30 b(slot)i(within)f
(a)g Fy(MINT_STRUCT)p FC(.)48 b(This)31 b(tag)g(may)900
3171 y(be)c(repeated)i(in)f(order)g(to)f(specify)i(multiple)f
(structure)i(slots.)40 b(The)27 b(slots)h(are)f(added)i(to)e(the)900
3284 y(structure)f(in)d(the)h(order)h(in)e(which)h(the)o(y)g(are)g
(speci\002ed)h(in)e(the)h(tag)g(list.)600 3457 y Fy(MDA_Discrim)900
3570 y FC(\(Required)h(tag)f(v)n(alues:)31 b Fy(mint_ref)p
FC(.\))26 b(The)d(discriminator)j(type)e(for)g(a)f Fy(MINT_UNION)p
FC(.)600 3744 y Fy(MDA_Case)900 3857 y FC(\(Required)k(tag)e(v)n
(alues:)33 b Fy(mint_const)21 b FC(and)k Fy(mint_ref)p
FC(.\))30 b(A)24 b(case)h(within)g(a)g Fy(MINT_UNION)900
3969 y FC(type.)k(This)24 b(tag)g(may)f(be)g(repeated)j(in)e(order)g
(to)g(specify)h(multiple)g(union)f(cases.)600 4143 y
Fy(MDA_Default)900 4256 y FC(\(Required)h(tag)f(v)n(alues:)31
b Fy(mint_ref)p FC(.\))26 b(The)d(def)o(ault)i(case)f(in)g(a)f
Fy(MINT_UNION)p FC(.)600 4429 y Fy(MDA_Tag)900 4542 y
FC(\(Required)i(tag)f(v)n(alues:)31 b Fy(mint_ref)p FC(.\))26
b(The)d(type)h(tag)g(for)f(a)h Fy(MINT_TYPED)p FC(.)600
4715 y Fy(MDA_Ref)900 4828 y FC(\(Required)36 b(tag)e(v)n(alues:)52
b Fy(mint_ref)p FC(.\))58 b(The)34 b(typed)h(reference)h(\(i.e.,)g
Fy(ref)d FC(slot\))i(within)g(a)900 4941 y Fy(MINT_TYPED)p
FC(.)600 5114 y Fy(MDA_Right)900 5227 y FC(\(Required)41
b(tag)g(v)n(alues:)62 b Fy(mint_interface_right)p FC(.\))72
b(The)39 b Fy(right)f FC(within)i(a)f Fy(MINT_)900 5340
y(INTERFACE)20 b FC(type.)p eop
%%Page: 73 73
73 72 bop 0 -165 a Fx(5.3.)51 b(THE)22 b(MINT)g(LIBRAR)-6
b(Y)2772 b FC(73)600 91 y(In)28 b(addition,)j Fy(libmint.h)25
b FC(pro)o(vides)30 b(a)d(set)i(of)e(simple)i Fy(MINT_*_REF)c
FC(macros)j(to)g(be)g(used)h(in)f(com-)600 204 y(bination)33
b(with)e(the)g(abo)o(v)o(e)g(tags)h(to)e(aid)h(in)g(the)g(construction)
k(of)e Fv(M)t(I)t(N)t(T)g FC(type)f(de\002nitions.)53
b(See)30 b(the)600 317 y(header)i(\002le)e(for)h(details.)53
b Fu(Flic)n(k)31 b(implementor)o(s)i(must)d(use)h(these)h(macr)l(os)g
(with)e(caution,)35 b(howe)o(ver)-10 b(,)600 430 y(so)28
b(as)h(not)g(to)f(intr)l(oduce)j(portability)h(pr)l(oblems.)45
b(W)-5 b(ith)28 b(these)i(macr)l(os,)g(it)e(is)g(easy)h(to)g(cr)m(eate)
g(an)g(ar)n(-)600 543 y(gument)d(list)f(that)g(contains)i(multiple)f
(calls)f(to)g Fl(mint_)14 b(add_)h(def_)g(tags)f Fu(.)32
b(Eac)o(h)24 b(call)h(is)g(a)f(separ)o(ate)600 656 y(par)o(ameter)-10
b(,)23 b(and)e(eac)o(h)g(call)g(has)h(side)f(ef)n(fects,)i(so)e(the)g
(or)m(der)g(in)g(whic)o(h)g(the)g(calls)h(tak)o(e)f(place)h(is)f
(signif-)600 769 y(icant.)37 b(Howe)o(ver)-10 b(,)27
b(C)e(doesn')m(t)j(guar)o(antee)g(an)f(or)m(der)g(of)f(e)o(valuation)i
(for)f(function)h(par)o(ameter)o(s.)38 b(This)600 882
y(means)23 b(that)g(the)f(calls)h(might)g(be)f(e)o(valuated)j(in)d(dif)
n(fer)m(ent)i(or)m(der)o(s,)g(depending)h(on)d(the)h(compiler)-10
b(,)23 b(thus)600 995 y(pr)l(oducing)30 b(dif)n(fer)m(ent)f(\(although)
h(lo)o(gically)f(equivalent\))h Fl(mint_)15 b(def)41
b Fu(arr)o(ays.)f(This)27 b(in)g(turn)h(would)600 1108
y(cause)34 b(Flic)n(k)f(to)g(pr)l(oduce)i(dif)n(fer)m(ent)k
Fv(P)t(R)t(E)t(S)p 2016 1108 28 4 v 39 w(C)c Fu(\002les)e(on)g(dif)n
(fer)m(ent)i(platforms,)i(thus)d(making)g(testing)600
1220 y(muc)o(h)23 b(mor)m(e)g(dif)n(\002cult!)0 1422
y Fy(void)47 b(mint_get_int_size\(mint_)o(1)42 b(*mint,)50
b(mint_ref)c(itype,)k(int)d(*out_bits,)i(int)0 1534 y(*out_signed\))300
1647 y FC(Determine)36 b(the)g(number)g(of)f(bits)h(\(8,)i(16,)g(or)e
(32\))f(required)j(to)d(represent)j(the)g Fv(M)t(I)t(N)t(T)g
FC(type)e(referenced)i(by)300 1760 y Fy(itype)p FC(.)47
b(In)30 b(essence,)k(this)d(function)h(con)l(v)o(erts)h(a)d
(description)j(of)d(an)h(inte)o(ger)g(range)h(into)f(a)e
(bits/signedness)300 1873 y(representation.)51 b(The)29
b(required)j(number)e(of)f(bits)h(is)g(stored)h(in)e
Fy(*out_bits)d FC(and)k(the)g(signedness)j(indicator)300
1986 y(\(zero)24 b(or)g(one\))g(is)g(stored)g(in)g Fy(*out_signed)p
FC(.)0 2189 y Fy(void)47 b(mint_get_array_len\(mint)o(_1)42
b(*mint,)50 b(mint_ref)45 b(itype,)51 b(unsigned)45 b(*min,)51
b(unsigned)0 2302 y(*max\))300 2414 y FC(Determine)27
b(the)f(minimum)g(and)g(maximum)g(lengths)i(of)e(the)i
Fv(M)t(I)t(N)t(T)h FC(array)e(referenced)i(by)d Fy(itype)p
FC(.)34 b(The)25 b(min-)300 2527 y(imum)h(length)j(is)e(stored)h(in)f
Fy(*min)e FC(and)j(the)f(maximum)g(is)g(stored)i(in)e
Fy(*max)p FC(.)37 b(\(If)27 b(the)h(lengths)g(are)g(equal,)g(then)300
2640 y(the)c(array)g(is)g(\002x)o(ed-length.\))0 2864
y Fy(int)47 b(mint_add_struct_slot\(min)o(t_1)41 b(*mint,)50
b(mint_ref)c(struct_itype\))300 2977 y FC(Add)22 b(a)h(ne)n(w)f(slot)h
(to)f(the)h Fy(MINT_STRUCT)c FC(referenced)26 b(by)c
Fy(struct_itype)p FC(,)d(and)k(return)h(the)f(inde)o(x)g(of)g(the)g(ne)
n(w)300 3090 y(slot.)29 b(The)23 b(slot)h(contents)i(are)e
(uninitialized.)0 3314 y Fy(int)47 b(mint_add_union_case\(mint)o(_1)42
b(*mint,)50 b(mint_ref)45 b(union_itype\))300 3427 y
FC(Add)27 b(a)f(ne)n(w)h(case)g(to)g(the)h Fy(MINT_UNION)23
b FC(referenced)30 b(by)d Fy(union_itype)p FC(,)d(and)j(return)h(the)g
(inde)o(x)g(of)f(the)g(ne)n(w)300 3539 y(case.)i(The)23
b(case)i(contents)g(are)f(uninitialized.)0 3763 y Fy(mint_ref)46
b(mint_find_union_case\(mi)o(nt_)o(1)c(*mint,)50 b(mint_ref)c(union_r,)
j(mint_const)c(const_r\))300 3876 y FC(Return)20 b(a)f(reference)j(to)d
(the)j Fv(M)t(I)t(N)t(T)g FC(type)e(node)h(that)f(is)f(selected)i(by)f
Fy(const_r)d FC(in)i(the)h Fy(MINT_UNION)15 b FC(referenced)300
3989 y(by)32 b Fy(union_r)p FC(.)50 b(\()p Fy(union_r)29
b FC(must)i(point)i(to)e(a)g(union)i(type.\))54 b(If)31
b(the)h(constant)i(does)e(not)g(correspond)j(to)c(an)o(y)300
4102 y(e)o(xplicit)25 b(case)f(of)g(the)g(union,)g(then)g(this)g
(function)i(returns)f(the)f Fy(dfault)d FC(branch)k(of)f(the)f(union,)i
(which)f(may)f(be)300 4215 y Fy(mint_ref_null)p FC(.)0
4439 y Fy(mint_const)45 b(mint_new_const\(mint_cons)o(t_ki)o(nd)d
(kind\))300 4552 y FC(Return)34 b(a)f Fy(mint_const)d
FC(that)k(refers)h(to)e(a)g(ne)n(wly)h(allocated)i Fy(mint_const_u)29
b FC(initialized)37 b(with)c(the)h(gi)n(v)o(en)302 4665
y Fv(M)t(I)t(N)t(T)f FC(constant)g Fy(kind)p FC(.)48
b(Other)31 b(\002elds)f(of)h(the)f(returned)j(constant)g(description)g
(are)e(uninitialized)j(and)d(must)300 4777 y(be)c(\002lled)h(in)f(by)h
(the)g(caller)-5 b(.)41 b(Therefore,)30 b(it)d(is)g(often)h(more)g(con)
l(v)o(enient)i(to)e(call)g(one)g(of)f(the)h(follo)n(wing,)h(more)300
4890 y(speci\002c)24 b(constant)i(constructors:)300 5114
y Fy(mint_const)45 b(mint_new_const_int\(int)d(val\))600
5227 y FC(Return)26 b(a)f Fy(mint_const)c FC(that)26
b(points)h(to)e(a)g(ne)n(wly)g(allocated)j Fy(mint_const_u)21
b FC(describing)28 b(the)d(con-)600 5340 y(stant)f(inte)o(ger)h
Fy(val)p FC(.)p eop
%%Page: 74 74
74 73 bop 0 -165 a FC(74)1208 b Fx(CHAPTER)20 b(5.)51
b(MESSA)l(GE)21 b(INTERF)-7 b(A)l(CE)20 b(\(MINT\))j(REPRESENT)-8
b(A)e(TION)300 91 y Fy(mint_const)45 b(mint_new_const_string\(co)o(nst)
c(char)47 b(*val\))600 204 y FC(Return)26 b(a)f Fy(mint_const)c
FC(that)26 b(points)h(to)e(a)g(ne)n(wly)g(allocated)j
Fy(mint_const_u)21 b FC(describing)28 b(the)d(con-)600
317 y(stant)e(string)h Fy(val)p FC(.)j(The)22 b(string)h(is)g
(represented)i(as)e(an)f(array)h(of)g(characters,)i Fu(including)g
FC(a)d(terminating)600 430 y(NUL.)37 b(\(Note)27 b(that)h(this)g(is)f
(dif)n(ferent)i(than)e(the)h(beha)n(vior)h(of)e(the)g
Fy(aoi_new_const_string)21 b FC(func-)600 543 y(tion)j(described)i(in)e
(Section)g(4.3.\))300 716 y Fy(mint_const)45 b
(mint_new_const_from_aoi_)o(cons)o(t\(ao)o(i_c)o(onst)c(aoiconst\))600
829 y FC(Return)35 b(a)e Fy(mint_const)e FC(that)k(points)g(to)f(a)g
(ne)n(wly)g(allocated)i Fy(mint_const_u)30 b FC(that)35
b(is)f(the)i Fv(M)t(I)t(N)t(T)600 942 y FC(equi)n(v)n(alent)26
b(of)d(the)h(gi)n(v)o(en)i Fv(AO)t(I)g FC(constant.)300
1115 y Fy(mint_const)45 b(mint_new_symbolic_const\()o(mint)o(_con)o
(st_)o(kind)c(kind,)51 b(const)46 b(char)h(*name\))600
1228 y FC(Return)30 b(a)f Fy(mint_const)d FC(that)k(points)h(to)e(a)g
(ne)n(wly)h(allocated)i Fy(mint_const_u)25 b FC(describing)32
b(a)d(sym-)600 1340 y(bolic)c(constant)g(with)f(the)f(gi)n(v)o(en)i
Fy(type)c FC(and)j Fy(name)p FC(.)0 1535 y Fy(int)47
b(mint_const_cmp\(mint_cons)o(t)42 b(c1,)51 b(mint_const)45
b(c2\))300 1648 y FC(Compare)21 b(tw)o(o)i Fv(M)t(I)t(N)t(T)h
FC(constants.)30 b(Return)22 b Fy(1)d FC(if)i(the)g(constants)j(are)d
(unequal)i(and)e Fy(0)f FC(otherwise.)29 b(T)-7 b(w)o(o)20
b(constants)300 1761 y(of)25 b(dif)n(ferent)i(types)f(are)f(ne)n(v)o
(er)g(equal.)35 b(T)-7 b(w)o(o)23 b(primiti)n(v)o(e)j(literal)g
(constants)i(are)d(equal)h(only)g(if)f(the)o(y)g(contain)i(the)300
1874 y(same)20 b(literal)h(v)n(alues;)h(tw)o(o)e(primiti)n(v)o(e)g
(symbolic)h(constants)i(are)d(equal)g(only)h(if)e(the)o(y)i(ha)n(v)o(e)
f(the)g(same)g(name)f(\(and)300 1987 y(are)24 b(of)f(the)h(same)f
(type,)h(as)g(just)g(mentioned\).)30 b(T)-7 b(w)o(o)23
b(compound)i(constants)h(are)e(equal)g(if)f(the)o(y)h(are)g
(structurally)300 2100 y(identical)i(and)e(ha)n(v)o(e)g(equal)h
(corresponding)i(elements.)300 2255 y(Note)c(that)i(a)e(literal)h
(constant)i(and)e(a)f(symbolic)i(constant)h(are)e(ne)n(v)o(er)g(equal.)
0 2450 y Fy(void)47 b(mint_const_check\(mint_c)o(onst)41
b(mc\))300 2563 y FC(Check)24 b(the)g(v)n(alidity)h(of)f(the)f(gi)n(v)o
(en)h Fy(mint_const)p FC(.)0 2757 y Fy(void)47 b(mint_1_check\(mint_1)
42 b(*mint\))300 2870 y FC(Check)31 b(the)f(v)n(alidity)i(of)e(the)g
(gi)n(v)o(en)h Fy(mint_1)c FC(structure.)51 b(If)29 b(an)h(error)h(is)f
(found,)j(this)e(function)h(calls)f Fy(panic)p FC(,)300
2983 y(which)24 b(causes)h(the)f(process)h(to)f(print)g(an)g(error)g
(message)h(and)f(e)o(xit.)0 3178 y Fy(void)47 b(mint_1_readfh\(mint_1)
42 b(*dest,)50 b(FILE)d(*fh\))300 3291 y FC(Read)25 b(a)g
Fy(mint_1)e FC(structure)28 b(from)d Fy(fh)f FC(into)i
Fy(dest)p FC(.)33 b(The)24 b(disk)j(data)f(is)f(stored)h(in)i
Fv(X)t(D)t(R)e FC(format,)g(and)g(the)g(actual)300 3404
y(I/O)20 b(is)h(performed)h(by)f(functions)i(that)e(are)g(generated)i
(by)e Fy(rpcgen)d FC(from)j(the)g Fy(mom/mint.x)c FC(\002le.)27
b(If)21 b(input)g(f)o(ails)300 3517 y(for)j(some)f(reason,)i(this)f
(function)i(in)l(v)n(ok)o(es)g Fy(panic)p FC(.)0 3711
y Fy(void)47 b(mint_1_writefh\(mint_1)42 b(*src,)50 b(FILE)d(*fh\))300
3824 y FC(Write)23 b(the)g(gi)n(v)o(en)h Fy(mint_1)c
FC(structure)26 b(to)c Fy(fh)p FC(.)28 b(\(As)22 b(before,)i(the)f
(data)h(in)f(the)g(\002le)f(is)h(stored)h(in)h Fv(X)t(D)t(R)f
FC(format,)g(and)300 3937 y(the)f(actual)h(I/O)e(is)g(performed)i(by)f
Fy(rpcgen)p FC(-generated)h(functions.\))31 b(This)22
b(function)j(in)l(v)n(ok)o(es)g Fy(mint_1_check)300 4050
y FC(to)20 b(v)o(erify)h(the)g(v)n(alidity)h(of)e(the)i
Fv(M)t(I)t(N)t(T)h FC(data)e(before)h(writing)f(the)f(data)h(to)f
(disk.)29 b(If)20 b(output)h(f)o(ails)g(for)g(some)f(reason,)300
4163 y(this)k(function)i(calls)e Fy(panic)p FC(.)0 4462
y Ft(5.4)119 b(Summary)30 b(and)g(Comments)2 4671 y Fv(M)t(I)t(N)t(T)g
FC(allo)n(ws)e(Flick)f(to)g(represent)i(messages)g(in)e(an)g(abstract)i
(manner)l(,)g(without)f(describing)i(the)d(e)o(xact)h(message)h(for)n
(-)0 4784 y(mats)d(or)h(data)g(encodings)i(that)e(will)f(e)n(v)o
(entually)j(be)d(used.)38 b(There)27 b(are)f(w)o(ays,)h(ho)n(we)n(v)o
(er)l(,)h(in)e(which)h(the)g(current)h(imple-)0 4897
y(mentation)d(of)h Fv(M)t(I)t(N)t(T)g FC(is)e(problematic:)31
b(either)25 b(too)f(abstract,)h(or)f(not)g(abstract)h(enough.)0
5114 y Fz(Primiti)o(v)o(e)h Fk(M)t(I)t(N)t(T)g Fz(T)-7
b(ypes.)46 b FC(Some)28 b(of)h(the)g(basic)j Fv(M)t(I)t(N)t(T)g
FC(types,)f(such)f(as)f(\003oats)g(and)g(characters,)k(are)c(perhaps)i
(too)e(ab-)227 5227 y(stract.)j(F)o(or)23 b(instance,)j(it)d(is)h
(necessary)j(to)d(kno)n(w)g(more)g(about)h(the)f(range)h(of)f(a)g
(\003oating-point)j(type)e(that)f(just)h(the)227 5340
y(total)31 b(number)h(of)e(bits.)49 b(Dif)n(ferent)34
b Fv(I)t(D)t(L)r FC(s)d(may)f(ha)n(v)o(e)h(dif)n(ferent)h(implicit)g
(semantics)g(for)e(\003oats,)i(e.g.,)f(dif)n(ferent)p
eop
%%Page: 75 75
75 74 bop 0 -165 a Fx(5.4.)51 b(SUMMAR)-6 b(Y)21 b(AND)g(COMMENTS)2398
b FC(75)227 91 y(e)o(xpectations)28 b(about)f(the)e(sizes)h(of)e(the)i
(e)o(xponent)h(and)e(mantissa.)34 b(These)25 b(e)o(xpectations)k
(should)d(be)f(represented)227 204 y(in)31 b Fv(M)t(I)t(N)t(T)h
FC(\(and)d(properly)i(in)g Fv(AO)t(I)f FC(as)f(well\).)44
b(In)29 b(a)f(similar)i(w)o(ay)-6 b(,)29 b(character)i(types)f(should)h
(describe)f(additional)227 317 y(properties)i(such)d(as)g(the)g
(character)i(set)e(from)g(which)g(the)g(character)i(is)e(chosen.)46
b(Representing)32 b Fu(all)d FC(of)g(the)g(en-)227 430
y(coding)35 b(details)g(of)e(\003oats)g(and)h(characters)i(is)d(lik)o
(ely)h(not)g(to)f(be)g(w)o(orthwhile.)59 b(A)32 b(compromise)i(w)o
(ould)g(be)f(to)227 543 y(refer)g(to)f(some)g(encoding)j(details)e(by)f
(the)h(names)f(of)g(standards,)37 b(e.g.,)c Fy("ASCII")p
FC(,)e Fy("Unicode)46 b(UTF-)t(16")p FC(,)31 b(or)227
656 y Fy("IEEE)47 b(...")p FC(.)0 844 y Fz(Interface)25
b(and)d(Operation)i(Names.)46 b FC(The)29 b(identi\002ers)j(for)e
(interf)o(ace,)j(operations,)h(and)c(other)h(\223unpresented\224)j
(parts)227 956 y(of)24 b(a)h Fv(M)t(I)t(N)t(T)h FC(tree)e(are)g(not)g
(suf)n(\002ciently)i(abstract.)227 1107 y(The)32 b(union)i
(discriminators)h(used)e(in)g(the)f(upper)i(le)n(v)o(els)f(of)f(the)i
Fv(M)t(I)t(N)t(T)i FC(tree)c(are)h(chosen)h(by)e(the)h(presentation)227
1220 y(generator)d(from)d(the)h(names)g(and)g(codes)g(described)i(in)g
Fv(AO)t(I)r FC(.)40 b(In)27 b(practice,)j(these)h Fv(M)t(I)t(N)t(T)f
FC(union)f(discriminators)227 1333 y(then)k(become)g
Fu(the)g FC(identi\002ers)h(used)f(by)g(back)g(ends)g(when)f
(implementing)j(their)e(message)g(formats.)56 b(This)32
b(is)227 1445 y(a)c(problem:)40 b(the)28 b(presentation)k(generators)f
(should)f(not)e(be)g(choosing)j(the)e(identi\002ers)h(that)e(should)i
(be)e(used)h(in)227 1558 y(\223unpresented\224)i(parts)d(of)f(a)f
(message.)40 b(T)-7 b(o)25 b(\002x)h(this)i(problem,)i
Fv(M)t(I)t(N)t(T)g FC(must)d(be)g(e)o(xtended)h(to)f(represent)i
(abstract)227 1671 y(interf)o(ace)d(and)d(operation)j(identi\002ers.)k
(These)23 b(abstract)i(identi\002ers)g(should)g(allo)n(w)e(for)g
(multiple)h(names,)g(carried)227 1784 y(forw)o(ard)j(from)h
Fv(AO)t(I)r FC(.)35 b(\(See)25 b(the)h(discussion)j(in)d(Section)h
(4.5.\))35 b(It)25 b(w)o(ould)i(be)e(the)h(job)h(of)e(a)h(back)g(end)g
(to)g(translate)227 1897 y(a)f Fv(M)t(I)t(N)t(T)i FC(abstract)f
(identi\002er)f(into)f(a)f(concrete)j(v)n(alue,)e(much)g(in)f(the)h(w)o
(ay)g(that)g(back)g(ends)h(already)g(handle)i Fv(M)t(I)t(N)t(T)227
2010 y FC(symbolic)e(constants.)p eop
%%Page: 76 76
76 75 bop 0 -165 a FC(76)1208 b Fx(CHAPTER)20 b(5.)51
b(MESSA)l(GE)21 b(INTERF)-7 b(A)l(CE)20 b(\(MINT\))j(REPRESENT)-8
b(A)e(TION)p eop
%%Page: 77 77
77 76 bop 0 716 a Fw(Chapter)44 b(6)0 1134 y FB(C)52
b(Abstract)f(Syntax)h(T)-15 b(r)l(ee)51 b(\(CAST\))0
1383 y(Repr)l(esentation)0 1830 y FC(The)24 b(C)f(Abstract)i(Syntax)g
(T)m(ree)f(\()r Fv(C)t(A)t(S)t(T)r FC(\))i(intermediate)h(language)f
(is)e(a)g(collection)j(of)d(data)h(structures)i(b)n(uilt)e(to)g(pro)o
(vide)0 1943 y(an)c(internal)h(representation)j(of)20
b(C/C++)g(source)i(code.)29 b(This)20 b(representation)25
b(allo)n(ws)c(Flick)f(to)h(generate)h(code)g(as)e(it)g(goes)0
2056 y(along)31 b(and)f(then)h(mak)o(e)f(modi\002cations)i(to)d(the)h
(code)h(after)f(some)g(analysis)i(has)e(been)h(done.)48
b(The)29 b(de\002nitions)j(of)e(the)2 2169 y Fv(C)t(A)t(S)t(T)c
FC(data)e(structures)i(are)d(contained)j(in)d Fy(mom/cast.x)d
FC(and)k(the)f(library)i(code)f(can)g(be)f(found)h(in)f
Fy(c/libcast)d FC(and)k(its)0 2282 y(header)h(\002le)e(is)g(in)h
Fy(mom/c/libcast.h)p FC(.)0 2588 y Ft(6.1)119 b(CAST)31
b(Ov)o(er)o(view)0 2799 y FC(The)e Fv(C)t(A)t(S)t(T)i
FC(data)d(structures)i(are)e(designed)i(to)d(represent)j(the)e(v)n
(arious)h(aspects)g(of)f(C/C++)f(source)i(code.)41 b(At)27
b(the)h(root)0 2912 y(there)k(is)g(the)f Fy(cast_scope)d
FC(which)k(corresponds)j(to)d(a)f(le)o(xical)h(scope,)j(so)c(it)g
(contains)j(all)e(declarations)j(and)d(de\002ni-)0 3025
y(tions.)c(These)20 b(declarations)j(and)d(de\002nitions)h(are)f(then)g
(represented)j(by)c Fy(cast_def)p FC(s)e(which)j(contains)h(an)o(y)f
(information)0 3138 y(needed)29 b(to)e(produce)i(the)e(correct)i
(source)g(code.)40 b(Then,)28 b(beneath)h(the)e Fy(cast_def)p
FC(s)e(there)j(can)f(be)h(types,)g(e)o(xpressions,)0
3251 y(and)21 b(other)h(things)g(representing)i(their)d(counterparts)k
(in)20 b(C/C++)g(source)i(code.)29 b(These)22 b Fv(C)t(A)t(S)t(T)i
FC(trees)e(can)e(then)i(be)e(printed)0 3364 y(out)h(using)i(the)e
Fy(cast_w_*)d FC(functions)24 b(in)d(the)i Fv(C)t(A)t(S)t(T)h
FC(library)f(\(described)h(in)d(Section)h(6.3\),)f(although)i(it)e(is)g
(easiest)i(to)e(just)0 3477 y(call)j Fy(cast_w_scope)19
b FC(on)24 b(the)g(root)g(scope)h(to)e(get)h(e)n(v)o(erything)i
(printed)f(out.)0 3783 y Ft(6.2)119 b(CAST)31 b(Data)e(Structur)n(es)0
3995 y FC(The)22 b(follo)n(wing)h(descriptions)j(of)c(the)h(data)f
(structures)j(sho)n(w)d(the)h(C)e(type)i(de\002nitions)h(follo)n(wed)f
(by)f(a)g(simple)h(represen-)0 4108 y(tation)j(of)f(what)f(output)j
(the)o(y)e(generate.)34 b(This)25 b(representation)k(is)24
b(pretty)i(simple:)33 b(just)25 b(think)h(of)f(the)g(stuf)n(f)g
(between)h(the)0 4220 y(angle)f(brack)o(ets)g(as)f(code)g(to)g(be)f(e)o
(x)o(ecuted,)i(or)e(as)h(v)n(ariable)h(names)f(to)g(be)f(referenced.)0
4483 y FA(6.2.1)99 b(Scoped)26 b(Names)2 4662 y Fv(C)t(A)t(S)t(T)g
FC(uses)e(a)f Fy(cast_scoped_name)18 b FC(to)23 b(hold)h(an)o(y)g
(information)h(about)g(a)e(fully)h(scoped)h(name)e(in)g(C++.)28
b(The)23 b(structure)0 4775 y(is)j(made)g(up)h(of)f(an)g(array)h(of)g
Fy(cast_name_s)22 b FC(structures)29 b(which)e(hold)g(a)f(name)g(and)h
(an)f(array)h(of)f(template)i(ar)n(guments)0 4888 y(for)c(that)g(name.)
29 b(Each)23 b(template)i(ar)n(gument)g(can)f(either)h(be)f(another)h
(name,)e(a)g(type,)h(or)g(an)f(e)o(xpression.)0 5114
y Fy(typedef)46 b(struct)g(cast_name_s)f(cast_scoped_name<>;)0
5340 y(enum)i(cast_template_arg_kind)1905 5568 y FC(77)p
eop
%%Page: 78 78
78 77 bop 0 -165 a FC(78)954 b Fx(CHAPTER)20 b(6.)51
b(C)22 b(ABSTRA)l(CT)e(SYNT)-8 b(AX)20 b(TREE)h(\(CAST\))h(REPRESENT)-8
b(A)e(TION)0 91 y Fy({)95 204 y(CAST_TEMP_ARG_NAME)186
b(=)48 b(1,)95 317 y(CAST_TEMP_ARG_TYPE)186 b(=)48 b(2,)95
430 y(CAST_TEMP_ARG_EXPR)186 b(=)48 b(3)0 543 y(};)0
656 y(union)e(cast_template_arg_u)0 769 y(switch\(cast_template_arg)o
(_kin)o(d)c(kind\))0 882 y({)95 995 y(case)47 b(CAST_TEMP_ARG_NAME:)90
b(cast_scoped_name)h(name;)95 1108 y(case)47 b(CAST_TEMP_ARG_TYPE:)90
b(cast_type)427 b(type;)95 1220 y(case)47 b(CAST_TEMP_ARG_EXPR:)90
b(cast_expr)427 b(expr;)0 1333 y(};)0 1446 y(struct)46
b(cast_name_s)0 1559 y({)95 1672 y(string)906 b(name<>;)95
1785 y(cast_template_arg_array)90 b(args;)189 b(/*)47
b(C++)g(Only)g(*/)0 1898 y(};)141 2085 y FC(The)20 b
Fv(C)t(A)t(S)t(T)h FC(library)f(functions)h(for)d(scoped)i(names)e(are)
h(b)n(uilt)g(to)f(pass)h(the)g Fy(cast_scoped_name)13
b FC(structure)20 b(by)e(v)n(alue)0 2198 y(if)28 b(it)h(is)g(not)g
(going)h(to)e(be)h(changed)i(or)e(it)f(is)h(ne)n(wly)g(created,)i
(otherwise)f(the)o(y)g(are)f(passed)h(by)f(pointer)-5
b(.)46 b(F)o(or)28 b(e)o(xample,)0 2311 y(the)i Fy
(cast_new_scoped_name)24 b FC(constructs)32 b(a)d(ne)n(w)h
Fy(cast_scoped_name)24 b FC(from)30 b(a)f(null-terminated)34
b Fy(varargs)27 b FC(list)0 2424 y(of)e(strings)j(and)e(then)g(returns)
h(the)f(ne)n(w)f(scoped)i(name)f(by)f(v)n(alue.)36 b(Ho)n(we)n(v)o(er)l
(,)26 b(the)f Fy(cast_add_scope_name)20 b FC(function)0
2537 y(tak)o(es)29 b(a)e(pointer)j(to)e(a)f(scoped)i(name)f(since)h(it)
f(will)f(be)h(changing)i(the)e(structure.)44 b(Here)28
b(is)f(a)h(full)g(list)g(of)g(the)g(pertinent)0 2650
y Fy(libcast)21 b FC(functions:)0 2776 y Fy(void)47 b
(cast_add_scope_name\(cas)o(t_sc)o(ope)o(d_na)o(me)42
b(*scname,)49 b(char)e(*name,)0 2889 y(cast_template_arg_array)41
b(args\))300 3002 y FC(Adds)24 b(another)h(name)f(and)g(set)f(of)h
(template)h(ar)n(guments)g(to)f(a)f(scoped)i(name.)0
3189 y Fy(void)47 b(cast_del_scope_name\(cas)o(t_sc)o(ope)o(d_na)o(me)
42 b(*name\))300 3302 y FC(Deletes)24 b(the)g(last)g(name)g(in)f(the)h
(gi)n(v)o(en)g(scoped)h(name.)0 3467 y Fy(void)47 b
(cast_prepend_scope_name)o(\(cas)o(t_s)o(cope)o(d_na)o(me)41
b(*scname,)50 b(char)d(*name,)0 3580 y(cast_template_arg_array)41
b(args\))300 3693 y FC(Adds)24 b(the)f(gi)n(v)o(en)i(scope)f(name)g(to)
f(the)h(front)h(of)e(a)g(scoped)i(name.)0 3858 y Fy(int)47
b(cast_cmp_scoped_names\(co)o(nst)41 b(cast_scoped_name)j(*scn1,)50
b(const)c(cast_scoped_name)0 3971 y(*scn2\))300 4084
y FC(Compares)36 b(tw)o(o)f(scoped)i(names,)h(just)e(lik)o(e)g(a)e(re)o
(gular)j Fy(strcmp)p FC(.)61 b(Note:)53 b(this)35 b(does)h(not)g(yet)g
(compare)g(the)300 4197 y(template)25 b(ar)n(guments)h(so)d(it)g(is)h
(possible)i(to)d(get)h(a)f(f)o(alse)h(positi)n(v)o(e.)0
4384 y Fy(cast_scoped_name)43 b(cast_new_scoped_name\(const)e(char)47
b(*name,)j(...\))300 4497 y FC(Constructs)30 b(a)d(ne)n(w)g
Fy(cast_scoped_name)c FC(from)28 b(a)f(null)h(terminated)i(list)e(of)g
(strings.)43 b(F)o(or)27 b(e)o(xample,)i Fy(cast_)300
4610 y(new_scoped_name\("CORBA",)45 b("Boolean",)k(NULL\))16
b FC(w)o(ould)j(result)g(in)f(the)h(name)f Fy("CORBA::Boolean")p
FC(.)0 4775 y Fy(cast_scoped_name)43 b(cast_set_scoped_name\(cast_)o
(sco)o(ped_)o(name)e(*scname,)50 b(char)c(*name,)0 4888
y(cast_template_arg_array)41 b(args,)51 b(...\))300 5001
y FC(This)26 b(is)g(a)f(more)h(\003e)o(xible)h(v)o(ersion)g(of)f
Fy(cast_new_scoped_name)20 b FC(which)26 b(allo)n(ws)h(one)f(to)g
(construct)j(a)c(name)300 5114 y(with)i(template)h(ar)n(guments.)42
b(It)27 b(w)o(orks)h(by)f(setting)i(the)e(v)n(alues)h(of)f
Fy(scname)e FC(or)i(constructing)k(a)c(ne)n(w)f(one)i(if)e(it)300
5227 y(is)h(null.)39 b(The)27 b(v)n(arar)n(gs)i(are)e(tuples)h(of)f
(strings)h(for)g(the)f(names,)h(and)f(the)g(template)i(ar)n(guments)g
(for)e(that)g(name,)300 5340 y(terminated)f(by)d(a)g(null.)p
eop
%%Page: 79 79
79 78 bop 0 -165 a Fx(6.2.)51 b(CAST)21 b(D)l(A)-10 b(T)i(A)21
b(STR)l(UCTURES)2533 b FC(79)0 91 y Fy(int)47 b
(cast_scoped_name_is_empt)o(y\(ca)o(st_)o(scop)o(ed_n)o(ame)41
b(*scname\))300 204 y FC(Returns)25 b(TR)l(UE)c(if)i
Fy(scname)e FC(is)j(empty)-6 b(.)0 393 y Fy(cast_scoped_name)43
b(cast_copy_scoped_name\(cast)o(_sc)o(oped)o(_nam)o(e)f(*name\))300
506 y FC(Returns)25 b(a)e(cop)o(y)h(of)g Fy(name)p FC(.)0
684 y(The)h Fv(C)t(A)t(S)t(T)i FC(library)e(also)f(de\002nes)g(some)g
(handy)h(global)g(v)n(ariables:)0 862 y Fy(extern)46
b(cast_scoped_name)d(null_scope_name)300 974 y FC(This)27
b(is)f(a)g Fy(cast_scoped_name)c FC(initialized)29 b(with)e(zero)g
(length)h(and)f(v)n(alue.)39 b(This)27 b(v)n(ariable)h(is)f(usually)h
(used)300 1087 y(to)23 b(initialize)j(other)f Fy(cast_scoped_name)p
FC(s)19 b(created)25 b(on)e(the)h(stack.)0 1277 y Fy(extern)46
b(cast_scoped_name)d(empty_scope_name)300 1389 y FC(This)23
b(is)h(a)f Fy(cast_scoped_name)18 b FC(initialized)27
b(with)c(an)g(empty)h(string)h(as)f(its)f(only)i(name.)0
1637 y FA(6.2.2)99 b(T)-7 b(ypes)0 1811 y FC(An)o(y)19
b(C/C++)h(types)h(in)h Fv(C)t(A)t(S)t(T)h FC(are)d(represented)j(in)d
(the)g Fy(cast_type_u)c FC(union)21 b(and)g(usually)h(referenced)g(by)e
Fy(cast_type)0 1924 y FC(which)k(is)f(a)g(pointer)j(to)d(a)g
Fy(cast_type_u)p FC(.)0 2168 y Fz(Primiti)o(v)o(e)h(T)-7
b(ypes)0 2342 y FC(The)33 b Fy(cast_primitive_type)27
b FC(structure)36 b(is)d(able)h(to)g(represent)h(an)o(y)f(primiti)n(v)o
(e)g(types)h(lik)o(e)f(booleans,)k(characters,)0 2455
y(inte)o(gers,)d(and)d(\003oats,)h(as)e(well)h(as)f(an)o(y)h
(modi\002ers)g(for)f(those)i(types.)53 b(The)32 b Fy(name)d
FC(\002eld)i(is)h(a)f(bit)g(of)h(a)f(hack)h(so)f(that)h(it)0
2568 y(can)c(be)g(treated)h(internally)h(as)e(a)f(primiti)n(v)o(e,)j(b)
n(ut)e(when)g(output,)i(the)e(string)h(in)e Fy(name)f
FC(will)h(be)h(printed)i(rather)e(than)h(the)0 2681 y(primiti)n(v)o(e)
24 b(name.)0 2881 y Fy(enum)47 b(cast_primitive_kind)0
2994 y({)95 3107 y(CAST_PRIM_CHAR)188 b(=)47 b(1,)95
3220 y(CAST_PRIM_INT)236 b(=)47 b(2,)95 3333 y(CAST_PRIM_FLOAT)140
b(=)47 b(3,)95 3446 y(CAST_PRIM_DOUBLE)92 b(=)47 b(4,)95
3559 y(CAST_PRIM_BOOL)188 b(=)47 b(5)95 b(/*)47 b(C++)g(Only)g(*/)0
3672 y(};)0 3785 y(typedef)f(unsigned)f(cast_primitive_modifier;)0
3897 y(const)h(CAST_MOD_SIGNED)283 b(=)47 b(0x0001;)0
4010 y(const)f(CAST_MOD_UNSIGNED)187 b(=)47 b(0x0002;)0
4123 y(const)f(CAST_MOD_SHORT)331 b(=)47 b(0x0010;)0
4236 y(const)f(CAST_MOD_LONG)379 b(=)47 b(0x0020;)0 4349
y(const)f(CAST_MOD_LONG_LONG)139 b(=)47 b(0x0040;)0 4462
y(struct)f(cast_primitive_type)0 4575 y({)95 4688 y
(cast_primitive_kind)91 b(kind;)95 4801 y(cast_primitive_modifier)f
(mod;)95 4914 y(cast_scoped_name)i(name;)0 5027 y(};)0
5227 y(<if)47 b(name)g(is)g(null>)95 5340 y(<mod>)g(<kind>)p
eop
%%Page: 80 80
80 79 bop 0 -165 a FC(80)954 b Fx(CHAPTER)20 b(6.)51
b(C)22 b(ABSTRA)l(CT)e(SYNT)-8 b(AX)20 b(TREE)h(\(CAST\))h(REPRESENT)-8
b(A)e(TION)0 91 y Fy(<else>)95 204 y(<name>)0 474 y Fz(Enumerations)0
656 y FC(The)20 b Fy(cast_enum_type)c FC(represents)23
b(an)d(enumeration)j(with)d(a)g(list)h(of)f(names)h(and)g(their)g(v)n
(alue\(s\),)i(as)d(well)g(as)g(the)h(name)0 769 y(of)i(the)h
(enumeration)i(itself.)0 1005 y Fy(struct)46 b(cast_enum_field)0
1118 y({)95 1231 y(/*)i(The)f(name)f(of)h(the)g(slot)g(*/)95
1344 y(string)g(name<>;)95 1570 y(/*)h(The)f(value)f(\(should)g
(probably)f(be)i(a)h(literal)e(primitive)f(*/)95 1683
y(cast_expr)h(val;)0 1796 y(};)0 1909 y(struct)g(cast_enum_type)0
2021 y({)95 2134 y(/*)i(Enum)e(tag.)h(*/)95 2247 y(cast_scoped_name)d
(name;)95 2473 y(/*)k(value)e(and)h(name)g(of)g(each)f(slot)h(*/)95
2586 y(cast_enum_field)92 b(slots<>;)0 2699 y(};)0 2931
y(enum)47 b(<name>)f({)95 3044 y(<slots[0].name>)e(=)k(<slots[0].val>,)
95 3157 y(...,)95 3270 y(<slots[n].name>)c(=)k(<slots[n].val>)0
3383 y(})0 3653 y Fz(Arrays)0 3835 y FC(The)23 b Fy(cast_array_type)c
FC(can)24 b(represent)i(an)d(array)i(of)e(a)g(certain)i(length)g(and)f
(type.)0 4071 y Fy(struct)46 b(cast_array_type)0 4184
y({)95 4297 y(/*)i(Constant)d(expression)g(that)i(determines)e(the)i
(array's)f(length.)239 4410 y(Can)h(be)g(omitted)f(if)h(outside)f(of)h
(anything)e(or)i(at)h(the)f(end)f(of)i(a)f(structure;)239
4523 y(means)f(array)g(is)i(variable-length.)91 b(*/)95
4636 y(cast_expr)189 b(length;)95 4862 y(/*)48 b(Type)e(of)h(each)g
(element.)93 b(*/)95 4974 y(cast_type)189 b(element_type;)0
5087 y(};)0 5320 y(<element_type>)44 b([<length>])p eop
%%Page: 81 81
81 80 bop 0 -165 a Fx(6.2.)51 b(CAST)21 b(D)l(A)-10 b(T)i(A)21
b(STR)l(UCTURES)2533 b FC(81)0 91 y Fz(P)n(ointers)0
266 y FC(The)23 b Fy(cast_pointer_type)18 b FC(adds)25
b(a)e(le)n(v)o(el)g(of)h(pointer)h(indirection)i(and)d(points)h(to)e
(the)h(real)g(type.)0 480 y Fy(struct)46 b(cast_pointer_type)0
593 y({)95 706 y(/*)i(What)e(the)h(pointer)f(points)g(to.)95
b(*/)95 819 y(cast_type)189 b(target;)0 931 y(};)0 1145
y(<target>)46 b(*)0 1392 y Fz(Refer)n(ences)0 1567 y
FC(The)23 b Fy(cast_reference_type)18 b FC(adds)24 b(a)f(le)n(v)o(el)h
(of)f(C++)g(v)n(ariable)j(reference.)0 1781 y Fy(struct)46
b(cast_reference_type)0 1894 y({)95 2007 y(/*)i(What)e(the)h(reference)
e(refers)i(to.)f(*/)95 2119 y(cast_type)189 b(target;)0
2232 y(};)0 2446 y(<target>)46 b(&)0 2693 y Fz(Functions)0
2868 y FC(The)36 b Fy(cast_func_type)c FC(represents)40
b(a)c(function)j(and)e(an)o(y)g(related)h(attrib)n(utes,)k(such)c(as)e
(parameters,)42 b(e)o(xceptions,)0 2981 y(initializers)30
b(in)e(constructors,)j(and)d(v)n(arious)h(\003ags.)40
b(The)27 b(parameters)i(are)f(an)f(array)h(of)g Fy(cast_param)p
FC(s)c(which)j(contain)0 3094 y(the)d(type,)g(name,)f(and)h(def)o(ault)
h(v)n(alue)g(of)e(the)h(parameters.)141 3207 y(Also,)f(there)g(is)g(a)f
(\003ag)g(\002eld)h(to)g(specify)h(options)h(for)e(the)g(parameter)-5
b(.)30 b(Currently)-6 b(,)24 b(there)g(is)e(only)i(the)f
Fy(CAST_PARAM_)0 3320 y(IMPLICIT)e FC(\003ag)j(which)g(means)h(that)f
(the)g(parameter)i(is)e(implicit)h(and)g(should)g(not)g(be)f(part)g(of)
g(the)h(function)h(prototype.)0 3433 y(An)21 b(e)o(xample)h(usage)g(of)
g(this)f(\003ag)g(is)g(the)h Fy(this)d FC(v)n(ariable)24
b(in)d(a)g(member)g(function)j(of)d(a)g(C++)f(class,)j(or)e(a)g(global)
i(v)n(ariable,)0 3545 y(lik)o(e)h Fy(errno)p FC(,)d(which)j(a)f
(function)j(might)e(be)f(using.)0 3759 y Fy(typedef)46
b(unsigned)f(cast_param_spec;)0 3872 y(const)h(CAST_PARAM_IMPLICIT)91
b(=)47 b(0x0001;)0 3985 y(struct)f(cast_param)0 4098
y({)95 4211 y(cast_param_spec)92 b(spec;)95 4324 y(string)524
b(name<>;)95 4437 y(cast_type)380 b(type;)95 4550 y(cast_init)g
(default_value;)91 b(/*)48 b(C++)f(Only)f(*/)0 4663 y(};)0
4888 y(typedef)g(cast_param)f(cast_func_param;)0 5001
y(typedef)h(unsigned)f(cast_func_spec;)0 5114 y(const)h
(CAST_FUNC_VIRTUAL)187 b(=)47 b(0x0001;)94 b(/*)47 b(Prepends)e
('virtual')h(to)h(the)g(prototype)e(*/)0 5227 y(const)h(CAST_FUNC_PURE)
331 b(=)47 b(0x0002;)94 b(/*)47 b(Appends)f('=)h(0')g(to)g(make)g(it)g
(pure)g(*/)0 5340 y(const)f(CAST_FUNC_INLINE)235 b(=)47
b(0x0004;)94 b(/*)47 b(Prepends)e('inline')h(*/)p eop
%%Page: 82 82
82 81 bop 0 -165 a FC(82)954 b Fx(CHAPTER)20 b(6.)51
b(C)22 b(ABSTRA)l(CT)e(SYNT)-8 b(AX)20 b(TREE)h(\(CAST\))h(REPRESENT)-8
b(A)e(TION)0 91 y Fy(const)46 b(CAST_FUNC_EXPLICIT)139
b(=)47 b(0x0008;)94 b(/*)47 b(Prepends)e('explicit')g(*/)0
204 y(const)h(CAST_FUNC_CONST)283 b(=)47 b(0x0010;)94
b(/*)47 b(Appends)f('const')f(*/)0 317 y(const)h(CAST_FUNC_OPERATOR)139
b(=)47 b(0x0020;)94 b(/*)1861 430 y(*)48 b(Prepends)d('operator')g(to)j
(the)e(cast_def)1861 543 y(*)i(name)e(unless)h(it's)f(empty,)g(in)h
(case)g(it)1861 656 y(*)h(is)f(printed)f(before)g(the)h(return)f(type,)
1861 769 y(*)i(so)f(you)g(can)g(do)g(type)g(cast)f(operators.)1861
882 y(*/)0 995 y(struct)g(cast_func_type)0 1108 y({)95
1220 y(cast_func_param)187 b(params<>;)95 1333 y(cast_type)475
b(return_type;)95 1446 y(cast_func_spec)235 b(spec;)619
b(/*)48 b(C++)e(Only)h(*/)95 1559 y(cast_type_array)187
b(exception_types;)91 b(/*)48 b(C++)e(Only)h(*/)95 1672
y(cast_expr_array)187 b(initializers;)235 b(/*)48 b(C++)e(Only)h(*/)0
1785 y(};)0 1997 y(<spec)f(&)i(CAST_FUNC_VIRTUAL|CAST_F)o(UNC)o(_INL)o
(INE|)o(CAS)o(T_FU)o(NC_E)o(XPL)o(ICIT)o(>)42 b(<return_type>)0
2110 y(\(<if)47 b(!implicit><params[0].ty)o(pe)42 b(and)k
(params[0].name>)e(=)k(<params[0].default_valu)o(e>,)48
2223 y(...)48 2336 y(<if)f(!implicit><params[n].ty)o(pe)42
b(and)k(params[n].name>)e(=)k(<params[n].default_valu)o(e>)0
2449 y(\))0 2562 y(<spec)e(&)i(CAST_FUNC_CONST>)0 2675
y(throw\(<exception_types[0)o(],)42 b(...,)k(<exception_types[n]>\))0
2788 y(:)h(<initializers[0]>,)c(...,)k(<initializers[1]>)0
2901 y(<spec)f(&)i(CAST_FUNC_PURE>)0 3147 y Fz(Aggr)n(egate)26
b(T)-7 b(ypes)0 3321 y FC(The)22 b Fy(cast_aggregate_type)17
b FC(is)23 b(used)g(for)g(compound)i(types,)f(things)g(lik)o(e)g
(unions,)g(structures,)h(and)f(classes.)30 b(Mem-)0 3434
y(bers)24 b(are)f(then)h(added)h(to)e(the)g Fy(cast_scope)d
FC(just)k(lik)o(e)g(adding)h(a)d(global)j(v)n(ariable)g(to)e(the)h
(root)g(scope.)29 b(Of)23 b(course,)h(other)0 3547 y(declarations)j
(and)d(de\002nitions)i(can)e(be)f(added)i(to)e(the)h(scope)h(if)e(it)g
(is)h(C++,)e(as)i(well)f(as)h(parents)h(in)e(the)h Fy(parents)p
FC(.)0 3759 y Fy(typedef)46 b(unsigned)f(cast_parent_flags;)0
3872 y(const)h(CAST_PARENT_PUBLIC)234 b(=)48 b(0x0001;)0
3985 y(const)e(CAST_PARENT_PROTECTED)90 b(=)48 b(0x0002;)0
4098 y(const)e(CAST_PARENT_PRIVATE)186 b(=)48 b(0x0004;)0
4211 y(const)e(CAST_PARENT_VIRTUAL)186 b(=)48 b(0x0008;)0
4324 y(struct)e(cast_parent_spec)0 4437 y({)95 4550 y
(cast_parent_flags)91 b(flags;)95 4663 y(cast_scoped_name)139
b(name;)0 4775 y(};)0 5001 y(enum)47 b(cast_aggregate_kind)0
5114 y({)95 5227 y(CAST_AGGREGATE_STRUCT)42 b(=)48 b(1,)95
5340 y(CAST_AGGREGATE_UNION)90 b(=)48 b(2,)p eop
%%Page: 83 83
83 82 bop 0 -165 a Fx(6.2.)51 b(CAST)21 b(D)l(A)-10 b(T)i(A)21
b(STR)l(UCTURES)2533 b FC(83)95 91 y Fy(CAST_AGGREGATE_CLASS)90
b(=)48 b(3)0 204 y(};)0 317 y(struct)e(cast_aggregate_type)0
430 y({)95 543 y(cast_aggregate_kind)91 b(kind;)95 656
y(cast_scoped_name)235 b(name;)95 769 y(cast_parent_spec)g(parents<>;)
92 b(/*)48 b(C++)f(Only)f(*/)95 882 y(cast_scope)523
b(scope;)284 b(/*)48 b(Adding)e(things)g(besides)g(vars)g(is)h(C++)g
(Only)g(*/)0 995 y(};)0 1215 y(<kind>)f(<name>)g(:)i
(<parents[0].flags>)42 b(<parents[0].name>,)764 1328
y(...,)764 1441 y(<parents[n].flags>)g(<parents[n].name>)0
1554 y({)95 1666 y(<scope>)0 1779 y(};)0 2034 y Fz(Quali\002ers)0
2212 y FC(The)23 b Fy(cast_qualified_type)18 b FC(is)23
b(used)h(to)g(attach)h(an)o(y)e(quali\002ers,)i(const)g(and)f(v)n
(olatile,)h(to)f(a)f(type.)0 2433 y Fy(typedef)46 b(int)h
(cast_type_qualifier;)0 2546 y(const)f(CAST_TQ_CONST)331
b(=)47 b(0x01;)0 2659 y(const)f(CAST_TQ_VOLATILE)187
b(=)47 b(0x02;)0 2772 y(struct)f(cast_qualified_type)0
2885 y({)95 2998 y(cast_type_qualifier)d(qual;)95 3111
y(cast_type)523 b(actual;)0 3224 y(};)0 3444 y(<qual>)46
b(<actual>)0 3699 y Fz(T)-8 b(emplates)0 3876 y FC(The)23
b Fy(cast_template_type)18 b FC(is)23 b(used)i(to)e(declare)i(a)e
(template)i(type)f(with)g(a)f(certain)i(set)f(of)f(parameters.)0
4098 y Fy(enum)47 b(cast_template_param_kin)o(d)0 4211
y({)95 4324 y(CAST_TEMP_PARAM_TYPE)281 b(=)48 b(1,)95
4437 y(CAST_TEMP_PARAM_CLASS)233 b(=)48 b(2,)95 4550
y(CAST_TEMP_PARAM_TYPENAME)89 b(=)48 b(3,)95 4663 y
(CAST_TEMP_PARAM_TEMPLATE)89 b(=)48 b(4)0 4775 y(};)0
4888 y(union)e(cast_template_param_u)0 5001 y
(switch\(cast_template_par)o(am_k)o(ind)41 b(kind\))0
5114 y({)95 5227 y(case)47 b(CAST_TEMP_PARAM_TYPE:)281
b(cast_type)665 b(type_param;)95 5340 y(case)47 b
(CAST_TEMP_PARAM_CLASS:)233 b(void;)p eop
%%Page: 84 84
84 83 bop 0 -165 a FC(84)954 b Fx(CHAPTER)20 b(6.)51
b(C)22 b(ABSTRA)l(CT)e(SYNT)-8 b(AX)20 b(TREE)h(\(CAST\))h(REPRESENT)-8
b(A)e(TION)95 91 y Fy(case)47 b(CAST_TEMP_PARAM_TYPENAME:)89
b(void;)95 204 y(case)47 b(CAST_TEMP_PARAM_TEMPLATE:)89
b(cast_template_param_t)g(params<>;)0 317 y(};)0 430
y(struct)46 b(cast_template_param)0 543 y({)95 656 y(string)810
b(name<>;)95 769 y(cast_template_param_u)90 b(u;)95 882
y(cast_template_arg)282 b(default_value;)0 995 y(};)0
1220 y(typedef)46 b(unsigned)f(cast_template_flags;)0
1333 y(const)h(CAST_TEMP_EXPORT)187 b(=)47 b(0x0001;)0
1446 y(struct)f(cast_template_type)0 1559 y({)95 1672
y(cast_template_flags)91 b(flags;)95 1785 y(cast_template_param)g
(params<>;)95 1898 y(cast_type)571 b(def;)0 2011 y(};)0
2234 y(<flags>)0 2347 y(template)46 b(<)h(<params[0].u)d(and)j
(params[0].name>)d(=)j(<params[0].default_value>,)525
2460 y(...,)525 2573 y(<params[n].u)d(and)j(params[n].name>)d(=)j
(<params[n].default_value>)41 b(>)95 2686 y(<def>)0 2944
y Fz(Named)22 b(T)-7 b(ypes)0 3122 y FC(Referencing)29
b(types)e(through)h(their)f(name)g(is)f(done)h(by)f(using)i(a)e(set)g
(of)g(dif)n(ferent)j(kinds)e(which)g(get)f(output)i(in)e(slightly)0
3235 y(dif)n(ferent)f(w)o(ays:)0 3431 y Fy(CAST_TYPE_NAME)300
3544 y FC(A)d(plain)j(name,)e(usually)j(from)d(a)g Fy(typedef)p
FC(.)0 3743 y Fy(CAST_TYPE_STRUCT_NAME)300 3856 y FC(A)f(name)i(for)g
(a)f(structure,)i(it)f(will)f(print)h Fy(struct)d FC(before)k(the)f
(scoped)h(name.)0 4054 y Fy(CAST_TYPE_UNION_NAME)300
4167 y FC(A)d(name)i(for)g(a)f(union,)h(it)g(will)f(print)h
Fy(union)e FC(before)j(the)e(scoped)j(name.)0 4366 y
Fy(CAST_TYPE_ENUM_NAME)300 4479 y FC(A)c(name)i(for)g(an)f
(enumeration,)j(it)d(will)h(just)g(print)g(the)g(scoped)h(name.)0
4677 y Fy(CAST_TYPE_CLASS_NAME)300 4790 y FC(A)d(forw)o(ard)j(class)f
(declaration,)i(it)d(will)g(print)i Fy(class)c FC(before)k(the)e
(scoped)i(name,)f(so)f(this)h(cannot)h(be)e(used)i(lik)o(e)300
4903 y(a)e(re)o(gular)i(type.)0 5162 y Fz(V)-9 b(oids)0
5340 y FC(V)d(oid)24 b(types)g(are)g(handled)i(simply)e(by)g(setting)h
(the)f(kind)g(of)f(the)h Fy(cast_type)d FC(to)i Fy(CAST_TYPE_VOID)p
FC(.)p eop
%%Page: 85 85
85 84 bop 0 -165 a Fx(6.2.)51 b(CAST)21 b(D)l(A)-10 b(T)i(A)21
b(STR)l(UCTURES)2533 b FC(85)0 91 y Fz(Nulls)0 266 y
FC(Null)23 b(types)i(are)e(used)i(for)e(the)h(return)h(type)f(of)f(C++)
g(constructors)k(and)d(destructors.)32 b(The)o(y)23 b(are)h(handled)h
(by)f(setting)h(the)0 379 y(kind)f(of)g(the)g Fy(cast_type)c
FC(to)j Fy(CAST_TYPE_NULL)p FC(.)0 628 y Fz(Union)f(of)i(All)f(T)-7
b(ypes)0 803 y FC(All)23 b(of)h(the)g(speci\002c)h(types)g(are)f
(brought)h(together)h(under)f(the)f(umbrella)h(of)f(the)g(cast)p
2736 803 28 4 v 34 w(type)p 2925 803 V 35 w(u)f(union)i(which)f(holds)h
(them)0 916 y(all)f(and)g(a)f(fe)n(w)f(simple)j(ones.)0
1131 y Fy(enum)47 b(cast_type_kind)0 1243 y({)95 1356
y(CAST_TYPE_NAME)378 b(=)48 b(1,)95 1469 y(...)95 1582
y(CAST_TYPE_TEMPLATE)186 b(=)48 b(17)143 b(/*)47 b(C++)g(Only)f(*/)0
1695 y(};)0 1808 y(union)g(cast_type_u)0 1921 y(switch)g
(\(cast_type_kind)e(kind\))0 2034 y({)95 2147 y(case)j(CAST_TYPE_NAME:)
378 b(cast_scoped_name)282 b(name;)95 2260 y(case)47
b(CAST_TYPE_PRIMITIVE:)138 b(cast_primitive_type)g(primitive_type;)95
2373 y(case)47 b(CAST_TYPE_POINTER:)234 b(cast_pointer_type)g
(pointer_type;)95 2485 y(case)47 b(CAST_TYPE_ARRAY:)330
b(cast_array_type)g(array_type;)95 2598 y(case)47 b
(CAST_TYPE_FUNCTION:)186 b(cast_func_type)378 b(func_type;)95
2711 y(case)47 b(CAST_TYPE_ENUM:)378 b(cast_enum_type)g(enum_type;)95
2824 y(case)47 b(CAST_TYPE_STRUCT_NAME:)42 b(cast_scoped_name)282
b(struct_name;)95 2937 y(case)47 b(CAST_TYPE_UNION_NAME:)90
b(cast_scoped_name)282 b(union_name;)95 3050 y(case)47
b(CAST_TYPE_ENUM_NAME:)138 b(cast_scoped_name)282 b(enum_name;)95
3163 y(case)47 b(CAST_TYPE_VOID:)378 b(void;)95 3276
y(case)47 b(CAST_TYPE_NULL:)378 b(void;)95 3389 y(case)47
b(CAST_TYPE_QUALIFIED:)138 b(cast_qualified_type)g(qualified;)95
3502 y(case)47 b(CAST_TYPE_AGGREGATE:)138 b(cast_aggregate_type)g
(agg_type;)95 3615 y(case)47 b(CAST_TYPE_CLASS_NAME:)90
b(cast_scoped_name)282 b(class_name;)95 3727 y(case)47
b(CAST_TYPE_REFERENCE:)138 b(cast_reference_type)g(reference_type;)95
3840 y(case)47 b(CAST_TYPE_TYPENAME:)186 b(cast_scoped_name)282
b(typename_name;)95 3953 y(case)47 b(CAST_TYPE_TEMPLATE:)186
b(cast_template_type)g(template_type;)0 4066 y(};)141
4281 y FC(There)30 b(are)g(a)f(number)h(of)g(functions)i(in)e(the)i
Fv(C)t(A)t(S)t(T)g FC(library)f(for)f(constructing)j(and)d
(initializing)j(these)e(structures.)0 4394 y(There)23
b(are)h(also)f(some)h(functions)h(and)f(v)n(ariables)h(dealing)g(with)e
Fy(cast_type_array)p FC(s)18 b(which)24 b(can)f(be)g(used)h(whene)n(v)o
(er)0 4507 y(an)g(array)g(of)h Fv(C)t(A)t(S)t(T)i FC(types)e(is)e
(needed.)0 4696 y Fy(cast_type_array)44 b(cast_set_type_array\(cas)o
(t_ty)o(pe_)o(arra)o(y)e(*array,)50 b(cast_type)45 b(type,)51
b(...\))300 4809 y FC(Sets)26 b(the)h(v)n(alues)h(of)e
Fy(array)f FC(\(or)i(construct)i(a)d(ne)n(w)g(one)h(if)f(it)g(is)h
(NULL\))d(with)j(the)f(array)i(of)e(v)n(alues)i(passed)g(in)300
4922 y(the)c(null-terminated)j(ar)n(gument)f(list.)0
5114 y Fy(int)47 b(cast_add_type_array_valu)o(e\(ca)o(st_)o(type)o
(_arr)o(ay)41 b(*array,)50 b(cast_type)c(type\))300 5227
y FC(Adds)35 b(another)h(element)f(to)g Fy(array)p FC(,)f(initializing)
k(it)c(with)g Fy(type)p FC(,)h(and)g(then)g(return)h(the)f(inde)o(x)g
(of)f(the)h(ne)n(w)300 5340 y(element.)p eop
%%Page: 86 86
86 85 bop 0 -165 a FC(86)954 b Fx(CHAPTER)20 b(6.)51
b(C)22 b(ABSTRA)l(CT)e(SYNT)-8 b(AX)20 b(TREE)h(\(CAST\))h(REPRESENT)-8
b(A)e(TION)0 91 y Fy(extern)46 b(cast_type_array)e(null_type_array)300
204 y FC(This)23 b(is)h(a)f(global)i(that)f(can)g(be)f(used)i(for)e
(initializing)k(other)e Fy(cast_type_array)p FC(s)19
b(to)k(be)h(empty)-6 b(.)0 459 y FA(6.2.3)99 b(Expr)n(essions)0
635 y Fz(Literal)24 b(Primiti)o(v)o(es)0 811 y FC(A)e
Fy(cast_lit_prim)e FC(represents)26 b(a)d(primiti)n(v)o(e)h(literal)h
(v)n(alue)g(of)e(a)g(primiti)n(v)o(e)i(type.)0 1028 y
Fy(union)46 b(cast_lit_prim_u)0 1141 y(switch)g(\(cast_primitive_kind)c
(kind\))0 1254 y({)95 1367 y(case)47 b(CAST_PRIM_CHAR:)139
b(char)190 b(c;)95 1480 y(case)47 b(CAST_PRIM_INT:)187
b(long)j(i;)47 b(/*)g(XXX)g(long)g(long)g(*/)95 1593
y(case)g(CAST_PRIM_FLOAT:)91 b(float)142 b(f;)95 1706
y(case)47 b(CAST_PRIM_DOUBLE:)c(double)94 b(d;)47 b(/*)g(XXX)g(long)g
(double)f(*/)95 1819 y(case)h(CAST_PRIM_BOOL:)139 b(char)190
b(b;)47 b(/*)g(C++)g(Only)g(*/)0 1932 y(};)0 2045 y(struct)f
(cast_lit_prim)0 2158 y({)95 2270 y(cast_primitive_modifier)90
b(mod;)95 2383 y(cast_lit_prim_u)474 b(u;)0 2496 y(};)0
2713 y(<mod>)46 b(<u>)0 2964 y Fz(Function)22 b(Calls)0
3140 y FC(A)g Fy(cast_expr_call)d FC(represents)27 b(a)c(function)i
(call)f(with)g(a)f(set)h(of)f(ar)n(guments.)0 3358 y
Fy(struct)46 b(cast_expr_call)0 3471 y({)95 3584 y(cast_expr)380
b(func;)95 3697 y(cast_expr_array)92 b(params;)0 3810
y(};)0 4027 y(<func>\(<params[0]>,)43 b(...,)j(<params[n]>\))0
4278 y Fz(Member)23 b(Selection)0 4454 y FC(A)f Fy(cast_expr_sel)e
FC(represents)26 b(the)e(selection)i(of)d(a)g(member)h(of)f(an)h(aggre)
o(gate)h(type.)0 4671 y Fy(struct)46 b(cast_expr_sel)0
4784 y({)95 4897 y(cast_expr)428 b(var;)95 5010 y(cast_scoped_name)92
b(member;)0 5123 y(};)0 5340 y(<var>.<member>)p eop
%%Page: 87 87
87 86 bop 0 -165 a Fx(6.2.)51 b(CAST)21 b(D)l(A)-10 b(T)i(A)21
b(STR)l(UCTURES)2533 b FC(87)0 91 y Fz(Unary)23 b(Operations)0
270 y FC(A)f Fy(cast_unary_expr)d FC(represents)26 b(a)d(unary)i
(operation)h(on)e(another)h(e)o(xpression.)0 497 y Fy(enum)47
b(cast_unary_op)0 610 y({)95 723 y(CAST_UNARY_DEREF)235
b(=)47 b(1,)95 b(/*)47 b(*)h(\(unary\))e(*/)95 836 y(CAST_UNARY_ADDR)
283 b(=)47 b(2,)95 b(/*)47 b(&)h(\(unary\))e(*/)95 949
y(CAST_UNARY_NEG)331 b(=)47 b(3,)95 b(/*)47 b(-)h(\(unary\))e(*/)95
1062 y(CAST_UNARY_LNOT)283 b(=)47 b(4,)95 b(/*)47 b(!)h(\(unary\))e(*/)
95 1175 y(CAST_UNARY_BNOT)283 b(=)47 b(5,)95 b(/*)47
b(~)h(\(unary\))e(*/)95 1288 y(CAST_UNARY_PRE_INC)139
b(=)47 b(6,)95 b(/*)47 b(++foo)g(*/)95 1401 y(CAST_UNARY_PRE_DEC)139
b(=)47 b(7,)95 b(/*)47 b(--foo)g(*/)95 1514 y(CAST_UNARY_POST_INC)91
b(=)47 b(8,)95 b(/*)47 b(foo++)g(*/)95 1626 y(CAST_UNARY_POST_DEC)91
b(=)47 b(9)143 b(/*)47 b(foo--)g(*/)0 1739 y(};)0 1852
y(struct)f(cast_unary_expr)0 1965 y({)95 2078 y(cast_unary_op)92
b(op;)95 2191 y(cast_expr)284 b(expr;)0 2304 y(};)0 2529
y(<op><expr>)0 2789 y Fz(Binary)23 b(Operations)0 2968
y FC(A)f Fy(cast_binary_expr)d FC(represents)26 b(a)d(binary)i
(operation)h(o)o(v)o(er)e(tw)o(o)f(e)o(xpressions.)0
3195 y Fy(enum)47 b(cast_binary_op)0 3308 y({)95 3421
y(CAST_BINARY_MUL)187 b(=)48 b(1,)142 b(/*)48 b(*)f(\(binary\))f(*/)95
3533 y(CAST_BINARY_DIV)187 b(=)48 b(2,)142 b(/*)48 b(/)f(*/)95
3646 y(CAST_BINARY_MOD)187 b(=)48 b(3,)142 b(/*)48 b(\045)f(*/)95
3759 y(CAST_BINARY_ADD)187 b(=)48 b(4,)142 b(/*)48 b(+)f(\(binary\))f
(*/)95 3872 y(CAST_BINARY_SUB)187 b(=)48 b(5,)142 b(/*)48
b(-)f(\(binary\))f(*/)95 3985 y(CAST_BINARY_SHL)187 b(=)48
b(6,)142 b(/*)48 b(<<)f(*/)95 4098 y(CAST_BINARY_SHR)187
b(=)48 b(7,)142 b(/*)48 b(>>)f(*/)95 4324 y(CAST_BINARY_LT)235
b(=)48 b(8,)142 b(/*)48 b(<)f(*/)95 4437 y(CAST_BINARY_GT)235
b(=)48 b(9,)142 b(/*)48 b(>)f(*/)95 4550 y(CAST_BINARY_LE)235
b(=)48 b(10,)94 b(/*)48 b(<=)f(*/)95 4663 y(CAST_BINARY_GE)235
b(=)48 b(11,)94 b(/*)48 b(>=)f(*/)95 4775 y(CAST_BINARY_EQ)235
b(=)48 b(12,)94 b(/*)48 b(==)f(*/)95 4888 y(CAST_BINARY_NE)235
b(=)48 b(13,)94 b(/*)48 b(!=)f(*/)95 5114 y(CAST_BINARY_BAND)139
b(=)48 b(14,)94 b(/*)48 b(&)f(*/)95 5227 y(CAST_BINARY_BXOR)139
b(=)48 b(15,)94 b(/*)48 b(^)f(*/)95 5340 y(CAST_BINARY_BOR)187
b(=)48 b(16,)94 b(/*)48 b(|)f(*/)p eop
%%Page: 88 88
88 87 bop 0 -165 a FC(88)954 b Fx(CHAPTER)20 b(6.)51
b(C)22 b(ABSTRA)l(CT)e(SYNT)-8 b(AX)20 b(TREE)h(\(CAST\))h(REPRESENT)-8
b(A)e(TION)95 204 y Fy(CAST_BINARY_LAND)139 b(=)48 b(17,)94
b(/*)48 b(&&)f(*/)95 317 y(CAST_BINARY_LOR)187 b(=)48
b(18,)94 b(/*)48 b(||)f(*/)95 543 y(CAST_BINARY_ASSIGN)c(=)48
b(19,)94 b(/*)48 b(=)f(*/)95 769 y(CAST_BINARY_COMMA)91
b(=)48 b(20)142 b(/*)48 b(,)f(*/)0 882 y(};)0 995 y(struct)f
(cast_binary_expr)0 1108 y({)95 1220 y(cast_binary_op)92
b(op;)95 1333 y(cast_expr)332 b(expr[2];)0 1446 y(};)0
1669 y(<expr[0]>)45 b(<op>)i(<expr[1]>)0 1927 y Fz(T)-7
b(ype)23 b(Casting)0 2105 y FC(A)f Fy(cast_expr_cast)d
FC(represents)27 b(a)c(type)h(cast)g(on)g(another)h(e)o(xpression.)0
2330 y Fy(struct)46 b(cast_expr_cast)0 2443 y({)95 2556
y(/*)i(Expression)d(to)i(cast.)94 b(*/)95 2669 y(cast_expr)f(expr;)95
2894 y(/*)48 b(Type)e(to)h(cast)g(it)g(to.)95 b(*/)95
3007 y(cast_type)e(type;)0 3120 y(};)0 3343 y(\(<type>\)<expr>)0
3601 y Fz(Conditional)23 b(Expr)n(essions)0 3779 y FC(A)f
Fy(cast_cond_expr)c FC(represents)26 b(a)c(conditional)k(e)o(xpression)
g(with)d(a)f(test)i(e)o(xpression)h(and)f(its)f(positi)n(v)o(e)h(and)f
(ne)o(gati)n(v)o(e)0 3892 y(results.)0 4117 y Fy(struct)46
b(cast_cond_expr)0 4230 y({)95 4342 y(cast_expr)93 b(test;)95
4455 y(cast_expr)g(true_expr;)95 4568 y(cast_expr)g(false_expr;)0
4681 y(};)0 4904 y(<test>)46 b(?)i(<true_expr>)c(:)k(<false_expr>)0
5162 y Fz(The)22 b(new)h(Operator)0 5340 y FC(A)f Fy(cast_op_new_expr)d
FC(represents)26 b(a)d(usage)i(of)e(the)h Fy(new)e FC(operator)-5
b(.)p eop
%%Page: 89 89
89 88 bop 0 -165 a Fx(6.2.)51 b(CAST)21 b(D)l(A)-10 b(T)i(A)21
b(STR)l(UCTURES)2533 b FC(89)0 91 y Fy(struct)46 b(cast_op_new_expr)0
204 y({)95 317 y(cast_expr)93 b(placement;)95 430 y(cast_type)g(type;)
95 543 y(cast_init)g(init;)0 656 y(};)0 917 y(new)47
b(\(<placement>\))d(<type><init>)0 1221 y Fz(The)22 b(delete)i
(Operator)0 1415 y FC(A)e Fy(cast_op_delete_expr)c FC(represents)26
b(a)d(usage)i(of)e(the)h Fy(delete)d FC(operator)-5 b(.)0
1687 y Fy(struct)46 b(cast_op_delete_expr)0 1799 y({)95
1912 y(long)333 b(array;)95 2025 y(cast_expr)93 b(expr;)0
2138 y(};)0 2400 y(delete)46 b(<if)h(array>[]</if>)d(<expr>)0
2704 y Fz(V)-8 b(ariable)24 b(Names)0 2897 y FC(V)-10
b(ariable)24 b(names)f(and)h(other)g(name)f(e)o(xpressions)j(are)d(a)f
Fy(cast_expr)e FC(set)j(to)g Fy(CAST_EXPR_NAME)18 b FC(with)23
b(a)g(scoped)h(name.)0 3201 y Fz(String)f(Literals)0
3395 y FC(A)e(string)i(literal)g(is)f(simply)h(a)e Fy(cast_expr)e
FC(set)j(to)g Fy(CAST_EXPR_LIT_STRING)15 b FC(and)23
b(a)e(C)g(string)i(set)f(in)g(the)g Fy(cast_expr)0 3508
y FC(structure.)0 3812 y Fz(The)g(sizeof)j(Operator)0
4006 y FC(A)33 b Fy(sizeof)e FC(is)j(done)g(by)g(setting)i(the)e(kind)h
(of)e(the)h Fy(cast_expr)d FC(to)j Fy(CAST_EXPR_SIZEOF_EXPR)27
b FC(or)34 b Fy(CAST_EXPR_)0 4119 y(SIZEOF_TYPE)20 b
FC(and)k(then)g(setting)h(the)f(v)n(alue)g(of)g(what)f(is)h(to)f(be)h
(e)n(v)n(aluated.)0 4423 y Fz(The)e(typeid)h(Operator)0
4616 y FC(A)33 b Fy(typeid)e FC(is)j(done)g(by)g(setting)i(the)e(kind)h
(of)e(the)h Fy(cast_expr)d FC(to)j Fy(CAST_EXPR_TYPEID_EXPR)27
b FC(or)34 b Fy(CAST_EXPR_)0 4729 y(TYPEID_TYPE)20 b
FC(and)k(then)g(setting)h(the)f(v)n(alue)g(of)g(what)f(is)h(to)f(be)h
(e)n(v)n(aluated.)0 5033 y Fz(T)-7 b(ypes)23 b(as)h(Expr)n(essions)0
5227 y FC(Sometimes)f(it)g(is)g(necessary)j(to)d(use)h(a)e(type)i(as)g
(an)f(e)o(xpression,)i(such)f(as)f(in)h(a)e(macro)i(call.)29
b(This)23 b(can)g(be)h(done)g(by)f(using)0 5340 y(the)h(kind)g
Fy(CAST_EXPR_TYPE)p FC(.)p eop
%%Page: 90 90
90 89 bop 0 -165 a FC(90)954 b Fx(CHAPTER)20 b(6.)51
b(C)22 b(ABSTRA)l(CT)e(SYNT)-8 b(AX)20 b(TREE)h(\(CAST\))h(REPRESENT)-8
b(A)e(TION)0 91 y Fz(Union)22 b(of)i(All)f(Expr)n(essions)0
266 y Fy(enum)47 b(cast_expr_kind)0 379 y({)95 491 y(CAST_EXPR_NAME)665
b(=)47 b(1,)95 604 y(...)95 717 y(CAST_EXPR_TYPE)665
b(=)47 b(22)0 830 y(};)0 943 y(union)f(cast_expr_u)0
1056 y(switch)g(\(cast_expr_kind)e(kind\))0 1169 y({)95
1282 y(case)j(CAST_EXPR_NAME:)664 b(cast_scoped_name)234
b(name;)95 1395 y(case)47 b(CAST_EXPR_LIT_PRIM:)472 b(cast_lit_prim)378
b(lit_prim;)95 1508 y(case)47 b(CAST_EXPR_LIT_STRING:)376
b(string)714 b(lit_string<>;)95 1621 y(case)47 b(CAST_EXPR_CALL:)664
b(cast_expr_call)330 b(call;)95 1733 y(case)47 b(CAST_EXPR_SEL:)712
b(cast_expr_sel)378 b(sel;)95 1959 y(case)47 b(CAST_EXPR_UNARY:)616
b(cast_unary_expr)282 b(unary;)95 2072 y(case)47 b(CAST_EXPR_CAST:)664
b(cast_expr_cast)330 b(cast;)95 2185 y(case)47 b
(CAST_EXPR_SIZEOF_EXPR:)328 b(cast_expr)570 b(sizeof_expr;)95
2298 y(case)47 b(CAST_EXPR_SIZEOF_TYPE:)328 b(cast_type)570
b(sizeof_type;)95 2524 y(case)47 b(CAST_EXPR_BINARY:)568
b(cast_binary_expr)234 b(binary;)95 2637 y(case)47 b
(CAST_EXPR_OP_ASSIGN:)424 b(cast_binary_expr)234 b(op_assign;)95
2750 y(case)47 b(CAST_EXPR_COND:)664 b(cast_cond_expr)330
b(cond;)95 2863 y(case)47 b(CAST_EXPR_CONST_NAME:)376
b(cast_scoped_name)234 b(const_name;)95 2975 y(case)47
b(CAST_EXPR_CONST_CAST:)376 b(cast_expr_cast)330 b(c_cast;)95
3088 y(case)47 b(CAST_EXPR_DYNAMIC_CAST:)280 b(cast_expr_cast)330
b(d_cast;)95 3201 y(case)47 b(CAST_EXPR_REINTERPRET_CAS)o(T:)89
b(cast_expr_cast)330 b(r_cast;)95 3314 y(case)47 b
(CAST_EXPR_STATIC_CAST:)328 b(cast_expr_cast)i(s_cast;)95
3427 y(case)47 b(CAST_EXPR_OP_NEW:)568 b(cast_op_new_expr)234
b(op_new;)95 3540 y(case)47 b(CAST_EXPR_OP_DELETE:)424
b(cast_op_delete_expr)90 b(op_delete;)95 3653 y(case)47
b(CAST_EXPR_TYPEID_EXPR:)328 b(cast_expr)570 b(typeid_expr;)95
3766 y(case)47 b(CAST_EXPR_TYPEID_TYPE:)328 b(cast_type)570
b(typeid_type;)95 3879 y(case)47 b(CAST_EXPR_TYPE:)664
b(cast_type)570 b(type_expr;)0 3992 y(};)0 4237 y FA(6.2.4)99
b(Statements)0 4411 y Fz(Statement)24 b(Blocks)0 4586
y FC(A)e Fy(cast_block)e FC(represents)27 b(a)c(block)h(of)g(e)o(x)o
(ecutable)i(statements.)0 4775 y Fy(typedef)46 b(unsigned)f
(cast_block_flags;)0 4888 y(/*)i(The)g(statements)e(in)i(the)g(block)g
(are)f(in)i(reverse)d(order)i(*/)0 5001 y(const)f(CAST_BLOCK_REVERSE)
139 b(=)47 b(0x00000001;)0 5114 y(/*)g(The)g(statements)e(in)i(the)g
(block)g(should)f(be)h(treated)f(as)h(if)g(they)g(were)143
5227 y(inlined)f(with)h(the)g(rest)f(of)h(the)g(statements)e(in)i(the)g
(parent)f(block.)143 5340 y(\(e.g.)h(there)f(is)h(no)g('{')g(when)g
(printed\))e(*/)p eop
%%Page: 91 91
91 90 bop 0 -165 a Fx(6.2.)51 b(CAST)21 b(D)l(A)-10 b(T)i(A)21
b(STR)l(UCTURES)2533 b FC(91)0 91 y Fy(const)46 b(CAST_BLOCK_INLINE)187
b(=)47 b(0x00000002;)0 317 y(struct)f(cast_block)0 430
y({)95 543 y(/*)i(Variable)d(declarations)g(and)i(such)f(at)h
(beginning)f(of)h(block.)94 b(*/)95 656 y(cast_scope)380
b(scope;)95 882 y(/*)48 b(Statements)d(following)g(decls,)h(but)h
(preceeding)e("regular")g(code.)239 995 y(\(Mainly)g(useful)i(for)f
(initializing)f(temporary)g(vars,)i(etc.\))f(*/)95 1108
y(cast_stmt)428 b(initials<>;)95 1333 y(/*)48 b(Statements)d(following)
g(them)i(\("regular")e(code\).)93 b(*/)95 1446 y(cast_stmt)428
b(stmts<>;)95 1559 y(cast_block_flags)92 b(flags;)0 1672
y(};)0 1886 y({)95 1998 y(<scope>)95 2224 y(<initials[0]>)95
2337 y(...)95 2450 y(<initials[n]>)0 2676 y(<if)47 b(!reverse>)95
2789 y(<stmts[0]>)95 2902 y(...)95 3015 y(<stmts[n]>)95
3128 y(<else>)95 3240 y(<stmts[n]>)95 3353 y(...)95 3466
y(<stmts[0]>)0 3579 y(})0 3826 y Fz(If)23 b(Statements)0
4001 y FC(A)f Fy(cast_if)f FC(represents)26 b(an)e(if)f(statement)i
(and)f(its)g(true)g(and)g(f)o(alse)h(branches.)0 4215
y Fy(struct)46 b(cast_if)0 4327 y({)95 4440 y(cast_expr)189
b(test;)95 4553 y(cast_stmt)g(true_stmt;)95 4666 y(cast_stmt)g
(false_stmt;)92 b(/*)48 b(optional)d(*/)0 4779 y(};)0
4993 y(if\()i(<test>)f(\))95 5106 y(<true_stmt>)0 5218
y(else)95 5331 y(<false_stmt>)p eop
%%Page: 92 92
92 91 bop 0 -165 a FC(92)954 b Fx(CHAPTER)20 b(6.)51
b(C)22 b(ABSTRA)l(CT)e(SYNT)-8 b(AX)20 b(TREE)h(\(CAST\))h(REPRESENT)-8
b(A)e(TION)0 91 y Fz(While)23 b(and)f(Do/While)i(Loops)0
280 y FC(A)j Fy(cast_while)d FC(can)k(be)g(used)g(to)g(represent)i
(both)f Fy(while)d FC(and)i Fy(do)p FC(/)p Fy(while)d
FC(loops,)30 b(depending)h(on)d(the)g Fy(cast_stmt_)0
393 y(kind)p FC(.)0 648 y Fy(struct)46 b(cast_while)0
761 y({)95 874 y(cast_expr)189 b(test;)95 987 y(cast_stmt)g(stmt;)0
1100 y(};)0 1348 y(while\()46 b(<test>)g(\))95 1461 y(<stmt>)0
1686 y(do)95 1799 y(<stmt>)0 1912 y(while\()g(<test>)g(\))0
2200 y Fz(F)n(or)23 b(Loops)0 2389 y FC(A)f Fy(cast_for)f
FC(represents)26 b(a)d Fy(for)f FC(loop.)0 2644 y Fy(struct)46
b(cast_for)0 2757 y({)95 2870 y(cast_expr)189 b(init;)94
b(/*)47 b(optional)f(*/)95 2983 y(cast_expr)189 b(test;)94
b(/*)47 b(optional)f(*/)95 3096 y(cast_expr)189 b(iter;)94
b(/*)47 b(optional)f(*/)95 3209 y(cast_stmt)189 b(stmt;)0
3322 y(};)0 3570 y(for\()47 b(<init>;)e(<test>;)h(<iter>)g(\))95
3683 y(<stmt>)0 3971 y Fz(Switch)22 b(Statements)0 4159
y FC(A)i Fy(cast_switch)e FC(represents)28 b(a)d Fy(switch)e
FC(statement.)37 b(The)25 b(stmt)g(slot)h(is)g(used)g(as)f(the)h(body)h
(so)e(it)h(should)h(be)e(a)g Fy(cast_)0 4272 y(block)c
FC(with)j(a)f(number)h(of)g Fy(cast_case)p FC(s)c(for)k(each)g(branch.)
0 4527 y Fy(struct)46 b(cast_switch)0 4640 y({)95 4753
y(cast_expr)189 b(test;)95 4866 y(cast_stmt)g(stmt;)0
4979 y(};)0 5227 y(switch\()46 b(<test>)g(\))95 5340
y(<stmt>)p eop
%%Page: 93 93
93 92 bop 0 -165 a Fx(6.2.)51 b(CAST)21 b(D)l(A)-10 b(T)i(A)21
b(STR)l(UCTURES)2533 b FC(93)0 91 y Fz(Statement)24 b(Labels)0
275 y FC(A)30 b Fy(cast_label)d FC(attaches)33 b(a)d(label)i(to)f(a)f
(statement.)52 b(The)31 b Fy(users)e FC(slot)i(is)g(used)g(internally)j
(to)d(track)g(the)h(number)f(of)0 388 y(times)26 b(this)g(label)h(has)f
(been)g(used,)h(if)e(the)h(count)h(is)f(zero)g(then)g(this)h(label)f
(will)g(not)g(be)f(printed,)j(b)n(ut)e(the)g(statement)i(will)0
501 y(still)c(be)g(output.)0 742 y Fy(struct)46 b(cast_label)0
855 y({)95 968 y(string)285 b(label<>;)95 1081 y(cast_stmt)141
b(stmt;)95 1194 y(int)429 b(users;)0 1307 y(};)0 1543
y(<if)47 b(users><label>:</if>)95 1656 y(<stmt>)0 1930
y Fz(Case)24 b(Statements)0 2114 y FC(A)e Fy(cast_case)f
FC(represents)26 b(a)d(case)h(branch)h(in)f(a)f(switch)h(statement.)0
2355 y Fy(struct)46 b(cast_case)0 2468 y({)95 2581 y(cast_expr)189
b(label;)95 2694 y(cast_stmt)g(stmt;)0 2807 y(};)0 3043
y(case)47 b(<label>:)95 3156 y(<stmt>)0 3430 y Fz(Catch)23
b(Blocks)0 3614 y FC(A)f Fy(cast_catch)e FC(represents)27
b(a)c Fy(catch)e FC(block)k(in)e(C++.)0 3855 y Fy(/*)47
b(C++)g(Only)g(*/)0 3968 y(struct)f(cast_catch)0 4081
y({)95 4194 y(cast_type)189 b(type;)95 4307 y(string)333
b(name<>;)95 4420 y(cast_stmt)189 b(block;)0 4533 y(};)0
4769 y(catch\()46 b(<type)g(and)h(name>)g(\))95 4882
y(<block>)0 5156 y Fz(T)-7 b(ry)23 b(Blocks)0 5340 y
FC(A)f Fy(cast_try)f FC(represents)26 b(a)d Fy(try)f
FC(block)j(in)e(C++.)p eop
%%Page: 94 94
94 93 bop 0 -165 a FC(94)954 b Fx(CHAPTER)20 b(6.)51
b(C)22 b(ABSTRA)l(CT)e(SYNT)-8 b(AX)20 b(TREE)h(\(CAST\))h(REPRESENT)-8
b(A)e(TION)0 91 y Fy(/*)47 b(C++)g(Only)g(*/)0 204 y(struct)f(cast_try)
0 317 y({)95 430 y(cast_stmt)237 b(block;)95 543 y(cast_catch)189
b(handlers<>;)0 656 y(};)0 868 y(try)95 981 y(<block>)0
1094 y(<handlers[0]>)0 1207 y(...)0 1320 y(<handlers[n]>)0
1566 y Fz(Br)n(eak)23 b(Statements)0 1740 y FC(Setting)h(the)f
Fy(cast_stmt)d FC(kind)k(to)f Fy(CAST_STMT_BREAK)18 b
FC(will)k(mak)o(e)i(a)e(break)i(statement.)31 b(Since)23
b(there)h(is)f(nothing)i(else)0 1853 y(associated)h(with)e(a)f(break)h
(statement,)h(it)f(has)g(no)f(structure)0 2099 y Fz(Continue)f
(Statements)0 2273 y FC(Setting)38 b(the)f Fy(cast_stmt)d
FC(kind)k(to)f Fy(CAST_STMT_CONTINUE)31 b FC(will)37
b(mak)o(e)g(a)g(continue)i(statement.)71 b(Since)37 b(there)h(is)0
2386 y(nothing)26 b(else)e(associated)i(with)d(a)g(continue)j
(statement,)f(it)e(has)h(no)g(structure)0 2632 y Fz(Null)e(Statements)0
2806 y FC(Setting)i(the)g Fy(cast_stmt)c FC(kind)25 b(to)e
Fy(CAST_STMT_NULL)c FC(will)k(mak)o(e)h(a)f(null)h(statement)i(which)d
(just)i(prints)f(out)g(a)f(`;')0 3052 y Fz(Empty)f(Statements)0
3226 y FC(Setting)29 b(the)f Fy(cast_stmt)d FC(kind)j(to)g
Fy(CAST_STMT_EMPTY)23 b FC(will)28 b(mak)o(e)g(a)g(completely)i(empty)e
(statement,)j(nothing)f(will)0 3339 y(be)c(printed.)38
b(This)25 b(is)h(useful)i(for)e(deleting)i(statements)g(in)e(the)g
(middle)h(of)e(blocks)j(without)f(ha)n(ving)h(to)e(mo)o(v)o(e)f(all)h
(of)g(the)0 3452 y(follo)n(wing)f(statements)h(back)e(one.)0
3698 y Fz(Union)e(of)i(All)f(Statements)0 3872 y Fy(enum)47
b(cast_stmt_kind)0 3985 y({)95 4098 y(CAST_STMT_EXPR)283
b(=)47 b(1,)95 4211 y(...)95 4324 y(CAST_STMT_DECL)283
b(=)47 b(20)143 b(/*)47 b(C++)g(Only)g(*/)0 4437 y(};)0
4550 y(union)f(cast_stmt_u)0 4663 y(switch)g(\(cast_stmt_kind)e(kind\))
0 4775 y({)95 4888 y(case)j(CAST_STMT_EXPR:)282 b(cast_expr)237
b(expr;)95 5001 y(case)47 b(CAST_STMT_BLOCK:)234 b(cast_block)189
b(block;)95 5114 y(case)47 b(CAST_STMT_IF:)378 b(cast_if)333
b(s_if;)95 5227 y(case)47 b(CAST_STMT_WHILE:)234 b(cast_while)189
b(s_while;)95 5340 y(case)47 b(CAST_STMT_DO_WHILE:)90
b(cast_while)189 b(s_do_while;)p eop
%%Page: 95 95
95 94 bop 0 -165 a Fx(6.2.)51 b(CAST)21 b(D)l(A)-10 b(T)i(A)21
b(STR)l(UCTURES)2533 b FC(95)95 91 y Fy(case)47 b(CAST_STMT_FOR:)330
b(cast_for)285 b(s_for;)95 204 y(case)47 b(CAST_STMT_SWITCH:)186
b(cast_switch)141 b(s_switch;)95 317 y(case)47 b(CAST_STMT_BREAK:)234
b(void;)95 430 y(case)47 b(CAST_STMT_CONTINUE:)90 b(void;)95
543 y(case)47 b(CAST_STMT_GOTO:)282 b(string)381 b(goto_label<>;)95
656 y(case)47 b(CAST_STMT_LABEL:)234 b(cast_label)189
b(s_label;)95 769 y(case)47 b(CAST_STMT_CASE:)282 b(cast_case)237
b(s_case;)95 882 y(case)47 b(CAST_STMT_DEFAULT:)138 b(cast_stmt)237
b(default_stmt;)2005 995 y(/*)47 b(optional:)e(*/)95
1108 y(case)i(CAST_STMT_RETURN:)186 b(cast_expr)237 b(return_expr;)95
1220 y(case)47 b(CAST_STMT_TEXT:)282 b(string)381 b(text<>;)95
1333 y(case)47 b(CAST_STMT_NULL:)282 b(void;)95 1446
y(case)47 b(CAST_STMT_EMPTY:)234 b(void;)95 1559 y(case)47
b(CAST_STMT_TRY:)330 b(cast_try)285 b(try_block;)95 1672
y(case)47 b(CAST_STMT_THROW:)234 b(cast_expr)j(throw_expr;)95
1785 y(case)47 b(CAST_STMT_DECL:)282 b(cast_scope)189
b(decl;)0 1898 y(};)0 2146 y FA(6.2.5)99 b(De\002nitions)25
b(and)h(Declarations)0 2320 y Fz(Function)c(De\002nitions)0
2495 y FC(A)j Fy(cast_func_def)c FC(represents)29 b(a)c(function)j
(de\002nition.)37 b(The)25 b Fy(type)f FC(slot)j(should)g(be)f(a)f
(function)j(type)f(that)f(is)g(usable)0 2608 y(in)d(a)h(de\002nition,)h
(and)f(the)f Fy(block)f FC(slot)i(is)f(the)h(function)i(body)-6
b(.)0 2814 y Fy(struct)46 b(cast_func_def)0 2927 y({)95
3040 y(cast_func_type)92 b(type;)95 3153 y(cast_block)284
b(block;)0 3266 y(};)0 3472 y(<type>)0 3585 y(<block>)0
3830 y Fz(V)-8 b(ariable)24 b(De\002nitions)0 4004 y
FC(A)e Fy(cast_var_def)e FC(represents)26 b(a)d(v)n(ariable)i
(de\002nition)h(for)d(a)h(function.)0 4211 y Fy(enum)47
b(cast_init_kind)0 4324 y({)95 4437 y(CAST_INIT_EXPR)331
b(=)47 b(1,)95 4550 y(CAST_INIT_AGGREGATE)91 b(=)47 b(2,)95
4663 y(CAST_INIT_CONSTRUCT)91 b(=)47 b(3)95 b(/*)48 b(C++)e(Only)h(*/)0
4775 y(};)0 4888 y(union)f(cast_init_u)0 5001 y(switch)g
(\(cast_init_kind)e(kind\))0 5114 y({)95 5227 y(case)j(CAST_INIT_EXPR:)
330 b(cast_expr)379 b(expr;)95 5340 y(case)47 b(CAST_INIT_AGGREGATE:)90
b(cast_init_array)h(subs;)p eop
%%Page: 96 96
96 95 bop 0 -165 a FC(96)954 b Fx(CHAPTER)20 b(6.)51
b(C)22 b(ABSTRA)l(CT)e(SYNT)-8 b(AX)20 b(TREE)h(\(CAST\))h(REPRESENT)-8
b(A)e(TION)95 91 y Fy(case)47 b(CAST_INIT_CONSTRUCT:)90
b(cast_expr_array)h(exprs;)0 204 y(};)0 317 y(struct)46
b(cast_var_def)0 430 y({)95 543 y(cast_type)93 b(type;)95
769 y(/*)48 b(Optional)d(-)j(if)f(present,)e(specifies)h(the)h
(variable's)e(initializer.)92 b(*/)95 882 y(cast_init)h(init;)0
995 y(};)0 1251 y Fz(Include)23 b(Dir)n(ecti)o(v)o(es)0
1429 y FC(A)f Fy(cast_include)e FC(represents)26 b(an)e(include)h
(directi)n(v)o(e)g(for)f(the)g(C)e(preprocessor)-5 b(.)0
1652 y Fy(struct)46 b(cast_include)0 1764 y({)95 1877
y(string)190 b(filename<>;)95 1990 y(bool)286 b(system_only;)0
2103 y(};)0 2324 y(<if)47 b(system_only>)95 2437 y(#include)f
(<<filename>>)0 2550 y(<else>)95 2663 y(#include)g("<filename>")0
2919 y Fz(Using)23 b(Dir)n(ecti)o(v)o(es)0 3097 y FC(A)f
Fy(cast_using_kind)d FC(indicates)26 b(the)e(type)g(of)f(scope)i(that)f
(is)g(to)f(be)h(`used'.)0 3320 y Fy(/*)47 b(C++)g(Only)g(*/)0
3433 y(enum)g(cast_using_kind)0 3546 y({)95 3659 y(CAST_USING_NAME)330
b(=)48 b(1,)95 3772 y(CAST_USING_TYPENAME)138 b(=)48
b(2,)95 3885 y(CAST_USING_NAMESPACE)90 b(=)48 b(3)0 3998
y(};)0 4219 y(using)e(<cast_using_kind>)0 4475 y Fz(Dir)n(ect)24
b(Code)0 4653 y FC(A)h Fy(cast_direct)e FC(is)j(used)h(to)f(inject)i
(an)o(y)e(string)i(into)f(the)f(current)i(scope.)38 b(F)o(or)26
b(e)o(xample,)h(one)g(can)g(insert)g(comments)0 4766
y(or)c(preprocessor)28 b(directi)n(v)o(es)d(using)g(this)f(structure.)0
4989 y Fy(struct)46 b(cast_direct)0 5102 y({)95 5214
y(string)190 b(code_string<>;)0 5327 y(};)p eop
%%Page: 97 97
97 96 bop 0 -165 a Fx(6.2.)51 b(CAST)21 b(D)l(A)-10 b(T)i(A)21
b(STR)l(UCTURES)2533 b FC(97)0 91 y Fz(Union)22 b(of)i(All)f
(De\002nitions)0 267 y FC(The)g Fy(cast_def)e FC(structure)k(brings)g
(e)n(v)o(erything)h(together)-5 b(.)0 485 y Fy(enum)47
b(cast_storage_class)0 598 y({)95 711 y(CAST_SC_NONE)284
b(=)47 b(0,)95 824 y(CAST_SC_AUTO)284 b(=)47 b(1,)95
937 y(CAST_SC_STATIC)188 b(=)47 b(2,)95 1049 y(CAST_SC_EXTERN)188
b(=)47 b(3,)95 1162 y(CAST_SC_REGISTER)92 b(=)47 b(4,)95
1275 y(CAST_SC_MUTABLE)140 b(=)47 b(5)95 b(/*)47 b(C++)g(Only)g(*/)0
1388 y(};)0 1501 y(enum)g(cast_def_kind)0 1614 y({)95
1727 y(CAST_TYPEDEF)236 b(=)47 b(0x00000001,)95 1840
y(...)95 1953 y(CAST_FRIEND)284 b(=)47 b(0x00001000)141
b(/*)47 b(C++)g(Only)f(*/)0 2066 y(};)0 2179 y(union)g(cast_def_u)0
2291 y(switch)g(\(cast_def_kind)e(kind\))0 2404 y({)95
2517 y(case)j(CAST_TYPEDEF:)283 b(cast_type)427 b(typedef_type;)95
2630 y(case)47 b(CAST_TYPE:)427 b(cast_type)g(type;)95
2743 y(case)47 b(CAST_FUNC_DECL:)187 b(cast_func_type)g(func_type;)95
2856 y(case)47 b(CAST_FUNC_DEF:)235 b(cast_func_def)g(func_def;)95
2969 y(case)47 b(CAST_VAR_DECL:)235 b(cast_type)427 b(var_type;)95
3082 y(case)47 b(CAST_VAR_DEF:)283 b(cast_var_def)g(var_def;)95
3195 y(case)47 b(CAST_DEFINE:)331 b(cast_expr)427 b(define_as;)95
3308 y(case)47 b(CAST_INCLUDE:)283 b(cast_include)g(include;)95
3421 y(case)47 b(CAST_DIRECT_CODE:)91 b(cast_direct)331
b(direct;)95 3533 y(case)47 b(CAST_NAMESPACE:)187 b(cast_scope)331
b(*new_namespace;)95 3646 y(case)47 b(CAST_USING:)379
b(cast_using_kind)139 b(using_scope;)95 3759 y(case)47
b(CAST_LINKAGE:)283 b(cast_scope)331 b(*linkage;)95 3872
y(case)47 b(CAST_FRIEND:)331 b(cast_type)427 b(friend_decl;)0
3985 y(};)0 4211 y(/*)47 b(C++)g(Only)g(*/)0 4324 y(enum)g
(cast_def_protection)42 b({)239 4437 y(CAST_PROT_NONE)330
b(=)47 b(0,)239 4550 y(CAST_PROT_PUBLIC)234 b(=)47 b(1,)239
4663 y(CAST_PROT_PROTECTED)90 b(=)47 b(2,)239 4775 y(CAST_PROT_PRIVATE)
186 b(=)47 b(3)0 4888 y(};)0 5114 y(struct)f(cast_def)0
5227 y({)95 5340 y(/*)i(C)f(identifier)e(of)i(type)g(\(or)g(whatever\))
e(to)i(be)g(declared/defined.)p eop
%%Page: 98 98
98 97 bop 0 -165 a FC(98)954 b Fx(CHAPTER)20 b(6.)51
b(C)22 b(ABSTRA)l(CT)e(SYNT)-8 b(AX)20 b(TREE)h(\(CAST\))h(REPRESENT)-8
b(A)e(TION)239 91 y Fy(Length)46 b(0)h(if)g(none.)94
b(*/)95 204 y(cast_scoped_name)187 b(name;)95 430 y(/*)48
b(Storage)d(class)i(for)g(the)g(declaration/definition.)89
b(*/)95 543 y(cast_storage_class)i(sc;)95 769 y(/*)48
b(Description)c(of)k(definition.)92 b(*/)95 882 y(cast_def_u)475
b(u;)95 1108 y(/*)48 b(The)f(data_channel)d(this)j(definition)e(is)i(a)
g(part)g(of)g(*/)95 1220 y(data_channel_index)91 b(channel;)95
1446 y(cast_def_protection)g(protection;)h(/*)47 b(C++)g(Only)g(*/)0
1559 y(};)0 1902 y Ft(6.3)119 b(The)30 b(CAST)h(Library)0
2125 y Fy(cast_new_*)300 2238 y FC(Man)o(y)23 b(constructor)k
(functions)f(are)e(a)n(v)n(ailable)i(so)d(one)h(does)h(not)f(ha)n(v)o
(e)g(to)f(b)n(uild)i(the)f(structures)i(manually)-6 b(.)0
2459 y Fy(int)47 b(cast_find_def\(cast_scope)41 b(**scope,)50
b(const)c(cast_scoped_name)d(name,)51 b(int)c(kind\))300
2572 y FC(Locates)29 b(a)f(de\002nition)i(with)e Fy(name)f
FC(in)h Fy(scope)p FC(.)41 b(The)28 b(return)h(v)n(alue)h(is)e(either)h
(-1,)g(if)f(it)g(w)o(as)g(not)h(found,)i(or)d(the)300
2684 y(inde)o(x)g(of)f(the)h(de\002nition)h(in)e Fy(scope)p
FC(.)37 b(If)27 b(the)h(name)f(is)g(scoped)i(then)f(it)f(will)g(try)g
(to)g(descend)i(do)n(wn)e(into)h(child)300 2797 y(scopes,)23
b(and)f(then)g(set)f Fy(scope)e FC(to)i(the)h(child)g(scope)g(where)g
(the)f(de\002nition)i(w)o(as)e(located.)30 b(The)20 b
Fy(kind)g FC(parameter)300 2910 y(is)j(a)g(bitmask)i(that)f(causes)h
(the)f(function)i(to)d(only)i(match)e(on)h(de\002nition)h(kinds)g(that)
f(are)g(set)g(in)f(the)h(mask.)0 3109 y Fy(int)47 b
(cast_find_def_pos\(cast_s)o(cope)41 b(**scope,)50 b(int)d(scope_pos,)i
(const)d(cast_scoped_name)0 3222 y(name,)51 b(int)46
b(kind\))300 3335 y FC(Similar)32 b(to)g Fy(cast_find_def)c
FC(e)o(xcept)33 b(it)f(allo)n(ws)g(one)g(to)g(start)h(searching)i(at)d
(a)f(speci\002c)i(position.)56 b(This)32 b(is)300 3448
y(useful)37 b(in)e(case)h(a)e(de\002nition)j(match,)i(b)n(ut)c(it)g(w)o
(as)g(not)h(the)f(correct)i(one.)64 b(F)o(or)35 b(e)o(xample,)j(a)d
(forw)o(ard)h(class)300 3560 y(declaration)30 b(w)o(ould)d(match,)h(b)n
(ut)f(if)f(one)i(were)e(searching)k(for)c(the)h(actual)h(class)g
(de\002nition,)h(one)e(w)o(ould)h(ha)n(v)o(e)300 3673
y(to)23 b(do)h(another)h Fy(cast_find_def)p FC(.)0 3894
y Fy(cast_type)45 b(cast_find_typedef_type\(ca)o(st_s)o(cope)c(*scope,)
50 b(cast_type)45 b(name_ctype\))300 4007 y FC(Returns)25
b(the)e(real)h(de\002nition)i(of)d(a)g Fy(typedef)p FC(.)0
4227 y Fy(cast_enum_type)44 b(*cast_find_enum_type\(cas)o(t_sc)o(ope)d
(*scope,)50 b(cast_type)45 b(ctype\))300 4340 y FC(Returns)25
b(the)e Fy(cast_enum_type)c FC(that)24 b(w)o(as)g(speci\002ed)g(with)g
(the)g(passed)h(in)e(enumeration)j(named)e(type.)0 4560
y Fy(cast_aggregate_type)43 b(*cast_find_struct_type\()o(cas)o(t_sc)o
(ope)e(*scope,)50 b(cast_type)45 b(ctype\))300 4673 y
FC(Returns)25 b(the)e Fy(cast_aggregate_type)18 b FC(that)24
b(w)o(as)f(speci\002ed)i(with)e(the)h(passed)h(in)f(struct)h(named)f
(type.)0 4894 y Fy(cast_aggregate_type)43 b(*cast_find_union_type\(c)o
(ast)o(_sco)o(pe)f(*scope,)49 b(cast_type)d(ctype\))300
5007 y FC(Returns)25 b(the)e Fy(cast_aggregate_type)18
b FC(that)24 b(w)o(as)f(speci\002ed)i(with)e(the)h(passed)h(in)f(union)
h(named)f(type.)0 5227 y Fy(cast_aggregate_type)43 b
(*cast_find_class_type\(c)o(ast)o(_sco)o(pe)f(*scope,)49
b(cast_type)d(ctype\))300 5340 y FC(Returns)25 b(the)e
Fy(cast_aggregate_type)18 b FC(that)24 b(w)o(as)f(speci\002ed)i(with)e
(the)h(passed)h(in)f(class)g(named)g(type.)p eop
%%Page: 99 99
99 98 bop 0 -165 a Fx(6.3.)51 b(THE)22 b(CAST)f(LIBRAR)-6
b(Y)2772 b FC(99)0 91 y Fy(void)47 b(cast_block_absorb_stmt\()o(cast)o
(_bl)o(ock)41 b(*b,)51 b(cast_stmt)46 b(st\))300 204
y FC(Adds)25 b(the)g(statement)i(to)e(the)g Fy(cast_block)p
FC(.)30 b(If)25 b(the)g(statement)i(is)d(also)i(a)f Fy(cast_block)c
FC(then)26 b(it)f(will)f(transfer)300 317 y(an)o(y)g(statements)h(and)f
(declarations)j(to)d(the)f(parent)i(block.)0 505 y Fy(int)47
b(cast_find_label\(cast_blo)o(ck)42 b(*block,)49 b(const)e(char)f
(*label\))300 618 y FC(Returns)25 b(the)e(inde)o(x)i(of)e(the)h
Fy(cast_label)c FC(in)j(the)h(block)h(that)f(matches)h(gi)n(v)o(en)f
(label)0 807 y Fy(extern)46 b(cast_expr_array)e(null_expr_array)300
919 y FC(A)22 b(global)j(e)o(xpression)i(array)d(a)n(v)n(ailable)i(for)
e(initializing)i(to)e(an)f(empty)h(e)o(xpression)i(array)-6
b(.)0 1108 y Fy(cast_expr_array)44 b(cast_set_expr_array\(cas)o(t_ex)o
(pr_)o(arra)o(y)e(*array,)50 b(cast_expr)45 b(expr,)51
b(...\))300 1221 y FC(Set,)23 b(or)g(create)i(if)e Fy(array)e
FC(is)j(null,)g(the)g(v)n(alues)g(in)g(an)f(e)o(xpression)j(array)-6
b(.)0 1409 y Fy(extern)46 b(cast_init_array)e(null_init_array)300
1522 y FC(Similar)23 b(to)h(null)p 829 1522 28 4 v 34
w(e)o(xpr)p 1022 1522 V 34 w(array)-6 b(,)24 b(e)o(xcept)h(for)f
Fy(cast_init)p FC(s.)0 1710 y Fy(cast_init_array)44 b
(cast_set_init_array\(cas)o(t_in)o(it_)o(arra)o(y)e(*array,)50
b(cast_init,)f(...\))300 1823 y FC(Similar)23 b(to)h(the)g
Fy(cast_expr)c FC(v)o(ersion.)0 2011 y Fy(extern)46 b
(cast_template_arg_array)c(null_template_arg_array)300
2124 y FC(Similar)32 b(to)g(null)p 846 2124 V 34 w(e)o(xpr)p
1039 2124 V 34 w(array)-6 b(,)35 b(e)o(xcept)e(for)g(template)g(ar)n
(guments.)57 b(This)32 b(is)g(handy)h(for)g(passing)h(to)e(a)f
Fy(cast_)300 2237 y(add_scope_name)19 b FC(since)24 b(it)g(requires)h
(a)e(template)i(ar)n(gument)h(array)-6 b(.)0 2404 y Fy
(cast_template_arg_array)41 b(cast_set_template_arg_arra)o(y\(ca)o(st_)
o(temp)o(late)o(_ar)o(g_ar)o(ray)0 2517 y(*array,)50
b(cast_template_arg)43 b(template_arg,)48 b(...\))300
2630 y FC(Similar)23 b(to)h(the)g Fy(cast_expr)c FC(v)o(ersion.)0
2818 y Fy(cast_check\(cast_scope)42 b(*scope\))300 2931
y FC(Check)28 b(the)h(data)f(structures)j(to)d(ensure)h(the)o(y)f(ha)n
(v)o(e)h(v)n(alid)f(data.)43 b(This)28 b(is)f(done)i(before)i
Fv(C)t(A)t(S)t(T)g FC(is)d(written)h(to)f(a)300 3044
y(\002le)23 b(or)g(after)i(it)e(has)h(been)g(read)g(from)g(a)f(\002le,)
g(usually)i(as)e(part)h(of)g Fy(pres_c_check)p FC(.)0
3232 y Fy(int)47 b(cast_expr_const\(cast_exp)o(r)42 b(expr\))300
3345 y FC(Returns)25 b(true)f(if)f Fy(expr)f FC(is)h(a)g(constant)j(e)o
(xpression,)g(v)o(ery)e(helpful)h(when)e(trying)i(to)f(do)f
(optimizations.)0 3533 y Fy(cast_expr)45 b(aoi_const_to_cast_expr\(ao)o
(i_co)o(nst)c(c\))300 3646 y FC(Con)l(v)o(erts)25 b(an)f
Fy(aoi_const)c FC(to)j(a)g Fy(cast_expr)p FC(.)0 3834
y Fy(int)47 b(cast_cmp_type\(cast_type)41 b(a,)52 b(cast_type)45
b(b\))300 3947 y FC(Returns)27 b(zero)g(if)f(the)h(tw)o(o)f(types)h
(are)g(the)f(same,)h(less)g(than)g(zero)g(if)f(type)h
Fy(a)e FC(is)h(\223less)h(than\224)h Fy(b)p FC(,)d(or)i(greater)g(than)
300 4060 y(zero)32 b(if)f(type)h Fy(a)e FC(is)h(\223greater)i(than\224)
f Fy(b)p FC(.)50 b(The)31 b(e)o(xact)h(notion)g(of)f(lesser)i(and)e
(greater)i(are)e(not)h(e)o(xactly)g(clear)g(in)300 4173
y(all)i(cases)g(\(e.g.,)i(if)d(the)h(types)h(are)e(completely)j(dif)n
(ferent,)i(the)c(scalar)g(dif)n(ference)i(between)f(the)f(tw)o(o)f
Fy(kind)300 4286 y FC(enumerations)e(is)c(returned\).)43
b(F)o(or)27 b(similar)h(\(read)h(\223same\224\))f(types,)h(a)f(more)f
(intelligent)k(\223dif)n(ference\224)f(can)e(be)300 4399
y(tak)o(en)k(\(e.g.,)g(tw)o(o)f Fy(CAST_TYPE_TYPENAME)p
FC(s)25 b(return)32 b(the)f(\223string)i(dif)n(ference\224,)i(similar)c
(to)g Fy(strcmp)p FC(,)f(of)h(the)300 4512 y(tw)o(o)23
b(typenames\).)0 4700 y Fy(int)47 b(cast_cmp_expr\(cast_expr)41
b(a,)52 b(cast_expr)45 b(b\))300 4813 y FC(Returns)26
b(zero)g(if)g(the)f(tw)o(o)g(e)o(xpressions)k(are)c(the)h(same,)f(or)h
(nonzero)h(based)g(on)e(a)g(similar)h(lesser/greater)j(rela-)300
4926 y(tionship)d(as)d Fy(cast_cmp_type)p FC(,)c(abo)o(v)o(e.)0
5114 y Fy(int)47 b(cast_cmp_init\(cast_init)41 b(a,)52
b(cast_init)45 b(b\))300 5227 y FC(Returns)29 b(zero)f(if)g(the)g(tw)o
(o)f(initializers)k(are)d(the)g(same,)h(or)e(nonzero)j(based)f(on)f(a)f
(similar)i(lesser/greater)i(rela-)300 5340 y(tionship)26
b(as)d Fy(cast_cmp_type)p FC(,)c(abo)o(v)o(e.)p eop
%%Page: 100 100
100 99 bop 0 -165 a FC(100)909 b Fx(CHAPTER)20 b(6.)51
b(C)22 b(ABSTRA)l(CT)e(SYNT)-8 b(AX)20 b(TREE)h(\(CAST\))h(REPRESENT)-8
b(A)e(TION)0 91 y Fy(cast_w_*\(\))300 204 y FC(Uses)23
b(the)h Fy(w_printf)d FC(functions)26 b(to)d(output)i(the)f(v)n(arious)
j Fv(C)t(A)t(S)t(T)g FC(structures.)0 497 y Ft(6.4)119
b(Summary)30 b(and)g(Comments)2 704 y Fv(C)t(A)t(S)t(T)i
FC(w)o(as)c(originally)k(restricted)f(to)d(e)o(xactly)i(the)f(syntax)i
(of)d(C,)g(with)g(minor)h(accommodations)j(for)d(comments)h(and)0
817 y(preprocessor)41 b(directi)n(v)o(es.)70 b(Ov)o(er)37
b(time,)42 b Fv(C)t(A)t(S)t(T)e FC(w)o(as)c(e)o(xtended)j(to)e
(describe)i(C++,)g(and)f(w)o(as)e(also)i(enhanced)h(with)0
930 y(certain)22 b(pseudo-syntactic)k(features)d(such)e(as)g(implicit)h
(function)h(ar)n(guments)g(\()p Fy(CAST_PARAM_IMPLICIT)p
FC(\),)16 b(types)21 b(used)0 1043 y(as)i(e)o(xpressions)j(\()p
Fy(CAST_EXPR_TYPE)p FC(,)18 b(so)23 b(that)g(types)h(can)g(be)f(passed)
h(as)f(ar)n(guments)i(to)e(macros\),)h(and)f(label)h(reference)0
1155 y(counts)i(\(so)f(that)f(unused)i(labels)g(can)f(be)f(silently)i
(dropped)h(during)f(output\).)33 b(These)24 b(e)o(xtra-syntactic)29
b(features)d(mak)o(e)e(it)0 1268 y(signi\002cantly)i(easier)f(to)e
(create)k Fv(P)t(R)t(E)t(S)p 1234 1268 28 4 v 40 w(C)d
FC(descriptions)j(of)d(stubs.)143 1381 y Fv(C)t(A)t(S)t(T)34
b FC(allo)n(ws)c(Flick)h(to)f(create)i(and)f(modify)g(C/C++)f(code)h
(at)f(a)g(\002ne-grain)j(le)n(v)o(el,)f(before)g(it)e(is)g(output.)51
b(This)30 b(is)0 1494 y(an)c(important)i(feature)g(that)f(allo)n(ws)f
(Flick)h(to)f(create)h(code)g(in)f(w)o(ays)h(that)f(w)o(ould)h(be)f
(dif)n(\002cult)i(to)e(accomplish)i(through)0 1607 y(other)e(means)g
(such)g(as)f(template)i(instantiation.)38 b(Unfortunately)-6
b(,)31 b Fv(C)t(A)t(S)t(T)r FC(')-5 b(s)27 b(\002ne-grained)g(nature)g
(also)f(mak)o(es)i Fv(C)t(A)t(S)t(T)g FC(an)0 1720 y(incon)l(v)o
(enient)j(data)e(structure)g(for)f(some)g(tasks,)h(such)f(as)g
(instantiating)j(big)d(blocks)h(of)f(mostly)g(predetermined)j(code.)0
1833 y(F)o(or)23 b(code-b)n(uilding)28 b(tasks)d(that)f(are)g(not)g
(suited)h(to)h Fv(C)t(A)t(S)t(T)r FC(,)e(Flick)g(uses)h(a)e(separate)j
(intermediate)g(representation)i(called)2 1946 y Fv(S)t(C)t(M)t(L)r
FC(,)c(described)j(in)c(Chapter)i(8.)141 2059 y(A)30
b(second)i(problem)g(inherent)g(to)h Fv(C)t(A)t(S)t(T)g
FC(it)e(that)g(\227)e(by)i(design)h(\227)e(it)g(is)h(tied)g(to)f(C)g
(and)h(C++.)51 b Fv(C)t(A)t(S)t(T)33 b FC(originally)0
2172 y(supported)39 b(only)e(C)f(and)h(w)o(as)f(later)h(e)o(xtended)h
(for)f(C++,)i(b)n(ut)d(it)h(w)o(ould)g(lik)o(ely)g(be)g(infeasible)i
(to)d(e)o(xtend)k Fv(C)t(A)t(S)t(T)f FC(to)0 2285 y(languages)32
b(that)d(are)h(v)o(ery)f(unlik)o(e)i(C.)44 b(If)29 b(Flick)g(were)g(e)o
(xtended)i(to)e(such)h(languages,)j(it)28 b(w)o(ould)i(be)f(useful)i
(to)e(replace)2 2398 y Fv(C)t(A)t(S)t(T)22 b FC(with)e(a)f(more)g
(abstract)i(code)g(description)h(language,)h(designed)e(around)g(the)f
(logical)h(or)n(ganization)i(of)c(code)i(\(e.g.,)0 2510
y(\003o)n(w)i(control\))k(rather)f(than)g(around)g(an)o(y)f(speci\002c)
h(language)h(syntax.)34 b(Flick)24 b(w)o(ould)i(then)f(map)g(this)g
(abstract)i(language)0 2623 y(onto)d(concrete)i(programming)g
(languages.)31 b(This)23 b(mapping)i(could)g(e)n(v)o(en)f(be)f(user)n
(-customizable.)p eop
%%Page: 101 101
101 100 bop 0 717 a Fw(Chapter)44 b(7)0 1134 y FB(Pr)l(esentation)52
b(in)g(C/C++)g(\(PRES)p 2637 1134 62 4 v 74 w(C\))0 1384
y(Repr)l(esentation)0 1831 y FC(A)23 b Fv(P)t(R)t(E)t(S)p
281 1831 28 4 v 39 w(C)g FC(\002le)f(contains)i(information)g
(describing)h(the)d(user)n(-visible)k(beha)n(vior)e(of)e(a)f(set)i(of)e
(stubs)i(to)f(be)g(generated)j(and)0 1944 y(an)o(ything)h(else)f
(pertinent)h(to)e(the)g(presentation.)34 b(These)24 b(\002les)g(are)g
(used)h(by)f(the)g(presentation)k(generators)e(to)e(communi-)0
2057 y(cate)g(their)g(intent)g(to)f(the)g(back)h(ends.)30
b(This)22 b(mak)o(es)i(it)f(possible)i(to)e(separate)i(the)f
(presentation,)i(the)d(C)f(declarations)27 b(and)0 2170
y(de\002nitions,)e(from)f(the)g(implementation.)141 2286
y(The)i(\002rst)f(fe)n(w)g(sections)j(in)e(this)g(chapter)i(describe)f
(the)g(o)o(v)o(erall)f(concepts)i(embodied)g(in)e(the)i
Fv(P)t(R)t(E)t(S)p 3387 2286 V 39 w(C)f FC(format;)h(the)0
2398 y(last)c(section,)h(Section)f(7.2,)g(describes)i(the)d(actual)k
Fv(X)t(D)t(R)e FC(data)f(structures)i(representing)j
Fv(P)t(R)t(E)t(S)p 3047 2398 V 40 w(C)c FC(\002les.)0
2707 y Ft(7.1)119 b(PRES)p 581 2707 36 4 v 44 w(C)30
b(Ov)o(er)o(view)0 2923 y FA(7.1.1)99 b(Stubs)0 3102
y FC(A)28 b Fv(P)t(R)t(E)t(S)p 286 3102 28 4 v 39 w(C)g
FC(\002le)f(contains)i(the)e(blueprints)j(for)d(a)f(set)h(of)g
Fu(stubs)p FC(.)40 b(Each)27 b(of)g(these)h(blueprints,)i(or)d
Fu(stub)h(de\002nitions)p FC(,)i(com-)0 3215 y(pletely)24
b(de\002nes)f(one)f(stub)h(which)g(will)e(be)h(produced)j(when)d(the)j
Fv(P)t(R)t(E)t(S)p 2291 3215 V 39 w(C)e FC(\002le)f(is)g(run)g(through)
i(a)e(C)f(back)i(end.)29 b(A)21 b(stub)h(is)0 3328 y(a)g(C)f(function)j
(or)e(data)h(object)h(which,)f(when)f(compiled)i(and)e(link)o(ed)i
(into)f(a)f(C)f(program,)j(can)e(be)g(in)l(v)n(ok)o(ed)j(or)e
(otherwise)0 3441 y(utilized)k(by)d(that)h(program)h(as)f(de\002ned)g
(in)g(the)i Fv(P)t(R)t(E)t(S)p 1718 3441 V 39 w(C)f FC(\002le.)31
b(There)25 b(are)g(se)n(v)o(eral)h(dif)n(ferent)g(types)g(of)e(stubs)i
(that)f(can)g(be)0 3554 y(de\002ned)f(in)g(a)h Fv(P)t(R)t(E)t(S)p
641 3554 V 39 w(C)g FC(\002le)e(\(and)h(hence)h(produced)h(by)e(a)f
(back)h(end\).)0 3816 y Fz(Marshaling)g(and)f(Unmarshaling)g(Stubs)0
3995 y FC(These)35 b(stubs)g(are)g(able)g(to)g(marshal)g(and)g
(unmarshal)i(the)e(v)n(arious)h(data)f(types)h(de\002ned)f(by)g(the)f
(presentation.)66 b(The)2 4108 y Fv(P)t(R)t(E)t(S)p 194
4108 V 39 w(C)25 b FC(\002le)e(actually)i(contains)g(only)g(stub)f
(\223templates\224)h(for)f(such)g(functions,)i(rather)e(than)g(the)g
(complete)h(stub)f(de\002ni-)0 4221 y(tion.)37 b(This)26
b(is)g(the)g(one)g(e)o(xception)j(to)d(our)g(stub)h(de\002nition)h(abo)
o(v)o(e.)37 b(The)25 b(back)i(end)g(is)e(responsible)30
b(for)c(\223specializing\224)0 4334 y(the)e(stub)h(for)f(a)f
(particular)j(parameter)g(direction)g(\(and)f(perhaps)h(other)e
(aspects\),)i(based)f(on)f(ho)n(w)f(the)h(stub)h(is)f(used.)30
b(If)24 b(a)0 4447 y(stub)g(is)f(used)h(in)g(multiple)g(w)o(ays,)g
(multiple)g(v)o(ersions)h(of)f(the)f(stub)i(will)e(appear)h(in)g(the)f
(generated)j(code.)k(F)o(or)22 b(stubs)j(that)0 4560
y(are)i(not)h(used,)h(no)e(code)h(is)f(generated.)43
b(Because)28 b(of)f(Flick')-5 b(s)28 b(aggressi)n(v)o(e)i(inlining)f
(of)e(the)h(marshaling/unmarshalin)q(g)0 4673 y(code,)c(most)g(of)f
(these)i(stubs)f(are)g(rarely)h(produced.)0 4935 y Fz(Client)e(Stubs)0
5114 y FC(A)29 b(client)j(stub)f(is)g(a)f(C)f(function)k(that)e(can)f
(be)h(called)h(from)e(an)o(ywhere)i(in)e(the)h(program)h(it)e(is)g
(link)o(ed)i(with.)50 b(A)29 b(client)0 5227 y(stub)j(function)h
(packages)g(up)e(a)g(request)h(message,)i(sends)e(it)f(to)g(a)f(serv)o
(er)l(,)k(and)e(optionally)i(w)o(aits)d(for)l(,)i(recei)n(v)o(es,)h
(and)0 5340 y(unpacks)f(a)d(reply)i(message)g(from)e(that)i(serv)o(er)
-5 b(.)51 b(The)30 b(C)g(function')-5 b(s)33 b(parameters)g(and)e
(return)h(v)n(alue)g(may)e(be)h(used)g(to)1882 5568 y(101)p
eop
%%Page: 102 102
102 101 bop 0 -165 a FC(102)969 b Fx(CHAPTER)20 b(7.)51
b(PRESENT)-8 b(A)e(TION)18 b(IN)23 b(C/C++)g(\(PRES)p
2986 -165 28 4 v 31 w(C\))g(REPRESENT)-8 b(A)e(TION)0
91 y FC(pass)24 b(data)h(to)f(and)g(from)f(the)i(serv)o(er)l(,)f(as)g
(well)g(as)f(to)h(specify)h(the)f(tar)n(get)i(of)d(the)k
Fv(R)t(P)t(C)e FC(\(the)g(object)g(to)f(be)f(in)l(v)n(ok)o(ed\))k(and)d
(to)0 204 y(return)k(error)g(status.)40 b(Exactly)28
b(ho)n(w)e(these)i(C)e(function)j(parameters)g(are)e(used)h(is)f
(entirely)h(de\002ned)g(by)f(the)g(client)h(stub)0 317
y(de\002nition;)g(there)d(are)g(no)g(\002x)o(ed)g(rules)g(that)h(must)f
(apply)h(to)f(all)f(stubs,)i(such)g(as)f(the)g(tar)n(get)h(object)h
(being)f(speci\002ed)g(in)f(a)0 430 y(particular)i(parameter)l(,)g(or)e
(the)g(return)h(v)n(alue)f(being)h(used)g(to)e(return)i(an)f(error)h
(status)g(code.)33 b(The)24 b(name)h(of)f(the)h(C)f(client)0
543 y(stub)e(function)i(is)e(also)g(de\002ned)g(in)g(the)i
Fv(P)t(R)t(E)t(S)p 1451 543 V 39 w(C)f FC(\002le;)f(although)i(it)d(is)
g(usually)j(based)f(on)e(the)h(name)g(of)f(an)j Fv(R)t(P)t(C)g
FC(operation)0 656 y(de\002ned)g(in)g(an)h Fv(I)t(D)t(L)i
FC(\002le,)22 b(it)i(doesn')n(t)h(ha)n(v)o(e)g(to)e(be.)141
769 y(A)i(client)i(stub,)g(when)f(in)l(v)n(ok)o(ed,)j(generally)f
(performs)f(the)g(follo)n(wing)g(basic)g(steps,)g(not)f(necessarily)j
(in)d(this)h(e)o(xact)0 882 y(order:)114 1084 y(1.)45
b(Determine)25 b(the)g(tar)n(get)g(of)f(the)j Fv(R)t(P)t(C)r
FC(:)j(e.g.,)24 b(e)o(xtract)h(the)f(tar)n(get)i(object)f(reference)i
(from)d(the)g(appropriate)j(C)c(func-)227 1197 y(tion)h(parameter)-5
b(.)114 1381 y(2.)45 b(Marshal)25 b(the)f(request)h(message)g(using)f
(the)g(appropriate)j(C)22 b(function)k(parameters.)114
1565 y(3.)45 b(Send)24 b(the)g(request)h(message)g(to)e(the)h(serv)o
(er)-5 b(.)114 1749 y(4.)45 b(A)-8 b(w)o(ait)23 b(and)h(recei)n(v)o(e)g
(the)g(serv)o(er')-5 b(s)25 b(reply)g(message.)114 1933
y(5.)45 b(Allocate)26 b(an)o(y)e(storage)h(needed)h(for)e(unmarshaled)j
(reply)e(data)g(and)g(not)f(already)i(allocated)g(by)e(the)h(caller)g
(of)f(the)227 2046 y(client)h(stub)l(.)114 2230 y(6.)45
b(Unmarshal)25 b(the)f(reply)g(message.)114 2414 y(7.)45
b(Deallocate)26 b(an)o(y)f(storage)h(allocated)h(by)d(the)h(caller)g
(to)f(pass)h(request)h(data,)f(which)g(the)f(caller)i(e)o(xpects)f(the)
g(client)227 2527 y(stub)g(to)e(deallocate)j(on)e(its)g(behalf.)114
2711 y(8.)45 b(Return)27 b(the)g(appropriate)j(return)e(v)n(alue,)f
(typically)i(a)d(status)i(code)f(or)f(a)h(piece)g(of)f(unmarshaled)k
(reply)d(message)227 2824 y(data.)141 3026 y(Of)22 b(course,)i(for)g
(one-w)o(ay)g(client)g(stubs,)g(steps)g(4\2266)f(are)g(not)h
(performed.)30 b(Steps)23 b(5)g(and)g(6)g(are)g(usually)i(combined)f
(in)0 3139 y(actual)h(stub)f(implementations)j(produced)f(by)e(typical)
h(PBEs)d(\(see)i(Chapter)g(12)g(for)g(more)f(information\).)0
3383 y Fz(Ser)o(v)o(er)h(Sk)o(eletons)0 3557 y FC(A)19
b(serv)o(er)h(sk)o(eleton)i(is)e(the)g(serv)o(er)n(-side)i(analog)g(to)
d(the)h(client)h(stub:)28 b(it)20 b(causes)h(request)h(messages)f
(recei)n(v)o(ed)g(from)f(clients)0 3670 y(to)h(be)f(con)l(v)o(erted)k
(into)d(calls)h(to)e(C)g(w)o(ork)h(functions)i(in)e(the)g(serv)o(er)g
(program.)29 b(Unlik)o(e)22 b(a)e(client)i(stub,)f(a)g(serv)o(er)g(sk)o
(eleton)i(is)0 3783 y(not)f(generally)j(a)c(C)g(function:)31
b(instead,)24 b(it)e(is)f(an)h(opaque)i(transport-speci\002c)j(C)21
b(object)i(\(e.g.,)f(a)f(global)j(v)n(ariable\))g(which)0
3896 y(the)g(serv)o(er)g(program)g(uses)g(as)g(a)e(\223handle\224)k
(when)d(re)o(gistering)j(itself)f(as)e(a)g(serv)o(er)-5
b(.)29 b(Once)24 b(the)f(serv)o(er)h(has)g(re)o(gistered)i(one)0
4009 y(or)c(more)h(object)h(with)e(the)j Fv(O)t(R)t(B)r
FC(,)d(it)g(can)h(be)o(gin)g(accepting)i(client)f(messages.)30
b(These)23 b(messages)h(are)e(then)i(dispatched)h(to)0
4122 y(the)f(appropriate)j(object)d(and)g(sk)o(eleton)i(to)e(be)f
(processed.)141 4235 y(Each)29 b(sk)o(eleton)i(acts)e(lik)o(e)g(a)f
(dispatcher)k(by)d(decoding)i(the)e(message)g(enough)i(to)e(\002gure)f
(out)h(which)h(serv)o(er)f(w)o(ork)0 4348 y(function)i(needs)e(to)g(be)
f(called)i(and)f(then)g(unmarshaling)j(the)d(rest)g(of)f(the)h
(message.)45 b(Serv)o(er)28 b(w)o(ork)h(functions)i(tend)e(to)0
4461 y(correspond)36 b(to)d(operations)i(in)e(interf)o(aces,)k(b)n(ut)d
(some)e(may)h(be)g(implicitly)h(de\002ned)g(by)f(other)g(de\002nitions)
i(from)e(the)2 4573 y Fv(I)t(D)t(L)r FC(.)c(Each)24 b(w)o(ork)f
(function)i(that)f(can)g(be)f(called)h(from)f(a)g(particular)j(serv)o
(er)e(sk)o(eleton)i(can)d(ha)n(v)o(e)h(a)f(dif)n(ferent)i(C)d(function)
0 4686 y(signature,)37 b(and)c(can)g(use)g(its)g(parameters)h(and)g
(return)f(v)n(alue)h(in)e(a)h(dif)n(ferent)h(w)o(ay:)47
b(a)32 b(serv)o(er)i(sk)o(eleton)h(de\002nition)f(in)0
4799 y(a)d Fv(P)t(R)t(E)t(S)p 263 4799 V 39 w(C)f FC(\002le)f(contains)
i(a)e(separate)i(function)g(parameter/return)j(v)n(alue)29
b(mapping)i(description)h(for)e(each)f(supported)0 4912
y(serv)o(er)24 b(w)o(ork)g(function.)141 5025 y(When)31
b(a)g(request)h(message)g(is)f(recei)n(v)o(ed)h(from)f(a)f(client,)k
(the)d(serv)o(er)h(sk)o(eleton)h(generally)g(causes)g(the)e(follo)n
(wing)0 5138 y(operations)26 b(to)e(be)f(performed,)j(not)d
(necessarily)k(in)d(this)g(e)o(xact)g(order:)114 5340
y(1.)45 b(Determine)25 b(which)f(serv)o(er)g(w)o(ork)g(function)h(is)f
(to)f(be)h(called,)g(based)h(on)f(the)g(contents)h(of)f(the)g(request)h
(message.)p eop
%%Page: 103 103
103 102 bop 0 -165 a Fx(7.1.)51 b(PRES)p 411 -165 28
4 v 31 w(C)23 b(O)-5 b(VER)e(VIEW)2768 b FC(103)114 91
y(2.)45 b(Allocate)22 b(an)o(y)e(storage)i(needed)f(to)f(hold)h
(unmarshaled)i(request)f(message)f(data)g(to)f(be)g(passed)i(to)e(the)g
(serv)o(er)h(w)o(ork)227 204 y(function.)114 400 y(3.)45
b(Unmarshal)25 b(the)f(request)h(message.)114 595 y(4.)45
b(Determine)24 b(which)f(speci\002c)h(serv)o(er)g(object)g(w)o(as)f(in)
l(v)n(ok)o(ed)i(by)e(the)h(client,)g(and)f(indicate)i(this)e(to)g(the)g
(serv)o(er)h(w)o(ork)227 708 y(function.)114 904 y(5.)45
b(Allocate)25 b(an)o(y)f(storage)h(for)f(reply)g(data)g(from)g(the)g
(serv)o(er)g(w)o(ork)g(function.)114 1099 y(6.)45 b(Call)24
b(the)f(serv)o(er)i(w)o(ork)e(function.)114 1295 y(7.)45
b(Marshal)32 b(the)g(reply)g(message.)52 b(The)31 b(marshaled)i(data)e
(may)g(include)i(data)f(structures)h(referred)g(to)e(by)g(pointer)227
1408 y(parameters)39 b(passed)e(to)g(the)f(w)o(ork)h(function,)k(which)
c(the)g(w)o(ork)f(function)i(\002lled)f(in)f(or)g(modi\002ed)h(during)h
(its)227 1521 y(e)o(x)o(ecution,)25 b(and/or)g(the)f(data)g(returned)i
(by)e(the)g(w)o(ork)f(function)j(in)d(its)h(return)h(v)n(alue.)114
1716 y(8.)45 b(Send)24 b(the)g(marshaled)h(reply)g(message)f(back)h(to)
e(the)h(client.)114 1912 y(9.)45 b(Deallocate)36 b(an)o(y)e(storage)h
(used)f(to)g(hold)g(reply)h(message)g(data)f(before)h(being)g
(marshaled,)i(which)d(the)g(serv)o(er)227 2025 y(w)o(ork)25
b(function)i(e)o(xpects)f(the)f(sk)o(eleton)i(to)d(deallocate)j(on)e
(return.)33 b(This)25 b(storage)h(could)g(ha)n(v)o(e)f(been)g
(allocated)i(in)227 2138 y(step)d(5)g(abo)o(v)o(e,)f(or)h(by)g(the)f
(serv)o(er)i(w)o(ork)e(function)j(itself.)68 2333 y(10.)46
b(Deallocate)30 b(an)o(y)e(storage)i(allocated)g(abo)o(v)o(e)e(to)g
(hold)h(unmarshaled)i(request)e(message)g(data,)h(which)e(the)g(serv)o
(er)227 2446 y(w)o(ork)f(function)i(e)o(xpects)f(the)f(sk)o(eleton)i
(to)d(deallocate)k(automatically)f(on)e(return)h(\(i.e.,)f(storage)h
(that)f(the)g(serv)o(er)227 2559 y(w)o(ork)d(function)i(doesn')n(t)f
(\223tak)o(e)g(control)g(of)5 b(\224)24 b(and)g(deallocate)i(itself)f
(when)f(\002nished)g(with)g(it\).)68 2754 y(11.)46 b(Return)24
b(to)g(the)i Fv(O)t(R)t(B)e FC(so)g(that)g(it)f(can)h(process)i
(subsequent)g(messages.)141 2977 y(Of)e(course,)i(for)f(one-w)o(ay)j
Fv(R)t(P)t(C)f FC(requests,)g(steps)f(7\2269)f(are)g(not)g(performed.)
34 b(Steps)25 b(2)f(and)i(3)e(are)h(usually)h(combined)0
3090 y(in)i(actual)i(serv)o(er)f(sk)o(eletons)i(produced)f(by)f
(typical)h(PBEs.)41 b(Steps)28 b(7)g(and)h(9)f(may)g(also)h(be)f
(combined)i(in)e(some)g(cases.)0 3203 y(See)23 b(Chapter)i(12)e(for)h
(more)f(information)j(about)f(PBE)d(implementation.)0
3460 y Fz(Client)h(Sk)o(eletons)0 3638 y FC(Used)36 b(in)g(clients)i
(that)f(use)g(an)f(e)n(v)o(ent-based)j(programming)g(model.)67
b(Not)36 b(all)g(PBEs)f(or)h(transport)j(protocols)f(may)0
3751 y(support)25 b(client)g(sk)o(eletons.)141 3866 y(A)j(client)j(sk)o
(eleton)g(is)f(the)f(client-side)j(equi)n(v)n(alent)g(of)d(the)h(serv)o
(er)g(sk)o(eleton.)48 b(Rather)30 b(than)g(dispatching)j(requests)0
3979 y(to)d(appropriate)j(serv)o(er)d(w)o(ork)g(functions,)k(a)29
b(client)i(sk)o(eleton)i(dispatches)f(reply)f(messages)h(to)d
(appropriate)k(handlers,)0 4092 y(or)26 b(client)i(w)o(ork)f
(functions.)40 b(It)27 b(is)f(responsible)k(for)d(decoding)i(the)d
(reply)i(message)g(enough)g(to)f(\002gure)f(out)h(with)g(which)0
4205 y(client)g(request)h(it)e(is)g(associated,)k(and)d(calling)g(the)g
(reply)g(handler)h(with)e(an)o(y)h(information)h(the)f(client)g(sa)n(v)
o(ed)h(when)e(the)0 4318 y(request)f(w)o(as)e(made.)141
4433 y(As)36 b(on)h(the)h(serv)o(er)g(side,)i(a)d(\223handle\224)i(or)e
(pseudo-object)k(reference)f(is)d(used)g(to)g(identify)i(the)f(client)g
(sk)o(eleton)0 4546 y(e)o(xpecting)25 b(a)e(reply)h(message)g(for)f
(the)g(original)i(request.)31 b(The)22 b(handle)j(is)e(passed)h(to)f
(the)g(serv)o(er)l(,)h(and)g(the)f(reply)h(is)f(much)0
4659 y(lik)o(e)h(a)f(one-w)o(ay)i(request)g(to)f(the)g(pseudo-object)j
(client.)141 4773 y(Unlik)o(e)e(the)f(serv)o(er)g(sk)o(eleton,)i(ho)n
(we)n(v)o(er)l(,)e(the)g(client)h(sk)o(eleton)h(does)f(not)f(bother)h
(to)f(unmarshal)h(the)f(reply)h(message)0 4886 y(\(be)o(yond)h(the)e
(point)h(that)g(it)f(needs)h(to)f(determine)i(ho)n(w)e(to)g(dispatch)i
(it\),)e(nor)g(does)h(it)f(need)h(to)f(w)o(orry)h(about)g(marshaling)0
4999 y(data)37 b(returned)i(by)e(the)g(reply)h(handler)h(\(there)f(is)e
(no)h(reply)h(to)e(the)i(reply)f(inherent)i(in)e(the)g(model,)j
(although)f(such)0 5112 y(functionality)27 b(is)d(certainly)i(possible)
f(within)f(the)g(model\).)141 5227 y(When)36 b(a)g(reply)h(message)g
(is)f(recei)n(v)o(ed)i(from)e(a)f(serv)o(er)l(,)40 b(the)d(client)g(sk)
o(eleton)h(generally)h(causes)e(the)g(follo)n(wing)0
5340 y(operations)26 b(to)e(be)f(performed,)j(not)d(necessarily)k(in)d
(this)g(e)o(xact)g(order:)p eop
%%Page: 104 104
104 103 bop 0 -165 a FC(104)969 b Fx(CHAPTER)20 b(7.)51
b(PRESENT)-8 b(A)e(TION)18 b(IN)23 b(C/C++)g(\(PRES)p
2986 -165 28 4 v 31 w(C\))g(REPRESENT)-8 b(A)e(TION)114
91 y FC(1.)45 b(Determine)33 b(which)f(client)i(w)o(ork)e(function)i
(\(reply)f(handler\))h(is)e(to)g(be)g(called,)j(based)e(on)f(the)g
(contents)i(of)e(the)227 204 y(reply)25 b(message.)114
396 y(2.)45 b(Determine)30 b(which)f(speci\002c)h(client)g
(pseudo-object)k(w)o(as)28 b(\223in)l(v)n(ok)o(ed\224)33
b(by)c(the)g(serv)o(er)l(,)i(and)f(indicate)h(this)e(to)g(the)227
508 y(reply)c(handler)-5 b(.)114 700 y(3.)45 b(Call)24
b(the)f(reply)i(handler)-5 b(.)114 891 y(4.)45 b(Return)24
b(to)g(the)i Fv(O)t(R)t(B)e FC(so)g(that)g(it)f(can)h(process)i
(subsequent)g(messages.)0 1142 y Fz(Send)c(and)g(Recei)o(v)o(e)j(Stubs)
0 1318 y FC(Used)c(in)g(clients)i(and)e(serv)o(ers)i(that)f(use)f(an)g
(e)n(v)o(ent-based)j(programming)f(model.)29 b(Not)20
b(all)i(PBEs)d(or)i(transport)j(protocols)0 1431 y(may)f(support)j
(send)e(and)g(recei)n(v)o(e)h(stubs.)141 1545 y(Send)g(stubs)h(are)g
(responsible)i(only)e(for)f(sending)i(a)e(message)h(to)f(either)i(the)e
(client)h(or)f(serv)o(er)-5 b(.)35 b(The)o(y)24 b(return)j(imme-)0
1658 y(diately)h(to)f(the)f(caller)l(,)j(re)o(gardless)f(of)e(whether)i
(a)e(reply)h(is)g(e)o(xpected)h(\(in)f(the)g(case)g(of)f(a)g(request)i
(to)f(the)g(serv)o(er\).)38 b(Note)0 1771 y(that)30 b(a)e(send)i(stub)f
(is)g(similar)h(to)f(a)f(one-w)o(ay)j(client)f(stub)f(in)g(that)h(the)f
(message)h(is)f(sent)g(and)h(control)h(returns)f(without)0
1884 y(w)o(aiting)22 b(for)f(a)f(reply)-6 b(.)29 b(Ho)n(we)n(v)o(er)l
(,)21 b(the)o(y)g(dif)n(ferent)i(from)e(each)h(other)f(in)g(three)h
(important)h(w)o(ays.)k(First,)21 b(a)g(send)h(stub)f(is)g(not)0
1997 y(responsible)k(for)c(marshaling)j(an)o(y)e(data;)h(it)e(requires)
i(a)e(pre-marshaled)k(message)d(as)g(a)f(parameter)-5
b(.)29 b(Second,)23 b(a)e(one-w)o(ay)0 2110 y(client)j(stub)f(is)f
(used)h(when)g(no)f(reply)i(at)e(all)h(is)f(e)o(xpected)i(for)f(the)h
Fv(R)t(P)t(C)h FC(in)l(v)n(ocation;)i(a)22 b(send)h(stub)g(is)f(used)h
(e)n(v)o(en)g(if)f(a)g(reply)0 2223 y(is)27 b(e)o(xpected,)i(b)n(ut)e
(its)g(receipt)h(will)e(be)h(deferred)i(until)e(later)h(in)f(the)g
(client)g(program')-5 b(s)29 b(e)o(x)o(ecution.)40 b(Third,)28
b(a)e(send)h(stub)0 2335 y(is)e(not)g(limited)g(to)g(the)g(client;)i
(the)o(y)e(e)o(xist)g(on)g(the)g(serv)o(er)h(side)f(to)g(issue)g
(replies)i(back)e(to)g(the)g(client.)33 b(The)o(y)25
b(are)g(more)f(in)0 2448 y(harmon)o(y)h(with)e(the)h(concepts)i(of)d
(message)i(passing)g(than)f(with)g(traditional)k Fv(R)t(P)t(C)r
FC(.)141 2562 y(Recei)n(v)o(e)22 b(stubs)g(are)g(not)g(well)f
(de\002ned)h(for)g(Flick.)28 b(Ideally)-6 b(,)23 b(the)o(y)f(represent)
i(a)c(method)j(of)e(either)i(polling)g(or)e(w)o(aiting)0
2675 y(for)h(the)h(reply)g(from)f(a)f(pre)n(vious)j(send)f(stub,)g
(although)i(the)d(implementation)j(of)d(such)h(a)e(stub)i(has)g(not)f
(been)h(laid)g(out)f(for)0 2788 y(an)o(y)g(of)g(Flick')-5
b(s)23 b(runtime)g(layers.)30 b(Currently)-6 b(,)23 b(the)g(supported)h
(method)f(of)f(recei)n(ving)j(a)c(reply)i(is)f(via)h(the)f(client)h(sk)
o(eleton.)141 2902 y(In)g(a)f(sense,)h(a)f(send)h(stub)g(acts)g(as)g(a)
f(\223thread)i(fork,)-6 b(\224)23 b(allo)n(wing)h(both)f(the)g(client)g
(and)g(the)g(serv)o(er)g(to)g(w)o(ork)f(in)h(parallel.)0
3015 y(Similarly)-6 b(,)29 b(a)e(recei)n(v)o(e)h(stub)g(acts)g(as)f(a)g
(corresponding)32 b(\223join\224)d(operation,)h(synchronizing)i(the)27
b(client)i(thread)g(with)e(the)0 3128 y(serv)o(er)d(thread)h(and)f
(returning)i(the)e(serv)o(er')-5 b(s)25 b(result.)141
3241 y(Note)f(that)g(although)i(send)e(and)h(recei)n(v)o(e)f(stubs)h
(are)f(not)g(e)o(xplicitly)i(responsible)h(for)d(marshaling)i(or)d
(unmarshaling)0 3354 y(an)o(y)31 b(data,)j(implementationally)i(the)o
(y)c(may)f(do)g(a)g(small)h(amount.)53 b(F)o(or)30 b(e)o(xample,)k(a)f
Fv(C)t(O)t(R)t(B)r(A)r FC(/)r Fv(I)t(I)t(O)t(P)i FC(client)d(send)g
(stub)0 3467 y(must)21 b(encode)i(the)h Fv(G)t(I)t(O)t(P)g
FC(header)f(and)f(serv)o(er)g(object)h(reference)g(into)g(the)e
(message)i(before)f(it)g(can)f(be)h(sent)g(to)f(the)h(serv)o(er)-5
b(.)0 3719 y Fz(Continuation)23 b(Stubs)0 3895 y FC(Used)e(in)g
(clients)i(and)e(serv)o(ers)i(that)f(use)f(an)g(e)n(v)o(ent-based)j
(programming)f(model.)29 b(Not)20 b(all)i(PBEs)d(or)i(transport)j
(protocols)0 4008 y(may)f(support)j(continuation)h(stubs.)141
4121 y(If)g(for)h(some)f(reason)i(a)e(w)o(ork)g(function)j(or)d(reply)i
(handler)g(is)e(not)h(able)g(to)f(complete)i(\(perhaps)g(required)h
(data)e(has)0 4234 y(not)k(yet)h(arri)n(v)o(ed)g(to)f(\002nish)g(the)g
(computation\),)37 b(it)32 b(may)f(request)j(that)f(the)f(w)o(ork)g(be)
g(deferred)i(until)f(a)f(later)g(time.)54 b(A)0 4347
y(continuation)28 b(stub)d(is)f(used)h(to)f(indicate)j(this)d(to)h(the)
f(runtime)h(layer)l(,)h(and)e(pro)o(vide)i(a)e(w)o(ay)g(to)g(sa)n(v)o
(e)h(partially)h(computed)0 4460 y(results)j(so)e(the)h(w)o(ork)f(can)h
(be)f(continued)j(later)e(\(rather)h(than)f(being)g(entirely)h
(restarted\).)42 b(It)27 b(is)h(left)f(up)g(to)h(the)f(runtime)0
4573 y(ho)n(w)c(to)g(\223a)o(w)o(ak)o(e\224)i(one)f(of)f(these)i
(continued)h(w)o(ork)e(functions)i(to)d(continue)j(its)e(processing.)0
4824 y Fz(Message)h(Marshaling)f(and)e(Unmarshaling)i(Stubs)0
5000 y FC(Used)d(in)g(clients)i(and)e(serv)o(ers)i(that)f(use)f(an)g(e)
n(v)o(ent-based)j(programming)f(model.)29 b(Not)20 b(all)i(PBEs)d(or)i
(transport)j(protocols)0 5113 y(may)f(support)j(message)e
(marshal/unmarshal)k(stubs.)141 5227 y(Lik)o(e)j(their)h(marshal)g(and)
f(unmarshal)i(stub)f(cousins,)i(the)o(y)d(are)g(responsible)k(for)c
(encoding)i(and)e(decoding)j(data.)0 5340 y(Ho)n(we)n(v)o(er)l(,)24
b(rather)i(than)g(w)o(orking)f(on)g(speci\002c)h(types,)f(the)o(y)g
(focus)h(on)f(the)g(entire)g(message)h(for)f(a)f(request)i(or)f(reply)
-6 b(.)33 b(By)p eop
%%Page: 105 105
105 104 bop 0 -165 a Fx(7.1.)51 b(PRES)p 411 -165 28
4 v 31 w(C)23 b(O)-5 b(VER)e(VIEW)2768 b FC(105)0 91
y(in)l(v)n(oking)33 b(a)c(message)i(marshal)g(stub,)h(one)f(recei)n(v)o
(es)g(an)f(opaque)h(message)g(object)h(ready)f(to)f(be)f(sent)i(to)f(a)
f(serv)o(er)i(\(or)0 204 y(multiple)d(serv)o(ers\).)39
b(Lik)o(e)n(wise,)27 b(by)g(in)l(v)n(oking)i(a)d(message)i(unmarshal)g
(stub,)g(one)f(can)g(decode)h(a)e(message)i(object)g(into)0
317 y(the)c(appropriate)j(parameters.)0 572 y FA(7.1.2)99
b(Pr)n(esentation)26 b(Attrib)n(utes)0 748 y FC(F)o(or)j(some)g
(presentations)k(there)e(are)e(peripheral)k(data)d(types)g(or)g(just)g
(e)o(xtra)g(information)h(that)f(needs)h(to)e(be)h(a)n(v)n(ailable)0
861 y(in)j(order)h(to)g(produce)h(the)e(correct)i(code.)59
b(F)o(or)32 b(instance,)37 b(the)f Fv(C)t(O)t(R)t(B)r(A)e
FC(C++)e(mapping)j(requires)g(the)h Fv(I)t(D)t(L)g FC(compiler)0
974 y(to)31 b(generate)j(smart)e(pointer)h(classes)g(for)e(man)o(y)h
(of)f(the)h(de\002ned)g(types.)53 b(Most)32 b(of)f(this)h(w)o(ork)g
(can)g(be)f(accomplished)0 1087 y(during)f(presentation)h(generation)g
(and)d(simply)h(added)g(to)f(the)j Fv(C)t(A)t(S)t(T)g
FC(part)d(of)g(the)i Fv(P)t(R)t(E)t(S)p 2895 1087 V 40
w(C)f FC(\002le;)h(ho)n(we)n(v)o(er)l(,)f(producing)0
1199 y(the)24 b(bodies)h(of)f(an)o(y)g(functions)i(is)e(an)g
(implementation)i(issue)f(which)f(should)i(be)d(left)h(to)g(the)g(back)
h(end.)30 b(Thus,)23 b(we)g(must)0 1312 y(ha)n(v)o(e)28
b(a)f(generic)i(w)o(ay)f(of)f(storing)i(information)h(in)e(the)h
Fv(P)t(R)t(E)t(S)p 2000 1312 V 40 w(C)r FC(,)e(whether)i(it)e(is)g
(presentation)k(functions)f(or)e(an)o(y)f(other)0 1425
y(things)c(of)f(interest.)30 b(The)21 b(solution)j(w)o(as)d(to)h(mak)o
(e)g(a)f(data)h(structure)i(in)g Fv(X)t(D)t(R)f FC(that)f(could)h
(store)g(tagged)g(data)f(so)g(we)f(could)0 1538 y(create)k
(semantically)h(meaningful)g(b)n(ut)e(otherwise)h(arbitrary)h(data)e(v)
n(alues)h(that)f(could)h(be)e(stored)i(in)e(the)j Fv(P)t(R)t(E)t(S)p
3593 1538 V 40 w(C)e FC(\002le.)0 1793 y FA(7.1.3)99
b(Marshaling)24 b(and)i(Unmarshaling)0 1969 y FC(Most)f(of)h(the)f
(types)i(of)e(stubs)i(listed)f(abo)o(v)o(e)g(perform)h(marshaling)g
(and/or)g(unmarshaling)h(of)e(messages)h(in)e(some)g(con-)0
2082 y(te)o(xt:)55 b(after)37 b(all,)i(marshaling)g(and)d(unmarshaling)
k(is)c(the)h(central)g(mechanism)h(behind)i Fv(R)t(P)t(C)r
FC(.)67 b(Marshaling)39 b(can)d(be)0 2195 y(de\002ned)27
b(as)e(con)l(v)o(ersion)k(of)d(data)h(from)e(language-speci\002c)31
b(presented)d(data)e(formats)h(\(C-language)h(data)f(types)g(in)f(this)
0 2308 y(case\))h(to)f(a)g(language-independ)q(en)q(t)31
b(in-transit)e(message)e(format)g(useful)h(for)e(passing)i(the)e(data)h
(between)h(a)d(client)j(and)0 2420 y(a)e(serv)o(er;)k(unmarshaling)g
(is)d(the)g(opposite)i(con)l(v)o(ersion.)42 b(There)27
b(are)g(an)g(in\002nite)h(number)f(of)g(w)o(ays)g(message)h(data)g(can)
0 2533 y(be)33 b(presented)i(in)e(C,)f(man)o(y)g(of)h(them)g
(reasonable)j(and)d(commonly)h(used)g(in)f(dif)n(ferent)j
Fv(R)t(P)t(C)f FC(systems.)58 b(Pro)o(viding)35 b(a)0
2646 y(con)l(v)o(enient)29 b(representation)i(of)26 b(a)g(wide)g(v)n
(ariety)i(of)e(these)i(possible)g(presentations)i(is)d(the)f(primary)i
(challenge)g(for)f(the)2 2759 y Fv(P)t(R)t(E)t(S)p 194
2759 V 39 w(C)e FC(\002le)e(format.)141 2873 y(T)-7 b(o)23
b(this)h(end,)f(each)k Fv(P)t(R)t(E)t(S)p 972 2873 V
39 w(C)e FC(\002le)e(contains)i(three)g(main)e(parts:)136
3090 y Fs(\017)46 b FC(A)18 b(message)i(interf)o(ace)h(\()r
Fv(M)t(I)t(N)t(T)r FC(\))f(type)f(graph,)i(representing)h(the)d
(complete)h(on-the-wire)h(message)f(type)g(signature)227
3203 y(used)25 b(by)e(the)h(stubs.)30 b(See)23 b(Chapter)h(5)g(for)f
(more)h(information)i(on)g Fv(M)t(I)t(N)t(T)g FC(type)e(graphs.)136
3394 y Fs(\017)46 b FC(A)31 b(C)g(abstract)j(syntax)g(tree)f(\()r
Fv(C)t(A)t(S)t(T)r FC(\),)j(representing)f(the)e(complete)h(set)e(of)g
(C-language)j(de\002nitions)f(and)f(dec-)227 3507 y(larations)h(for)d
(the)h(C-language)h(presentation)i(the)d(stubs)g(are)f(required)j(to)d
(implement.)53 b(The)32 b Fv(C)t(A)t(S)t(T)j FC(stored)d(in)227
3620 y(a)f Fv(P)t(R)t(E)t(S)p 490 3620 V 39 w(C)f FC(\002le,)f(when)g
(con)l(v)o(erted)i(to)e(C)e(source)j(code,)h(directly)g(becomes)f(the)f
(header)h(\002le)e(to)g(be)h(included)i(by)227 3733 y(the)h
Fv(R)t(P)t(C)f FC(programmer)f(in)f(client)h(or)f(serv)o(er)h(code)g
(that)g(uses)g(the)f(generated)i(stubs.)47 b(See)28 b(Chapter)i(6)f
(for)g(more)227 3846 y(information)d(on)e(the)i Fv(C)t(A)t(S)t(T)g
FC(format.)136 4037 y Fs(\017)46 b FC(A)33 b(set)g(of)h(stub)g
(de\002nitions,)k(as)33 b(described)j(abo)o(v)o(e,)h(each)d(containing)
j(references)f(into)e(the)i Fv(M)t(I)t(N)t(T)g FC(and)g
Fv(C)t(A)t(S)t(T)227 4150 y FC(sections)26 b(of)d(the)h(\002le)f(abo)o
(v)o(e,)h(and)g Fu(mapping)h FC(information)h(describing)g(ho)n(w)d
(one)h(corresponds)j(to)d(the)g(other)-5 b(.)141 4367
y(Thus,)28 b(each)h(stub)f(de\002nition)h(in)f(a)h Fv(P)t(R)t(E)t(S)p
1479 4367 V 39 w(C)g FC(\002le)e(refers)i(to)e(a)g(\223common)h
(database\224)j(of)c(message)i(type)f(de\002nitions)0
4480 y(\(the)e Fv(M)t(I)t(N)t(T)r FC(\),)e(and)f(a)g(\223common)g
(database\224)j(of)d(C-language)i(de\002nitions)g(and)f(declarations)i
(\(the)g Fv(C)t(A)t(S)t(T)r FC(\).)k(F)o(or)22 b(e)o(xample,)0
4593 y(to)c(de\002ne)h(ho)n(w)f(a)g(client)i(stub)f(is)f(to)g(marshal)i
(a)e(request)i(message)f(and)g(unmarshal)i(the)d(reply)-6
b(,)21 b(each)e(client)g(stub)g(de\002nition)0 4706 y(contains:)136
4923 y Fs(\017)46 b FC(A)24 b(reference)j(to)e(a)f(subsection)k(of)d
(the)i Fv(M)t(I)t(N)t(T)h FC(type)e(graph)g(representing)i(the)d
(message)h(that)g(the)f(client)h(stub)g(will)227 5036
y(send)f(to)e(the)h(serv)o(er)-5 b(.)136 5227 y Fs(\017)46
b FC(A)31 b(reference)k(to)d(another)i(subsection)h(of)d(the)i
Fv(M)t(I)t(N)t(T)h FC(type)e(graph)h(representing)h(the)e(reply)g
(message)g(the)f(stub)227 5340 y(e)o(xpects)25 b(to)f(get)g(back)g
(from)f(the)h(serv)o(er)-5 b(.)p eop
%%Page: 106 106
106 105 bop 0 -165 a FC(106)969 b Fx(CHAPTER)20 b(7.)51
b(PRESENT)-8 b(A)e(TION)18 b(IN)23 b(C/C++)g(\(PRES)p
2986 -165 28 4 v 31 w(C\))g(REPRESENT)-8 b(A)e(TION)136
91 y Fs(\017)46 b FC(A)18 b(reference)j(to)d(the)h(C)f(function)i
(prototype)i(declaration)g(in)c(the)j Fv(C)t(A)t(S)t(T)h
FC(de\002ning)d(the)g(C-language)i(type)f(signature)227
204 y(this)k(particular)i(client)f(stub)f(will)g(ha)n(v)o(e.)136
404 y Fs(\017)46 b FC(A)23 b(tree)h(of)f Fu(mapping)i
FC(data)g(structures)h(de\002ning)f(ho)n(w)e(the)h(C-language)i
(parameters)f(to)f(the)g(client)g(stub)h(are)f(to)f(be)227
517 y(con)l(v)o(erted)j(into)f(the)e(request)j(message)e(de\002ned)h
(abo)o(v)o(e)f(in)f(the)j Fv(M)t(I)t(N)t(T)r FC(.)136
716 y Fs(\017)46 b FC(Another)29 b(tree)g(of)f(mapping)i(structures)g
(de\002ning)g(ho)n(w)d(the)i(serv)o(er')-5 b(s)29 b(reply)g(message)h
(is)d(to)i(be)f(con)l(v)o(erted)i(back)227 829 y(into)37
b(presented)i(C-language)f(data)f(types,)k(either)c(by)f(\002lling)h
(in)f(pass-by-reference)42 b(C)35 b(data)i(objects)h(whose)227
942 y(addresses)f(were)d(passed)i(to)e(the)h(client)g(stub)g(through)h
(C)d(parameters,)39 b(or)34 b(directly)i(through)h(the)d(client)h(stub)
227 1055 y(function')-5 b(s)27 b(return)d(v)n(alue.)141
1283 y(In)30 b(general,)k(the)c(C)f(type)i(de\002nitions)i(are)d
(usually)i(more)f(complicated)h(than)f(their)h(corresponding)k
Fv(M)t(I)t(N)t(T)d FC(types,)0 1396 y(although)i(in)d(a)g(fe)n(w)g
(cases)h(the)i Fv(M)t(I)t(N)t(T)g FC(actually)g(contains)f(more)f
(information.)57 b(F)o(or)32 b(e)o(xample,)37 b Fv(M)t(I)t(N)t(T)e
FC(inte)o(ger)f(types)0 1509 y(specify)27 b(an)e(e)o(xact)h(range)h(of)
e(allo)n(w)o(able)i(v)n(alues,)f(whereas)h(C)d(inte)o(ger)j(types)f
(are)f(merely)h(the)g(well-kno)n(wn)h Fy(char)p FC(,)c
Fy(int)p FC(,)0 1621 y Fy(long)p FC(,)e(etc.)0 1885 y
Fz(Mapping)h(Between)h(Pr)n(esentation)i(and)d(Message)0
2065 y FC(The)h(stubs)i(de\002nitions)h(are)d(actually)j(made)e(up)f
(of)h(a)f(number)i(of)e(data)h(structures)j(de\002ned)d(in)g
Fy(pres_c.x)c FC(and)k(referred)0 2178 y(to)19 b(as)f(\223nodes\224.)30
b(These)19 b(nodes)h(are)f(connected)i(together)g(to)e(form)g(a)f(tree)
h(that)h(describes)h(ho)n(w)d(to)h(map)f(to)h(and)g(from)i
Fv(C)t(A)t(S)t(T)0 2291 y FC(and)k Fv(M)t(I)t(N)t(T)r
FC(.)30 b(The)22 b(nodes)j(themselv)o(es)f(are)g(split)f(into)h(tw)o(o)
e(classes)j(of)e(structures)i(called)g(\223mappings\224)g(and)e
(\223inlines\224.)31 b(A)0 2404 y(mapping)e(node)g(is)f(used)h(to)f
(translate)i(between)f(whole)f(types,)i(a)f Fv(C)t(A)t(S)t(T)i
FC(int)e(to)e(a)j Fv(M)t(I)t(N)t(T)h FC(int,)e(for)f(e)o(xample.)43
b(An)27 b(inline)0 2517 y(node)d(w)o(orks)g(on)f(an)g(e)o(xploded)j
(type,)e(for)f(e)o(xample,)h(a)f(mapping)h(could)h(match)e(to)h(a)e(C)g
(structure,)k(b)n(ut)e(an)f(inline)h(is)f(used)0 2630
y(to)j(access)i(the)e(slots)h(of)g(the)f(struct.)38 b(Switching)27
b(between)h(these)f(modes)g(is)f(done)h(when)f(a)g Fy
(PRES_C_INLINE_ATOM)20 b FC(is)0 2743 y(used)k(to)f(select)h(what)f(to)
g(map)g(from)g(an)h(inline,)g(and)f(when)h(a)e Fy
(PRES_C_MAPPING_STRUCT)17 b FC(is)23 b(used)h(to)f(e)o(xpand)h(into)g
(an)0 2856 y(inline.)34 b(F)o(or)24 b(e)o(xample,)i(a)f(pointer)i(to)e
(a)f(C)g(structure)j(w)o(ould)f(be)f(a)f(mapping)j(that)e(then)h
(referred)h(to)e(an)g(inline,)h(since)g(the)0 2969 y(pointer)f(is)f(a)f
(primiti)n(v)o(e,)h(b)n(ut)g(once)g(it)g(has)g(been)g(dereferenced,)j
(you)d(are)g(left)f(with)h(a)f(structure.)0 3236 y FA(7.1.4)99
b(Memory)25 b(Allocation)f(and)i(Deallocation)0 3416
y FC(Memory)j(allocation)j(and)d(deallocation)k(must)c(be)g(dealt)h
(with)f(whene)n(v)o(er)g(an)o(y)g(le)n(v)o(el)h(of)f(pointer)h
(indirection)i(appears)0 3529 y(in)j(the)g(C-language)i(type)e
(signatures)j(used)d(by)g(a)g(stub)l(.)63 b(Basically)-6
b(,)39 b(an)o(y)c(pointer)i(must)d(be)h(initialized)j(to)c(point)i(to)0
3642 y Fu(something)27 b FC(before)g(use:)34 b(either)27
b(to)e(memory)h(on)f(the)h(stack,)h(the)f(heap,)g(or)g(e)n(v)o(en)f(to)
h(a)f(global)i(v)n(ariable.)36 b(Similarly)-6 b(,)27
b(that)0 3755 y(memory)19 b(must)h(be)f(appropriately)k(deallocated)f
(after)e(it)f(is)g(no)g(longer)i(needed.)29 b(Pointer)20
b(indirection)i(is)d(a)g(necessary)j(part)0 3867 y(of)28
b(a)g(viable)i(C)d(presentation)32 b(for)c(an)o(y)h(non-tri)n(vial)k
Fv(I)t(D)t(L)r FC(,)d(and)e(dif)n(ferent)33 b Fv(I)t(D)t(L)r
FC(s)c(specify)h(dif)n(ferent)g(w)o(ays)f(of)f(initializing)0
3980 y(and)c(releasing)i(these)e(pointers.)141 4096 y(T)-7
b(o)30 b(handle)j(a)e(wide)g(v)n(ariety)i(of)e(dif)n(ferent)i(memory)e
(allocation)j(and)e(deallocation)j(semantics,)f(the)g
Fv(P)t(R)t(E)t(S)p 3652 4096 V 39 w(C)f FC(for)n(-)0
4209 y(mat)40 b(associates)j(some)e(standard)h(memory)f(management)h
(information)h(with)d(each)h(le)n(v)o(el)g(of)f(pointer)i(indirection)0
4322 y(that)d(appears)h(in)e(the)h(C)e(types)i(a)f(stub)h(uses.)74
b(This)38 b(memory)h(management)h(information)h(is)d(contained)j
(within)e(a)0 4435 y Fy(PRES_C_INLINE_ALLOCATION)o(_CON)o(TEXT)23
b FC(node,)33 b(along)f(with)e(references)k(to)c Fy(pres_c_inline)c
FC(nodes)32 b(describ-)0 4548 y(ing)25 b(the)f(pointer)i(and)f(other)g
(associated)i(information)g(\(e.g.,)d(the)g(length)i(of)e(a)g
(sequence,)i(or)g Fv(C)t(O)t(R)t(B)r(A)r FC(')-5 b(s)24
b(sequence)i(o)n(wn-)0 4661 y(ership/release)40 b(\003ag\).)64
b(W)l(ithin)37 b(these)g(child)f(inlines,)42 b Fv(P)t(R)t(E)t(S)p
2007 4661 V 40 w(C)37 b FC(mapping)g(nodes)g(\(typically)h(a)d
Fy(PRES_C_MAPPING_)0 4774 y(POINTER)30 b FC(node;)38
b(see)32 b(Section)h(7.2.4)g(belo)n(w\))g(refer)g(back)g(to)f(their)h
(allocation)i(conte)o(xt)f(by)f(its)f(unique)i(name.)55
b(This)0 4887 y(memory)24 b(management)h(information)h(speci\002es:)136
5114 y Fs(\017)46 b FC(Whether)l(,)24 b(and)e(under)h(what)f
(circumstances,)j(the)d(stub)g(should)i(allocate)f(memory)f(and)g
(initialize)j(the)d(pointer)-5 b(.)29 b(If)227 5227 y(the)c(pointer)g
(isn')n(t)h(initialized)h(by)d(the)g(stub,)h(then)g(the)f(stub)h(e)o
(xpects)g(it)f(to)g(ha)n(v)o(e)h(been)g(initialized)i(already)f(by)e
(the)227 5340 y(program)h(code)f(that)g(interacts)i(with)e(the)f(stub)l
(.)p eop
%%Page: 107 107
107 106 bop 0 -165 a Fx(7.1.)51 b(PRES)p 411 -165 28
4 v 31 w(C)23 b(O)-5 b(VER)e(VIEW)2768 b FC(107)136 91
y Fs(\017)46 b FC(Whether)l(,)36 b(and)c(under)h(what)f(circumstances,)
37 b(the)32 b(stub)h(should)g(deallocate)i(the)d(memory)g(referred)i
(to)e(by)g(the)227 204 y(pointer)-5 b(.)30 b(If)22 b(the)h(memory)g
(isn')n(t)g(deallocated)j(by)c(the)h(stub,)g(then)g(the)g(stub)g(e)o
(xpects)h(the)e(program)i(to)e(deallocate)j(it)227 317
y(at)f(some)f(other)i(time)e(at)h(its)f(o)n(wn)g(con)l(v)o(enience.)136
510 y Fs(\017)46 b FC(If)28 b(the)h(stub)g(is)f(to)g(allocate)j(or)d
(deallocate)j(memory)-6 b(,)29 b(what)g(memory)f(allocation)j
(mechanism)f(the)e(stub)i(should)227 623 y(use.)h(Man)o(y)24
b(operating)j(systems)e(ha)n(v)o(e)f(se)n(v)o(eral)h(\223le)n(v)o
(els\224)h(of)e(memory)g(allocation:)33 b(for)24 b(e)o(xample,)h(Mach)f
(has)h(the)227 736 y(lo)n(w-le)n(v)o(el)k(page-granular)k
Fy(vm_allocate)24 b FC(mechanism)30 b(in)e(addition)j(to)d(the)g
(high-le)n(v)o(el)j Fy(malloc)26 b FC(mechanism)227 849
y(pro)o(vided)g(by)e(the)g(C)f(library;)j(W)l(indo)n(ws)f(pro)o(vides)g
(three)g(dif)n(ferent)h(types)f(of)f(memory)g(management)i(functions)
227 961 y(\(global,)f(local,)f(and)g(heap\))h(in)f(addition)h(to)f
Fy(malloc)p FC(.)i(If)d(a)g(piece)i(of)f(memory)f(allocated)j(using)f
(one)f(mechanism)227 1074 y(is)29 b(freed)h(using)g(another)l(,)i(the)d
(process)h(is)f(lik)o(ely)h(to)f(get)g(hopelessly)j(confused.)47
b(Thus,)30 b(whene)n(v)o(er)g(a)e(stub)h(may)227 1187
y(\223transfer\224)f(a)d(memory)h(re)o(gion)h(to)e(the)h(programmer)h
(or)e(vice)h(v)o(ersa,)h(the)o(y)e(must)h(agree)g(on)g(ho)n(w)f(the)h
(memory)f(is)227 1300 y(to)f(be)f(allocated.)141 1519
y(Although)36 b(the)f(memory)f(allocation)j(and)e(deallocation)j
(semantics)e(are)f(speci\002ed)h(in)e(the)g(same)h(mapping)h(data)0
1632 y(structure)23 b(tree)f(that)f(is)g(used)h(to)f(specify)i(ho)n(w)e
(marshaling)i(and)e(unmarshaling)k(code)c(is)g(generated,)j(this)e
(does)g(not)f(mean)0 1745 y(that)i(allocation)j(and)d(deallocation)j
(occurs)f(at)d(the)h(same)g(time)g(as)g(marshaling)i(or)d
(unmarshaling.)32 b(F)o(or)22 b(e)o(xample,)h(in)g(the)0
1858 y(case)28 b(of)f(a)g(serv)o(er)h(sk)o(eleton)i(that)d(must)h
(allocate)h(memory)e(to)h(be)f(used)h(to)f(hold)h(data)g(to)f(be)h
(marshaled)h(into)f(the)f(reply)0 1971 y(message,)e(the)f(memory)g
(must)g(be)g(allocated)i Fu(befor)m(e)f FC(the)f(serv)o(er)h(w)o(ork)f
(function)i(is)e(called,)h(so)e(the)i(w)o(ork)f(function)i(will)0
2083 y(ha)n(v)o(e)h(a)f(place)i(to)e(\002ll)g(in)g(its)h(reply)g(data;)
i(on)e(the)f(other)i(hand)f(the)g(actual)h(marshaling)g(of)f(the)f
(reply)i(message)g(can)e(only)0 2196 y(be)j(done)h Fu(after)h
FC(the)e(w)o(ork)g(function)i(is)e(called,)i(when)e(the)g(data)h(has)f
(been)g(\002lled)g(in.)45 b(In)29 b(general,)i(the)e(point)h(at)f
(which)0 2309 y(memory)e(is)f(allocated)j(or)d(freed)i(depends)g(on)f
(the)g(type)g(of)f(stub;)j(see)e(Section)g(7.1.1)g(abo)o(v)o(e)g(for)f
(details)i(on)f(when)g(this)0 2422 y(happens)f(in)d(each)h(case.)141
2536 y(Although)h(each)e(pointer)i(mapping)f(node)g(in)f(a)g(stub')-5
b(s)24 b(mapping)g(tree)g(speci\002es)g(both)g(allocation)h(and)f
(deallocation)0 2649 y(semantics)g(for)f(that)g(pointer)l(,)i(in)d
(some)h(cases)g(one)g(or)g(the)g(other)g(of)g(these)g(is)g
(meaningless.)31 b(F)o(or)21 b(e)o(xample,)j(a)e(client)h(stub)0
2762 y(has)j(no)f(opportunity)k(to)c(allocate)j(memory)d(for)h(request)
h(data,)f(because)h(the)f(request)h(data)f(must)f(already)i(be)f
(allocated)0 2875 y(and)i(ready)g(to)g(marshal)g(from)f(when)h(the)f
(client)i(stub)f(is)f(\002rst)g(entered.)42 b(Similarly)-6
b(,)29 b(a)e(client)h(stub)h(has)e(no)h(opportunity)0
2988 y(to)e(deallocate)k(memory)c(holding)j(reply)e(data,)h(since)f
(the)g(only)g(time)f(it)g(could)i(do)f(so)f(w)o(ould)h(be)g(during)h
(the)e(e)o(x)o(ecution)0 3101 y(of)i(the)h(stub,)g(and)g(the)f(calling)
i(program)g(will)d(not)i(be)f(able)h(to)f(e)o(xamine)h(the)f(reply)i
(data)e(until)i(after)e(the)h(stub)g(returns.)0 3214
y(Therefore,)i(for)d(client)h(stubs,)i(allocation)g(semantics)e(for)g
(request)h(data)f(and)f(deallocation)k(semantics)e(for)e(reply)i(data)0
3327 y(are)24 b(ignored.)141 3441 y(In)g(cases)g(where)g(a)g(pointer)h
(is)f(not)g(merely)g(a)f(simple)i(le)n(v)o(el)f(of)f(pointer)j
(indirection,)g(b)n(ut)f(in)e(f)o(act)h(holds)h(the)f(address)0
3554 y(of)33 b(the)g(\002rst)g(element)h(in)f(an)g Fu(arr)o(ay)g
FC(of)g(elements,)k(the)c(length)h(of)f(the)h(block)g(of)f(memory)g
(allocated)i(or)e(deallocated)0 3667 y(naturally)26 b(depends)g(on)d
(the)h(length)h(of)e(the)h(array)-6 b(.)0 3920 y Fz(P)n(ointer)24
b(Aliasing)0 4097 y FC(In)h(some)g(cases,)i(tw)o(o)d(pointer)j(mapping)
g(nodes)f(in)f(a)i Fv(P)t(R)t(E)t(S)p 1930 4097 V 39
w(C)f FC(\002le)f(may)g(refer)h(to)f(the)g Fu(same)g
FC(actual)i(pointer)g(v)n(ariable)f(at)0 4210 y(runtime.)k(F)o(or)23
b(e)o(xample,)i(most)g Fv(I)t(D)t(L)r FC(s)g(support)h(a)d(notion)j(of)
d(an)h(\223inout\224)i(parameter)l(,)f(where)f(data)h(for)f(that)g
(parameter)h(is)0 4323 y(to)g(be)g(sent)h(in)f(both)h(the)f(request)i
(and)e(the)h(reply)g(message,)g(b)n(ut)g(the)f(parameter)i(appears)g
(only)f(once)g(in)f(the)g(C)f(function)0 4435 y(prototype)31
b(for)e(the)g(stub)g(or)f(w)o(ork)h(function.)45 b(This)29
b(parameter)h(is)e(a)g(pointer)i(to)f(a)f(data)h(area)g(to)f(be)h(used)
g(for)g(both)g(the)0 4548 y(request)24 b(and)e(the)g(reply:)30
b(the)22 b(request)h(data)g(is)f(e)o(xpected)h(to)f(be)g(o)o(v)o
(erwritten)h(during)h(the)g Fv(R)t(P)t(C)g FC(with)e(reply)h(data.)28
b(In)22 b(cases)0 4661 y(lik)o(e)31 b(this,)i(care)e(must)f(be)h(tak)o
(en)h(that)f(the)g(pointer)h(is)e(not)h(allocated)i(and)e(initialized)i
(twice,)g(causing)f(memory)f(to)f(be)0 4774 y(irre)n(v)n(ocably)d
(lost,)c(and)h(\(e)n(v)o(en)g(more)g(importantly\))i(is)e(not)g(freed)g
(twice.)141 4888 y(Presentation)29 b(back)e(ends)h(that)e(tak)o(e)k
Fv(P)t(R)t(E)t(S)p 1538 4888 V 39 w(C)e FC(\002les)e(as)g(input)h
(cannot)h(generally)h(be)e(e)o(xpected)h(to)e(recognize)j(when)0
5001 y(tw)o(o)21 b(pointer)j(mapping)f(nodes)g(refer)f(to)g(the)g(same)
f(pointer)-5 b(.)30 b(Instead,)24 b(the)e(producer)i(of)d(the)j
Fv(P)t(R)t(E)t(S)p 3138 5001 V 40 w(C)e FC(\002le)g(must)f(tak)o(e)i
(care)0 5114 y(to)f(ensure)j(that)e(at)f(most)h(one)g(of)f(those)i
(nodes)g(specify)g(memory)f(allocation,)i(and)e(at)f(most)h(one)g
(speci\002es)h(deallocation.)0 5227 y(If)d(allocation)j(for)d(such)h(a)
f(pointer)i(is)e(to)g(be)g(done)h(by)g(the)f(stub,)h(then)g(the)g
(allocation)i(semantics)e(must)g(be)f(speci\002ed)h(only)0
5340 y(in)j(the)g(pointer)i(mapping)f(node)g(corresponding)j(to)24
b(the)i(operation)h(that)e(is)g(done)h Fu(\002r)o(st)r
FC(;)g(the)f(other)h(mapping)g(node)g(must)p eop
%%Page: 108 108
108 107 bop 0 -165 a FC(108)969 b Fx(CHAPTER)20 b(7.)51
b(PRESENT)-8 b(A)e(TION)18 b(IN)23 b(C/C++)g(\(PRES)p
2986 -165 28 4 v 31 w(C\))g(REPRESENT)-8 b(A)e(TION)0
91 y FC(specify)31 b Fy(PRES_C_ALLOC_NEVER)p FC(.)40
b(Similarly)-6 b(,)31 b(if)e(deallocation)k(is)c(to)h(be)f(done)h(by)f
(the)h(stub,)h(then)f(the)g(deallocation)0 204 y(semantics)d(must)e(be)
g(speci\002ed)h(only)g(in)f(the)g(mapping)h(node)g(corresponding)k(to)
24 b(the)i(operation)h(that)f(is)f(done)g Fu(last)p FC(.)34
b(F)o(or)0 317 y(e)o(xample,)h(in)e(the)f(case)h(of)g(a)f(serv)o(er)h
(sk)o(eleton,)k(allocation)e(semantics)f(for)f(an)f(\223inout\224)i
(pointer)h(parameter)f(must)e(be)0 430 y(speci\002ed)25
b(in)e(the)h(pointer)h(mapping)g(node)g(for)e(the)h(unmarshaled)i
(request)f(data,)f(whereas)h(deallocation)i(semantics)e(for)0
543 y(that)f(same)g(pointer)h(parameter)g(must)f(be)f(speci\002ed)i(in)
f(the)f(pointer)j(mapping)f(node)f(for)g(the)g(marshaled)h(reply)f
(data.)0 806 y FA(7.1.5)99 b(Exceptions)0 985 y FC(Exceptions)34
b(as)d(described)k(in)c(the)j Fv(I)t(D)t(L)h FC(must)c(be)h(e)o
(xpressed)i(in)d(the)j Fv(P)t(R)t(E)t(S)p 2479 985 V
40 w(C)e FC(so)g(the)o(y)g(can)g(be)g(properly)i(marshaled,)0
1097 y(unmarshaled,)27 b(and)e(handled)h(in)f(an)f(appropriate)k(w)o
(ay)-6 b(.)31 b(Since)24 b(e)o(xceptions)j(can)e(abstractly)i(be)d(vie)
n(wed)h(as)f(just)h(another)0 1210 y(data)j(type)h(to)e(be)h(passed)h
(o)o(v)o(er)f(the)g(wire,)g(there)h(isn')n(t)g(an)o(y)f(pro)o(vision)i
(for)e(a)f(special)i(e)o(xception)h(mapping)f(in)h Fv(P)t(R)t(E)t(S)p
3794 1210 V 39 w(C)r FC(.)0 1323 y(Ho)n(we)n(v)o(er)l(,)f(the)o(y)f(do)
g(mak)o(e)h(their)g(presence)h(kno)n(wn)e(by)h(slightly)h(changing)g
(the)f(structure)h(of)e(reply)h(messages.)44 b(Since)0
1436 y(an)24 b(e)o(xception)i(can)e(occur)h(based)g(on)f(data)g(gi)n(v)
o(en)h(to)e(the)h(serv)o(er)h(by)f(a)f(client,)i(an)f(e)o(xception)i
(message)f(may)e(be)h(returned)0 1549 y(by)e(the)g(serv)o(er)h(in)f
(place)h(of)f(the)h(normal)f(reply)h(message.)30 b(The)21
b(e)o(xception)k(may)c(either)j(be)e(a)f(system-de\002ned)k(e)o
(xception)0 1662 y(due)33 b(to)f(a)f(mal-formed)j(request)g(message)f
(\(e.g.,)h(an)e(unde\002ned)i(operation)g(or)e(unkno)n(wn)i(object)f
(reference\),)k(or)32 b(the)0 1775 y(e)o(xception)38
b(may)d(be)h(user)n(-de\002ned,)41 b(generated)d(by)e(the)g(serv)o(er)n
(-side)j(w)o(ork)c(function)j(indicating)h(the)d(request)h(could)0
1888 y(not)25 b(be)f(ful\002lled)i(for)f(whate)n(v)o(er)g(reason.)33
b(This)24 b(creates)i(a)e(union,)i(if)e(you)h(will,)f(of)g(possible)j
(reply)f(messages)g(\226)e(one)h(that)0 2001 y(contains)c(the)e(normal)
g(reply)-6 b(,)21 b(one)e(that)h(identi\002es)g(a)e(system)i(e)o
(xception,)h(and)f(one)f(that)g(identi\002es)i(a)d(user)h(e)o
(xception.)30 b(The)2 2114 y Fv(P)t(R)t(E)t(S)p 194 2114
V 39 w(C)25 b FC(represents)h(this)d(as)g(w)o(ould)h(be)f(e)o(xpected,)
i(a)d(union)j(of)e(the)g(three)h(possible)h(reply)f(messages,)h(the)e
(en)l(vironment)0 2227 y(or)32 b(status)h(code)g(in)e(the)i(reply)f
(being)i(the)e(discriminator)j(as)c(to)h(which)g(message)h(actually)h
(e)o(xists)f(on)f(the)g(wire.)54 b(The)0 2340 y(method)28
b(of)e(communicating)k(the)d(e)o(xception)i(to)d(the)i(user)f(is)f
(handled)j(mostly)f(by)e(the)h(back)h(end;)h(only)f(the)f(presented)0
2452 y(type)d(and)g(name)g(of)f(the)h(parameter)h(is)f(speci\002ed)h
(in)e(the)j Fv(P)t(R)t(E)t(S)p 2022 2452 V 39 w(C)r FC(.)0
2759 y Ft(7.2)119 b(PRES)p 581 2759 36 4 v 44 w(C)30
b(Data)f(Structur)n(es)0 2970 y FC(The)f(top-le)n(v)o(el)k
Fv(P)t(R)t(E)t(S)p 710 2970 28 4 v 40 w(C)d FC(structure)i(is)e
(de\002ned)g(in)f Fy(mom/pres_c.x)p FC(.)40 b(This)28
b(structure)j(contains)g(the)d(necessary)33 b Fv(M)t(I)t(N)t(T)r
FC(,)2 3083 y Fv(C)t(A)t(S)t(T)r FC(,)24 b(and)g(tag)g(information)i
(for)e(producing)i(stubs)f(and)f(an)o(y)f(associated)k(presentation.)0
3309 y Fy(struct)46 b(pres_c_1)0 3422 y({)382 3535 y(mint_1)285
b(mint;)382 3648 y(cast_1)g(cast;)382 3761 y(cast_1)g(stubs_cast;)382
3874 y(cast_1)g(pres_cast;)382 3987 y(aoi)429 b(a;)382
4100 y(pres_c_stub)45 b(stubs<>;)382 4213 y(string)285
b(pres_context<>;)382 4326 y(cast_expr)141 b(error_mappings<>;)382
4439 y(data_channel_mask)329 b(unpresented_channels<>;)382
4551 y(tag_list)189 b(*pres_attrs;)382 4664 y(meta)381
b(meta_data;)382 4777 y(int)429 b(cast_language;)0 4890
y(};)141 5114 y FC(Ho)n(w)30 b(indi)n(vidual)j(elements)g(in)e(the)i
Fv(M)t(I)t(N)t(T)h FC(and)f Fv(C)t(A)t(S)t(T)h FC(structures)g(link)d
(together)i(is)e(speci\002ed)h(by)g(four)f(kinds)h(of)0
5227 y(data)24 b(types.)31 b(First,)24 b(stub)g(types)h(describe)h(the)
e(functions)i(generated)h(by)d(Flick)g(necessary)i(for)e(the)i
Fv(I)t(P)t(C)h FC(model.)j(Second,)0 5340 y(inline)36
b(data)g(structures)i(tra)n(v)o(erse)f(the)g Fv(M)t(I)t(N)t(T)h
FC(data)e(structure,)k(or)35 b(link)h(together)h(a)f
Fv(M)t(I)t(N)t(T)j FC(interf)o(ace)e(type)f(to)f(one)g(or)p
eop
%%Page: 109 109
109 108 bop 0 -165 a Fx(7.2.)51 b(PRES)p 411 -165 28
4 v 31 w(C)23 b(D)l(A)-10 b(T)i(A)21 b(STR)l(UCTURES)2409
b FC(109)0 91 y(more)24 b(C)g(function)i(parameters.)34
b(Third,)25 b(mapping)g(data)h(structures)h(map)d(one)h(C)e(function)k
(parameter)f(in)e(to)h(the)h Fv(M)t(I)t(N)t(T)r FC(.)0
204 y(Finally)-6 b(,)32 b(allocation)g(types)f(describe)h(the)d
(allocation)k(semantics)e(associated)i(with)c(v)n(arious)i(pieces)g(of)
f(the)g(generated)0 317 y(code.)141 431 y(Let)23 b(us)h(look)g(at)f
(each)i(aspect)f(of)g(the)i Fv(P)t(R)t(E)t(S)p 1527 431
V 39 w(C)f FC(structure)h(in)d(more)h(detail.)0 687 y
FA(7.2.1)99 b(Stub)26 b(T)-7 b(ypes)0 864 y FC(Stubs)32
b(come)h(in)f(tw)o(o)g(forms.)55 b(The)31 b(\002rst)h(form)g
(transforms)i(data)f(between)h(a)f Fv(M)t(I)t(N)t(T)j
FC(interf)o(ace)e(type)f(and)g(a)e(comple)o(x)0 977 y(data)f
(structure.)48 b(These)30 b(stubs)g(are)g(called)g(marshal)h(and)e
(unmarshal)j(stubs.)47 b(The)29 b(second)i(and)e(more)h(common)f(form)0
1090 y(implements)38 b(the)g Fv(I)t(P)t(C)h FC(mechanism)e(between)g
(client)h(and)e(serv)o(er)-5 b(.)67 b(These)37 b(are)f(kno)n(wn)g(as)g
(client)i(stubs)f(and)f(serv)o(er)0 1203 y(sk)o(eletons)26
b(\(or)e(dispatch)i(routines\).)0 1422 y Fy(union)46
b(pres_c_stub)0 1535 y(switch)g(\(pres_c_stub_kind)d(kind\))0
1648 y({)382 1761 y(case)j(PRES_C_MARSHAL_STUB:)329 b
(pres_c_marshal_stub)234 b(mstub;)382 1874 y(case)46
b(PRES_C_UNMARSHAL_STUB:)233 b(pres_c_marshal_stub)h(ustub;)382
1987 y(case)46 b(PRES_C_CLIENT_STUB:)377 b(pres_c_client_stub)282
b(cstub;)382 2099 y(case)46 b(PRES_C_SERVER_STUB:)377
b(pres_c_server_stub)282 b(sstub;)382 2212 y(case)46
b(PRES_C_CLIENT_SKEL:)377 b(pres_c_skel)618 b(cskel;)382
2325 y(case)46 b(PRES_C_SERVER_SKEL:)377 b(pres_c_skel)618
b(sskel;)382 2438 y(case)46 b(PRES_C_SEND_STUB:)473 b(pres_c_msg_stub)
426 b(send_stub;)382 2551 y(case)46 b(PRES_C_RECV_STUB:)473
b(pres_c_msg_stub)426 b(recv_stub;)382 2664 y(case)46
b(PRES_C_MESSAGE_MARSHAL_STU)o(B:)137 b(pres_c_msg_marshal_stub)232
b(mmstub;)382 2777 y(case)46 b(PRES_C_MESSAGE_UNMARSHAL_S)o(TUB:)41
b(pres_c_msg_marshal_stub)232 b(mustub;)382 2890 y(case)46
b(PRES_C_CONTINUE_STUB:)281 b(pres_c_continue_stub)186
b(continue_stub;)0 3003 y(};)141 3221 y FC(Let)23 b(us)h(look)g(at)f
(each)k Fv(P)t(R)t(E)t(S)p 1045 3221 V 39 w(C)e FC(stub)f(type)g(in)g
(more)f(detail.)0 3474 y Fy(PRES)p 198 3474 29 4 v 33
w(C)p 279 3474 V 34 w(MARSHAL)p 649 3474 V 33 w(STUB)p
Fz(,)e Fy(PRES)p 1110 3474 V 33 w(C)p 1191 3474 V 35
w(UNMARSHAL)p 1658 3474 V 31 w(STUB)0 3650 y FC(Speci\002es)h(a)e(stub)
i(function)i(which)d(marshals/unmarshals)26 b(a)21 b(data)h(structure.)
30 b(Although)23 b(the)o(y)e(are)h(generated)h(for)f(e)n(v)o(ery)0
3763 y(data)29 b(type)f(de\002ned)h(in)f(the)i Fv(I)t(D)t(L)h
FC(\(and)e(in)f(some)g(cases)h(the)f(presentation)k(itself\),)e(these)f
(stubs)g(are)g(only)f(really)i(needed)0 3876 y(to)h(handle)i(the)e
(comple)o(x)h(structures)i(which)d(don')n(t)h(ha)n(v)o(e)g(a)f(def)o
(ault)i(mapping)f(onto)g(a)g Fv(M)t(I)t(N)t(T)j FC(type.)51
b(Structures)33 b(with)0 3989 y(pointers)26 b(often)e(f)o(all)g(into)g
(this)g(cate)o(gory)-6 b(.)141 4103 y(Implementationally)g(,)26
b(both)21 b(marshal)h(and)f(unmarshal)i(stubs)f(are)f(represented)j(by)
d(the)g(same)g(data)g(structure.)30 b(Ho)n(w-)0 4216
y(e)n(v)o(er)l(,)24 b(the)o(y)g(are)f(separate)j(members)e(of)f(the)h
(stub)g(union,)h(and)f(should)h(thus)f(be)g(treated)h(separately)-6
b(.)141 4330 y(The)24 b(marshal/unmarshal)29 b(structure)e(contains)g
(references)h(to)c(the)h(stub)h(function)h(de\002nition)f(in)f(the)i
Fv(C)t(A)t(S)t(T)r FC(,)f(and)f(to)0 4443 y(the)g(interf)o(ace)j(type)d
(in)g(the)i Fv(M)t(I)t(N)t(T)r FC(.)34 b(The)25 b Fy(pres_c_inline)c
FC(structure)27 b(links)f(them)f(together)-5 b(.)35 b(The)24
b Fy(seethru_map)e FC(slot)0 4556 y(e)o(xports)j(the)f(internal)h(w)o
(orkings)g(of)f(the)g(stub)g(so)g(that)g(it)f(can)h(be)f(easily)i
(inlined)g(in)f(other)g(code.)0 4775 y Fy(struct)46 b
(pres_c_marshal_stub)d(/*)k(Both)f(marshal)g(and)h(unmarshal)e(*/)0
4888 y({)382 5001 y(cast_ref)427 b(c_func;)382 5114 y(mint_ref)g
(itype;)382 5227 y(pres_c_inline)187 b(i;)382 5340 y(/*)47
b(How)g(the)g(connection)e(to)i(marshal)f(to)h(is)g(specified.)93
b(*/)p eop
%%Page: 110 110
110 109 bop 0 -165 a FC(110)969 b Fx(CHAPTER)20 b(7.)51
b(PRESENT)-8 b(A)e(TION)18 b(IN)23 b(C/C++)g(\(PRES)p
2986 -165 28 4 v 31 w(C\))g(REPRESENT)-8 b(A)e(TION)382
91 y Fy(pres_c_inline)139 b(target_i;)382 317 y(/*)47
b(The)g(PRES_C)f(mapping)g(that)g(allows)h(us)g(to)g("see)g(through")e
(or)i("see)g(into")525 430 y(this)g(stub.)94 b(We)47
b(need)g(this)f(mapping)g(when)h(we)g(want)f(to)i(inline)e(the)h(body)f
(of)525 543 y(this)h(marshal)e(stub)i(into)g(a)g(client)f(stub,)h(a)g
(server)f(function,)f(etc.)i(*/)382 656 y(pres_c_mapping)d
(seethru_map;)0 769 y(};)0 1021 y(PRES)p 198 1021 29
4 v 33 w(C)p 279 1021 V 34 w(CLIENT)p 601 1021 V 33 w(STUB)0
1198 y FC(This)24 b(is)g(a)g(representation)k(of)c(a)g(client)h(stub)l
(.)31 b(References)c(are)d(k)o(ept)h(to)f(the)g(function)j
(de\002nition)e(in)f(the)j Fv(C)t(A)t(S)t(T)g FC(structure)0
1310 y(and)c(to)f(the)h(request)h(and)f(reply)g(interf)o(ace)h(types)g
(in)e(the)j Fv(M)t(I)t(N)t(T)g FC(structures.)31 b(T)-7
b(w)o(o)21 b Fy(pres_c_inline)d FC(structures)25 b(link)e(the)0
1423 y(request)i(and)f(reply)h(types)f(to)g(the)g(C)e(function)k
(parameters)f(in)f(the)i Fv(C)t(A)t(S)t(T)r FC(.)0 1642
y Fy(struct)46 b(pres_c_client_stub)0 1755 y({)382 1868
y(cast_ref)761 b(c_func;)382 1981 y(pres_c_stub_op_flags)185
b(op_flags;)382 2094 y(mint_ref)761 b(request_itype;)382
2207 y(mint_ref)g(reply_itype;)382 2320 y(pres_c_inline)521
b(request_i;)382 2433 y(pres_c_inline)g(reply_i;)382
2546 y(mint_ref)761 b(target_itype;)382 2659 y(pres_c_inline)521
b(target_i;)382 2772 y(mint_ref)761 b(client_itype;)382
2884 y(pres_c_inline)521 b(client_i;)382 2997 y(mint_ref)761
b(error_itype;)382 3110 y(pres_c_inline)521 b(error_i;)0
3223 y(};)0 3476 y(PRES)p 198 3476 V 33 w(C)p 279 3476
V 34 w(SERVER)p 601 3476 V 33 w(SKEL)p Fz(,)21 b Fy(PRES)p
1062 3476 V 34 w(C)p 1144 3476 V 34 w(CLIENT)p 1466 3476
V 33 w(SKEL)0 3652 y FC(F)o(or)28 b(each)i(interf)o(ace)h(there)f(is)f
(at)f(least)i(a)f(serv)o(er)n(-side)i(sk)o(eleton)h(in)c(the)k
Fv(P)t(R)t(E)t(S)p 2535 3652 28 4 v 39 w(C)e FC(structure.)47
b(In)29 b(some)g(cases,)i(a)e(client-)0 3765 y(side)f(sk)o(eleton)i
(will)d(also)h(e)o(xist)g(if)f(you)h(ha)n(v)o(e)g(selected)i(the)e
(decomposed)i(stubs)e(option.)42 b(In)28 b(both)g(cases,)h(the)f(sk)o
(eleton)0 3878 y(structure)38 b(holds)f(a)e(reference)j(to)e(the)i
Fv(C)t(A)t(S)t(T)h FC(for)c(the)h(function)i(prototype,)k(the)36
b(root)i Fv(M)t(I)t(N)t(T)h FC(for)d(all)f(incoming)j(and)0
3991 y(outgoing)26 b(messages,)f(and)f(the)g(list)g(of)f(supported)j
(functions)g(to)e(which)g(the)g(sk)o(eleton)h(can)f(dispatch.)141
4105 y(F)o(ollo)n(wing)g(are)g(the)g(data)g(structures)i(rele)n(v)n
(ant)f(to)e(both)i(client)f(and)g(serv)o(er)h(sk)o(eletons:)0
4324 y Fy(struct)46 b(pres_c_skel)0 4437 y({)382 4550
y(cast_ref)761 b(c_def;)382 4663 y(mint_ref)g(request_itype;)382
4775 y(mint_ref)g(reply_itype;)382 4888 y(pres_c_func)617
b(funcs<>;)0 5001 y(};)0 5227 y(struct)46 b(pres_c_server_func)0
5340 y({)p eop
%%Page: 111 111
111 110 bop 0 -165 a Fx(7.2.)51 b(PRES)p 411 -165 28
4 v 31 w(C)23 b(D)l(A)-10 b(T)i(A)21 b(STR)l(UCTURES)2409
b FC(111)382 91 y Fy(cast_ref)761 b(c_func;)382 204 y
(pres_c_stub_op_flags)185 b(op_flags;)382 317 y(mint_ref)761
b(simple_msg_itype;)382 430 y(pres_c_inline)521 b(msg_i;)382
543 y(mint_ref)761 b(target_itype;)382 656 y(pres_c_inline)521
b(target_i;)382 769 y(mint_ref)761 b(client_itype;)382
882 y(pres_c_inline)521 b(client_i;)382 995 y(mint_ref)761
b(error_itype;)382 1108 y(pres_c_inline)521 b(error_i;)0
1220 y(};)141 1409 y FC(A)24 b Fy(pres_c_func)d FC(is)j(either)i(a)e
Fy(pres_c_server_func)19 b FC(or)25 b Fy(pres_c_receive_func)p
FC(,)19 b(depending)28 b(on)c(the)h(stub)0 1522 y(model)e(in)g(place)g
(\(typical)k Fv(R)t(P)t(C)e FC(or)d(e)n(v)o(ent-based)k(message)d
(passing\).)31 b(Each)23 b(is)f(de\002ned)i(almost)f(identical)i(to)d
(the)h Fy(pres_)0 1635 y(c_client_stub)c FC(abo)o(v)o(e.)0
1876 y Fy(PRES)p 198 1876 29 4 v 33 w(C)p 279 1876 V
34 w(SEND)p 505 1876 V 34 w(STUB)p Fz(,)i Fy(PRES)p 967
1876 V 33 w(C)p 1048 1876 V 34 w(RECV)p 1274 1876 V 34
w(STUB)0 2051 y FC(These)29 b(stubs)h(are)f(used)h(in)f(an)g(e)n(v)o
(ent)g(based)h(system)g(to)f(send)g(or)g(recei)n(v)o(e)h(a)f
(pre-marshaled)j(message.)46 b(Note)28 b(that)i(the)0
2164 y(tar)n(get)24 b(object)g(is)e(still)h(associated)i(with)e(the)f
(send)i(or)e(recei)n(v)o(e)i(stub)l(.)29 b(This)22 b(f)o(acilitates)j
(the)e(reusability)j(of)c(pre-marshaled)0 2276 y(messages,)g(in)e(that)
h(the)o(y)g(can)f(be)h(cached)g(and/or)h(sent)f(to)f(multiple)i(tar)n
(gets.)29 b(These)21 b(stubs)g(are)g(non-blocking)j(so)c(w)o(aiting)0
2389 y(for)k(or)f(producing)k(a)c(reply)h(must)g(be)f(done)i(e)o
(xplicitly)-6 b(.)0 2578 y Fy(struct)46 b(pres_c_msg_stub)0
2691 y({)382 2803 y(cast_ref)379 b(c_func;)382 2916 y(mint_ref)g
(msg_itype;)382 3029 y(pres_c_inline)139 b(msg_i;)382
3142 y(mint_ref)379 b(target_itype;)382 3255 y(pres_c_inline)139
b(target_i;)382 3368 y(int)47 b(request;)0 3481 y(};)0
3723 y(PRES)p 198 3723 V 33 w(C)p 279 3723 V 34 w(MESSAGE)p
649 3723 V 33 w(MARSHAL)p 1018 3723 V 32 w(STUB)p Fz(,)22
b Fy(PRES)p 1479 3723 V 33 w(C)p 1560 3723 V 34 w(MESSAGE)p
1930 3723 V 32 w(UNMARSHAL)p 2394 3723 V 32 w(STUB)0
3897 y FC(These)31 b(stubs)g(are)f(used)i(to)e(marshal)h(and)g
(unmarshal)h(a)e(complete)i(message)f(corresponding)k(to)30
b(a)g(speci\002c)h(interf)o(ace)0 4010 y(operation.)g(These)22
b(are)g(used)g(to)g(b)n(uild)h(or)f(decode)h(the)f(pre-marshaled)j
(messages)f(used)e(by)g(the)g(send)h(and)f(recei)n(v)o(e)h(stubs)0
4123 y(described)j(abo)o(v)o(e.)0 4311 y Fy(struct)46
b(pres_c_msg_marshal_stub)0 4424 y({)382 4537 y(cast_ref)761
b(c_func;)382 4650 y(pres_c_stub_op_flags)185 b(op_flags;)382
4763 y(mint_ref)761 b(itype;)382 4876 y(pres_c_inline)521
b(i;)382 4989 y(int)1001 b(client;)382 5102 y(int)g(request;)382
5214 y(string)857 b(reply_handler_name<>;)0 5327 y(};)p
eop
%%Page: 112 112
112 111 bop 0 -165 a FC(112)969 b Fx(CHAPTER)20 b(7.)51
b(PRESENT)-8 b(A)e(TION)18 b(IN)23 b(C/C++)g(\(PRES)p
2986 -165 28 4 v 31 w(C\))g(REPRESENT)-8 b(A)e(TION)0
91 y Fy(PRES)p 198 91 29 4 v 33 w(C)p 279 91 V 34 w(CONTINUE)p
697 91 V 33 w(STUB)0 270 y FC(A)27 b(continuation)33
b(stub)c(is)g(used)g(to)g(notify)h(the)f(runtime)g(that)h(a)e(w)o(ork)g
(function)j(has)e(not)g(fully)h(completed,)h(b)n(ut)f(w)o(ould)0
383 y(lik)o(e)24 b(to)g(defer)g(its)g(computation)i(until)e(a)g(later)g
(time.)0 608 y Fy(struct)46 b(pres_c_continue_stub)0
721 y({)382 834 y(cast_ref)379 b(c_func;)382 947 y(mint_ref)g(itype;)
382 1059 y(pres_c_inline)139 b(i;)382 1172 y(int)47 b(request;)0
1285 y(};)0 1547 y FA(7.2.2)99 b(Pr)n(esentation)26 b(Attrib)n(ute)g(T)
-7 b(ypes)0 1725 y FC(The)23 b Fy(tag_data)e FC(structure)26
b(is)d(used)i(to)e(hold)i(arbitrary)h(information,)g(b)n(ut)e(with)f(a)
h(particular)i(semantic)f(meaning.)30 b(This)0 1838 y(pro)o(vides)g
(the)d(hooks)i(necessary)i(for)c(a)h(back)g(end)g(to)g(generate)i
(appropriate)g(implementations)h(for)d(certain)h(pieces)g(of)0
1951 y(the)22 b(presentation.)31 b(F)o(or)21 b(e)o(xample,)i(a)e(smart)
h(pointer)h(class)f(for)g(a)f(data)i(type)f(is)f(something)j(de\002ned)
e(by)g(the)g(presentation.)0 2064 y(Ho)n(we)n(v)o(er)l(,)27
b(the)h(implementation)i(must)c(be)h(gi)n(v)o(en)h(by)f(the)g(back)h
(end.)40 b(The)26 b(tags)i(are)f(used)h(to)f(gi)n(v)o(e)g(semantic)h
(meaning)0 2177 y(to)23 b(the)h(presentation)j(pieces,)e(allo)n(wing)g
(the)e(back)i(end)f(to)f(generate)j(an)d(appropriate)k(implementation.)
141 2292 y(In)32 b(general,)k(tags)d(are)f(stored)i(in)e(a)g
Fy(tag_list)p FC(,)f(which)h(pro)o(vides)i(a)e(hierarchical)k(list)c
(structure.)57 b(Lists)32 b(contain)0 2405 y Fy(tag_item)p
FC(s,)c(which)i(hold)g(a)f(tag)h(name)f(and)h(its)g(corresponding)k
(data.)47 b(The)29 b(follo)n(wing)i(is)e(the)h(de\002nition)h(of)e(the)
h(tag)0 2518 y(infrastructure)d(in)d(the)i Fv(P)t(R)t(E)t(S)p
934 2518 28 4 v 39 w(C)f FC(\002le:)0 2743 y Fy(/*)47
b(Tags)g(are)g(used)f(for)h(storing)f(generic)g(data)h(which)143
2856 y(have)g(some)f(properties)f(specified)h(by)h(the)g(tag)g(*/)0
2969 y(enum)g(tag_data_kind)0 3082 y({)382 3195 y(TAG_NONE)1143
b(=)48 b(0x0001,)382 3308 y(...)382 3421 y(TAG_CAST_INIT)903
b(=)48 b(0x000f,)382 3646 y(TAG_ANY_ARRAY)903 b(=)48
b(0x8002,)382 3759 y(...)382 3872 y(TAG_CAST_INIT_ARRAY)615
b(=)48 b(0x800f)0 3985 y(};)0 4098 y(const)e(TAG_ARRAY)1191
b(=)48 b(0x8000;)0 4324 y(typedef)e(struct)g(tag_list)f(*tag_list_ptr;)
0 4437 y(typedef)h(string)g(tag_string_array<>;)0 4550
y(typedef)g(char)142 b(tag_object_array<>;)0 4775 y(union)46
b(tag_data)0 4888 y(switch)g(\(tag_data_kind)e(kind\))0
5001 y({)382 5114 y(case)i(TAG_NONE:)1239 b(void;)382
5227 y(case)46 b(TAG_ANY:)1287 b(void;)382 5340 y(case)46
b(TAG_TAG_LIST:)1047 b(tag_list_ptr)569 b(tl;)p eop
%%Page: 113 113
113 112 bop 0 -165 a Fx(7.2.)51 b(PRES)p 411 -165 28
4 v 31 w(C)23 b(D)l(A)-10 b(T)i(A)21 b(STR)l(UCTURES)2409
b FC(113)382 91 y Fy(case)46 b(TAG_BOOL:)1239 b(char)953
b(b;)382 204 y(case)46 b(TAG_STRING:)1143 b(string)857
b(str<>;)382 317 y(case)46 b(TAG_INTEGER:)1095 b(int)1001
b(i;)382 430 y(case)46 b(TAG_FLOAT:)1191 b(float)905
b(f;)382 543 y(case)46 b(TAG_REF:)1287 b(string)857 b(ref<>;)382
656 y(case)46 b(TAG_OBJECT:)1143 b(tag_object_array)377
b(obj;)382 769 y(case)46 b(TAG_CAST_SCOPED_NAME:)663
b(cast_scoped_name)377 b(scname;)382 882 y(case)46 b(TAG_CAST_DEF:)1047
b(cast_def_t)665 b(cdef;)382 995 y(case)46 b(TAG_CAST_TYPE:)999
b(cast_type)713 b(ctype;)382 1108 y(case)46 b(TAG_CAST_EXPR:)999
b(cast_expr)713 b(cexpr;)382 1220 y(case)46 b(TAG_CAST_STMT:)999
b(cast_stmt)713 b(cstmt;)382 1333 y(case)46 b(TAG_CAST_INIT:)999
b(cast_init)713 b(cinit;)382 1559 y(case)46 b(TAG_TAG_LIST_ARRAY:)764
1672 y(tag_list_ptr)569 b(tl_a<>;)382 1785 y(case)46
b(TAG_BOOL_ARRAY:)764 1898 y(char)953 b(b_a<>;)382 2011
y(case)46 b(TAG_STRING_ARRAY:)764 2124 y(tag_string_array)377
b(str_a<>;)382 2237 y(case)46 b(TAG_INTEGER_ARRAY:)764
2350 y(int)1001 b(i_a<>;)382 2462 y(case)46 b(TAG_FLOAT_ARRAY:)764
2575 y(float)905 b(f_a<>;)382 2688 y(case)46 b(TAG_REF_ARRAY:)764
2801 y(tag_string_array)377 b(ref_a<>;)382 2914 y(case)46
b(TAG_OBJECT_ARRAY:)764 3027 y(tag_object_array)377 b(obj_a<>;)382
3140 y(case)46 b(TAG_CAST_SCOPED_NAME_ARRAY)o(:)764 3253
y(cast_scoped_name)377 b(scname_a<>;)382 3366 y(case)46
b(TAG_CAST_DEF_ARRAY:)764 3479 y(cast_def_t)665 b(cdef_a<>;)382
3592 y(case)46 b(TAG_CAST_TYPE_ARRAY:)764 3704 y(cast_type)713
b(ctype_a<>;)382 3817 y(case)46 b(TAG_CAST_EXPR_ARRAY:)764
3930 y(cast_expr)713 b(cexpr_a<>;)382 4043 y(case)46
b(TAG_CAST_STMT_ARRAY:)764 4156 y(cast_stmt)713 b(cstmt_a<>;)382
4269 y(case)46 b(TAG_CAST_INIT_ARRAY:)764 4382 y(cast_init)713
b(cinit_a<>;)0 4495 y(};)0 4721 y(struct)46 b(tag_item)0
4834 y({)382 4946 y(string)475 b(tag<>;)382 5059 y(tag_data)379
b(data;)0 5172 y(};)p eop
%%Page: 114 114
114 113 bop 0 -165 a FC(114)969 b Fx(CHAPTER)20 b(7.)51
b(PRESENT)-8 b(A)e(TION)18 b(IN)23 b(C/C++)g(\(PRES)p
2986 -165 28 4 v 31 w(C\))g(REPRESENT)-8 b(A)e(TION)0
91 y Fy(struct)46 b(tag_list)0 204 y({)382 317 y(struct)g(tag_list)f
(*parent;)382 430 y(tag_item)379 b(items<>;)0 543 y(};)0
790 y FA(7.2.3)99 b(Inline)25 b(T)-7 b(ypes)2 964 y Fv(P)t(R)t(E)t(S)p
194 964 V 39 w(C)23 b FC(inline)g(types)f(are)g(used)g(to)g(map)f
(between)i(high-le)n(v)o(el)i Fv(M)t(I)t(N)t(T)g FC(and)f
Fv(C)t(A)t(S)t(T)g FC(types)f(and)f(also)g(to)f(tra)n(v)o(erse)i(the)h
Fv(M)t(I)t(N)t(T)0 1077 y FC(or)29 b Fv(C)t(A)t(S)t(T)h
FC(structures)f(separately)h(without)e(directly)h(mapping)f(between)g
(the)g(tw)o(o.)38 b(The)o(y)27 b(control)i(the)e(presentation)j(of)0
1190 y(interf)o(aces)c(to)e(the)f(gi)n(v)o(en)i(language)g(and)f
(control)i(stub)e(generation.)0 1388 y Fy(union)46 b(pres_c_inline_u)0
1501 y(switch)g(\(pres_c_inline_kind)d(kind\))0 1614
y({)382 1727 y(case)j(PRES_C_INLINE_ATOM:)764 1840 y
(pres_c_inline_atom)1045 b(atom;)382 2066 y(case)46 b
(PRES_C_INLINE_STRUCT:)764 2179 y(pres_c_inline_struct)949
b(struct_i;)382 2291 y(case)46 b(PRES_C_INLINE_FUNC_PARAMS_)o(STRU)o
(CT:)764 2404 y(pres_c_inline_func_para)o(ms_s)o(tru)o(ct)376
b(func_params_i;)382 2517 y(case)46 b(PRES_C_INLINE_HANDLER_FUNC)o(:)
764 2630 y(pres_c_inline_handler_f)o(unc)662 b(handler_i;)382
2856 y(case)46 b(PRES_C_INLINE_STRUCT_UNION)o(:)764 2969
y(pres_c_inline_struct_un)o(ion)662 b(struct_union;)382
3082 y(case)46 b(PRES_C_INLINE_EXPANDED_UNI)o(ON:)764
3195 y(pres_c_inline_expanded_)o(unio)o(n)567 b(expanded_union;)382
3308 y(case)46 b(PRES_C_INLINE_VOID_UNION:)764 3421 y
(pres_c_inline_void_unio)o(n)758 b(void_union;)382 3533
y(case)46 b(PRES_C_INLINE_COLLAPSED_UN)o(ION:)764 3646
y(pres_c_inline_collapsed)o(_uni)o(on)519 b(collapsed_union;)382
3759 y(case)46 b(PRES_C_INLINE_VIRTUAL_UNIO)o(N:)764
3872 y(pres_c_inline_virtual_u)o(nion)614 b(virtual_union;)382
4098 y(case)46 b(PRES_C_INLINE_TYPED:)764 4211 y(pres_c_inline_typed)
997 b(typed;)382 4437 y(case)46 b(PRES_C_INLINE_THROWAWAY:)764
4550 y(void;)382 4775 y(case)g(PRES_C_INLINE_XLATE:)764
4888 y(pres_c_inline_xlate)997 b(xlate;)382 5001 y(case)46
b(PRES_C_INLINE_ASSIGN:)764 5114 y(pres_c_inline_assign)949
b(assign;)382 5227 y(case)46 b(PRES_C_INLINE_COND:)764
5340 y(pres_c_inline_cond)1045 b(cond;)p eop
%%Page: 115 115
115 114 bop 0 -165 a Fx(7.2.)51 b(PRES)p 411 -165 28
4 v 31 w(C)23 b(D)l(A)-10 b(T)i(A)21 b(STR)l(UCTURES)2409
b FC(115)382 91 y Fy(case)46 b(PRES_C_INLINE_MESSAGE_ATTR)o(IBUT)o(E:)
764 204 y(pres_c_inline_message_a)o(ttri)o(but)o(e)424
b(msg_attr;)382 317 y(case)46 b(PRES_C_INLINE_ALLOCATION_C)o(ONTE)o
(XT:)764 430 y(pres_c_inline_allocatio)o(n_co)o(nte)o(xt)376
b(acontext;)382 543 y(case)46 b(PRES_C_INLINE_TEMPORARY:)764
656 y(pres_c_temporary)1141 b(temp;)382 882 y(case)46
b(PRES_C_INLINE_ILLEGAL:)764 995 y(void;)0 1108 y(};)141
1313 y FC(Let)23 b(us)h(look)g(at)f(each)k Fv(P)t(R)t(E)t(S)p
1045 1313 V 39 w(C)e FC(inline)g(type)f(in)f(detail.)0
1558 y Fy(PRES)p 198 1558 29 4 v 33 w(C)p 279 1558 V
34 w(INLINE)p 601 1558 V 33 w(ATOM)f Fz(T)-7 b(ype)0
1732 y FC(This)27 b(is)g(the)h(fundamental)i(inline)e(type)g(and)g(is)f
(used)h(to)f(map)g(one)h(single,)h(simple)h Fv(M)t(I)t(N)t(T)g
FC(type)e(to)f(one)h(single)h(C)d(type.)0 1845 y(It)d(also)h(marks)f
(the)h(transition)h(from)e(inline)i(mode)e(to)g(mapping)i(mode,)e(by)g
(selecting)28 b Fv(C)t(A)t(S)t(T)e FC(member)d Fy(index)e
FC(from)i(the)0 1958 y(current)i(inline)g(state)f(and)g(passing)i(that)
e(to)f(the)h(mapping.)0 2164 y Fy(struct)46 b(pres_c_inline_atom)0
2277 y({)382 2389 y(pres_c_inline_index)233 b(index;)382
2502 y(pres_c_mapping)473 b(mapping;)0 2615 y(};)0 2860
y(PRES)p 198 2860 V 33 w(C)p 279 2860 V 34 w(INLINE)p
601 2860 V 33 w(STRUCT)21 b Fz(T)-7 b(ype)0 3034 y FC(This)27
b(inline)g(type)h(contains)h(one)e Fy(pres_c_inline)22
b FC(structure)29 b(for)e(each)h(struct)f(member)-5 b(.)39
b(This)26 b(usually)j(corresponds)0 3147 y(to)23 b(a)h(container)i(of)d
(some)h(kind,)g(or)f(something)j(in)d(the)h(C)e(and)k
Fv(M)t(I)t(N)t(T)h FC(with)c(multiple)i(attrib)n(utes.)0
3353 y Fy(struct)46 b(pres_c_inline_struct)0 3466 y({)382
3579 y(pres_c_inline)521 b(slots<>;)0 3692 y(};)0 3936
y(PRES)p 198 3936 V 33 w(C)p 279 3936 V 34 w(INLINE)p
601 3936 V 33 w(STRUCT)p 922 3936 V 33 w(UNION)21 b Fz(T)-7
b(ype)0 4111 y FC(This)36 b(inline)i(type)f(maps)f(a)i
Fv(M)t(I)t(N)t(T)h FC(union)f(into)f(a)f(C)f(struct)i(containing)j(a)c
(discriminator)j(tag)d(and)h(the)g(union.)68 b(F)o(or)0
4223 y(e)o(xample,)24 b(a)f Fy(MINT_UNION)d FC(containing)27
b(a)c Fy(MINT_INTEGER)c FC(and)24 b Fy(MINT_CHAR)d FC(might)i(ha)n(v)o
(e)i(a)e(C)f(mapping)j(lik)o(e)f(this:)0 4429 y Fy(struct)46
b(example_union)0 4542 y({)191 4655 y(mint_type_tag)e(kind;)191
4768 y(union)191 4881 y({)382 4994 y(int)j(i;)382 5107
y(char)f(c;)191 5220 y(})0 5332 y(})p eop
%%Page: 116 116
116 115 bop 0 -165 a FC(116)969 b Fx(CHAPTER)20 b(7.)51
b(PRESENT)-8 b(A)e(TION)18 b(IN)23 b(C/C++)g(\(PRES)p
2986 -165 28 4 v 31 w(C\))g(REPRESENT)-8 b(A)e(TION)0
91 y Fy(struct)46 b(pres_c_inline_struct_unio)o(n_c)o(ase)0
204 y({)382 317 y(int)1001 b(index;)382 430 y(pres_c_mapping)473
b(mapping;)0 543 y(};)0 769 y(struct)46 b(pres_c_inline_struct_unio)o
(n)0 882 y({)382 995 y(pres_c_inline_atom)1045 b(discrim;)382
1108 y(pres_c_inline_index)997 b(union_index;)382 1220
y(pres_c_inline_struct_uni)o(on_)o(case)423 b(cases<>;)382
1333 y(pres_c_inline_struct_uni)o(on_)o(case)g(*dfault;)0
1446 y(};)0 1700 y(PRES)p 198 1700 29 4 v 33 w(C)p 279
1700 V 34 w(INLINE)p 601 1700 V 33 w(VOID)p 826 1700
V 33 w(UNION)22 b Fz(T)-7 b(ype)0 1877 y FC(This)26 b(inline)h(type)g
(maps)f(a)i Fv(M)t(I)t(N)t(T)h FC(union)f(into)e(a)g(C)f(struct)i
(containing)i(a)d(discriminator)j(tag)e(and)f(a)g Fy(void)46
b(*)25 b FC(pointer)j(to)0 1990 y(the)c(data.)29 b(The)23
b(pre)n(vious)j(e)o(xample)e(no)n(w)f(might)h(ha)n(v)o(e)g(a)f(C)g
(mapping)i(lik)o(e)f(this:)0 2211 y Fy(struct)46 b(example_union)0
2324 y({)191 2437 y(mint_type_tag)e(kind;)191 2550 y(void)j(*data;)0
2662 y(})0 2882 y(struct)f(pres_c_inline_void_union_)o(cas)o(e)0
2995 y({)382 3108 y(cast_expr)f(case_value;)382 3221
y(cast_type)g(type;)382 3333 y(pres_c_mapping)f(mapping;)0
3446 y(};)0 3672 y(struct)i(pres_c_inline_void_union)0
3785 y({)382 3898 y(pres_c_inline_atom)1045 b(discrim;)382
4011 y(pres_c_inline_index)997 b(void_index;)382 4124
y(pres_c_inline_void_union)o(_ca)o(se)519 b(cases<>;)382
4237 y(pres_c_inline_void_union)o(_ca)o(se)g(*dfault;)0
4350 y(};)0 4604 y(PRES)p 198 4604 V 33 w(C)p 279 4604
V 34 w(INLINE)p 601 4604 V 33 w(EXPANDED)p 1018 4604
V 32 w(UNION)22 b Fz(T)-7 b(ype)0 4781 y FC(This)22 b(inline)h(type)f
(maps)g(a)h Fv(M)t(I)t(N)t(T)i FC(union)e(into)g(a)e(C)g(struct)i
(containing)h(a)e(discriminator)j(tag)d(and)g(slots)h(for)f(each)g
(member)0 4893 y(of)h(the)h(union.)30 b(This)24 b(isn')n(t)g(currently)
i(used)f(in)e(Flick.)0 5114 y Fy(struct)46 b(pres_c_inline_expanded_un)
o(ion)0 5227 y({)382 5340 y(pres_c_inline_atom)281 b(discrim;)p
eop
%%Page: 117 117
117 116 bop 0 -165 a Fx(7.2.)51 b(PRES)p 411 -165 28
4 v 31 w(C)23 b(D)l(A)-10 b(T)i(A)21 b(STR)l(UCTURES)2409
b FC(117)382 91 y Fy(pres_c_inline)521 b(cases<>;)382
204 y(pres_c_inline)g(dfault;)0 317 y(};)0 563 y(PRES)p
198 563 29 4 v 33 w(C)p 279 563 V 34 w(INLINE)p 601 563
V 33 w(COLLAPSED)p 1066 563 V 32 w(UNION)21 b Fz(T)-7
b(ype)0 737 y FC(This)20 b(inline)h(type)f(forces)i(the)e(selection)i
(of)e(a)f(gi)n(v)o(en)i(member)f(of)f(union.)29 b(Only)20
b(unions)i(with)d(this)i(member)f(selected)i(will)0 850
y(be)28 b(accepted.)45 b(This)28 b(type)h(is)f(often)h(used)g(to)f(tra)
n(v)o(erse)i(do)n(wn)e(the)j Fv(M)t(I)t(N)t(T)g FC(structure)g(\(e.g.,)
d(the)h(union)g(of)g(all)f(interf)o(aces,)0 963 y(and)23
b(the)g(union)h(of)f(all)f(operations\))k(until)e(a)e(certain)i
(section)g(of)f(the)i Fv(M)t(I)t(N)t(T)h FC(structure)f(is)d(reached)i
(\(e.g.,)f(the)g(request)h(of)f(a)0 1076 y(speci\002c)h(operation\),)j
(holding)e(\002x)o(ed)e(the)h(v)n(arious)h(unions)g(in)f(the)i
Fv(M)t(I)t(N)t(T)g FC(along)f(this)f(path.)0 1287 y Fy(struct)46
b(pres_c_inline_collapsed_u)o(nio)o(n)0 1400 y({)382
1513 y(mint_const)665 b(discrim_value;)382 1626 y(pres_c_inline)521
b(selected_case;)0 1739 y(};)0 1984 y(PRES)p 198 1984
V 33 w(C)p 279 1984 V 34 w(INLINE)p 601 1984 V 33 w(VIRTUAL)p
970 1984 V 33 w(UNION)21 b Fz(T)-7 b(ype)0 2158 y FC(This)26
b(inline)i(type)f(represents)i(an)d(\223arbitrary\224)k(union.)38
b(It')-5 b(s)27 b(main)f(purpose)j(is)d(to)g(allo)n(w)h(the)f(return)i
(from)e(an)h(operation)0 2271 y(to)22 b(be)g(either)h(the)f(re)o(gular)
h(result,)g(a)f(system)h(error)l(,)g(or)f(a)f(user)n(-de\002ned)k(e)o
(xception.)30 b(Since)22 b(the)g(implementation)j(is)d(really)0
2384 y(left)i(up)g(to)f(the)h(back)g(end,)g(the)g(presentation)j
(generator)f(lea)n(v)o(es)f(this)f(as)f(an)h(arbitrary)h(union)g(of)f
(the)f(three)i(possibilities.)0 2595 y Fy(typedef)46
b(pres_c_inline)e(pres_c_inline_virtual_un)o(ion_)o(case)o(;)0
2821 y(struct)i(pres_c_inline_virtual_uni)o(on)0 2934
y({)382 3047 y(string)g(arglist_name<>;)e(/*)j(Name)f(of)i(associated)d
(arglist.)g(*/)382 3160 y(pres_c_inline_virtual_un)o(ion)o(_cas)o(e)d
(discrim;)382 3273 y(pres_c_inline_virtual_un)o(ion)o(_cas)o(e)g
(cases<>;)382 3386 y(pres_c_inline_virtual_un)o(ion)o(_cas)o(e)g
(dfault;)0 3499 y(};)0 3744 y(PRES)p 198 3744 V 33 w(C)p
279 3744 V 34 w(INLINE)p 601 3744 V 33 w(THROWAWAY)20
b Fz(T)-7 b(ype)0 3919 y FC(V)d(alid)37 b(for)f(recei)n(v)o(e-only)k
(mappings,)h(it)36 b(ignores)i(an)o(y)h Fv(M)t(I)t(N)t(T)g
FC(or)g Fv(C)t(A)t(S)t(T)g FC(that)e(may)f(remain)h(in)g(the)g(current)
h(subtree,)0 4032 y(ef)n(fecti)n(v)o(ely)26 b(thro)n(wing)e(a)o(w)o(ay)
g(their)g(v)n(alues.)0 4277 y Fy(PRES)p 198 4277 V 33
w(C)p 279 4277 V 34 w(INLINE)p 601 4277 V 33 w(ALLOCATION)p
1114 4277 V 32 w(CONTEXT)d Fz(T)-7 b(ype)0 4451 y FC(An)30
b(allocation)k(conte)o(xt)f(is)e(the)h(main)f(structure)i(used)f(for)g
(dealing)h(with)e(all)g(types)h(of)f(allocation.)55 b(It)31
b(does)h(not)f(cor)n(-)0 4564 y(respond)j(to)f(an)o(y)h
Fv(M)t(I)t(N)t(T)i FC(or)e Fv(C)t(A)t(S)t(T)i FC(directly)-6
b(,)36 b(b)n(ut)d(pro)o(vides)i(conte)o(xt)e(for)g(\(usually\))i(a)d
(pointer)i(type,)h(such)f(as)e(length,)0 4677 y(maximum)h(allocation)j
(size,)g(allocation)f(semantics,)i(etc.)58 b(In)33 b(some)g(cases,)j
(these)f(are)e(kno)n(wn)g(constants,)38 b(while)33 b(at)0
4790 y(other)c(times)g(the)g(v)n(alues)h(can)e(be)h(kno)n(wn)g(only)g
(at)f(runtime)i(and)f(are)f(included)j(as)d(part)h(of)g(the)g(data)g
(structure)h(\(e.g.,)g(a)2 4903 y Fv(C)t(O)t(R)t(B)r(A)24
b FC(sequence')-5 b(s)27 b(length)e(and)f(maximum)f(\002elds\).)0
5114 y Fy(struct)46 b(pres_c_inline_allocation_)o(con)o(text)0
5227 y({)382 5340 y(/*)h(Allocation)e(context:)h(*/)p
eop
%%Page: 118 118
118 117 bop 0 -165 a FC(118)969 b Fx(CHAPTER)20 b(7.)51
b(PRESENT)-8 b(A)e(TION)18 b(IN)23 b(C/C++)g(\(PRES)p
2986 -165 28 4 v 31 w(C\))g(REPRESENT)-8 b(A)e(TION)382
91 y Fy(string)46 b(arglist_name<>;)473 b(/*)47 b(Name)g(of)g(the)g
(context's)e(arglist.)h(*/)382 317 y(/*)430 430 y(*)h(XXX)g(-)g(The)g
(arguments)f(below)g(marked)g(with)h(`XXX')f(are)h(NOT)g(IMPLEMENTED.)
430 543 y(*)g(There)f(is)i(minimal)d(support)h(in)h(place)g(for)g
(handling)e(them,)i(but)f(they)h(are)430 656 y(*)g(not)g(currently)e
(being)i(used)f(to)h(support)f(any)h(particular)e(allocation)430
769 y(*)i(semantics.)430 882 y(*/)0 995 y(/*XXX*/)f(pres_c_inline)235
b(offset;)332 b(/*)47 b(First)g(element)e(to)j(m/u)f(*/)382
1108 y(pres_c_inline)235 b(length;)332 b(/*)47 b(#)h(of)f(elements)e
(to)j(m/u)f(*/)382 1220 y(pres_c_inline)235 b(min_len;)284
b(/*)47 b([hard])f(minimum)g(\(usu.)h(IDL)f(const\))h(*/)382
1333 y(pres_c_inline)235 b(max_len;)284 b(/*)47 b([hard])f(maximum)g
(\(usu.)h(IDL)f(const\))h(*/)382 1446 y(pres_c_inline)235
b(alloc_len;)188 b(/*)47 b(allocated)f(#)h(of)g(elements)f(*/)382
1559 y(pres_c_inline)235 b(min_alloc_len;/*)43 b(minimum)j(length)g(of)
h(allocation)e(*/)0 1672 y(/*XXX*/)h(pres_c_inline)235
b(max_alloc_len;/*)43 b(maximum)j(length)g(of)h(allocation)e(*/)382
1785 y(pres_c_inline)235 b(release;)284 b(/*)47 b(release)f(of)h
(struct-owned)e(buffer)h(*/)382 1898 y(pres_c_inline)235
b(terminator;)140 b(/*)47 b(buffer)f(termination)f(*/)382
2011 y(pres_c_inline)235 b(mustcopy;)h(/*)47 b(must)g(copy)g(data)f(to)
h(keep)g(it)g(*/)0 2124 y(/*XXX*/)f(int)715 b(overwrite;)188
b(/*)47 b(`out')g(buffer)f(is)h(preallocated)d(*/)0 2237
y(/*XXX*/)i(allocation_owner)91 b(owner;)380 b(/*)47
b(entity)f(ownership)g(*/)382 2462 y(pres_c_allocation)d(alloc;)380
b(/*)47 b(the)g(allocation)e(semantics)g(*/)382 2688
y(/*)430 2801 y(*)i(The)g(real)g(inline)f(to)h(be)g(handled:)430
2914 y(*)g(`ptr')f(must)h(eventually)e(lead)i(to)g(a)g
(PRES_C_MAPPING_INTERNAL_A)o(RRAY)41 b(node,)430 3027
y(*)47 b(a)g(PRES_C_MAPPING_POINTER)42 b(node,)47 b(or)g(a)g
(PRES_C_MAPPING_OPTIONAL_P)o(OINT)o(ER)430 3140 y(*)g(node,)f(which)h
(is)g(responsible)e(for)i(actually)e(instantiating)f(the)430
3253 y(*)j(allocation.)430 3366 y(*/)382 3479 y(pres_c_inline)235
b(ptr;)0 3592 y(};)0 3836 y(PRES)p 198 3836 29 4 v 33
w(C)p 279 3836 V 34 w(INLINE)p 601 3836 V 33 w(XLATE)21
b Fz(T)-7 b(ype)0 4010 y FC(This)27 b(inline)i(transforms)g(the)e
(current)k Fv(C)t(A)t(S)t(T)f FC(type)e(to)g(a)e(kno)n(wn,)j(\002x)o
(ed)d(type.)41 b(This)27 b(is)g(useful)i(when)e(performing)i(con-)0
4123 y(v)o(ersions)g(between)f(the)f(presented)j(type)d(of)g(a)g
(parameter)h(and)g(the)f(type)h(with)e(which)i(it)e(is)h(vie)n(wed)h
(by)f(the)g(stubs.)40 b(F)o(or)0 4236 y(e)o(xample,)f
Fv(M)t(I)t(G)e FC(allo)n(ws)d(the)h(user)g(to)f(name)g(some)n(what)h
(abstract)h(data)f(structures)i(\(e.g.,)f(one)f(can)f(specify)i(the)f
(size)0 4349 y(of)28 b(a)g(structure,)k(b)n(ut)d(one)g(cannot)h(e)o
(xplicitly)h(specify)f(its)e(contents)j(or)d(layout\),)j(b)n(ut)e(the)g
(stubs)h(must)e(ha)n(v)o(e)h(a)f(concrete)0 4461 y(representation)34
b(in)d(order)g(to)f(marshal)h(or)g(unmarshal)h(the)e(data)h(\(e.g.,)h
(a)d(structure)k(of)d(a)g(kno)n(wn)h(size)f(can)h(be)f(blindly)0
4574 y(copied)e(into)f(and)g(out)g(of)f(the)h(data)g(stream\).)38
b(This)26 b(node)i(f)o(acilitates)h(the)e(con)l(v)o(ersion)i(between)f
(the)e(user)n(-de\002ned)j(type)0 4687 y(\(unkno)n(wn)c(to)f(the)h
Fv(I)t(D)t(L)i FC(compiler\))e(and)f(an)f(equi)n(v)n(alent)j(type)f
(the)e(stubs)i(can)f(use)g(to)f(handle)i(the)f(data.)0
4888 y Fy(struct)46 b(pres_c_inline_xlate)0 5001 y({)382
5114 y(/*)h(the)g(_real_)f(pres_c_inline...)d(*/)382
5227 y(pres_c_inline)521 b(sub;)p eop
%%Page: 119 119
119 118 bop 0 -165 a Fx(7.2.)51 b(PRES)p 411 -165 28
4 v 31 w(C)23 b(D)l(A)-10 b(T)i(A)21 b(STR)l(UCTURES)2409
b FC(119)382 91 y Fy(pres_c_inline_index)233 b(index;)382
204 y(cast_type)713 b(internal_ctype;)382 430 y(string)857
b(translator<>;)382 543 y(string)g(destructor<>;)0 656
y(};)0 900 y(PRES)p 198 900 29 4 v 33 w(C)p 279 900 V
34 w(INLINE)p 601 900 V 33 w(ASSIGN)21 b Fz(T)-7 b(ype)0
1074 y FC(This)21 b(inline)i(allo)n(ws)f(an)f(arbitrary)26
b Fv(C)t(A)t(S)t(T)e FC(e)o(xpression)g(to)d(be)h(assigned)h(to)f(the)f
(current)i(entity)-6 b(.)30 b(This)21 b(isn')n(t)i(currently)g(used)0
1187 y(in)g(Flick.)0 1389 y Fy(struct)46 b(pres_c_inline_assign)0
1502 y({)382 1615 y(/*)h(the)g(_real_)f(pres_c_inline...)d(*/)382
1728 y(pres_c_inline)521 b(sub;)382 1954 y(pres_c_inline_index)233
b(index;)382 2067 y(cast_expr)713 b(value;)0 2180 y(};)0
2424 y(PRES)p 198 2424 V 33 w(C)p 279 2424 V 34 w(INLINE)p
601 2424 V 33 w(COND)22 b Fz(T)-7 b(ype)0 2598 y FC(This)27
b(is)f(v)o(ery)i(similar)f(to)g(a)f(union)i(inline,)h(e)o(xcept)f(that)
f(it)g(refers)h(to)f(a)f(boolean)j(\223discriminator\224.)42
b(The)27 b(runtime)g(v)n(alue)0 2711 y(of)c(the)h(discriminator)j(will)
c(select)i(which)f(inline)g(is)g(actually)h(part)f(of)g(the)g(e)o(x)o
(ecution)h(path.)0 2913 y Fy(struct)46 b(pres_c_inline_cond)0
3026 y({)382 3139 y(/*)h(This)g(index)f(must)h(refer)f(to)h(a)h
(boolean)d(C)j(variable)525 3252 y(\(or)f(at)g(least)f(an)i(integerish)
d(type)h(that)h(can)g(be)g(used)g(as)g(a)g(boolean\).)525
3365 y(At)g(runtime,)f(if)h(the)g(value)f(of)h(that)g(C)g
(variable\(/parameter/slot\))525 3478 y(is)g(true,)g(marshal)e(using)i
(true_inl;)e(otherwise)g(use)i(false_inl.)93 b(*/)382
3590 y(pres_c_inline_index)233 b(index;)382 3703 y(pres_c_inline)521
b(true_inl;)382 3816 y(pres_c_inline)g(false_inl;)0 3929
y(};)0 4173 y(PRES)p 198 4173 V 33 w(C)p 279 4173 V 34
w(INLINE)p 601 4173 V 33 w(MESSAGE)p 970 4173 V 33 w(ATTRIBUTE)20
b Fz(T)-7 b(ype)0 4348 y FC(This)24 b(inline)h(allo)n(ws)f(an)f
(\223attrib)n(ute\224)k(to)d(be)f(embedded)j(in)e(the)g(tree,)f
(describing)k(a)c(semantic)i(entity)g(that)g(is)e(entirely)j(left)0
4460 y(up)e(to)f(the)h(back)g(end)g(to)g(decide)h(ho)n(w)e(to)g
(implement.)30 b(There)24 b(is)f(no)h(associated)k Fv(C)t(A)t(S)t(T)f
FC(or)e Fv(M)t(I)t(N)t(T)i FC(for)c(this)h(inline.)0
4663 y Fy(enum)47 b(pres_c_message_attribut)o(e_ki)o(nd)0
4775 y({)382 4888 y(/*)g(sets)g(some)f(attribute)g(flags)g(*/)382
5001 y(PRES_C_MESSAGE_ATTRIBUTE)o(_FL)o(AGS)41 b(=)48
b(0,)382 5227 y(/*)f(how)g(long)g(to)g(wait)f(for)h(reply)g(*/)382
5340 y(PRES_C_MESSAGE_ATTRIBUTE)o(_TI)o(MEOU)o(T)42 b(=)47
b(1,)p eop
%%Page: 120 120
120 119 bop 0 -165 a FC(120)969 b Fx(CHAPTER)20 b(7.)51
b(PRESENT)-8 b(A)e(TION)18 b(IN)23 b(C/C++)g(\(PRES)p
2986 -165 28 4 v 31 w(C\))g(REPRESENT)-8 b(A)e(TION)382
204 y Fy(/*)47 b(index)f(of)i(when)e(received)g(*/)382
317 y(PRES_C_MESSAGE_ATTRIBUTE)o(_SE)o(QUEN)o(CE_R)o(ECE)o(IVED)41
b(=)48 b(2,)382 543 y(/*)f(client)f(reference)f(*/)382
656 y(PRES_C_MESSAGE_ATTRIBUTE)o(_CL)o(IENT)o(_REF)o(ERE)o(NCE)c(=)48
b(3,)382 882 y(/*)f(flag)g(indicating)e(work)h(function)g(should)g
(make)h(its)f(own)h(copy)g(of)525 995 y(the)g(data)g(if)g(it)g(wants)f
(to)h(keep)g(it)g(*/)382 1108 y(PRES_C_MESSAGE_ATTRIBUTE)o(_SE)o(RVER)o
(COPY)41 b(=)47 b(4)382 1333 y(/*)g(maybe)f(in)i(the)e(future,)g(SID)h
(will)g(be)g(moved)f(here)h(*/)0 1446 y(};)0 1672 y(struct)f
(pres_c_inline_message_att)o(rib)o(ute)0 1785 y({)382
1898 y(pres_c_message_attribute)o(_ki)o(nd)137 b(kind;)0
2011 y(};)0 2263 y(PRES)p 198 2263 29 4 v 33 w(C)p 279
2263 V 34 w(INLINE)p 601 2263 V 33 w(HANDLER)p 970 2263
V 33 w(FUNC)21 b Fz(T)-7 b(ype)0 2440 y FC(This)23 b(inline)i
(describes)g(a)e(function)j(to)d(be)g(called)i(to)e(handle)i(the)g
Fv(P)t(R)t(E)t(S)p 2289 2440 28 4 v 40 w(C)f FC(tree)g(that)g(normally)
h(w)o(ould)e(be)h(rooted)g(in)g(this)0 2553 y(location.)32
b(In)24 b(the)g(decomposed)i(presentation)i(style,)c(this)h(replaces)h
(the)e Fy(pres_c_inline_func_param)o(s_st)o(ruct)o FC(.)0
2666 y(The)h(slots)h(all)g(represent)i(parameters)f(associated)h(with)e
(the)f(presentation,)k(such)e(as)e(the)h(object)g(reference,)i
(marshaled)0 2779 y(message,)c(en)l(vironment,)j(etc.)0
2998 y Fy(struct)46 b(pres_c_inline_handler_fun)o(c)0
3111 y({)382 3224 y(/*)430 3337 y(*)h(One)g(element)f(for)h(each)f
(parameter)g(to)h(the)g(handler)e(function.)430 3450
y(*)i(These)f(are)h(all)g(``special'')e(presentation-only)e
(parameters.)430 3562 y(*/)382 3675 y(pres_c_inline_struct_slo)o(t)f
(slots<>;)0 3788 y(};)0 4041 y(PRES)p 198 4041 29 4 v
33 w(C)p 279 4041 V 34 w(INLINE)p 601 4041 V 33 w(TEMPORARY)20
b Fz(T)-7 b(ype)0 4217 y FC(This)21 b(inline)i(introduces)h(a)d(ne)n(w)
g(\(temporary\))j(v)n(ariable)f(into)f(the)g(scope)h(for)e(the)h(gi)n
(v)o(en)g(mapping,)h(rather)g(than)f(selecting)0 4330
y(a)33 b(member)g(of)h(the)g(inline)g(state)g(\(a)g(parameter)h(or)e
(data)h(member\).)59 b(This)33 b(allo)n(ws)h(one)g(to)f
(marshal/unmarshal)38 b(data)0 4443 y(that)29 b(isn')n(t)g(e)o
(xplicitly)i(presented)g(\(e.g.,)e(a)f(string')-5 b(s)30
b(length)g(or)e(an)g(e)o(xceptional)k(reply)d(when)f(there)i(is)e(no)g
(en)l(vironment)0 4556 y(parameter\).)i(In)22 b(some)g(cases,)h(this)g
(may)f(e)n(v)o(en)g(be)g(a)f(constant)k(that)d(needs)h(to)f(be)g
(\223hardcoded\224)k(into)d(the)h Fv(P)t(R)t(E)t(S)p
3557 4556 28 4 v 39 w(C)g FC(\002le)d(\(in)0 4669 y(which)27
b(case)h(it)f(is)g(optimized)i(to)e(be)g(a)g(constant)i(instead)g(of)e
(a)g(temporary)i(v)n(ariable\).)41 b(This)27 b(is)g(common)g(in)g
(allocation)0 4782 y(conte)o(xts)e(where)f(important)h(pieces)g(of)f
(the)g(conte)o(xt)h(are)e(kno)n(wn,)h(such)g(as)g(the)g(length)h(of)e
(a)g(\002x)o(ed)g(array)-6 b(.)0 5001 y Fy(enum)47 b
(pres_c_temporary_type)0 5114 y({)382 5227 y(TEMP_TYPE_PRESENTED,)382
5340 y(TEMP_TYPE_ENCODED)p eop
%%Page: 121 121
121 120 bop 0 -165 a Fx(7.2.)51 b(PRES)p 411 -165 28
4 v 31 w(C)23 b(D)l(A)-10 b(T)i(A)21 b(STR)l(UCTURES)2409
b FC(121)0 91 y Fy(};)0 204 y(struct)46 b(pres_c_temporary)0
317 y({)382 430 y(pres_c_mapping)473 b(map;)190 b(/*)47
b(The)g(mapping)f(for)h(the)g(data)f(*/)382 656 y(string)857
b(name<>;)46 b(/*)h(A)h(hint)e(used)h(in)g(naming)f(the)h(temp)g(*/)382
769 y(cast_type)713 b(ctype;)94 b(/*)47 b(The)g(type)g(of)g(the)g
(temporary)e(*/)382 882 y(cast_expr)713 b(init;)142 b(/*)47
b(Initialization)d(expression)h(*/)382 995 y(pres_c_temporary_type)137
b(type;)142 b(/*)47 b(How)g(this)g(temporary)e(is)i(used)g(*/)382
1220 y(/*)430 1333 y(*)g(`is_const')e(is)i(TRUE)g(\(non-zero\))e(if)i
(`init')f(evaluates)f(to)j(some)e(constant)430 1446 y(*)h(expression.)
92 b(This)47 b(is)g(used)g(to)g(avoid)f(creating)g(a)h(temporary)f
(variable)f(for)430 1559 y(*)i(constant)f(values.)93
b(The)47 b(initialization)d(expr)j(is)g(simply)f(passed)g(down)430
1672 y(*)h(instead)f(of)h(a)g(temporary)f(variable)f(name.)94
b(If)48 b(this)e(flag)h(is)g(set,)g(you)g(are)430 1785
y(*)g(asserting)e(that)i(the)g(resulting)e(expr)i(will)f(NEVER)h(be)g
(used)g(as)g(an)g(lvalue.)430 1898 y(*/)382 2011 y(int)619
b(is_const;)382 2237 y(/*)430 2350 y(*)47 b(Handlers)f(indicate)f(to)i
(the)g(back)g(end)g(what)f(this)h(temporary)e(is)i(used)g(for)g(so)430
2462 y(*)g(it)g(can)g(resolve)f(the)h(mismatch.)93 b(For)47
b(example,)e(it)i(may)g(simply)f(be)i(mapped)430 2575
y(*)f(to)g(a)h(macro)e(that)h(has)g(parameters)e(for)h(the)h(original)f
(variable)f(and)i(the)430 2688 y(*)g(temporary.)93 b(We)47
b(define)f(both)h(pre-)f(and)h(post-handlers,)d(so)j(that)g(different)
430 2801 y(*)g(processing)e(can)i(be)g(done)g(both)f(before)g(encode)h
(and)f(after)h(decode.)430 2914 y(*/)382 3027 y(string)475
b(prehandler<>;)382 3140 y(string)g(posthandler<>;)0
3253 y(};)0 3539 y(PRES)p 198 3539 29 4 v 33 w(C)p 279
3539 V 34 w(INLINE)p 601 3539 V 33 w(ILLEGAL)21 b Fz(T)-7
b(ype)0 3727 y FC(This)20 b(is)h(really)h(a)e(slot-holder)j(that)e
(tells)h(the)f(code)g(generator)i(to)e(emit)f(an)g(unconditional)25
b(error)-5 b(.)29 b(This)20 b(is)h(useful)h(when)e(an)0
3840 y(inline)27 b(is)f(required)i(to)e(e)o(xist,)g(b)n(ut)h(it)f(can')
n(t)h(\(or)f(shouldn')n(t\))j(happen)f(in)d(practice.)38
b(F)o(or)25 b(e)o(xample,)i(the)h Fv(P)t(R)t(E)t(S)p
3473 3840 28 4 v 40 w(C)f FC(structure)0 3953 y(is)i(such)h(that)g(a)f
(reply)i Fu(must)f FC(consist)i(of)d(a)g(union)h(of)g(the)f(normal)h
(reply)h(case,)g(a)e(system)h(e)o(xception)i(case,)f(and)f(a)f(user)0
4066 y(e)o(xception)d(case.)k(In)24 b(the)g(case)h(of)f(Flick')-5
b(s)24 b(decomposed)j(stubs)d(presentation,)k(there)c(is)g(a)f(special)
j(marshaling)g(function)0 4178 y(to)21 b(encode)i(an)f(e)o(xceptional)i
(reply)-6 b(.)29 b(Since)22 b(it)f(mak)o(es)h(no)f(sense)i(for)e(one)h
(to)f(encode)i(an)f(e)o(xceptional)i(reply)f(when)e(there)h(is)0
4291 y(no)h(e)o(xception,)i(the)f(normal)g(reply)g(case)g(is)f(gi)n(v)o
(en)g(as)g(a)g Fy(PRES)p 1974 4291 29 4 v 33 w(C)p 2055
4291 V 34 w(INLINE)p 2377 4291 V 33 w(ILLEGAL)p FC(.)d(Thus,)j(if)g
(the)g(generated)j(function)0 4404 y(is)d(e)n(v)o(er)h(called)h(with)e
(no)h(e)o(xception,)h(an)f(error)g(is)g(returned.)0 4694
y FA(7.2.4)99 b(Mapping)25 b(T)-7 b(ypes)2 4882 y Fv(P)t(R)t(E)t(S)p
194 4882 28 4 v 39 w(C)29 b FC(mappings)g(serv)o(e)f(to)g(specify)h(e)o
(xactly)g(ho)n(w)e(a)i Fv(M)t(I)t(N)t(T)h FC(type)e(is)f(to)h(be)f
(translated)j(to)e(the)f(corresponding)34 b Fv(C)t(A)t(S)t(T)0
4994 y FC(type.)29 b(This)24 b(combined)h(with)e(the)h(inline)h
(information)h(completely)g(speci\002es)f(stub)f(generation.)141
5114 y(While)f(inline)g(structures)i(can)d(map)i Fv(M)t(I)t(N)t(T)h
FC(types)e(to)f(more)g(than)h(one)g(parameter)h(in)e(a)f(function,)k
(mappings)e(control)0 5227 y(one)28 b(and)g(only)g(parameter)-5
b(.)43 b(So,)27 b(inline)i(types)g(which)f(present)h(more)f(than)g(one)
g(parameter)h(will)f(ha)n(v)o(e)g(more)f(than)i(one)0
5340 y(mapping)c(type.)p eop
%%Page: 122 122
122 121 bop 0 -165 a FC(122)969 b Fx(CHAPTER)20 b(7.)51
b(PRESENT)-8 b(A)e(TION)18 b(IN)23 b(C/C++)g(\(PRES)p
2986 -165 28 4 v 31 w(C\))g(REPRESENT)-8 b(A)e(TION)0
91 y Fy(union)46 b(pres_c_mapping_u)0 204 y(switch)g
(\(pres_c_mapping_kind)c(kind\))0 317 y({)382 430 y(case)k
(PRES_C_MAPPING_DIRECT:)764 543 y(void;)382 656 y(case)g
(PRES_C_MAPPING_STUB:)764 769 y(pres_c_mapping_stub)997
b(mapping_stub;)382 882 y(case)46 b(PRES_C_MAPPING_POINTER:)764
995 y(pres_c_mapping_pointer)853 b(pointer;)382 1108
y(case)46 b(PRES_C_MAPPING_INTERNAL_AR)o(RAY:)764 1220
y(pres_c_mapping_internal)o(_arr)o(ay)519 b(internal_array;)382
1333 y(case)46 b(PRES_C_MAPPING_STRUCT:)764 1446 y
(pres_c_mapping_struct)901 b(struct_i;)382 1559 y(case)46
b(PRES_C_MAPPING_FLAT_UNION:)764 1672 y(pres_c_mapping_flat_uni)o(on)
710 b(flat_union;)382 1785 y(case)46 b(PRES_C_MAPPING_SPECIAL:)764
1898 y(pres_c_mapping_special)853 b(special;)382 2011
y(case)46 b(PRES_C_MAPPING_XLATE:)764 2124 y(pres_c_mapping_xlate)949
b(xlate;)382 2237 y(case)46 b(PRES_C_MAPPING_REFERENCE:)764
2350 y(pres_c_mapping_referenc)o(e)758 b(ref;)382 2462
y(case)46 b(PRES_C_MAPPING_TYPE_TAG:)764 2575 y(void;)382
2688 y(case)g(PRES_C_MAPPING_TYPED:)764 2801 y(void;)382
2914 y(case)g(PRES_C_MAPPING_OPTIONAL_PO)o(INTE)o(R:)764
3027 y(pres_c_mapping_optional)o(_poi)o(nte)o(r)424 b
(optional_pointer;)382 3140 y(case)46 b(PRES_C_MAPPING_IGNORE:)764
3253 y(void;)382 3366 y(case)g(PRES_C_MAPPING_SYSTEM_EXCE)o(PTIO)o(N:)
764 3479 y(void;)382 3592 y(case)g(PRES_C_MAPPING_DIRECTION:)764
3704 y(pres_c_mapping_directio)o(n)758 b(direction;)382
3817 y(case)46 b(PRES_C_MAPPING_SID:)764 3930 y(pres_c_mapping_sid)1045
b(sid;)382 4043 y(case)46 b(PRES_C_MAPPING_ARGUMENT:)764
4156 y(pres_c_mapping_argument)805 b(argument;)382 4269
y(case)46 b(PRES_C_MAPPING_MESSAGE_ATT)o(RIBU)o(TE:)764
4382 y(pres_c_mapping_message_)o(attr)o(ibu)o(te)376
b(message_attribute;)382 4495 y(case)46 b(PRES_C_MAPPING_INITIALIZE:)
764 4608 y(pres_c_mapping_initiali)o(ze)710 b(initialize;)382
4721 y(case)46 b(PRES_C_MAPPING_ILLEGAL:)764 4834 y(void;)382
4946 y(case)g(PRES_C_MAPPING_VAR_REFEREN)o(CE:)764 5059
y(pres_c_mapping_var_refe)o(renc)o(e)567 b(var_ref;)382
5172 y(case)46 b(PRES_C_MAPPING_PARAM_ROOT:)764 5285
y(pres_c_mapping_param_ro)o(ot)710 b(param_root;)p eop
%%Page: 123 123
123 122 bop 0 -165 a Fx(7.2.)51 b(PRES)p 411 -165 28
4 v 31 w(C)23 b(D)l(A)-10 b(T)i(A)21 b(STR)l(UCTURES)2409
b FC(123)382 91 y Fy(case)46 b(PRES_C_MAPPING_ELSEWHERE:)764
204 y(void;)382 317 y(case)g(PRES_C_MAPPING_SELECTOR:)764
430 y(pres_c_mapping_selector)805 b(selector;)382 543
y(case)46 b(PRES_C_MAPPING_TEMPORARY:)764 656 y(pres_c_temporary)1141
b(temp;)382 769 y(case)46 b(PRES_C_MAPPING_SINGLETON:)764
882 y(pres_c_mapping_singleto)o(n)758 b(singleton;)0
995 y(};)141 1215 y FC(Let)23 b(us)h(look)g(at)f(each)i(mapping)f(type)
h(in)e(more)h(detail.)0 1470 y Fy(PRES)p 198 1470 29
4 v 33 w(C)p 279 1470 V 34 w(MAPPING)p 649 1470 V 33
w(DIRECT)d Fz(T)-7 b(ype)0 1647 y FC(This)27 b(mapping)h(directly)h
(maps)e(simple)h(types)g(together)-5 b(.)42 b(A)27 b
Fv(M)t(I)t(N)t(T)j FC(inte)o(ger)f(to)e(a)f(C)g(inte)o(ger)j(is)d(a)h
(direct)h(mapping.)41 b(No)0 1760 y(additional)26 b(information)g(is)e
(needed.)0 2015 y Fy(PRES)p 198 2015 V 33 w(C)p 279 2015
V 34 w(MAPPING)p 649 2015 V 33 w(STUB)d Fz(T)-7 b(ype)0
2193 y FC(The)24 b(C)f(parameter)j(must)f(be)f(a)g(named)h(type.)32
b(The)24 b(appropriate)k(stub)d(will)f(then)h(be)f(called)i(to)e
(marshal/unmarshal)29 b(this)0 2306 y(parameter)-5 b(.)50
b(No)29 b(additional)k(information)f(is)e(needed.)49
b(Note)30 b(that)h(Flick)f(aggressi)n(v)o(ely)j(inlines)e(the)f(stub')
-5 b(s)32 b(code)f(into)0 2419 y(the)25 b(generated)i(code,)f(so)f
(only)h(in)e(rare)h(cases)h(will)f(a)f(call)h(to)g(a)f
(marshal/unmarshal)29 b(stub)d(actually)h(be)d(emitted)i(\(e.g.,)f(a)0
2532 y(recursi)n(v)o(e)g(data)f(structure\).)0 2753 y
Fy(struct)46 b(pres_c_mapping_stub)0 2866 y({)382 2979
y(int)238 b(mapping_stub_index;)0 3092 y(};)0 3347 y(PRES)p
198 3347 V 33 w(C)p 279 3347 V 34 w(MAPPING)p 649 3347
V 33 w(DIRECTION)20 b Fz(T)-7 b(ype)0 3525 y FC(This)19
b(mapping)i(pro)o(vides)g(conte)o(xt)f(to)g(mappings)h(that)e(hang)h
(under)h(this)f(node.)28 b(This)19 b(mapping)h(represents)i(the)e
(direction)0 3638 y(of)j(the)h(parameter)h(we)e(are)h(currently)i
(handling.)0 3860 y Fy(enum)47 b(pres_c_direction)0 3972
y({)382 4085 y(PRES_C_DIRECTION_UNKNOWN)41 b(=)47 b(0,)382
4198 y(PRES_C_DIRECTION_IN)42 b(=)48 b(1,)382 4311 y
(PRES_C_DIRECTION_OUT)42 b(=)48 b(2,)382 4424 y(PRES_C_DIRECTION_INOUT)
42 b(=)47 b(3,)382 4537 y(PRES_C_DIRECTION_RETURN)41
b(=)48 b(4)0 4650 y(};)0 4876 y(struct)e(pres_c_mapping_direction)0
4989 y({)382 5102 y(pres_c_direction)d(dir;)382 5214
y(pres_c_mapping)139 b(mapping;)0 5327 y(};)p eop
%%Page: 124 124
124 123 bop 0 -165 a FC(124)969 b Fx(CHAPTER)20 b(7.)51
b(PRESENT)-8 b(A)e(TION)18 b(IN)23 b(C/C++)g(\(PRES)p
2986 -165 28 4 v 31 w(C\))g(REPRESENT)-8 b(A)e(TION)0
91 y Fy(PRES)p 198 91 29 4 v 33 w(C)p 279 91 V 34 w(MAPPING)p
649 91 V 33 w(POINTER)21 b Fz(T)-7 b(ype)0 266 y FC(This)25
b(mapping)i(inserts)g(a)e(le)n(v)o(el)g(of)g(pointer)i(indirection)i
(on)c(top)h(of)f(the)h(tar)n(get)h(mapping.)35 b(The)25
b Fy(arglist_name)c FC(iden-)0 379 y(ti\002es)j(the)f(allocation)k
(conte)o(xt)e(associated)h(with)d(the)h(pointer)-5 b(.)0
562 y Fy(struct)46 b(pres_c_mapping_pointer)0 675 y({)382
788 y(string)857 b(arglist_name<>;)382 901 y(pres_c_mapping)473
b(target;)0 1013 y(};)0 1254 y(PRES)p 198 1254 V 33 w(C)p
279 1254 V 34 w(MAPPING)p 649 1254 V 33 w(VAR)p 826 1254
V 33 w(REFERENCE)21 b Fz(T)-7 b(ype)0 1429 y FC(This)23
b(mapping)i(allo)n(ws)f(the)g(con)l(v)o(ersion)j(from)c(a)g(reference)j
(type)e(to)g(an)f(actual)i(type.)0 1612 y Fy(struct)46
b(pres_c_mapping_var_refere)o(nce)0 1725 y({)382 1838
y(pres_c_mapping)473 b(target;)0 1951 y(};)0 2192 y(PRES)p
198 2192 V 33 w(C)p 279 2192 V 34 w(MAPPING)p 649 2192
V 33 w(OPTIONAL)p 1066 2192 V 32 w(POINTER)21 b Fz(T)-7
b(ype)0 2366 y FC(This)28 b(is)g(similar)g(to)g(the)h(standard)h
(pointer)g(mapping)f(in)f(that)g(it)g(adds)h(a)e(le)n(v)o(el)i(of)f
(pointer)h(indirection)j(onto)c(the)h(tar)n(get)0 2479
y(mapping.)47 b(Ho)n(we)n(v)o(er)l(,)31 b(the)e(v)n(alue)i(of)e(the)g
(pointer)j(has)d(a)g(semantic)i(meaning)f(in)g(that)g(it)f(determines)i
(the)f(presence)h(or)0 2592 y(absence)25 b(of)f(data.)0
2775 y Fy(struct)46 b(pres_c_mapping_pointer)0 2888 y({)382
3001 y(string)857 b(arglist_name<>;)382 3114 y(pres_c_mapping)473
b(target;)0 3227 y(};)0 3468 y(PRES)p 198 3468 V 33 w(C)p
279 3468 V 34 w(MAPPING)p 649 3468 V 33 w(STRUCT)21 b
Fz(T)-7 b(ype)0 3642 y FC(A)34 b(struct)i(mapping)h(maps)e(elements)h
(of)f(the)h(interf)o(ace)h(type)f(into)f(a)g(compatible)i(C)d(type.)64
b(The)35 b(mapping)h(of)f(each)0 3755 y(element)d(is)e(speci\002ed)i
(by)f(the)g Fy(struct_i)d FC(inline)k(type)f(parameter)-5
b(.)52 b(Note)31 b(that)g(this)g(returns)i(the)f Fv(P)t(R)t(E)t(S)p
3440 3755 28 4 v 40 w(C)g FC(w)o(alk)o(er)f(to)0 3868
y(inline)25 b(mode;)f(we)f(map)g(a)g(single)i(entity)g(\(a)e
(structure\))j(into)e(multiple)h(parts)g(\(its)e(\002elds\).)0
4051 y Fy(typedef)46 b(pres_c_inline)e(pres_c_mapping_struct;)0
4292 y(PRES)p 198 4292 29 4 v 33 w(C)p 279 4292 V 34
w(MAPPING)p 649 4292 V 33 w(INTERNAL)p 1066 4292 V 32
w(ARRAY)21 b Fz(T)-7 b(ype)0 4467 y FC(This)25 b(node)g(is)g
(associated)j(with)c(the)i(data)f(b)n(uf)n(fer)h(of)f(an)g(array)-6
b(.)33 b(When)26 b(processing)h(this)f(mapping,)g(other)g(pieces)g(of)f
(the)0 4580 y(array)k(must)e(also)i(be)f(kno)n(wn,)g(such)h(as)f(the)g
(length,)i(maximum)d(length,)j(etc.)42 b(These)28 b(are)g(pro)o(vided)i
(by)d(the)h(allocation)0 4692 y(conte)o(xt)d(identi\002ed)g(by)f
Fy(arglist_name)p FC(.)0 4876 y Fy(struct)46 b
(pres_c_mapping_internal_a)o(rra)o(y)0 4989 y({)382 5102
y(string)475 b(arglist_name<>;)382 5214 y(pres_c_mapping)91
b(element_mapping;)0 5327 y(};)p eop
%%Page: 125 125
125 124 bop 0 -165 a Fx(7.2.)51 b(PRES)p 411 -165 28
4 v 31 w(C)23 b(D)l(A)-10 b(T)i(A)21 b(STR)l(UCTURES)2409
b FC(125)0 91 y Fy(PRES)p 198 91 29 4 v 33 w(C)p 279
91 V 34 w(MAPPING)p 649 91 V 33 w(FLAT)p 874 91 V 33
w(UNION)21 b Fz(T)-7 b(ype)0 267 y FC(This)24 b(node)h(maps)g(a)h
Fv(M)t(I)t(N)t(T)h FC(union)f(onto)f(a)f(\223\003at\224)g(C)f(union.)33
b(The)24 b(\002rst)g(case)g(is)h(an)f(inte)o(gerish)j(discriminator)l
(,)g(with)d(each)0 380 y(subsequent)j(case)d(a)f(structure)j(starting)f
(with)f(the)f(discriminator)k(in)c(the)h(\002rst)f(slot.)0
596 y Fy(struct)46 b(pres_c_mapping_flat_union)0 708
y({)382 821 y(pres_c_mapping)91 b(discrim;)382 934 y(pres_c_mapping)g
(cases<>;)382 1047 y(pres_c_mapping)g(dfault;)0 1160
y(};)0 1409 y(PRES)p 198 1409 V 33 w(C)p 279 1409 V 34
w(MAPPING)p 649 1409 V 33 w(SPECIAL)21 b Fz(T)-7 b(ype)0
1585 y FC(This)18 b(mapping)i(maps)f(an)f(arbitrary)23
b Fv(M)t(I)t(N)t(T)e FC(type)f(onto)f(an)f(arbitrary)j(C)c(type)i(by)g
(specifying)i(a)d(marshaling)j(function)g(to)d(be)0 1698
y(in)l(v)n(ok)o(ed)28 b(by)d(the)h(stub)g(to)f(marshal/unmarshal)k
(this)f Fv(M)t(I)t(N)t(T)g FC(type.)34 b(This)25 b(mechanism)i(allo)n
(ws)e(us)g(to)g(handle)i(specialized)0 1811 y(presentations.)0
2026 y Fy(struct)46 b(pres_c_mapping_special)0 2139 y({)382
2252 y(string)g(marshaler_name<>;)0 2365 y(};)0 2614
y(PRES)p 198 2614 V 33 w(C)p 279 2614 V 34 w(MAPPING)p
649 2614 V 33 w(XLATE)21 b Fz(T)-7 b(ype)0 2790 y FC(This)30
b(is)g(almost)h(identical)h(to)e(its)g(inline)i(counterpart.)51
b(It)30 b(transforms)i(the)f(current)i Fv(C)t(A)t(S)t(T)g
FC(type)e(into)g(a)f(kno)n(wn,)i(\002x)o(ed)0 2903 y(type.)0
3119 y Fy(struct)46 b(pres_c_mapping_xlate)0 3232 y({)382
3345 y(cast_type)713 b(internal_ctype;)382 3457 y(pres_c_mapping)473
b(internal_mapping;)382 3683 y(string)857 b(translator<>;)382
3796 y(string)g(destructor<>;)0 3909 y(};)0 4158 y(PRES)p
198 4158 V 33 w(C)p 279 4158 V 34 w(MAPPING)p 649 4158
V 33 w(REFERENCE)20 b Fz(T)-7 b(ype)0 4334 y FC(This)33
b(mapping)h(is)f(for)h(object)g(references.)60 b(Each)33
b(back)h(end)g(must)f(de\002ne)h(this)f(to)g(allo)n(w)g(the)h(con)l(v)o
(ersion)i(between)0 4447 y(on-the-wire)26 b(and)e(in-memory)h
(representations)j(for)23 b(object)i(references.)0 4663
y Fy(enum)47 b(pres_c_reference_kind)0 4775 y({)382 4888
y(PRES_C_REFERENCE_COPY)615 b(=)47 b(0,)95 b(/*)47 b(send)g(a)g(copy)
285 b(*/)382 5001 y(PRES_C_REFERENCE_MOVE)615 b(=)47
b(1,)95 b(/*)47 b(send)g(my)g(instance)e(*/)382 5114
y(PRES_C_REFERENCE_COPY_AN)o(D_C)o(ONVE)o(RT)d(=)47 b(2)143
b(/*)47 b(send)g(a)g(converted)e(copy.)2339 5227 y(*)i(This)g
(corresponds)d(to)2339 5340 y(*)j(MIG's)f(MAKE,)h(since)f(the)h(OS)p
eop
%%Page: 126 126
126 125 bop 0 -165 a FC(126)969 b Fx(CHAPTER)20 b(7.)51
b(PRESENT)-8 b(A)e(TION)18 b(IN)23 b(C/C++)g(\(PRES)p
2986 -165 28 4 v 31 w(C\))g(REPRESENT)-8 b(A)e(TION)2339
91 y Fy(*)47 b(converts)f(a)h(RECV)g(right)2339 204 y(*)g(to)g(a)h
(SEND)e(right)2339 317 y(*/)0 430 y(};)0 656 y(struct)g
(pres_c_mapping_reference)0 769 y({)382 882 y(/*)430
995 y(*)h(`kind')f(refers)g(to)h(the)g(semantic:)f(either)g(copy,)g
(move,)g(or)i(MIG's)430 1108 y(*)f(copy_and_convert)c(\(make\).)94
b(`ref_count')45 b(is)i(how)g(many)f(references)f(we)430
1220 y(*)i(are)g(working)f(with)g(\(currently)f(it's)i(always)f(1\).)
430 1333 y(*/)382 1446 y(pres_c_reference_kind)c(kind;)382
1559 y(int)47 b(ref_count;)0 1672 y(};)0 1928 y(PRES)p
198 1928 29 4 v 33 w(C)p 279 1928 V 34 w(MAPPING)p 649
1928 V 33 w(SID)22 b Fz(T)-7 b(ype)0 2106 y FC(This)23
b(mapping)i(identi\002es)g(the)f(current)h(parameter)h(as)d(a)g
(security)j(identi\002er)-5 b(.)0 2329 y Fy(enum)47 b(pres_c_sid_kind)0
2442 y({)382 2555 y(PRES_C_SID_CLIENT)329 b(=)48 b(0,)190
b(/*)47 b(effective)f(SID)g(of)i(the)f(client)f(*/)382
2668 y(PRES_C_SID_SERVER)329 b(=)48 b(1)238 b(/*)47 b(required)f(SID)h
(of)g(the)g(server)94 b(*/)0 2781 y(};)0 3007 y(struct)46
b(pres_c_mapping_sid)0 3120 y({)382 3233 y(pres_c_sid_kind)d(kind;)0
3345 y(};)0 3602 y(PRES)p 198 3602 V 33 w(C)p 279 3602
V 34 w(MAPPING)p 649 3602 V 33 w(MESSAGE)p 1018 3602
V 32 w(ATTRIBUTE)21 b Fz(T)-7 b(ype)0 3780 y FC(Similar)31
b(to)g(its)g(inline)h(counterpart,)k(an)31 b(\223attrib)n(ute\224)j(is)
c(embedded)j(in)e(the)g(tree)h(describing)i(a)c(semantic)i(entity)-6
b(.)53 b(The)0 3892 y(dif)n(ference)25 b(is)d(that)h(there)g(is)h
Fv(M)t(I)t(N)t(T)h FC(and)g Fv(C)t(A)t(S)t(T)g FC(for)e(this)f
(mapping,)i(allo)n(wing)f(a)f(run-time)i(parameter)g(to)e(con)l(v)o(e)o
(y)i(special)0 4005 y(instructions)j(to)c(the)h(stub)h(or)e(runtime.)0
4228 y Fy(struct)46 b(pres_c_mapping_message_at)o(tri)o(bute)0
4341 y({)382 4454 y(pres_c_message_attribute)o(_ki)o(nd)c(kind;)0
4567 y(};)0 4823 y(PRES)p 198 4823 V 33 w(C)p 279 4823
V 34 w(MAPPING)p 649 4823 V 33 w(ARGUMENT)20 b Fz(T)-7
b(ype)0 5001 y FC(Ar)n(guments)24 b(are)f(the)f(method)i(by)e(which)h
(we)e(can)i(allo)n(w)g(other)g(branches)i(of)d(the)j
Fv(P)t(R)t(E)t(S)p 2814 5001 28 4 v 39 w(C)f FC(tree)f(to)f(see)h(the)f
(parameter)i(or)0 5114 y(data)i(of)e(the)h(current)i(branch.)34
b(The)25 b(best)g(e)o(xample)h(is)f(an)f(array)-6 b(.)34
b(The)25 b(length)h(is)f(one)g(piece)h(of)f(data)g(on)g(the)g(wire,)g
(while)0 5227 y(the)k(contents)i(of)e(the)g(array)h(elements)g(is)f
(another)-5 b(.)46 b(It)28 b(is)h(ob)o(vious,)j(ho)n(we)n(v)o(er)l(,)e
(that)g(the)o(y)f(are)g(related,)i(and)f(the)f(array')-5
b(s)0 5340 y(length)25 b(is)e(necessary)j(to)d(process)i(the)f(array')
-5 b(s)25 b(data.)k(The)23 b(mechanism)i(Flick)e(uses)h(for)g(this)g
(is)f(to)g(sa)n(v)o(e)h(the)g(length)h(as)e(an)p eop
%%Page: 127 127
127 126 bop 0 -165 a Fx(7.2.)51 b(PRES)p 411 -165 28
4 v 31 w(C)23 b(D)l(A)-10 b(T)i(A)21 b(STR)l(UCTURES)2409
b FC(127)0 91 y(ar)n(gument)29 b(to)e(some)g(higher)i(node)f(\(the)g
(allocation)i(conte)o(xt\),)f(and)f(when)f(the)g(array)h(is)f
(processed,)k(the)c(length)i(can)e(be)0 204 y(retrie)n(v)o(ed)e(from)e
(the)g(list)h(of)f(ar)n(guments.)31 b(The)24 b Fv(C)t(A)t(S)t(T)j
FC(type)c(and)h(e)o(xpression)i(are)d(sa)n(v)o(ed)h(in)f(the)h(ar)n
(gument)h(list)e(when)h(this)0 317 y(node)g(is)g(reached.)0
582 y Fy(struct)46 b(pres_c_mapping_argument)0 695 y({)382
808 y(string)475 b(arglist_name<>;)44 b(/*)j(Name)g(of)g(the)g(arglist)
f(itself.)g(*/)382 921 y(string)475 b(arg_name<>;)236
b(/*)47 b(Name)g(of)g(argument)f(in)h(the)g(list.)f(*/)382
1034 y(pres_c_mapping)91 b(map;)0 1146 y(};)0 1444 y(PRES)p
198 1444 29 4 v 33 w(C)p 279 1444 V 34 w(MAPPING)p 649
1444 V 33 w(INITIALIZE)20 b Fz(T)-7 b(ype)0 1636 y FC(This)23
b(node)i(allo)n(ws)f(the)f(current)j(parameter)f(or)e(data)h(item)g(to)
f(be)h(initialized)i(to)e(some)f(speci\002ed)k Fv(C)t(A)t(S)t(T)g
FC(e)o(xpression.)0 1900 y Fy(struct)46 b(pres_c_mapping_initialize)0
2013 y({)382 2126 y(cast_expr)331 b(value;)0 2239 y(};)0
2536 y(PRES)p 198 2536 V 33 w(C)p 279 2536 V 34 w(MAPPING)p
649 2536 V 33 w(SELECTOR)20 b Fz(T)-7 b(ype)0 2728 y
FC(This)22 b(is)h(a)f(special)i(node)f(for)g(handling)i(\223presented)g
(structures\224,)g(structures)g(that)e(e)o(xist)g(in)g(the)f
(presentation,)k(b)n(ut)d(not)g(in)0 2841 y(the)h Fv(M)t(I)t(N)t(T)r
FC(.)29 b(It)21 b(selects)i(a)e(member)g(of)h(the)f(current)k
Fv(C)t(A)t(S)t(T)g FC(scope,)d(and)g(then)g(maps)g(only)g(that)g
(entity)-6 b(.)29 b(This)22 b(is)f(particularly)0 2954
y(useful)k(for)f(directly)h(handling)h(the)g Fv(C)t(O)t(R)t(B)r(A)e
FC(en)l(vironment)j(discriminator)-5 b(.)0 3219 y Fy(struct)46
b(pres_c_mapping_selector)0 3332 y({)382 3444 y(int)619
b(index;)382 3557 y(pres_c_mapping)91 b(mapping;)0 3670
y(};)0 3968 y(PRES)p 198 3968 V 33 w(C)p 279 3968 V 34
w(MAPPING)p 649 3968 V 33 w(PARAM)p 922 3968 V 33 w(ROOT)21
b Fz(T)-7 b(ype)0 4159 y FC(This)27 b(node)g(indicates)i(that)f(the)f
(current)j Fv(C)t(A)t(S)t(T)g FC(e)o(xpression)f(and)e(type)h(describe)
h(a)d(formal)h(parameter)i(to)d(a)h(client)g(stub)0 4272
y(or)d(serv)o(er)h(w)o(ork)f(function.)33 b(On)24 b(both)h(the)f
(client)h(and)g(serv)o(er)l(,)g Fy(ctype)d FC(may)i(describe)i(the)f
(internal)h(\(actual\))g(type)f(of)f(the)0 4385 y(parameter)l(,)f(if)e
(dif)n(ferent)h(from)f(the)g(formal)g(type.)29 b(On)20
b(the)h(serv)o(er)g(side,)h(the)f(type)h(may)e(be)h(further)h
(transformed,)i(such)d(as)0 4498 y(changing)26 b(array)e(types)h(into)f
(pointer)n(-to-element)29 b(types)24 b(\(to)g(f)o(acilitate)i(proper)f
(allocation)h(and)e(ease)h(unmarshaling\).)0 4763 y Fy(struct)46
b(pres_c_mapping_param_root)0 4876 y({)382 4989 y(cast_type)713
b(ctype;)382 5102 y(cast_init)g(init;)382 5214 y(pres_c_mapping)473
b(map;)0 5327 y(};)p eop
%%Page: 128 128
128 127 bop 0 -165 a FC(128)969 b Fx(CHAPTER)20 b(7.)51
b(PRESENT)-8 b(A)e(TION)18 b(IN)23 b(C/C++)g(\(PRES)p
2986 -165 28 4 v 31 w(C\))g(REPRESENT)-8 b(A)e(TION)0
91 y Fy(PRES)p 198 91 29 4 v 33 w(C)p 279 91 V 34 w(MAPPING)p
649 91 V 33 w(SINGLETON)20 b Fz(T)-7 b(ype)0 270 y FC(This)26
b(node)i(has)f(the)f(sole)h(purpose)i(of)d(returning)j(to)e(inline)g
(mode,)h(so)e(we)g(can)h(treat)g(the)g(current)h(entity)g(as)e(more)g
(than)0 383 y(a)h(single)i(entity)-6 b(.)42 b(This)28
b(is)f(primarily)i(used)g(for)f(interjecting)j(an)c(allocation)j(conte)
o(xt)g(when)d(we)g(only)h(ha)n(v)o(e)h(a)e(mapping)0
495 y(a)n(v)n(ailable.)48 b(The)28 b(required)j(pieces)g(of)e(the)g
(allocation)j(conte)o(xt)e(can)g(be)f(temporaries,)j(with)d(the)h
(pointer)g(\002nally)g(being)0 608 y(mapped)25 b(with)e(the)h(original)
j Fv(C)t(A)t(S)t(T)g FC(and)f Fv(M)t(I)t(N)t(T)g FC(from)e(this)g
(singleton)i(node.)0 833 y Fy(struct)46 b(pres_c_mapping_singleton)0
946 y({)382 1059 y(pres_c_inline)e(inl;)0 1172 y(};)0
1433 y FA(7.2.5)99 b(Allocation)24 b(T)-7 b(ypes)0 1611
y FC(Allocation)28 b(types)g(specify)g(what)e(function)i(pro)o(vides)g
(space)g(for)e(a)g(b)n(uf)n(fer)h(to)f(be)h(marshaled/unmarshaled)k
(and)c(when)0 1724 y(that)e(function)h(is)e(to)h(be)f(in)l(v)n(ok)o
(ed.)33 b(The)24 b(e)n(v)o(ents)h(for)g(allocation)i(are)d(speci\002ed)
i(by)e(\003ags.)31 b(The)24 b(function)i(which)f(does)g(the)0
1837 y(allocation)h(is)e(speci\002ed)h(by)e(name;)h(the)g(function)i
(must)d(ha)n(v)o(e)h(a)f(certain)j(prototype)g(\(speci\002ed)f(by)f
(the)f(back)i(end\).)141 1952 y(The)j(allocation)k(structure)f(is)d
(rather)i(comple)o(x)g(because)h(of)d(the)h(man)o(y)g(dif)n(ferent)i
(allocation)g(semantics)g(that)e(can)0 2065 y(and)34
b(need)h(to)e(be)h(e)o(xpressed.)61 b(At)33 b(the)h(highest)i(le)n(v)o
(el,)g(there)f(is)e(a)g(list)i(of)e(allocation)k(cases,)g(one)d(for)g
(each)g(possible)0 2178 y(parameter)23 b(direction)g(\(since)f(each)g
(direction)h(may)e(need)h(to)f(be)g(handled)i(dif)n(ferently\).)31
b(Each)21 b(of)g(these)h(cases)g(can)f(either)0 2291
y(allo)n(w)26 b(or)f(disallo)n(w)i(allocation)h(for)e(that)g
(particular)j(direction.)37 b(If)26 b(allo)n(wed,)g(the)g(allocation)j
(semantics)e(are)f(e)o(xpressed)0 2404 y(by)k(a)g(set)g(of)h(\003ags)f
(and)g(an)g(allocator)-5 b(.)51 b(The)30 b(allocator)j(can)d(be)g
(either)i(a)e(speci\002c)h(name,)g(a)f(special)i(type)f(of)f(allocator)
0 2516 y(\(such)22 b(as)f(static)i(or)e(out-of-line\),)k(or)c(an)g
(arbitrary)i(allocator)h(\(essentially)g(one)e(that)g(doesn')n(t)h
(matter)l(,)g(allo)n(wing)f(the)f(code)0 2629 y(generator)26
b(to)d(choose)j(an)d(optimal)i(one,)e(such)i(as)e(stack\).)141
2744 y(The)g(complete)i(set)f(of)f(allocation)k(\003ags)c(and)h
(structures)i(follo)n(w)-6 b(.)0 2969 y Fy(const)46 b
(PRES_C_ALLOC_NEVER)759 b(=)48 b(0x00000000;)0 3082 y(const)e
(PRES_C_ALLOC_IF_NULL)663 b(=)48 b(0x00000001;)0 3195
y(const)e(PRES_C_ALLOC_IF_TOO_SMALL)423 b(=)48 b(0x00000002;)0
3308 y(const)e(PRES_C_ALLOC_IF_TOO_LARGE)423 b(=)48 b(0x00000004;)0
3421 y(const)e(PRES_C_ALLOC_ALWAYS)711 b(=)48 b(0x00000008;)0
3533 y(const)e(PRES_C_ALLOC_EVER)807 b(=)48 b(0x0000000f;)0
3646 y(const)e(PRES_C_ALLOC_CLEAR)759 b(=)48 b(0x00000010;)0
3759 y(const)e(PRES_C_REALLOC_IF_TOO_SMAL)o(L)328 b(=)48
b(0x00000200;)0 3872 y(const)e(PRES_C_REALLOC_IF_TOO_LARG)o(E)328
b(=)48 b(0x00000400;)0 3985 y(const)e(PRES_C_REALLOC_ALWAYS)615
b(=)48 b(0x00000800;)0 4098 y(const)e(PRES_C_REALLOC_EVER)711
b(=)48 b(0x00000f00;)0 4211 y(const)e(PRES_C_REALLOC_CLEAR)663
b(=)48 b(0x00001000;)0 4324 y(const)e(PRES_C_FAIL_IF_TOO_SMALL)471
b(=)48 b(0x00002000;)0 4437 y(const)e(PRES_C_DEALLOC_NEVER)663
b(=)48 b(0x00000000;)0 4550 y(const)e(PRES_C_DEALLOC_ALWAYS)615
b(=)48 b(0x00080000;)0 4663 y(const)e(PRES_C_DEALLOC_EVER)711
b(=)48 b(0x000f0000;)0 4775 y(const)e(PRES_C_DEALLOC_NULLIFY)567
b(=)48 b(0x00100000;)0 4888 y(const)e(PRES_C_DEALLOC_ON_FAIL)567
b(=)48 b(0x00200000;)0 5001 y(const)e(PRES_C_RUN_CTOR)903
b(=)48 b(0x01000000;)0 5114 y(const)e(PRES_C_RUN_DTOR)903
b(=)48 b(0x02000000;)0 5340 y(enum)f(pres_c_allocator_kind)p
eop
%%Page: 129 129
129 128 bop 0 -165 a Fx(7.3.)51 b(THE)22 b(PRES)p 611
-165 28 4 v 31 w(C)g(LIBRAR)-6 b(Y)2649 b FC(129)0 91
y Fy({)382 204 y(PRES_C_ALLOCATOR_DONTCAR)o(E,)382 317
y(PRES_C_ALLOCATOR_STATIC,)382 430 y(PRES_C_ALLOCATOR_OUTOFLI)o(NE,)382
543 y(PRES_C_ALLOCATOR_NAME)0 656 y(};)0 882 y(union)46
b(pres_c_allocator)0 995 y(switch)g(\(pres_c_allocator_kind)c(kind\))0
1108 y({)382 1220 y(case)k(PRES_C_ALLOCATOR_DONTCARE:)423
b(void;)382 1333 y(case)46 b(PRES_C_ALLOCATOR_STATIC:)519
b(void;)382 1446 y(case)46 b(PRES_C_ALLOCATOR_OUTOFLINE)o(:)376
b(string)46 b(ool_name<>;)382 1559 y(case)g(PRES_C_ALLOCATOR_NAME:)615
b(string)46 b(name<>;)0 1672 y(};)0 1898 y(struct)g
(pres_c_allocation_case)0 2011 y({)382 2124 y(pres_c_alloc_flags)281
b(flags;)382 2237 y(pres_c_allocator)377 b(allocator;)382
2350 y(cast_init)713 b(alloc_init;)0 2462 y(};)0 2688
y(enum)47 b(pres_c_allocation_allow)0 2801 y({)382 2914
y(PRES_C_ALLOCATION_INVALI)o(D)42 b(=)47 b(0,)382 3027
y(PRES_C_ALLOCATION_ALLOW)41 b(=)48 b(1)0 3140 y(};)0
3366 y(union)e(pres_c_allocation_u)0 3479 y(switch)g
(\(pres_c_allocation_allow)41 b(allow\))0 3592 y({)382
3704 y(case)46 b(PRES_C_ALLOCATION_ALLOW:)137 b(pres_c_allocation_case)
90 b(val;)382 3817 y(case)46 b(PRES_C_ALLOCATION_INVALID:)41
b(void;)0 3930 y(};)0 4156 y(struct)46 b(pres_c_allocation)0
4269 y({)382 4382 y(pres_c_allocation_u)c(cases[PRES_C_DIRECTIONS];)0
4495 y(};)0 4809 y Ft(7.3)119 b(The)30 b(PRES)p 810 4809
36 4 v 44 w(C)g(Library)0 5023 y Fy(void)47 b(pres_c_1_init\(pres_c_1)
41 b(*pres\))300 5136 y FC(Initializes)26 b(the)e(base)g(structure)i
(of)e Fy(pres)p FC(.)0 5340 y Fy(void)47 b(pres_c_1_check\(pres_c_1)41
b(*pres\))p eop
%%Page: 130 130
130 129 bop 0 -165 a FC(130)969 b Fx(CHAPTER)20 b(7.)51
b(PRESENT)-8 b(A)e(TION)18 b(IN)23 b(C/C++)g(\(PRES)p
2986 -165 28 4 v 31 w(C\))g(REPRESENT)-8 b(A)e(TION)300
91 y FC(Checks)24 b(the)g(v)n(alidity)h(of)f(the)g(structure)i(and)e
(data)g(in)f Fy(pres)p FC(.)0 285 y Fy(void)47 b
(pres_c_1_readfh\(pres_c_)o(1)42 b(*dest,)50 b(FILE)d(*fh\))300
398 y FC(Uses)25 b Fv(X)t(D)t(R)g FC(to)f(read)g(the)g(contents)h(of)f
(the)g(\002le)f(into)h Fy(dest)d FC(from)j(the)g(\002le)f
Fy(fh)p FC(.)0 592 y Fy(void)47 b(pres_c_1_writefh\(pres_c)o(_1)42
b(*src,)50 b(FILE)d(*fh\))300 705 y FC(Uses)25 b Fv(X)t(D)t(R)g
FC(to)f(write)f(the)h(contents)i(of)d Fy(src)f FC(to)i(the)f(\002le)g
Fy(fh)p FC(.)0 899 y Fy(pres_c_inline)44 b(pres_c_new_inline\(pres_c_)o
(inli)o(ne_)o(kind)d(kind\))300 1012 y FC(Creates)24
b(a)f(ne)n(w)-6 b(,)23 b(empty)j Fv(P)t(R)t(E)t(S)p 1291
1012 V 40 w(C)e FC(inline)h(structure)h(of)d(the)h(gi)n(v)o(en)g(type)h
Fy(kind)p FC(.)300 1167 y(There)e(are)g(also)g(the)g(follo)n(wing)h
(related)g(functions)h(to)d(create)i(speci\002c)i Fv(P)t(R)t(E)t(S)p
2795 1167 V 39 w(C)e FC(inlines,)g(allo)n(wing)g(the)f(initial-)300
1280 y(ization)g(of)e(important)i(data)f(\002elds.)28
b(The)o(y)21 b(should)i(all)f(be)f(self-e)o(xplanatory)-6
b(,)26 b(based)d(on)e(the)h(descriptions)j(gi)n(v)o(en)300
1393 y(abo)o(v)o(e.)300 1587 y Fy(pres_c_inline)44 b
(pres_c_new_inline_struct\()o(int)d(slots\))300 1760
y(pres_c_inline)j(pres_c_new_inline_func_pa)o(rams)o(_st)o(ruct)o
(\(int)d(slots\))300 1932 y(pres_c_inline)j(pres_c_new_inline_struct_)o
(unio)o(n\(i)o(nt)e(mappings\))300 2105 y(pres_c_inline)i
(pres_c_new_inline_virtual)o(_uni)o(on\()o(int)d(mappings\))300
2277 y(pres_c_inline)j(pres_c_new_inline_expande)o(d_un)o(ion)o(\(int)d
(mappings\))300 2449 y(pres_c_inline)j(pres_c_new_inline_void_un)o
(ion\()o(int)d(mappings\))0 2644 y(pres_c_mapping)j
(pres_c_new_mapping\(pres_)o(c_ma)o(ppi)o(ng_k)o(ind)d(kind\))300
2756 y FC(Creates)24 b(a)f(ne)n(w)-6 b(,)23 b(empty)j
Fv(P)t(R)t(E)t(S)p 1291 2756 V 40 w(C)e FC(mapping)h(structure)h(of)e
(the)f(gi)n(v)o(en)h(type)h Fy(kind)p FC(.)0 2929 y Fy(pres_c_inline)44
b(pres_c_set_inline_tags\(pr)o(es_c)o(_in)o(line)o(_kin)o(d)e(kind,)50
b(pres_c_inline_inl,)0 3042 y(int)d(tag,)k(...\))300
3154 y FC(This)23 b(is)h(a)f(tag)h(based)g(constructor)j(for)d(man)o(y)
f(of)h(the)h Fv(P)t(R)t(E)t(S)p 2204 3154 V 40 w(C)g
FC(inline)f(types.)300 3349 y Fy(PIA_Index)600 3461 y
FC(\(Required)h(tag)f(v)n(alues:)31 b Fy(pres_c_inline_index)p
FC(.\))23 b(The)g(inde)o(x)h(for)g(a)f Fy(pres_c_inline_atom)p
FC(.)300 3634 y Fy(PIA_Mapping)600 3747 y FC(\(Required)i(tag)f(v)n
(alues:)31 b Fy(pres_c_mapping)p FC(.\))24 b(Speci\002es)g(a)f
Fy(pres_c_mapping)p FC(.)300 3919 y Fy(PIA_Slot)600 4032
y FC(\(Required)h(tag)f(v)n(alues:)30 b Fy(int)20 b FC(and)j
Fy(pres_c_inline)p FC(.\))h(Adds)f(a)f(slot)h(to)f(an)g(inline)i
(struct)g(or)e(function)600 4145 y(parameters)k(struct.)300
4318 y Fy(PIA_Flags)600 4431 y FC(\(Required)f(tag)f(v)n(alues:)31
b Fy(pres_c_*_flags)p FC(.\))24 b(Speci\002es)g(an)o(y)i
Fv(P)t(R)t(E)t(S)p 2851 4431 V 39 w(C)f FC(\003ags.)300
4603 y Fy(PIA_Return)600 4716 y FC(\(Required)31 b(tag)e(v)n(alues:)41
b Fy(int)28 b FC(and)h Fy(pres_c_inline)p FC(.\))41 b(The)29
b(return)h(inline)h(for)e(a)f Fy(pres_c_func_)600 4829
y(params_struct)p FC(.)300 5001 y Fy(PIA_Discrim)600
5114 y FC(\(Required)j(tag)f(v)n(alues:)42 b Fu(depends)31
b(on)e(the)h(type)g(of)f(union)p FC(.\))48 b(The)29 b(discriminator)j
(for)d(a)g(union.)48 b(The)600 5227 y(attrib)n(ute)25
b(v)n(alues)f(depend)g(on)e(the)h(type)g(of)g(union)h(you)f(are)f
(specifying,)k(so)c(just)h(match)g(them)g(up)f(with)600
5340 y(the)i(union)h(structure.)p eop
%%Page: 131 131
131 130 bop 0 -165 a Fx(7.3.)51 b(THE)22 b(PRES)p 611
-165 28 4 v 31 w(C)g(LIBRAR)-6 b(Y)2649 b FC(131)300
91 y Fy(PIA_Default)600 204 y FC(\(Required)33 b(tag)f(v)n(alues:)47
b Fu(depends)34 b(on)e(the)g(type)g(of)g(union)p FC(.\))55
b(The)31 b(def)o(ault)j(case)e(for)g(a)f(union.)55 b(The)600
317 y(attrib)n(ute)25 b(v)n(alues)f(depend)g(on)e(the)h(type)g(of)g
(union)h(you)f(are)f(specifying,)k(so)c(just)h(match)g(them)g(up)f
(with)600 430 y(the)i(union)h(structure.)300 595 y Fy(PIA_Case)600
707 y FC(\(Required)h(tag)e(v)n(alues:)32 b Fu(depends)26
b(on)e(the)h(type)g(of)f(union)p FC(.\))32 b(A)23 b(\(non-def)o(ault\))
28 b(case)d(for)f(a)g(union.)32 b(The)600 820 y(attrib)n(ute)25
b(v)n(alues)f(depend)g(on)e(the)h(type)g(of)g(union)h(you)f(are)f
(specifying,)k(so)c(just)h(match)g(them)g(up)f(with)600
933 y(the)i(union)h(structure.)300 1098 y Fy(PIA_DiscrimVal)600
1211 y FC(\(Required)g(tag)f(v)n(alues:)31 b Fy(mint_const)p
FC(.\))25 b(The)e(discriminator)k(v)n(alue)d(for)g(a)f(discriminated)j
(union.)300 1375 y Fy(PIA_SelectedCase)600 1488 y FC(\(Required)32
b(tag)e(v)n(alues:)43 b Fy(pres_c_inline)p FC(.\))h(The)29
b(selected)j(case)f(for)f(a)g(collapsed)i(discriminated)600
1601 y(union.)300 1766 y Fy(PIA_Tag)600 1879 y FC(\(Required)25
b(tag)f(v)n(alues:)31 b Fy(pres_c_inline)p FC(.\))24
b(The)f(tag)h(for)g(a)f Fy(pres_c_inline_typed)p FC(.)300
2043 y Fy(PIA_Inl)600 2156 y FC(\(Required)i(tag)f(v)n(alues:)31
b Fy(pres_c_inline)p FC(.\))24 b(The)f(inline)i(for)f(a)f
Fy(pres_c_inline_typed)p FC(.)300 2320 y Fy(PIA_Offset)600
2433 y FC(\(Required)j(tag)e(v)n(alues:)31 b Fy(pres_c_inline)p
FC(.\))25 b(The)e(of)n(fset)i(inline)g(of)f(an)f(allocation)k(conte)o
(xt)e(describ-)600 2546 y(ing)31 b(the)g(numerical)h(of)n(fset)f(of)f
(the)h(\002rst)f(data)h(item)g(\(e.g.,)g(an)g(array)g(that)g(starts)h
(at)e(5)g(instead)i(of)f(0\).)600 2659 y(This)23 b(is)h(currently)i
(not)e(used)g(or)f(fully)i(supported.)300 2824 y Fy(PIA_Len)600
2937 y FC(\(Required)g(tag)e(v)n(alues:)31 b Fy(pres_c_inline)p
FC(.\))24 b(The)f(\(actual\))i(length)f(inline)h(of)e(an)g(allocation)j
(conte)o(xt)600 3050 y(describing)g(the)e(length)h(of)f(the)g(data.)300
3214 y Fy(PIA_MinLen)600 3327 y FC(\(Required)j(tag)f(v)n(alues:)34
b Fy(pres_c_inline)p FC(.\))c(The)24 b(minimum)i(length)g(inline)h(of)e
(an)g(allocation)j(con-)600 3440 y(te)o(xt)33 b(describing)j(the)e
(minimum)f(allo)n(w)o(able)i(length)f(for)g(the)f(data)h(\(e.g.,)h(a)e
(\002x)o(ed)f(array)i(cannot)h(be)600 3553 y(smaller)24
b(than)h(its)e(speci\002ed)i(length\).)300 3717 y Fy(PIA_MaxLen)600
3830 y FC(\(Required)h(tag)e(v)n(alues:)32 b Fy(pres_c_inline)p
FC(.\))27 b(The)d(maximum)g(length)i(inline)f(of)f(an)g(allocation)j
(con-)600 3943 y(te)o(xt)d(describing)i(the)e(maximum)f(allo)n(w)o
(able)i(length)g(for)f(the)g(data)g(\(e.g.,)f(a)g(\002x)o(ed)g(or)h
(bounded)i(array\).)300 4108 y Fy(PIA_AllocLen)600 4221
y FC(\(Required)j(tag)e(v)n(alues:)36 b Fy(pres_c_inline)p
FC(.\))f(The)26 b(\(actual\))j(allocated)g(length)f(inline)g(of)f(an)g
(alloca-)600 4333 y(tion)d(conte)o(xt)h(describing)i(the)c(allocated)j
(b)n(uf)n(fer)f(length)g(in)f(which)f(the)h(data)g(is)g(or)f(should)i
(be)f(placed.)300 4498 y Fy(PIA_MinAllocLen)600 4611
y FC(\(Required)29 b(tag)e(v)n(alues:)38 b Fy(pres_c_inline)p
FC(.\))d(The)27 b(minimum)g(allocated)i(length)g(inline)f(of)f(an)g
(allo-)600 4724 y(cation)d(conte)o(xt)f(describing)j(the)c(minimum)g
(allo)n(w)o(able)i(b)n(uf)n(fer)f(length)h(that)f(can)g(be)f(allocated)
i(for)f(the)600 4837 y(data)29 b(\(e.g.,)j Fv(C)t(O)t(R)t(B)r(A)d
FC(requires)i(that)e(a)f(bounded)j(sequence)g(be)e(allocated)i(to)d
(the)h(maximum)g(bound,)600 4950 y(re)o(gardless)c(of)f(the)g(actual)h
(amount)f(of)f(data)i(the)e(sequence)j(holds\).)300 5114
y Fy(PIA_MaxAllocLen)600 5227 y FC(\(Required)33 b(tag)e(v)n(alues:)46
b Fy(pres_c_inline)p FC(.\))h(The)31 b(maximum)g(allocated)i(length)g
(inline)f(of)f(an)g(al-)600 5340 y(location)d(conte)o(xt)g(describing)h
(the)d(maximum)g(allo)n(w)o(able)i(b)n(uf)n(fer)f(length)h(that)f(can)f
(be)g(allocated)j(for)p eop
%%Page: 132 132
132 131 bop 0 -165 a FC(132)969 b Fx(CHAPTER)20 b(7.)51
b(PRESENT)-8 b(A)e(TION)18 b(IN)23 b(C/C++)g(\(PRES)p
2986 -165 28 4 v 31 w(C\))g(REPRESENT)-8 b(A)e(TION)600
91 y FC(the)26 b(data.)36 b(This)25 b(is)g(not)h(currently)i(used)f(or)
e(fully)i(supported.)38 b(A)24 b(speci\002c)j(problem)f(arises)h(when)f
(the)600 204 y(maximum)d(allocated)j(length)f(is)f(smaller)g(than)g
(the)g(actual)h(or)e(maximum)h(length)h(of)e(the)h(data.)300
373 y Fy(PIA_Release)600 486 y FC(\(Required)35 b(tag)e(v)n(alues:)49
b Fy(pres_c_inline)p FC(.\))k(The)33 b(release)i(inline)f(of)f(an)g
(allocation)i(conte)o(xt)g(de-)600 599 y(scribing)24
b(whether)f(the)g(b)n(uf)n(fer)g(is)f(wholly)h(o)n(wned)f(\(not)h
(reference)h(by)f(an)o(ything)h(other)f(than)g(the)f(array)600
712 y(or)h(sequence)j(\(e.g.,)d(a)i Fv(C)t(O)t(R)t(B)r(A)g
FC(sequence')-5 b(s)26 b(release)f(\003ag\).)300 881
y Fy(PIA_Terminator)600 994 y FC(\(Required)35 b(tag)e(v)n(alues:)49
b Fy(pres_c_inline)p FC(.\))k(The)32 b(terminator)j(inline)g(of)d(an)h
(allocation)j(conte)o(xt,)600 1107 y(representing)30
b(the)c(terminating)i(element)g(of)e(a)f(terminated)j(array)-6
b(.)38 b(T)-7 b(ypically)h(,)28 b(this)e(is)g(only)h(used)g(for)600
1220 y(strings,)e(and)f(the)g(terminator)h(is)f(thus)g(the)g(nil)f
(character)-5 b(.)300 1389 y Fy(PIA_MustCopy)600 1502
y FC(\(Required)38 b(tag)e(v)n(alues:)55 b Fy(pres_c_inline)p
FC(.\))61 b(The)36 b(inline)h(of)f(an)f(allocation)k(conte)o(xt)e
(indicating)600 1615 y(whether)29 b(the)g(data)g(must)f(be)g(copied)i
(to)e(k)o(eep)h(a)f(reference)j(to)d(it.)43 b(Currently)-6
b(,)31 b(this)d(is)g(under)i(e)o(xperi-)600 1728 y(mental)23
b(use)g(in)f(the)h(Mach3/)r Fv(M)t(I)t(G)k FC(back)c(end)g(to)f(help)i
(implement)f(the)g(\223serv)o(ercop)o(y\224)j(feature)e(of)g
Fv(M)t(I)t(G)r FC(.)300 1897 y Fy(PIA_Alloc)600 2010
y FC(\(Required)35 b(tag)e(v)n(alues:)49 b Fy(pres_c_allocation)p
FC(.\))i(The)33 b(allocation)i(semantics)g(of)e(an)f(allocation)600
2123 y(conte)o(xt.)300 2292 y Fy(PIA_Overwrite)600 2405
y FC(\(Required)25 b(tag)f(v)n(alues:)30 b Fy(int)p FC(.\))d(A)c
(\003ag)g(in)g(an)g(allocation)j(conte)o(xt)f(indicating)h(that)e(the)g
(b)n(uf)n(fer)g(can)g(be)600 2518 y(o)o(v)o(erwritten)h(rather)g(than)f
(freshly)h(allocated.)31 b(This)24 b(is)f(not)h(currently)i(used)e(or)g
(fully)g(supported.)300 2687 y Fy(PIA_Owner)600 2800
y FC(\(Required)30 b(tag)f(v)n(alues:)41 b Fy(allocation_owner)p
FC(.\))d(The)28 b(o)n(wning)i(entity)g(of)e(a)g(the)h(data)g(or)g(b)n
(uf)n(fer)g(of)600 2913 y(an)24 b(allocation)i(conte)o(xt.)k(This)23
b(is)h(not)g(currently)i(used)e(or)f(fully)i(supported.)300
3083 y Fy(PIA_Ptr)600 3195 y FC(\(Required)k(tag)f(v)n(alues:)38
b Fy(pres_c_inline_atom)p FC(.\))d(The)28 b(main)f(\(pointer\))j
(inline)f(of)e(an)g(allocation)600 3308 y(conte)o(xt.)300
3478 y Fy(PIA_ArgList)600 3591 y FC(\(Required)e(tag)f(v)n(alues:)31
b Fy(char)46 b(*)p FC(.\))28 b(The)23 b(name)h(of)f(the)h(associated)i
(ar)n(gument)g(list.)300 3760 y Fy(PIA_Name)600 3873
y FC(\(Required)f(tag)f(v)n(alues:)31 b Fy(char)46 b(*)p
FC(.\))28 b(The)23 b(name)h(of)f(a)g(temporary)j(v)n(ariable.)300
4042 y Fy(PIA_CType)600 4155 y FC(\(Required)f(tag)f(v)n(alues:)31
b Fy(cast_type)p FC(.\))25 b(The)g Fv(C)t(A)t(S)t(T)i
FC(type)d(of)g(a)f(temporary)i(v)n(ariable.)300 4324
y Fy(PIA_Value)600 4437 y FC(\(Required)31 b(tag)e(v)n(alues:)41
b Fy(cast_expr)p FC(.\))h(The)29 b(initializer)j(\(or)d(initial)h(v)n
(alue\))g(for)f(a)g(temporary)i(v)n(ari-)600 4550 y(able.)e(It)24
b(is)f(not)h(necessarily)j(that)d(this)g(be)f(a)g(constant)j(e)o
(xpression.)300 4719 y Fy(PIA_PreHandler)600 4832 y FC(\(Required)37
b(tag)e(v)n(alues:)53 b Fy(char)47 b(*)p FC(.\))62 b(The)34
b(name)h(of)g(a)g(run-time)h(handler)h(function)g(that)e(must)g(be)600
4945 y(e)o(x)o(ecuted)25 b(prior)g(to)e(marshaling)j(or)d(unmarshaling)
k(the)d(temporary)h(v)n(ariable.)300 5114 y Fy(PIA_PostHandler)600
5227 y FC(\(Required)37 b(tag)e(v)n(alues:)53 b Fy(char)47
b(*)p FC(.\))62 b(The)34 b(name)h(of)g(a)g(run-time)h(handler)h
(function)g(that)e(must)g(be)600 5340 y(e)o(x)o(ecuted)25
b(after)f(marshaling)i(or)e(unmarshaling)i(the)e(temporary)h(v)n
(ariable.)p eop
%%Page: 133 133
133 132 bop 0 -165 a Fx(7.3.)51 b(THE)22 b(PRES)p 611
-165 28 4 v 31 w(C)g(LIBRAR)-6 b(Y)2649 b FC(133)300
91 y Fy(PIA_IsConst)600 204 y FC(\(Required)33 b(tag)f(v)n(alues:)47
b Fy(int)p FC(.\))52 b(The)31 b(\003ag)g(indicating)j(whether)f(the)f
(temporary')-5 b(s)34 b(initialization)h(is)600 317 y(constant.)300
489 y Fy(PIA_TempType)600 602 y FC(\(Required)24 b(tag)e(v)n(alues:)29
b Fy(pres_c_temporary_type)p FC(.\))22 b(The)g(type)g(of)g(temporary)h
(\(associated)i(with)600 715 y(the)f(presentation)j(or)c(the)h
(encoding\).)0 886 y Fy(pres_c_mapping)44 b(pres_c_set_mapping_tags\()o
(pres)o(_c_)o(mapp)o(ing_)o(kin)o(d)e(kind,)50 b(pres_c_mapping)0
999 y(map,)h(int)c(tag,)j(...\))300 1112 y FC(Set)25
b(the)i(v)n(alues)g(of)f Fy(map)e FC(according)29 b(to)d(the)g(gi)n(v)o
(en)h(list)f(of)g(tags)h(and)f(v)n(alues.)38 b(If)26
b Fy(map)e FC(is)i(null,)h(a)f(ne)n(w)f Fy(pres_c_)300
1225 y(mapping)c FC(node)k(of)e(kind)i Fy(kind)d FC(is)h(created)j(and)
e(\002lled)g(in)g(according)i(to)e(the)g(tags.)30 b(The)23
b(modi\002ed)h(mapping)h(is)300 1338 y(returned.)31 b(The)23
b(list)h(of)f(a)n(v)n(ailable)j(tags)e(is:)300 1531 y
Fy(PMA_Index)600 1644 y FC(\(Required)h(tag)f(v)n(alues:)31
b Fy(int)p FC(.\))c(The)c(inde)o(x)h(for)g(a)f(mapping)i(stub)l(.)300
1816 y Fy(PMA_Mapping)600 1928 y FC(\(Required)g(tag)f(v)n(alues:)31
b Fy(pres_c_mapping)p FC(.\))24 b(A)e Fy(pres_c_mapping)p
FC(.)300 2100 y Fy(PMA_Dir)600 2213 y FC(\(Required)k(tag)f(v)n(alues:)
32 b Fy(pres_c_direction)p FC(.\))26 b(The)e(parameter)i(direction)h
(for)d(a)g(mapping)i(direc-)600 2326 y(tion.)300 2498
y Fy(PMA_Target)600 2611 y FC(\(Required)36 b(tag)f(v)n(alues:)52
b Fy(pres_c_mapping)p FC(,)32 b(or)i Fy(pres_c_inline)c
FC(for)35 b(a)e(STR)l(UCT)f(mapping.\))600 2724 y(The)23
b(tar)n(get)i(mapping)g(for)f(another)h(mapping)g(\(e.g.,)e(mapping)i
(pointer)l(,)g(optional)h(pointer)l(,)f(.)14 b(.)g(.)g(\).)300
2895 y Fy(PMA_ElementMapping)600 3008 y FC(\(Required)25
b(tag)f(v)n(alues:)31 b Fy(pres_c_mapping)p FC(.\))24
b(The)f(element)i(mapping)f(for)g(an)g(internal)h(array)-6
b(.)300 3180 y Fy(PMA_Kind)600 3293 y FC(\(Required)25
b(tag)f(v)n(alues:)31 b Fy(pres_c_reference_kind)p FC(.\))22
b(The)h(kind)h(for)g(a)f(mapping)i(reference.)300 3465
y Fy(PMA_RefCount)600 3578 y FC(\(Required)g(tag)f(v)n(alues:)31
b Fy(int)p FC(.\))c(The)c(reference)j(count)f(for)e(a)g(mapping)i
(reference.)300 3750 y Fy(PMA_Value)600 3862 y FC(\(Required)g(tag)f(v)
n(alues:)31 b Fy(cast_expr)p FC(.\))25 b(The)e(v)n(alue)i(for)e(a)h
(mapping)g(initialize.)300 4034 y Fy(PMA_CType)600 4147
y FC(\(Required)k(tag)f(v)n(alues:)36 b Fy(cast_type)p
FC(.\))e(The)26 b(ctype)h(for)g(a)e(parameter)j(root)f(mapping)h(or)e
(temporary)600 4260 y(v)n(ariable.)300 4432 y Fy(PMA_Name)600
4545 y FC(\(Required)f(tag)f(v)n(alues:)31 b Fy(char)46
b(*)p FC(.\))28 b(The)23 b(name)h(of)f(a)g(temporary)j(v)n(ariable.)300
4717 y Fy(PMA_PreHandler)600 4829 y FC(\(Required)37
b(tag)e(v)n(alues:)53 b Fy(char)47 b(*)p FC(.\))62 b(The)34
b(name)h(of)g(a)g(run-time)h(handler)h(function)g(that)e(must)g(be)600
4942 y(e)o(x)o(ecuted)25 b(prior)g(to)e(marshaling)j(or)d(unmarshaling)
k(the)d(temporary)h(v)n(ariable.)300 5114 y Fy(PMA_PostHandler)600
5227 y FC(\(Required)37 b(tag)e(v)n(alues:)53 b Fy(char)47
b(*)p FC(.\))62 b(The)34 b(name)h(of)g(a)g(run-time)h(handler)h
(function)g(that)e(must)g(be)600 5340 y(e)o(x)o(ecuted)25
b(after)f(marshaling)i(or)e(unmarshaling)i(the)e(temporary)h(v)n
(ariable.)p eop
%%Page: 134 134
134 133 bop 0 -165 a FC(134)969 b Fx(CHAPTER)20 b(7.)51
b(PRESENT)-8 b(A)e(TION)18 b(IN)23 b(C/C++)g(\(PRES)p
2986 -165 28 4 v 31 w(C\))g(REPRESENT)-8 b(A)e(TION)300
91 y Fy(PMA_IsConst)600 204 y FC(\(Required)33 b(tag)f(v)n(alues:)47
b Fy(int)p FC(.\))52 b(The)31 b(\003ag)g(indicating)j(whether)f(the)f
(temporary')-5 b(s)34 b(initialization)h(is)600 317 y(constant.)300
500 y Fy(PMA_TempType)600 613 y FC(\(Required)24 b(tag)e(v)n(alues:)29
b Fy(pres_c_temporary_type)p FC(.\))22 b(The)g(type)g(of)g(temporary)h
(\(associated)i(with)600 726 y(the)f(presentation)j(or)c(the)h
(encoding\).)300 910 y Fy(PMA_ArgList)600 1023 y FC(\(Required)h(tag)f
(v)n(alues:)31 b Fy(char)46 b(*)p FC(.\))28 b(The)23
b(name)h(of)f(the)h(associated)i(ar)n(gument)g(list.)300
1206 y Fy(PMA_InternalCType)600 1319 y FC(\(Required)31
b(tag)f(v)n(alues:)42 b Fy(cast_type)p FC(.\))i(The)29
b(internal)i(type)g(\(as)e(vie)n(wed)h(by)g(the)g(generated)i(stubs\))
600 1432 y(speci\002ed)25 b(by)f(a)f Fy(PRES_C_MAPPING_XLATE)17
b FC(node.)300 1615 y Fy(PMA_InternalMapping)600 1728
y FC(\(Required)26 b(tag)e(v)n(alues:)31 b Fy(pres_c_mapping)p
FC(.\))25 b(The)e(mapping)i(of)f(the)g(internal)i(type)f(for)f(a)f
Fy(PRES_C_)600 1841 y(MAPPING_XLATE)c FC(node.)300 2024
y Fy(PMA_Translator)600 2137 y FC(\(Required)30 b(tag)e(v)n(alues:)39
b Fy(char)46 b(*)p FC(.\))41 b(The)27 b(translator)k(used)d(to)g(con)l
(v)o(ert)h(between)g(the)f(presented)j(and)600 2250 y(internal)25
b(types)g(in)f(a)f Fy(PRES_C_MAPPING_XLATE)17 b FC(node.)300
2433 y Fy(PMA_Destructor)600 2546 y FC(\(Required)31
b(tag)f(v)n(alues:)42 b Fy(char)k(*)p FC(.\))f(The)29
b(destructor)j(of)d(the)h(internal)h(type,)g(if)e(an)o(y)-6
b(,)31 b(of)e(a)g Fy(PRES_C_)600 2659 y(MAPPING_XLATE)19
b FC(node.)0 2869 y Fy(int)47 b(pres_c_add_inline_struct)o(_slo)o(t\(p)
o(res_)o(c_in)o(lin)o(e)42 b(inl\))300 2982 y FC(Add)23
b(a)g(ne)n(w)g(structure)j(slot)e(to)g(the)f(gi)n(v)o(en)i
Fy(inl)c FC(\(must)j(be)g(an)f(inline)i(struct)g(of)e(some)h(kind\).)0
3191 y Fy(int)47 b(pres_c_add_inline_union_)o(case)o(\(pr)o(es_c)o
(_inl)o(ine)41 b(inl\))300 3304 y FC(Add)23 b(a)g(ne)n(w)g(union)i
(case)f(to)g(the)g(gi)n(v)o(en)g Fy(inl)e FC(\(must)h(be)h(an)f(inline)
i(union)g(of)f(some)f(kind\).)0 3513 y Fy(char)47 b
(*mint_to_ctype_name\(min)o(t_1)41 b(*mint,)50 b(mint_ref)c(itype\))300
3626 y FC(Gi)n(v)o(en)23 b(a)g(simple)i(mint)e(type)h(this)g(will)g
(return)g(a)f(name)h(corresponding)k(to)23 b(the)h(C)f(type.)0
3835 y Fy(cast_type)45 b(mint_to_ctype\(mint_1)e(*mint,)50
b(mint_ref)45 b(itype\))300 3948 y FC(This)23 b(will)h(create)g(a)f
Fy(cast_type)e FC(capable)k(of)e(holding)j(a)d(v)n(alue)h(of)g(the)g
(simple)g(mint)f(type.)0 4136 y Fy(void)47 b(descend_collapsed_union)o
(\(pre)o(s_c)o(_1)42 b(*pres,)50 b(mint_ref)45 b(*itypep,)50
b(pres_c_inline)0 4249 y(*inlp\))300 4362 y FC(Gi)n(v)o(en)22
b(an)h(initial)h Fy(itype)c FC(which)j(must)f(be)h(a)f
Fy(MINT_UNION)d FC(and)k(a)f(pres)p 2623 4362 V 34 w(c)p
2697 4362 V 33 w(inline)i(which)f(must)f(be)h(a)f Fy(PRES_C_)300
4475 y(INLINE_COLLAPSED_UNION)p FC(,)15 b(\002nd)20 b(the)i
(appropriate)i(case)e(in)f(the)h(union)g(selected)h(by)f(the)f
(presentation)k(and)300 4588 y(return)h(the)e(ne)n(w)g
Fy(itype)f FC(and)h(pres)p 1420 4588 V 35 w(c)p 1495
4588 V 33 w(inline)h(corresponding)k(to)c(it.)31 b(Note)24
b(that)h(`itypep')i(and)e(`inlp')g(are)g(in-out)300 4701
y(parameters.)0 4888 y Fy(int)47 b(pres_c_find_mu_stub\(pres)o(_c_1)41
b(*pres,)50 b(mint_ref)c(itype,)k(cast_type)45 b(ctype,)0
5001 y(pres_c_mapping)f(map,)51 b(pres_c_stub_kind)43
b(stub_kind\))300 5114 y FC(Upon)27 b(encountering)j(a)c
Fy(PRES_C_MAPPING_STUB)20 b FC(node)27 b(while)g(descending)j(a)25
b(mapping)j(tree,)g(this)e(routine)300 5227 y(\002nds)34
b(a)g(stub)h(that)g(can)g(marshal/unmarshal)j(between)e(the)e
Fy(itype)e FC(and)j(the)g Fy(ctype)p FC(.)59 b(Returns)35
b(-1)f(if)g(none)300 5340 y(found.)p eop
%%Page: 135 135
135 134 bop 0 -165 a Fx(7.3.)51 b(THE)22 b(PRES)p 611
-165 28 4 v 31 w(C)g(LIBRAR)-6 b(Y)2649 b FC(135)0 63
y Fy(void)47 b(pres_descend_mapping_st)o(ub\(p)o(res)o(_c_1)41
b(*pres,)50 b(mint_ref)c(itype,)k(cast_type)45 b(*ctype,)0
176 y(pres_c_mapping)f(*map\))300 289 y FC(Gi)n(v)o(en)34
b(an)h Fy(itype)p FC(,)g Fy(ctype)p FC(,)g(and)g(a)f
Fy(PRES_C_MAPPING_STUB)p FC(,)d(this)k(routine)i(\002nds)d(a)h(stub)g
(that)g(can)g(mar)n(-)300 402 y(shal/unmarshal)i(between)d(the)g
Fy(itype)d FC(and)j Fy(ctype)p FC(,)f(and)h(b)n(umps)g(the)g
Fy(map)d FC(and)j Fy(ctype)d FC(pointers)36 b(to)d(point)300
515 y(into)d(the)f(stub')-5 b(s)31 b(mapping)f(and)g(type,)h
(essentially)h(dereferencing)h(through)f(the)d(le)n(v)o(el)g(of)h
(indirection.)48 b(Note)300 628 y(that)23 b(this)f(shouldn')n(t)j(be)d
(done)h(blindly)h(and)f(unconditionally)-6 b(,)27 b(because)d(there)e
(can)h(be)f(recursion)i(through)g(stub)300 741 y(mappings.)0
906 y Fy(void)47 b(pres_c_interpose_pointe)o(r\(ca)o(st_)o(type)41
b(*inout_ctype,)48 b(pres_c_mapping)0 1019 y(*inout_mapping,)g(const)e
(char)h(*arglist_name\))300 1132 y FC(Gi)n(v)o(en)28
b(a)h Fy(ctype)d FC(and)j Fy(map)p FC(,)g(return)h(a)e(ne)n(w)g(type)h
(and)h(mapping)g(which)f(is)f(identical)j(e)o(xcept)f(that)g(it)e
(imposes)300 1245 y(one)c(additional)i(le)n(v)o(el)e(of)g(pointer)h
(indirection.)0 1410 y Fy(void)47 b(pres_c_interpose_indire)o(ctio)o
(n_p)o(oint)o(er\(c)o(ast)o(_typ)o(e)42 b(*inout_ctype,)48
b(pres_c_mapping)0 1523 y(*inout_mapping,)g(pres_c_allocation)43
b(ptr_alloc\))300 1636 y FC(This)25 b(is)g(lik)o(e)h(`pres)p
916 1636 V 34 w(c)p 990 1636 V 33 w(interpose)p 1353
1636 V 36 w(pointer',)h(e)o(xcept)g(that)e(the)h(mapping)g(for)f(the)h
(imposed)g(pointer)h(is)e(an)g(entire)300 1749 y(allocation)32
b(conte)o(xt)e(\(through)i(a)d(singleton)i(mapping\),)h(instead)f(of)e
(just)h(a)e(pointer)j(mapping.)47 b(This)29 b(is)g(most)300
1862 y(useful)k(for)f(constructing)j(simple)d(pointer)h(indirection)i
(without)d(going)h(through)g(the)f(mundane)h(process)g(of)300
1975 y(creating)26 b(a)d(specialized)j(allocation)h(conte)o(xt)e(for)e
(it.)0 2141 y Fy(void)47 b(pres_c_interpose_intern)o(al_a)o(rra)o
(y\(ca)o(st_t)o(ype)41 b(*inout_ctype,)48 b(pres_c_mapping)0
2253 y(*inout_mapping,)g(const)e(char)h(*arglist_name\))300
2366 y FC(This)31 b(is)g(lik)o(e)g(`pres)p 933 2366 V
35 w(c)p 1008 2366 V 33 w(interpose)p 1371 2366 V 36
w(pointer',)k(e)o(xcept)d(that)f(the)h(mapping)g(for)f(the)g(imposed)i
(pointer)g(is)d Fy(PRES_)300 2479 y(C_MAPPING_INTERNAL_ARRAY)o
FC(,)e(not)k Fy(PRES_C_MAPPING_POINTER)p FC(.)47 b(The)32
b(special)i Fy(INTERNAL_ARRAY)300 2592 y FC(mapping)25
b(is)e(used)i(to)e(identify)j(it)d(as)g(an)h(array)g(instead)i(of)d(a)g
(simple)h(pointer)-5 b(.)0 2758 y Fy(void)47 b(pres_c_interpose_var_re)
o(fere)o(nce)o(\(cas)o(t_ty)o(pe)41 b(*inout_ctype,)49
b(pres_c_mapping)0 2871 y(*inout_mapping\))300 2984 y
FC(This)23 b(is)h(lik)o(e)g Fy(pres_c_interpose_pointer)16
b FC(e)o(xcept)25 b(that)f(it)f(interposes)j(a)e(C++)e(style)j
(reference.)0 3150 y Fy(void)47 b(pres_c_interpose_direct)o(ion\()o
(pre)o(s_c_)o(mapp)o(ing)41 b(*inout_maping,)48 b(aoi_direction)0
3263 y(aoi_dir\))300 3375 y FC(Gi)n(v)o(en)25 b(a)g(mapping,)i(return)f
(a)f(ne)n(w)g(mapping)i(that)f(encapsulates)j(the)c(original)j(mapping)
e(b)n(ut)g(which)g(tells)g(the)300 3488 y(back)e(end)g(what)g(kind)g
(of)g(parameter)h(the)f(mapping)h(corresponds)i(to:)i(`in',)23
b(`out',)i(etc.)0 3654 y Fy(void)47 b(pres_c_interpose_param_)o(root)o
(\(pr)o(es_c)o(_map)o(pin)o(g)42 b(*inout_mapping,)48
b(cast_type)d(ctype,)0 3767 y(cast_init)g(init\))300
3880 y FC(Gi)n(v)o(en)35 b(a)f(mapping,)39 b(return)d(a)e(ne)n(w)h
(mapping)h(that)f(encapsulates)k(the)c(original)i(mapping)f(b)n(ut)f
(which)g(tells)300 3993 y(the)28 b(back)h(end)f(that)g(this)g(PRES)p
1340 3993 V 31 w(C)f(tree)h(point)h(corresponds)i(to)d(the)g
(\223root\224)h(of)e(a)g(client)i(stub)g(or)e(serv)o(er)i(w)o(ork)300
4106 y(function)j(formal)e(parameter)-5 b(.)48 b(This)29
b(lets)h(the)g(back)h(end)f(tak)o(e)g(special)h(processing)h(steps,)g
(e.g.,)e(allocating)j(a)300 4219 y(local)24 b(v)n(ariable)i(to)d(serv)o
(e)h(as)g(the)g(actual)g(parameter)i(in)d(a)g(call)h(to)g(a)f(serv)o
(er)h(w)o(ork)g(function.)0 4384 y Fy(void)47 b
(pres_c_interpose_argume)o(nt\(p)o(res)o(_c_m)o(appi)o(ng)41
b(*inout_mapping,)48 b(const)f(char)0 4497 y(*arglist,)i(const)e(char)f
(*name\))300 4610 y FC(Gi)n(v)o(en)25 b(a)g(mapping,)i(return)f(a)f(ne)
n(w)g(mapping)i(that)f(encapsulates)j(the)c(original)j(mapping)e(b)n
(ut)g(which)g(tells)g(the)300 4723 y(back)21 b(end)f(to)f(sa)n(v)o(e)i
(information)h(about)f(the)h Fv(C)t(A)t(S)t(T)g FC(e)o(xpression)h(and)
d(type)g(being)h(processed.)30 b(This)20 b(information)300
4836 y(is)j(then)i(used)f(by)g(some)f(parent)i(of)f(the)f(PRES)p
1786 4836 V 31 w(C)g(mapping)i(node.)0 5001 y Fy(void)47
b(pres_c_interpose_tempor)o(ary\()o(cas)o(t_ty)o(pe)42
b(type,)50 b(const)c(char)h(*name,)j(cast_expr)c(init,)0
5114 y(const)g(char)h(*prehandler,)i(const)d(char)h(*posthandler,)h
(int)f(is_const,)0 5227 y(pres_c_tempoarary_type)42 b(temp_type,)49
b(pres_c_mapping)44 b(*inout_mapping\))300 5340 y FC(Gi)n(v)o(en)33
b(a)g(mapping,)j(return)f(a)d(ne)n(w)h(mapping)i(that)e(encapsulates)k
(the)d(original)h(so)e(that)h(all)f(operations)j(are)p
eop
%%Page: 136 136
136 135 bop 0 -165 a FC(136)969 b Fx(CHAPTER)20 b(7.)51
b(PRESENT)-8 b(A)e(TION)18 b(IN)23 b(C/C++)g(\(PRES)p
2986 -165 28 4 v 31 w(C\))g(REPRESENT)-8 b(A)e(TION)300
91 y FC(done)30 b(on)g(a)f(temporary)i(v)n(ariable)g(with)e(the)h(gi)n
(v)o(en)g(hints.)47 b(This)29 b(is)g(useful)i(for)f(C++)e(or)i(an)o(y)f
(other)h(situations)300 204 y(where)g(the)g(data)g(being)h
(marshaled/unmarshaled)36 b(doesn')n(t)c(e)o(xactly)f(match)f(the)g
(structures/control)35 b(\003o)n(w)28 b(of)300 317 y(the)c(mapping.)0
517 y Fy(void)47 b(pres_c_add_unpresented_)o(chan)o(nel)o(\(pre)o(s_c_)
o(1)42 b(*pres,)50 b(data_channel_mask)43 b(dcm\))300
629 y FC(Adds)24 b(a)f(ne)n(w)-6 b(,)22 b(unpresented)27
b(channel.)0 829 y Fy(char)47 b(*pres_c_make_arglist_na)o(me\(c)o(ons)o
(t)42 b(char)47 b(*hint\))300 942 y FC(Creates)24 b(a)f(unique)j(ne)n
(w)d(string)h(\(based)h(on)f(the)g(gi)n(v)o(en)g(string)h(`hint'\))g
(to)e(be)h(used)g(for)g(an)f(ar)n(gument)j(list)e(name.)0
1141 y Fy(const)46 b(char)h(*pres_c_dir_name\(pres_c_)o(dire)o(ctio)o
(n)42 b(dir\))300 1254 y FC(Returns)25 b(the)e(string)i(name)f(of)f
(the)h(gi)n(v)o(en)i Fv(P)t(R)t(E)t(S)p 1836 1254 V 40
w(C)e FC(direction.)0 1453 y Fy(tag_list)46 b(*create_tag_list\(int)c
(list_size\))300 1566 y FC(This)23 b(will)h(allocate)h(a)e
Fy(tag_list)e FC(of)i(the)h(gi)n(v)o(en)g(size.)0 1766
y Fy(void)47 b(delete_tag_list\(tag_lis)o(t)42 b(*tl\))300
1879 y FC(This)23 b(will)h(free)g(the)f Fy(tag_list)e
FC(and)j(all)g(of)f(its)h(tags.)0 2078 y Fy(tag_list)46
b(*copy_tag_list\(tag_list)41 b(*tl\))300 2191 y FC(This)23
b(will)h(do)f(a)g(deep)i(cop)o(y)f(of)g(the)f(gi)n(v)o(en)i
Fy(tag_list)p FC(.)0 2390 y Fy(void)47 b(concat_tag_list\(tag_lis)o(t)
42 b(*tl1,)50 b(tag_list)c(*tl2\))300 2503 y FC(This)23
b(will)h(mo)o(v)o(e)f(an)o(y)g(tags)h(from)g Fy(tl2)e
FC(to)h Fy(tl1)f FC(and)i(then)g(delete)h Fy(tl2)p FC(.)0
2702 y Fy(void)47 b(relink_tag_list\(tag_lis)o(t)42 b(*tl_root\))300
2815 y FC(This)34 b(function)j(will)d(set)h(all)f(of)h(the)f
Fy(parent)e FC(pointers)37 b(in)d Fy(tag_list)p FC(s)e(to)j(their)g
(proper)h(parents.)63 b(This)34 b(is)300 2928 y(usually)c(run)f(after)h
(a)g Fv(P)t(R)t(E)t(S)p 1196 2928 V 40 w(C)f FC(\002le)f(has)h(been)h
(read)f(in)g(because)h(the)f Fy(parent)p FC(s)e(are)i(al)o(w)o(ays)g
(null)g(because)i(the)300 3041 y(c)o(ycles)25 b(ha)n(v)o(e)f(to)f(be)h
(brok)o(en)h(before)g(writing.)0 3241 y Fy(tag_item)46
b(*create_tag_item\(const)41 b(char)47 b(*tag,)j(tag_data)c(*data\))300
3353 y FC(This)23 b(will)h(allocate)h(a)e Fy(tag_item)e
FC(and)j(initialize)i(it)d(with)g(the)h(ar)n(guments.)0
3553 y Fy(void)47 b(delete_tag_item\(tag_ite)o(m)42 b(*ti\))300
3666 y FC(This)23 b(will)h(free)g(a)f Fy(tag_item)p FC(.)0
3865 y Fy(tag_item)46 b(*add_tag\(tag_list)d(*tl,)50
b(const)d(char)f(*tag,)51 b(tag_data_kind)44 b(kind,)51
b(...\))300 3978 y FC(This)23 b(will)f(add)h(a)g(tag)g(to)f(a)h
Fy(tag_list)c FC(with)k(the)g(gi)n(v)o(en)g(ar)n(guments.)31
b(The)22 b(last)i(ar)n(gument)g(is)f(the)g(data)g(to)g(be)g(put)300
4091 y(into)h(the)g(tag,)g(its)f(C)g(type)h(is)f(determined)j(by)e(the)
f Fy(tag_data_kind)p FC(.)0 4290 y Fy(void)47 b(rem_tag\(tag_list)c
(*tl,)51 b(const)46 b(char)h(*tag\))300 4403 y FC(This)23
b(will)h(remo)o(v)o(e)f(the)h(tag)g(from)f(the)h Fy(tag_list)p
FC(.)0 4603 y Fy(tag_item)46 b(*find_tag\(tag_list)c(*tl,)51
b(const)46 b(char)h(*tag\))300 4715 y FC(Finds)24 b(a)f(tag)h(matching)
h(the)f(gi)n(v)o(en)g(name)f(in)h(the)g Fy(tag_list)p
FC(.)0 4915 y Fy(tag_item)46 b(copy_tag_item\(tag_item)41
b(*ti\))300 5028 y FC(Deep)24 b(copies)h(a)e Fy(tag_item)p
FC(.)0 5227 y Fy(tag_data)46 b(create_tag_data\(tag_dat)o(a_k)o(ind)41
b(kind,)51 b(int)c(length\))300 5340 y FC(Initializes)26
b(and)e(allocates)i(an)o(y)e(memory)f(for)h(the)g Fy(tag_data)p
FC(.)p eop
%%Page: 137 137
137 136 bop 0 -165 a Fx(7.3.)51 b(THE)22 b(PRES)p 611
-165 28 4 v 31 w(C)g(LIBRAR)-6 b(Y)2649 b FC(137)0 91
y Fy(void)47 b(delete_tag_data\(tag_dat)o(a)42 b(*td\))300
204 y FC(Frees)24 b(an)o(y)f(memory)h(allocated)i(for)e(the)f
Fy(tag_data)p FC(.)0 392 y Fy(tag_data)46 b(copy_tag_data\(tag_data)41
b(*td\))300 505 y FC(Deep)24 b(copies)h(the)e(gi)n(v)o(en)h
Fy(tag_data)p FC(.)0 694 y Fy(void)47 b(set_tag_data\(tag_data)42
b(*td,)50 b(int)d(index,)k(union)46 b(tag_data_u)f(data\))300
807 y FC(Sets)22 b(a)g Fy(tag_data)d FC(to)j(the)h(gi)n(v)o(en)g(v)n
(alue.)29 b(If)22 b(the)g Fy(tag_data)e FC(is)i(an)g(array)-6
b(,)23 b(then)g Fy(index)d FC(speci\002es)k(which)e(slot)h(to)300
919 y(set.)0 1108 y Fy(union)46 b(tag_data_u)f(get_tag_data\(tag_data)d
(*td,)51 b(unsigned)46 b(int)h(index\))300 1221 y FC(Returns)25
b(the)e(v)n(alue)i(of)e(the)h Fy(tag_data)p FC(,)c(if)k(its)f(an)h
(array)g(then)g Fy(index)e FC(speci\002es)j(the)e(slot)i(in)e(the)h
(array)-6 b(.)0 1409 y Fy(unsigned)46 b(int)g
(tag_data_length\(tag_data)c(*td\))300 1522 y FC(Returns)25
b(one)f(if)f(the)h Fy(tag_data)c FC(isn')n(t)25 b(an)e(array)-6
b(,)25 b(otherwise,)g(it)e(returns)i(the)f(length)h(of)e(the)h(array)-6
b(.)0 1710 y Fy(int)47 b(append_tag_data\(tag_data)41
b(*td,)51 b(union)46 b(tag_data_u)f(data\))300 1823 y
FC(Appends)25 b(a)e(v)n(alue)h(to)g(a)f Fy(tag_data)d
FC(array)-6 b(.)0 2011 y Fy(tag_data_kind)44 b
(get_base_tag_data_kind\(ta)o(g_da)o(ta_)o(kind)d(kind\))300
2124 y FC(Returns)25 b(the)e(type,)h(or)g(element)g(type,)g(of)g(a)f
Fy(tag_data)p FC(.)0 2312 y Fy(int)47 b(tag_data_kind_size\(tag_d)o
(ata_)o(kin)o(d)42 b(kind\))300 2425 y FC(Returns)25
b(the)e(size)h(of)g(the)g Fy(tag_data)c FC(type,)k(or)g(element)g
(type.)0 2613 y Fy(char)47 b(*ptr_to_tag_ref\(const)42
b(char)k(*type,)k(void)d(*ptr\))300 2726 y FC(Con)l(v)o(erts)25
b(a)e(pointer)i(and)f(type)h(string)f(into)h(a)e(string)i(usable)g(by)e
(a)g Fy(TAG_REF)p FC(.)0 2915 y Fy(void)47 b(*tag_ref_to_ptr\(const)42
b(char)k(*type,)k(const)d(char)f(*ref\))300 3028 y FC(Con)l(v)o(erts)34
b(a)f Fy(TAG_REF)d FC(string)k(into)g(a)e(pointer)l(,)38
b(if)32 b(the)h Fy(ref)f FC(string)i(doesn')n(t)h(match)e(the)h(gi)n(v)
o(en)f(type,)j(it)d(will)300 3140 y(return)25 b(null.)0
3329 y Fy(int)47 b(cmp_tag_ref_class\(char)42 b(*ref_class,)48
b(char)f(*ref\))300 3442 y FC(Compare)24 b(the)g(class)g(of)g(a)f
Fy(TAG_REF)e FC(string)j(against)h(the)f(gi)n(v)o(en)g(one.)0
3630 y Fy(void)47 b(print_tag_data\(int)42 b(indent,)50
b(tag_data_kind)45 b(kind,)50 b(union_tag_data_u)43 b(data\))300
3743 y FC(Prints)24 b(tag)g(v)n(alues.)0 3931 y Fy(void)47
b(print_tag\(int)d(indent,)50 b(tag_item)45 b(*ti\))300
4044 y FC(Prints)18 b(a)g Fy(tag_item)d FC(at)j(a)g(certain)h
(indentation.)31 b(The)17 b(format)i(is)f(`)p Fi(<)p
FC(tag)p 2562 4044 V 33 w(name)p Fi(>)p FC(:)p Fi(<)p
FC(tag)p 3068 4044 V 35 w(type)p Fi(>)p Fh(=)p Fi(<)p
FC(tag)p 3581 4044 V 34 w(v)n(alue)p Fi(>)p FC('.)0 4211
y Fy(int)47 b(pres_function\(pres_c_1)42 b(*out_pres,)49
b(tag_list)c(*parent_tl,)k(cast_scoped_name)0 4324 y
(current_scope_name,)e(cast_scoped_name)c(fname,)50 b(int)d(tag,)k
(...\),)f(int)0 4437 y(vpres_function\(pres_c_1)41 b(*out_pres,)50
b(tag_list)45 b(*parent_tl,)k(cast_scoped_name)0 4550
y(current_scope_name,)e(cast_scoped_name)c(fname,)50
b(int)d(tag,)k(va_list)46 b(arg_addr\))300 4663 y FC(This)25
b(function)i(is)d(used)i(to)f(create)h(presentation)i(only)e
(functions.)35 b(These)25 b(`presentation)k(only')d(functions)h(are)300
4775 y(simple)j(functions)h(that)f(e)o(xist)f(solely)h(for)g(the)f(sak)
o(e)h(of)e(the)i(presentation)i(and)e(don')n(t)g(need)g(to)f(be)g
(optimized,)300 4888 y(processed)d(or)d(whate)n(v)o(er)-5
b(.)30 b(So,)22 b(to)h(mak)o(e)h(it)f(easier)h(to)g(produce)h(these)f
(functions,)i(this)e(tag)f(based)i(function)h(w)o(as)300
5001 y(created)f(that)f(will)f(tak)o(e)h(care)g(of)f(most)h(of)f(the)h
(grunt)g(w)o(ork.)29 b Fy(pres_function)19 b FC(basically)26
b(tak)o(es)e(a)f(description)300 5114 y(of)e(the)g(presentation)j(for)d
(the)g(function)i(through)f(the)f(tags)h(and)f(then)g(creates)h(the)f
(appropriate)26 b Fv(C)t(A)t(S)t(T)r FC(,)c(and)f(adds)300
5227 y(a)i(number)h(of)f(tags)g(to)g(the)h Fy(parent_tl)c(tag_list)g
FC(describing)26 b(the)d(function.)31 b(These)23 b(tags)h(are)f(then)h
(used)g(by)300 5340 y(the)g(back)g(end)g(to)g(actually)h(produce)h(the)
e(function)h(body)-6 b(.)p eop
%%Page: 138 138
138 137 bop 0 -165 a FC(138)969 b Fx(CHAPTER)20 b(7.)51
b(PRESENT)-8 b(A)e(TION)18 b(IN)23 b(C/C++)g(\(PRES)p
2986 -165 28 4 v 31 w(C\))g(REPRESENT)-8 b(A)e(TION)300
91 y Fy(PFA_TAG_DONE)600 204 y FC(\(No)23 b(required)j(tag)e(v)n
(alues.\))30 b(The)23 b(terminator)-5 b(.)300 376 y Fy(PFA_Scope)600
489 y FC(\(Required)31 b(tag)f(v)n(alues:)42 b Fy(cast_scope)p
FC(.\))h(Speci\002es)30 b(the)g(scope)g(the)g(function)i(should)f(be)e
(declared)600 602 y(in.)300 774 y Fy(PFA_ReturnType)600
887 y FC(\(Required)c(tag)f(v)n(alues:)31 b Fy(cast_type)p
FC(.\))25 b(The)e(return)i(type)f(of)g(the)g(function.)300
1059 y Fy(PFA_Spec)600 1171 y FC(\(Required)h(tag)f(v)n(alues:)31
b Fy(int)p FC(.\))c(The)c(spec)h(for)g(the)g(parameter)-5
b(.)300 1343 y Fy(PFA_Parameter)600 1456 y FC(\(Required)36
b(tag)f(v)n(alues:)52 b Fy(cast_type)p FC(,)33 b Fy(char)47
b(*)p FC(,)35 b(and)g Fy(cast_init)p FC(.\))58 b(Adds)35
b(a)f(parameter)i(to)e(the)600 1569 y(function)26 b(with)d(the)h(gi)n
(v)o(en)g(attrib)n(utes.)300 1741 y Fy(PFA_StorageClass)600
1854 y FC(\(Required)h(tag)f(v)n(alues:)31 b Fy(cast_storage_class)p
FC(.\))23 b(The)g(storage)i(class)g(for)e(the)h(declaration.)300
2026 y Fy(PFA_Template)600 2139 y FC(\(No)f(required)j(tag)e(v)n
(alues.\))30 b(Speci\002es)24 b(that)g(this)g(function)i(should)f(be)e
(in)h(a)f(template.)300 2311 y Fy(PFA_TemplateParameter)600
2424 y FC(\(Required)32 b(tag)f(v)n(alues:)44 b Fy
(cast_template_arg_kind)p FC(,)25 b Fy(char)46 b(*)p
FC(,)31 b(and)g Fy(cast_template_arg)p FC(.\))600 2536
y(Adds)24 b(a)f(parameter)i(to)e(the)h(template.)300
2708 y Fy(PFA_FunctionKind)600 2821 y FC(\(Required)g(tag)f(v)n(alues:)
30 b Fy(char)47 b(*)p FC(.\))28 b(The)22 b(description)k(of)c(what)h
(this)g(function)i(is)e(supposed)i(to)e(do.)28 b(Its)600
2934 y(just)c(a)f(semantically)j(loaded)g(name)d(that)h(will)f(get)h
(matched)h(up)f(to)f(something)j(in)d(the)h(back)g(end.)300
3106 y Fy(PFA_Constructor)600 3219 y FC(\(No)f(required)j(tag)e(v)n
(alues.\))30 b(Speci\002es)24 b(that)g(this)g(function)i(is)d(some)h
(form)f(of)h(a)f(C++)g(constructor)-5 b(.)300 3391 y
Fy(PFA_Included)600 3504 y FC(\(Required)25 b(tag)f(v)n(alues:)31
b Fy(inclusion)p FC(.\))25 b(The)e(inclusion)j(state)f(for)f(the)f
(function)j(declaration.)300 3676 y Fy(PFA_Tag)600 3789
y FC(\(Required)g(tag)e(v)n(alues:)31 b Fy(char)47 b(*)p
FC(,)23 b Fy(tag_data_kind)p FC(,)c(and)24 b Fy(union)47
b(tag_data_u)p FC(.\))26 b(Adds)e(an)g(arbi-)600 3901
y(trary)g(tag)g(to)g(the)f(function')-5 b(s)27 b(tag)d(list.)300
4073 y Fy(PFA_Model)600 4186 y FC(\(No)31 b(required)j(tag)d(v)n
(alues.\))55 b(Indicates)34 b(that)e(the)f(function)j(is)d(not)h(e)o
(xplicitly)i(de\002ned,)g(b)n(ut,)g(rather)600 4299 y(follo)n(ws)26
b(some)e(model)i(de\002nition.)34 b(F)o(or)24 b(e)o(xample,)i(a)e
(getter)i(or)f(setter)h(in)f(a)f(union)j(is)d(a)h(model,)g(while)600
4412 y(a)e(constructor)k(isn')n(t.)300 4584 y Fy(PFA_Protection)600
4697 y FC(\(Required)k(tag)f(v)n(alues:)43 b Fy(cast_def_protection)p
FC(.\))e(The)29 b(protection)j(for)e(the)g(function)h(declara-)600
4810 y(tion.)300 4982 y Fy(PFA_GlobalFunction)600 5094
y FC(\(No)c(required)j(tag)e(v)n(alues.\))43 b(Indicates)30
b(that)e(the)g(function)i(is)d(not)h(a)g(method)g(in)g(a)f(C++)g
(class.)42 b(This)600 5207 y(causes)23 b(an)o(y)f(references)j(to)d
(this)g(function)j(to)c(be)h(fully)h(scoped)h(rather)f(than)g
(implicitly)g(scoped)h(due)e(it)600 5320 y(being)j(in)e(a)g(class.)p
eop
%%Page: 139 139
139 138 bop 0 -165 a Fx(7.4.)51 b Fg(presd)11 b Fx(,)21
b(THE)g(PRES)p 905 -165 28 4 v 31 w(C)i(PRINTING)e(UTILITY)1942
b FC(139)0 91 y Ft(7.4)119 b Fj(presd)p Ft(,)27 b(the)k(PRES)p
1138 91 36 4 v 43 w(C)f(Printing)h(Utility)0 298 y FC(The)23
b Fy(presd)f FC(program)j(is)f(a)f(simple)i(pretty-printer)j(that)c
(tak)o(es)j Fv(P)t(R)t(E)t(S)p 2240 298 28 4 v 40 w(C)e
FC(input)g(from)f(a)f(\002le)g(or)h(standard)i(input)f(and)g(out-)0
411 y(puts)d(a)e(human-readable,)26 b(ASCII)19 b(translation.)31
b(If)21 b(the)i Fv(P)t(R)t(E)t(S)p 1959 411 V 40 w(C)f
FC(input)g(comes)g(from)f(a)g(\002le,)f(the)i(output)g(is)f(a)g
(correspond-)0 524 y(ing)32 b(`)p Fy(.prd)p FC(')e(\()r
Fv(P)t(R)t(E)t(S)p 653 524 V 40 w(C)i FC(dump\))g(\002le.)52
b(Otherwise,)34 b(if)d(the)j Fv(P)t(R)t(E)t(S)p 2077
524 V 39 w(C)f FC(input)f(comes)g(from)g Fy(stdin)p FC(,)f(the)g
(human-readable)0 637 y(output)f(is)f(sent)h(to)f Fy(stdout)p
FC(.)42 b(Note)29 b(that)g(as)g(the)i Fv(P)t(R)t(E)t(S)p
1782 637 V 40 w(C)f FC(format)f(changes,)j(this)e(program)g(must)f
(also)g(be)g(changed)i(to)0 750 y(support)25 b(an)o(y)f(ne)n(w)f
(constructs,)j(or)e(modi\002cations)h(to)f(e)o(xisting)h(ones.)p
eop
%%Page: 140 140
140 139 bop 0 -165 a FC(140)969 b Fx(CHAPTER)20 b(7.)51
b(PRESENT)-8 b(A)e(TION)18 b(IN)23 b(C/C++)g(\(PRES)p
2986 -165 28 4 v 31 w(C\))g(REPRESENT)-8 b(A)e(TION)p
eop
%%Page: 141 141
141 140 bop 0 717 a Fw(Chapter)44 b(8)0 1134 y FB(Sour)l(ce)51
b(Code)h(Markup)f(Language)h(\(SCML\))0 1582 y FC(The)27
b(Source)h(Code)g(Markup)g(Language)i(\()r Fv(S)t(C)t(M)t(L)r
FC(\))f(is)e(a)g(formatting)j(language)g(that)e(can)g(be)f(used)h(to)g
(create)h(templates)0 1695 y(for)24 b(source)i(code)f(that)f(needs)h
(to)f(be)g(output)i(by)e(Flick.)30 b(F)o(or)23 b(e)o(xample,)i(the)h
Fv(C)t(O)t(R)t(B)r(A)f FC(C++)e(mapping)j(requires)g(a)d(number)0
1808 y(of)30 b(C++)g(classes)i(and)e(functions)j(to)d(be)g(generated)j
(alongside)g(the)d(actual)i(de\002ned)f(types.)50 b(These)30
b(e)o(xtra)h(classes)h(and)0 1920 y(functions)g(are)e(only)g(there)h
(for)e(the)h(sak)o(e)h(of)e(presentation)k(and)d(do)g(not)g(need)g(an)o
(y)g(special)h(analysis)h(or)d(optimization)0 2033 y(so)c(generating)j
(them)d(is)g(usually)i(just)e(a)g(matter)g(of)g(plugging)j(the)d(right)
h(strings)h(into)e(a)g(template.)34 b(This)25 b(phase)h(of)f(code)0
2146 y(generation)j(can)d(be)g(done)h(with)f(a)g(series)h(of)f
Fy(printf)p FC(s,)e(ho)n(we)n(v)o(er)l(,)j(a)e(more)h(data)h(oriented)h
(and)f(e)o(xternalized)i(approach)0 2259 y(is)f(more)f(\003e)o(xible)i
(and)f(possibly)i(easier)f(to)f(maintain.)40 b(Therefore,)31
b Fv(S)t(C)t(M)t(L)f FC(w)o(as)c(created)j(so)d(that)i(the)f(user)g
(could)h(write)0 2372 y(the)c(implementations)j(of)c(these)i(functions)
h(as)d(a)g(template)i(and)f(data)g(created)h(by)f(Flick)g(w)o(ould)g
(\002ll)f(in)g(the)h(holes.)141 2488 y(The)29 b(use)h(of)i
Fv(S)t(C)t(M)t(L)h FC(code)d(in)g(Flick)f(is)h(currently)i(limited)e
(to)g(the)g(functions)i(and)e(methods)h(for)f(the)h Fv(C)t(O)t(R)t(B)r
(A)g FC(C++)0 2601 y(classes)23 b(created)f(for)f(the)h(T)-8
b(A)j(O)18 b(implementation,)24 b(although)g(it)c(w)o(ould)i(be)f(nice)
g(to)g(be)o(gin)h(using)g(it)f(for)g(other)h(code)g(which)0
2713 y(is)i(currently)j(done)f(with)f Fy(printf)p FC(s.)30
b(This)24 b(code)h(is)g(read)g(in)g(and)g(e)o(x)o(ecuted)h(at)f(start)g
(up)g(so)f(that)i(it)e(can)h(de\002ne)g(a)f(number)0
2826 y(of)i(ne)n(w)f(commands)i(that)f(are)g(used)h(to)f(generate)i
(the)e(appropriate)j(output.)37 b(As)25 b(a)h(Flick)g(back)h(end)f
(then)g(processes)j(the)2 2939 y Fv(P)t(R)t(E)t(S)p 194
2939 28 4 v 39 w(C)c FC(and)f(defers)h(to)e(the)j Fv(S)t(C)t(M)t(L)h
FC(code)d(whene)n(v)o(er)h(it)e(encounters)k(a)c(presentation)k
(function)f(declaration.)0 3247 y Ft(8.1)119 b(The)30
b(Language)0 3462 y FA(8.1.1)99 b(Intr)n(oduction)0 3642
y FC(The)34 b(syntax)h(of)f(the)g(language)i(w)o(as)e(based)h(on)f
(SGML)e(in)i(an)g(attempt)h(to)e(mak)o(e)i(it)e(more)h(accessible)j(to)
d(people)h(in)0 3755 y(general)24 b(since)f(man)o(y)e(are)h(already)i
(f)o(amiliar)f(with)f(its)g(most)g(popular)i(descendent,)h(HTML.)h(An)
21 b(e)o(xample)i(code)f(section)0 3868 y(might)i(be)f(the)h(best)g(w)o
(ay)g(to)f(start.)141 3983 y(The)g(follo)n(wing)k Fv(S)t(C)t(M)t(L)g
FC(code)d(is)g(tak)o(en)g(from)g Fy(runtime/headers/flick/pr)o(es/)o
(std_)o(defi)o(nes)o(.scm)o(l)p FC(:)0 4211 y Fy(<ifndef)46
b(name="STD_DEFINES_SCML">)0 4324 y(<define)g(name="STD_DEFINES_SCML")
41 b(kind="static-variable")h(value=true>)0 4550 y(<!--)47
b(These)f(are)h(the)g(standard)e(set)i(of)g(defines)f(used)h(in)g(SCML)
g(-->)0 4775 y(<define)f(name="scope")e(kind="bracket-tag")f
(value="c-scope-handler")382 4888 y(rparams={name:string}>)0
5001 y(<define)j(name="macro")e(kind="bracket-tag")f
(value="c-macro-handler")382 5114 y(rparams={name:string})f
(oparams={close:bool=fals)o(e)1861 5227 y(rparams:tag_list={})1861
5340 y(oparams:tag_list={}}>)1882 5568 y FC(141)p eop
%%Page: 142 142
142 141 bop 0 -165 a FC(142)1317 b Fx(CHAPTER)20 b(8.)51
b(SOURCE)21 b(CODE)g(MARKUP)g(LANGU)l(A)l(GE)f(\(SCML\))0
91 y Fy(...)0 204 y(</ifndef>)141 417 y FC(An)o(ything)i(within)f
(angle)h(brack)o(ets)h(is)d(a)g(command)h(name)g(follo)n(wed)h(by)e
(the)h(ar)n(guments)i(for)e(the)g(command.)28 b(So)20
b(the)0 530 y(\002rst)j(command)h(is)f Fy(ifndef)p FC(,)d(which)k(is)f
(basically)i(the)f(same)f(thing)h(as)f(a)g(C)f(preprocessor')-5
b(s)27 b(`#ifndef)5 b(',)25 b(it)e(checks)i(to)e(see)0
643 y(if)h(name)f(has)i(been)f(declared)i(or)e(not)g(and)g(e)o(x)o
(ecutes)i(the)e(block)h(if)e(it)h(is)f(not)h(de\002ned.)31
b(The)23 b(second)j(command,)e Fy(define)p FC(,)0 756
y(creates)h(a)d(static)j(v)n(ariable)f(in)g(the)f(current)i(scope)f
(with)f(the)g(gi)n(v)o(en)h(name)f(and)h(v)n(alue.)29
b(From)23 b(there)h(we)e(ha)n(v)o(e)i(a)f(comment)0 869
y(and)i(then)g(create)g(some)f(more)g(commands)i(for)e(the)g(system)h
(using)h(de\002ne)e(and)h(then)g(we)e(terminate)j(the)e
Fy(ifndef)e FC(block)0 982 y(with)h Fy(</ifndef>)p FC(.)j(So)d(this)h
(basically)i(corresponds)h(to)c(the)h(or)n(ganization)j(of)c(a)g
(header)i(\002le)e(in)h(C.)0 1231 y FA(8.1.2)99 b(T)-7
b(ypes)0 1406 y FC(No)n(w)21 b(that)j(we)e(kno)n(w)g(basically)j(what)e
(a)f(command)i(looks)g(lik)o(e)f(lets)g(look)h(a)e(little)i(deeper)g
(at)f(the)g(rest)g(of)g(the)g(command.)0 1519 y(When)k(e)o(x)o(ecuting)
h(a)e(command)h(there)h(are)e(a)g(series)i(of)e(assignments)j(after)e
(it)g(that)g(set)f(the)h(v)n(alues)g(of)g(some)f(v)n(ariables.)0
1632 y(These)h(assignments)j(are)d(setting)i(the)f(v)n(alues)g(of)f
(the)g(parameters)i(for)f(the)f(command.)40 b(Each)27
b(parameter)i(has)f(a)e(name,)0 1745 y(which)h(is)g(the)g(name)f(used)i
(in)f(the)g(assignment,)i(a)d(type,)i(which)f(is)g(speci\002ed)h(in)f
(the)g(de\002nition,)i(and)e(\002nally)g(a)f(def)o(ault)0
1858 y(v)n(alue.)56 b(A)31 b(name)h(can)h(be)f(an)o(y)g(string,)k(b)n
(ut)c(only)h(C)e(style)j(identi\002ers)g(can)e(be)g(used)h(re)o
(gularly)-6 b(,)37 b(otherwise)c(one)g(must)0 1970 y(surround)26
b(the)e(name)f(with)h(single)h(quotes)g(\('\).)j(The)c(type)g(of)f(a)g
(parameter)j(is)d(currently)j(limited)e(to:)136 2183
y Fs(\017)46 b Fz(any)23 b FC(an)o(y)h(supported)i(type)136
2371 y Fs(\017)46 b Fz(arrays)25 b FC(simple)g(array)f(types)136
2559 y Fs(\017)46 b Fz(bool)24 b FC(a)f(boolean)i(v)n(alue)g(\(e.g.,)e
(\223true\224)i(or)e(\223f)o(alse\224\))136 2747 y Fs(\017)46
b Fz(int)23 b FC(a)g(signed)i(inte)o(ger)136 2935 y Fs(\017)46
b Fz(\003oat)24 b FC(a)f(single)i(precision)h(\003oating)e(point)h
(number)136 3123 y Fs(\017)46 b Fz(string)24 b FC(a)f(string)136
3311 y Fs(\017)46 b Fz(tag)p 352 3311 28 4 v 34 w(list)24
b FC(a)f(tag)p 698 3311 V 34 w(list)136 3499 y Fs(\017)46
b Fz(cmd)23 b FC(a)g(scoped)i(reference)h(to)d(a)g(command)i(name)136
3687 y Fs(\017)46 b Fz(scml)24 b FC(scml)f(code)136 3875
y Fs(\017)46 b Fz(str)n(eam)25 b FC(An)e(I/O)g(stream,)g(this)i(is)e(a)
g(bit)h(of)f(a)g(hack)i(at)e(the)h(moment,)f(try)h(and)g(a)n(v)n(oid)h
(using)g(it)0 4125 y FA(8.1.3)99 b(V)-9 b(alues)0 4299
y FC(The)27 b(format)i(for)f(declaring)i(the)f(tag)f(that)g(represents)
j(this)d(parameter)i(is)e(the)g(tag)g(name,)h(a)e(colon,)j(and)f(an)e
(equal)i(sign)0 4412 y(follo)n(wed)f(by)f(a)f(literal)j(v)n(alue)e(to)g
(set)g(the)g(def)o(ault.)41 b(F)o(or)26 b(e)o(xample,)i
Fy(num:int=5)c FC(mak)o(es)j(an)g(inte)o(ger)h(tag)f(named)h(`num')0
4525 y(and)f(sets)f(its)h(v)n(alue)g(to)f(5,)g(of)g(course)i(if)e(this)
h(tag)f(is)g(not)h(added)h(to)e(a)f(list,)i(it)f(cannot)i(be)e
(accessed)j(and)e(is)f(lost,)h(which)f(is)0 4638 y(why)d(all)g
(parameter)j(declarations)h(are)c(tag)p 1389 4638 V 34
w(lists.)141 4751 y(The)g(set)h(of)f(literal)i(v)n(alues)g(for)f(these)
g(types)h(are:)136 4964 y Fs(\017)46 b Fz(bool)24 b FC(true,)g(f)o
(alse)136 5152 y Fs(\017)46 b Fz(int)23 b FC(re)o(gular)i(and)f(he)o
(x,)f(uh,)h(do)f(not)h(try)g(to)f(ne)o(gate)i(an)o(ything.)14
b(.)g(.)136 5340 y Fs(\017)46 b Fz(\003oat)24 b FC(as)f(one)h(w)o(ould)
g(e)o(xpect,)h(again)f(do)f(not)h(ne)o(gate)p eop
%%Page: 143 143
143 142 bop 0 -165 a Fx(8.1.)51 b(THE)22 b(LANGU)l(A)l(GE)2877
b FC(143)136 91 y Fs(\017)46 b Fz(strings)25 b FC(\223put)g(some)f(te)o
(xt)g(here\224,)h(it)f(also)h(supports)h(C)d(style)i(escapes,)h(e)o
(xcept)f(for)f(octal)h(v)n(alues.)32 b(\(Note:)e(one)25
b(can)227 204 y(also)h(b)n(uild)g(strings)h(with)g Fv(C)t(A)t(S)t(T)h
FC(stuf)n(f)e(from)f(Flick-generated)k(tags,)d(b)n(ut)f(do)h(not)f(try)
h(to)f(use)g(it)g(for)g(tag)h(names)f(or)227 317 y(an)o(ything)h(other)
e(than)h(printing.)30 b(It)24 b(will)f(barf.\))136 508
y Fs(\017)46 b Fz(tag)p 352 508 28 4 v 34 w(list)24 b
Fy({)48 b(fname:string="John")42 b(lname:string="Doe")h(})136
699 y Fs(\017)j Fz(cmd)23 b FC(struct::v)n(ar::'T)j(operator=\(T)g
(&\)')136 890 y Fs(\017)46 b Fz(scml)24 b FC(Nothing)g(other)h(than)f
(the)g(b)n(uiltin)h(contents)h(tag)e(which)g(is)f(created)i(for)f
(block)h(commands.)143 1107 y Fv(S)t(C)t(M)t(L)i FC(also)d(supports)i
(simple)e(e)o(xpressions)j(for)c(most)h(of)f(its)h(types:)136
1324 y Fs(\017)46 b Fz(arrays)25 b FC([])f(\(inde)o(xing,)h(as)f(in)f
(a[5]\))136 1515 y Fs(\017)46 b Fz(bool)24 b FC(&&,)e
Fs(jj)p FC(,)h(==,)g(!=,)g(!)136 1706 y Fs(\017)46 b
Fz(int/\003oat)24 b FC(+,)f(-,)g(/,)f(*,)h(\045,)f(\(\),)h(!,)g(==,)g
(!=,)g Fi(<)p FC(,)f Fi(<)p Fh(=)p FC(,)g Fi(>)p FC(,)g
Fi(>)p Fh(=)p FC(,)g Fi(<<)p FC(,)g Fi(>>)136 1897 y
Fs(\017)46 b Fz(strings)25 b FC(+)e(\(concat\))136 2088
y Fs(\017)46 b Fz(tag)p 352 2088 V 34 w(list)24 b FC(.)k
(\(dereference\),)f Fs(j)c FC(\(append\))136 2279 y Fs(\017)46
b Fz(cmd)23 b FC(none)136 2470 y Fs(\017)46 b Fz(scml)24
b FC(none)0 2724 y FA(8.1.4)99 b(Commands)0 2900 y FC(In)20
b(order)g(to)g(allo)n(w)f(this)h(language)j(to)c(be)h(\003e)o(xible)g
(enough)h(to)f(handle)h(an)o(y)f(type)g(of)g(presentation)j(it)c(has)h
(only)h(a)e(minor)h(set)0 3013 y(of)j(b)n(uiltin)i(commands)f(from)f
(which)h(all)f(others)h(are)f(created.)31 b(The)o(y)22
b(are)i Fy(define)p FC(,)c Fy(undef)p FC(,)h Fy(rename)p
FC(,)f Fy(ifdef)p FC(,)h Fy(ifndef)p FC(,)0 3125 y(and)f
Fy(include)p FC(,)e(although)k(de\002ne)f(is)f(really)h(the)f(only)h
(one)f(that)h(is)e(needed,)k(the)d(others)h(are)f(just)h(there)g(to)f
(be)f(nice.)29 b(De\002ne)0 3238 y(is)22 b(basically)j(the)e(hook)g
(that)g(is)f(used)h(to)g(add)g(other)g(objects)h(into)f(the)g(system.)
29 b(It)22 b(lets)h(one)g(create)g(local)h(v)n(ariables,)g(static)0
3351 y(v)n(ariables,)h(commands,)g(and)f(escape)h(sequence)h(for)d(re)o
(gular)i(te)o(xt.)k(The)23 b(parameters)j(of)d(the)h
Fy(define)d FC(command)j(are:)136 3568 y Fs(\017)46 b
Fl(name:string)36 b FC(the)24 b(name)f(of)h(the)f(object)136
3759 y Fs(\017)46 b Fl(kind:string)36 b FC(the)24 b(type)g(of)f(the)h
(object,)h(needs)f(to)g(be)f(one)h(of:)336 3950 y Fz(\226)46
b(\223v)o(ariable\224)26 b FC(a)d(local)i(v)n(ariable)336
4098 y Fz(\226)46 b(\223static-v)o(ariable\224)28 b FC(a)c(static)g(v)n
(ariable)336 4246 y Fz(\226)46 b(\223tag\224)25 b FC(a)e(command)h
(\(e.g.,)f Fy(<define)46 b(name....)p FC(\))336 4393
y Fz(\226)g(\223brack)o(et-tag\224)26 b FC(a)d(block)i(command)f
(\(e.g.,)f Fy(<ifndef)46 b(name="..."></ifndef>)p FC(\))336
4541 y Fz(\226)g(\223escape\224)25 b FC(an)f(escape)h(sequence)136
4732 y Fs(\017)46 b Fl(value:any)37 b FC(The)23 b(v)n(alue)h(for)g
(this)h(object.)30 b(If)24 b(it)f(is)h(a)f(v)n(ariable)i(then)g(it)e
(is)h(the)g(type)g(and)g(v)n(alue)h(of)f(the)g(v)n(ariable;)h(if)227
4845 y(it)h(is)f(a)g(command)i(than)f(it)f(is)h(a)f(name)h
(corresponding)j(to)d(the)g(internal)h(C)e(handler)i(code;)h(and)e(if)f
(it)h(is)f(an)h(escape)227 4958 y(it)e(is)f(the)h(string)h(that)f(the)f
(escape)i(resolv)o(es)h(too.)136 5149 y Fs(\017)46 b
Fl(rparams:tag)p 761 5149 29 4 v 32 w(list)37 b FC(The)23
b(list)h(of)f(required)j(parameters)g(for)d(this)h(command)136
5340 y Fs(\017)46 b Fl(oparams:tag)p 761 5340 V 32 w(list)37
b FC(The)23 b(list)h(of)f(optional)j(parameters)g(for)d(this)i(command)
p eop
%%Page: 144 144
144 143 bop 0 -165 a FC(144)1317 b Fx(CHAPTER)20 b(8.)51
b(SOURCE)21 b(CODE)g(MARKUP)g(LANGU)l(A)l(GE)f(\(SCML\))141
91 y FC(The)29 b(name,)j(kind,)f(and)g(v)n(alue)f(parameters)i(are)e
(required)i(in)d(order)i(for)f(de\002ne)g(to)g(w)o(ork)f(properly)-6
b(.)50 b(From)29 b(de\002ne)0 204 y(there)d(comes)f(a)f(standard)j(set)
d(of)h(commands)h(that)f(are)g(useful,)h(and)f(cannot)h(really)g(be)e
(used)i(to)e(implement)i(each)f(other)0 317 y(since)g(the)o(y)e(modify)
i(some)g Fv(S)t(C)t(M)t(L)i FC(e)o(x)o(ecution)f(state,)e(the)o(y)g
(are:)136 536 y Fs(\017)46 b Fy(scope)h Fl(name:string)35
b FC(Creates)24 b(a)g(ne)n(w)e(le)o(xical)j(scope)g(with)e(gi)n(v)o(en)
h(the)g(gi)n(v)o(en)g(name)136 728 y Fs(\017)46 b Fy(macro)h
Fl(name:string)60 b(close:bool=false)f(rparams:tag)p
2463 728 29 4 v 32 w(list={})i(oparams:tag)p 3420 728
V 32 w(list={})31 b FC(macro)227 841 y(is)23 b(able)h(to)e(create)j
(commands)f(from)h Fv(S)t(C)t(M)t(L)h FC(code)d(to)g(allo)n(w)g(for)g
(code)h(reuse,)g(recursion,)h(and)e(other)h(nice)g(things.)227
954 y(Close)i(speci\002es)g(whether)h(or)e(not)g(this)h(is)f(a)g(block)
h(command)g(and)g(the)f(rparams)i(and)e(oparams)i(parameters)g(are)227
1067 y(similar)e(to)e(de\002ne')-5 b(s.)136 1259 y Fs(\017)46
b Fy(if)h Fl('test)g(expression')41 b FC(This)30 b(is)f(a)h(block)h
(command)f(that)g(will)g(partition)h(its)f(contents)i(around)f(an)f
Fy(else)227 1372 y FC(command)25 b(if)e(there)i(is)e(one,)h(and)h(then)
f(e)o(x)o(ecute)h(the)f(one)g(block)h(or)f(the)g(other)h(based)g(on)e
(the)h(e)o(xpr)-5 b(.)30 b(\(Note:)g(this)24 b(is)227
1485 y(sort)h(of)f(a)g(special)i(case.)31 b(One)24 b(does)h(not)g
(specify)h(a)e(parameter)i(name)e(because)i(it)e(is)g(silly)h(and)g
(anno)o(ying,)i(so)d(the)227 1598 y(\002rst)f(thing)i(after)f(the)g
Fy(if)e FC(needs)j(to)f(be)f(some)h(v)n(alid)g(boolean/inte)o(ger)k(e)o
(xpression.\))136 1790 y Fs(\017)46 b Fy(for)h Fl(iter:string)61
b(each:string)f(length:int)227 1943 y FC(F)o(or)24 b(will)f(iterate)j
(o)o(v)o(er)e(an)g(array)-6 b(,)25 b(speci\002ed)h(with)e(the)g(each)h
(parameter)h(as)e(the)h(tag)f(name,)g(or)g(will)g(loop)h(`length')227
2056 y(times.)k(The)23 b(`iter')i(parameter)g(is)e(the)h(name)g(of)f
(the)h(tag)g(you)g(w)o(ant)f(created)j(to)d(hold)h(the)g(iterator)i
(number)-5 b(.)136 2248 y Fs(\017)46 b Fy(ignore)g Fl('expressions')40
b FC(This)28 b(will)g(just)h(e)n(v)n(aluate)h(the)e(e)o(xpressions)k
(inside)d(the)g(command)g(and)g(not)f(print)227 2361
y(an)o(ything)e(out.)136 2553 y Fs(\017)46 b Fy(pre)h
Fl(indented:bool=true)f FC(This)35 b(tells)i(the)f(e)o(x)o(ecution)h
(en)l(vironment)i(to)d(go)f(into)i(preformatting)h(mode.)227
2666 y(The)26 b(placement)j(of)d(this)h(tag)g(is)f(important,)j(if)d
(it)h(is)f(indented)j(than)e(an)o(y)g(of)f(its)h(contents)i(will)d(be)g
(shifted)i(to)f(the)227 2779 y(left)k(by)f(that)g(much.)49
b(This)29 b(is)h(to)g(allo)n(w)g(users)h(to)f(gi)n(v)o(e)g(structure)i
(to)e(their)j Fv(S)t(C)t(M)t(L)g FC(code)e(without)g(af)n(fecting)h
(the)227 2892 y(output.)41 b(The)27 b Fl(indented)40
b FC(parameter)29 b(is)d(used)i(to)f(indicate)j(whether)e(an)o(y)f
(macro)g(calls)h(or)h Fv(S)t(C)t(M)t(L)i FC(code)d(should)227
3005 y(be)f(indented)i(relati)n(v)o(e)f(to)e(the)h(indentation)j(of)d
(where)g(the)o(y)g(are)f(e)o(x)o(ecuted.)40 b(F)o(or)26
b(e)o(xample,)i(if)e(indented)j(is)d(set)h(to)227 3118
y(true)d(than)f(an)o(y)h(output)g(from)f(a)f(macro)i(call)f(will)g(be)g
(shifted)h(to)f(the)h(right)f(so)g(that)h(all)f(lines)h(will)f(line)g
(up)g(with)g(the)227 3231 y(be)o(ginning)28 b(of)d(the)g(macro)h(call.)
34 b(If)24 b(it)h(w)o(as)g(set)g(to)g(f)o(alse)h(then)g(an)o(y)f(lines)
h(w)o(ould)g(be)f(indented)i(based)g(only)f(on)f(the)227
3343 y(indentation)i(inside)e(of)e(the)h(macro.)136 3536
y Fs(\017)46 b Fy(defvar)g Fl('tag)h(defs')39 b FC(This)26
b(will)g(go)g(through)h(the)g(list)f(of)g(tags)g(follo)n(wing)h(the)g
(defv)n(ar)g(id)e(and)i(declare)g(those)227 3649 y(tags)d(in)g(the)g
(local)g(scope)136 3841 y Fs(\017)46 b Fy(aliascmd)g
Fl(name:string)60 b(handler:cmd)31 b FC(This)19 b(is)g(used)h(to)e(mak)
o(e)i(a)e(command)i(in)f(a)f(scope)i(without)g(ha)n(ving)227
3954 y(to)k(actually)h(de\002ne)f(it,)f(rather)i(the)f(command)g(is)f
(simply)i(a)e(reference)j(to)d(the)h(one)g(speci\002ed)h(by)e(handler)
-5 b(.)136 4146 y Fs(\017)46 b Fy(create)p 521 4146 V
33 w(stream)g Fl(name:string)61 b(path:string)40 b FC(This)28
b(is)g(used)h(to)g(create)g(an)g(output)h(stream)e(so)h(that)g(one)227
4259 y(can)35 b(send)j Fv(S)t(C)t(M)t(L)g FC(output)f(to)d(a)h(dif)n
(ferent)h(\002le.)62 b(The)35 b(`name')g(ar)n(gument)i(is)e(used)g(as)g
(the)g(name)g(of)g(the)g(static)227 4372 y(v)n(ariable)29
b(to)e(be)g(created.)41 b(The)27 b(`path')h(ar)n(gument)h(should)g(be)e
(a)g(v)n(alid)g(path)h(for)f(the)h(\002le)e(or)h(empty)h(for)f
(standard)227 4485 y(out.)136 4677 y Fs(\017)46 b Fy(retarget)g
Fl(output:stream)c FC(This)30 b(is)h(used)g(to)g(redirect)h(an)o(y)h
Fv(S)t(C)t(M)t(L)h FC(output)e(to)f(the)g(stream)g(referred)i(to)d(by)
227 4790 y(`output',)c(which)e(w)o(as)f(created)i(by)f
Fy(create)p 1667 4790 V 32 w(stream)p FC(.)141 5009 y(In)d(addition)j
(to)d(re)o(gular)i(style)f(commands)h(with)e(names,)h(there)g(are)g(a)f
(number)h(of)f(\224special\224)j(commands)e(which)g(are)0
5122 y(denoted)k(by)d(some)h(symbol.)29 b(The)o(y)24
b(are:)136 5340 y Fs(\017)46 b Fy(<!--)h(-->)22 b FC(This)h(is)h(a)f
(comment)p eop
%%Page: 145 145
145 144 bop 0 -165 a Fx(8.1.)51 b(THE)22 b(LANGU)l(A)l(GE)2877
b FC(145)136 91 y Fs(\017)46 b Fy(<|Some)g(text|>)22
b FC(This)h(is)h(a)g(v)o(erbatim,)g(it)g(prints)h(whate)n(v)o(er)g(is)e
(between)i(the)f(v)o(ertical)i(bars)e(without)h(doing)g(an)o(y)227
204 y(processing)136 417 y Fs(\017)46 b Fy(<\(some)p
521 417 29 4 v 33 w(expr\)>)21 b FC(This)i(will)h(print)g(out)g(the)g
(v)n(alue)g(of)g(the)f(e)o(xpression)k(inside)e(the)e(parentheses)136
629 y Fs(\017)46 b Fy(&escape)p 569 629 V 33 w(name;)41
b FC(This)36 b(is)g(an)h(escape)h(sequence,)k(it)36 b(can)h(be)g(used)g
(in)f(re)o(gular)i(te)o(xt)f(to)f(print)i(some)f(special)227
742 y(character)-5 b(.)141 986 y(There)21 b(is)g(also)g(a)f(special)j
(tag)e(which)g(gets)h(added)g(to)e(e)n(v)o(ery)i(block)g(command.)28
b(It)21 b(is)f(called)i(`contents')i(and)d(contains)0
1099 y(the)j(scml)f(code)i(that)f(is)f(between)i(its)e(start)i(and)f
(terminating)i(commands.)0 1385 y FA(8.1.5)99 b(Lar)o(ger)26
b(Example)0 1572 y FC(No)n(w)c(lets)i(look)h(at)e(some)h(useful)g
(code:)0 1822 y Fy(<macro)46 b(name="idl")f(close=true)g
(rparams={type:string}>)95 2048 y(<scope)i(name=type>)95
2273 y(<macro)g(name="pres")d(close=true)h(rparams={type:string}>)191
2499 y(<scope)h(name=type>)191 2725 y(<macro)g(name="func")f
(close=true)g(rparams={kind:string}>)286 2951 y(<macro)h(name=kind)g
(oparams={sub_contents:s)o(cml=)o(cont)o(ent)o(s}>)382
3064 y(<pre><\(sub_contents\)></p)o(re>)286 3177 y(</macro>)191
3403 y(</macro>)191 3628 y(<\(contents\)>)e(<!--)j(put)g(the)g
(contents)e(of)j(idl)e(here)h(so)g(it)g(can)g(see)g('func'-->)191
3854 y(</scope>)95 4080 y(</macro>)0 4306 y(</macro>)141
4550 y FC(This)26 b(code)i(is)e(used)i(to)e(setup)i(some)e
(infrastructure)31 b(that)c(is)f(used)i(to)e(actually)i(de\002ne)f
(function)i(bodies.)39 b(The)26 b(`idl')0 4663 y(macro)f(speci\002es)h
(an)h Fv(I)t(D)t(L)h FC(type)d(\(e.g.,)g(struct,)h(union,)g(etc.\))f
(and)g(adds)h(a)e(ne)n(w)g(scope)i(with)f(that)g(as)g(the)g(name.)32
b(Inside)26 b(of)0 4775 y(this)f(scope)h(it)e(creates)i(the)f(`pres')h
(macro)f(which)f(corresponds)k(to)d(a)f(presentation)k(type)d(\(e.g.,)g
(v)n(ar)l(,)f(out,)h(etc.\).)32 b(Again)25 b(a)0 4888
y(ne)n(w)f(scope)j(is)e(created)h(with)f(this)h(name)f(and)g(we)g(mak)o
(e)g(the)g(`func')i(macro)e(which)g(will)g(be)g(used)h(to)f(de\002ne)g
(a)g(function)0 5001 y(body)-6 b(.)35 b(Since)26 b(just)g(putting)h
(the)e(contents)j(of)d(`func')i(right)f(inside)h(of)e(the)h(macro)g(w)o
(ould)f(print)i(them)e(out)h(when)f(the)h(\002le)0 5114
y(is)d(\002rst)f(being)i(e)n(v)n(aluated)h(we)d(mak)o(e)h(a)f(ne)n(w)g
(macro)h(and)h(pass)f(our)g(contents)i(to)e(it.)28 b(This)23
b(w)o(ay)f(when)h(the)g(Flick)g(back)h(end)0 5227 y(needs)k(to)f
(output)h(a)f(function)i(body)f(it)f(just)g(looks)h(up)f(the)h(right)f
(scope,)i(grabs)f(the)f(macro)h(and)f(then)h(e)o(x)o(ecutes)g(it,)f
(thus)0 5340 y(printing)f(out)e(the)f(function)j(body)-6
b(.)30 b(No)n(w)22 b(let')-5 b(s)24 b(see)g(this)g(being)h(used:)p
eop
%%Page: 146 146
146 145 bop 0 -165 a FC(146)1317 b Fx(CHAPTER)20 b(8.)51
b(SOURCE)21 b(CODE)g(MARKUP)g(LANGU)l(A)l(GE)f(\(SCML\))0
91 y Fy(<idl)47 b(type="struct">)95 317 y(<pres)g(type="out">)191
543 y(<func)f(kind="T_out\(T_ptr)d(&\)">)286 656 y(:)48
b(ptr_\(<\(parameter[0]\)>\))191 769 y({)286 882 y(this->ptr_)d(=)j(0;)
191 995 y(})191 1108 y(</func>)0 1333 y(</idl>)141 1567
y FC(This)23 b(code)g(mak)o(es)g(a)f(macro)h(named)g(`T)p
1437 1567 28 4 v 33 w(out\(T)p 1671 1567 V 34 w(ptr)f(&\)')h(inside)h
(of)e(the)h(struct::out)i(scope.)30 b(The)22 b(presentation)p
3701 1567 V 37 w(impl)0 1680 y(inside)31 b(of)f(the)h(back)g(end)f(no)n
(w)g(writes)g(out)h(the)f(function)i(type)f(which)g(it)f(found)h(in)f
(the)g(cast)h(and)f(then)h(looks)h(up)e(and)0 1793 y(e)o(x)o(ecutes)25
b(this)f(macro,)g(resulting)i(in)d(the)h(follo)n(wing)h(output.)0
2031 y Fy(blah_out::blah_out\(blah_)o(ptr)41 b(&p\))95
2144 y(:)48 b(ptr_\(p\))0 2257 y({)95 2370 y(this->ptr_)d(=)j(0;)0
2483 y(})141 2717 y FC(Notice)28 b(that)f(e)n(v)o(erything)j(is)d
(spaced)h(just)g(\002ne.)38 b(That)27 b(is)g(because)i
Fy(func)c FC(created)k(the)e(macro)h(with)e(`sub)p 3537
2717 V 35 w(contents')0 2830 y(surrounded)35 b(by)d(the)g
(preformatting)j(tag.)54 b(Since)32 b(preformatting)j(causes)e
(indentation)i(artif)o(acts)f(to)e(be)g(ignored)i(the)o(y)0
2942 y(were)22 b(ignored)i(here,)e(the)h(important)g(thing)h(to)d(note)
i(is)f(that)h(the)f(indentation)j(is)d(based)h(on)f(the)h(indentation)i
(of)d(the)g(block)0 3055 y(command)i(that)g(created)i(the)d(contants,)j
(not)e(the)g(one)g(that)g(used)g(it.)0 3373 y Ft(8.2)119
b(The)30 b(SCML)g(inter)o(pr)n(eter)0 3592 y FA(8.2.1)99
b(Intr)n(oduction)0 3775 y FC(The)29 b Fv(S)t(C)t(M)t(L)j
FC(interpreter)e(is)e(contained)i(in)e(the)g(C)f(presentation)32
b(back)c(end)h(library)g(so)f(all)g(of)g(the)g(rele)n(v)n(ant)h
(sources)h(are)0 3888 y(in)e Fy(c/pbe/lib/scml_*.cc)22
b FC(and)29 b(the)f(header)i(\002le)e(is)g Fy(mom/c/scml.hh)p
FC(.)38 b(The)28 b(interpreter)j(is)d(primarily)h(written)g(in)0
4001 y(C++)24 b(with)g(classes)j(for)d(the)h(le)o(xx)o(er)l(,)h(parser)
l(,)g(e)o(x)o(ecution)h(en)l(vironment,)g(and)e(support)i(for)e(these.)
33 b(Using)24 b(the)h(interpreter)0 4114 y(is)f(simply)h(a)f(matter)h
(of)f(constructing)k(le)o(xx)o(er)l(,)d(parser)l(,)h(and)e(EE)f
(objects)j(with)e(an)g(input)i(\002le)d(or)h(string)i(and)f(then)g
(setting)0 4226 y(them)f(in)f(motion.)0 4501 y FA(8.2.2)99
b(scml)p 499 4501 30 4 v 35 w(str)n(eam)0 4684 y FC(This)35
b(class)i(is)e(used)h(to)g(hold)g(an)o(y)f(information)j(about)f(IO)d
(streams)j(used)f(in)f(the)h(code.)65 b(The)35 b(primary)i(use)f(of)f
(the)0 4797 y(class)24 b(is)f(for)g(holding)i(the)e(input)j
Fv(S)t(C)t(M)t(L)g FC(code)e(in)f(a)g(string)h(which)f(is)g(then)h
(used)g(by)f(the)g(le)o(xx)o(er)-5 b(.)29 b(Ho)n(we)n(v)o(er)l(,)23
b(these)h(stream)0 4909 y(objects)e(can)f(also)g(be)f(used)h(in)h
Fv(S)t(C)t(M)t(L)i FC(code)d(for)g(setting)h(the)e(output)i(stream)f
(with)f(the)h Fy(create)p 3035 4909 29 4 v 33 w(stream)c
FC(and)k Fy(retarget)0 5022 y FC(commands.)0 5227 y Fy(char)47
b(*tag_ref\(\))300 5340 y FC(Mak)o(e)24 b(a)f(T)-8 b(A)l(G)p
773 5340 28 4 v 31 w(REF)22 b(string)j(that)f(refers)g(to)g(this)g
(object)p eop
%%Page: 147 147
147 146 bop 0 -165 a Fx(8.2.)51 b(THE)22 b(SCML)f(INTERPRETER)2497
b FC(147)0 91 y Fy(static)46 b(struct)g(scml_stream)f(*ptr\(char)g
(*ref\))300 204 y FC(Con)l(v)o(ert)25 b(a)e(T)-8 b(A)l(G)p
855 204 28 4 v 31 w(REF)22 b(string)i(into)h(a)e Fy(scml_stream)c
FC(pointer)0 393 y Fy(void)47 b(set_flags\(unsigned)42
b(int)47 b(the_flags\),)i(unsigned)d(int)h(get_flags\(\))300
506 y FC(Set/get)22 b(the)g(\003ags)g(for)f(the)h(stream.)29
b(Currently)-6 b(,)23 b(the)f(only)g(\003ags)g(are)f(SSF)p
2631 506 V 32 w(INPUT)e(and)j(SSF)p 3256 506 V 32 w(OUTPUT)-7
b(,)18 b(which)300 619 y(correspond)27 b(to)c(whether)i(the)e(stream)i
(will)e(be)g(used)i(for)e(input)i(or)e(output.)0 808
y Fy(void)47 b(set_data\(char)d(*str\),)50 b(char)d(*get_data\(\))300
921 y FC(Set/get)24 b(a)f(C)g(string)i(as)e(the)h(stream,)g(this)g
(does)g(not)g(w)o(ork)g(for)f(an)h(output)h(\002le.)0
1109 y Fy(void)47 b(set_desc\(char)d(*desc\),)50 b(char)c
(*get_desc\(\))300 1222 y FC(Set/get)24 b(the)g(description)j(of)c(the)
h(stream)g(\(e.g.,)f(\002le)g(name\))0 1389 y Fy(void)47
b(set_include_directory_l)o(ist\()o(cha)o(r)42 b(**dir_list\),)48
b(char)0 1502 y(**get_include_directory_)o(list)o(\(\))300
1615 y FC(Set/get)24 b(the)g(list)g(of)f(directories)k(in)c(which)h(to)
g(\002nd)f(an)o(y)h(include)h(\002les)0 1804 y Fy(int)47
b(get_length\(\))300 1917 y FC(Get)23 b(the)h(length)h(of)e(the)h
(stream)0 2106 y Fy(void)47 b(set_file\(FILE)d(*file\),)50
b(FILE)c(*get_file\(\))300 2218 y FC(Set/get)24 b(a)f(\002le)f(as)i
(the)f(stream,)h(if)f(this)h(is)f(an)g(input)h(stream)g(then)g(it)f
(will)g(read)h(the)f(whole)h(\002le)f(into)h(memory)f(for)300
2331 y(processing,)j(otherwise)f(it)f(is)f(just)h(stored)h(for)f(later)
g(reference.)0 2578 y FA(8.2.3)99 b(scml)p 499 2578 30
4 v 35 w(string)0 2752 y FC(The)25 b(scml)p 342 2752
28 4 v 34 w(string)h(class)h(is)e(a)g(bit)h(of)f(a)g(hack)i(to)e(get)h
(around)h(problems)g(with)f(using)g(the)i Fv(P)t(R)t(E)t(S)p
3046 2752 V 40 w(C)e FC(tags)h(as)e(the)h(represen-)0
2865 y(tation)h(of)e(v)n(ariables.)38 b(The)25 b(problem)i(has)f(to)f
(do)h(with)f(the)h(tags)h(being)g(able)f(to)f(hold)k
Fv(C)t(A)t(S)t(T)f FC(and)h Fv(S)t(C)t(M)t(L)f FC(not)e(w)o(anting)h
(to)0 2978 y(deal)f(with)g(an)o(ything)h(language)h(speci\002c:)35
b(it)25 b(is)h(only)g(interested)i(in)e(strings,)h(numbers,)h(and)e
(the)g(lik)o(e.)35 b(So)25 b(the)h(solution)0 3091 y(is)j(to)f(treat)k
Fv(C)t(A)t(S)t(T)g FC(as)d(\223computed)h(strings\224)h(and)f(just)f
(place)h(all)f(strings)h(inside)g(of)f(scml)p 2903 3091
V 34 w(strings)h(so)f(that)g(we)f(can)i(still)0 3204
y(process)25 b(re)o(gular)g(strings)g(and)h Fv(C)t(A)t(S)t(T)h
FC(without)d(too)g(man)o(y)g(problems.)0 3380 y Fy(char)47
b(*tag_ref\(\),)i(static)d(struct)g(scml_string)e(*ptr\(char)i(*ref\))
300 3493 y FC(Encode/decode)27 b(this)d(scml)p 1208 3493
V 34 w(string)g(object)h(as)f(a)f(T)-8 b(A)l(G)p 2054
3493 V 31 w(REF)22 b(string.)0 3682 y Fy(static)46 b(char)h
(*tag_string\(tag_item)42 b(*ti\))300 3794 y FC(Attempts)19
b(to)f(construct)i(a)e(C)f(string)i(from)f(a)g(tag,)h(this)g(is)e(done)
i(by)g(getting)g(a)f(string)h(directly)h(from)e(a)g(T)-8
b(A)l(G)p 3661 3794 V 32 w(STRING)300 3907 y(or)23 b(doing)i(a)e(mak)o
(e)p 891 3907 V 34 w(chars)i(on)e(an)h(encoded)h(scml)p
1858 3907 V 34 w(string)g(object.)0 4096 y Fy(tag_data)46
b(*add_component\(\))300 4209 y FC(Adds)28 b(another)i(component)g(to)e
(this)h(strings.)44 b(It)28 b(is)g(just)h(lik)o(e)f(concatenating)33
b(a)27 b(string)j(e)o(xcept)f(it)f(needs)h(to)f(be)300
4322 y(placed)d(inside)g(of)e(a)g(tag)p 1076 4322 V 34
w(data)0 4511 y Fy(void)47 b(concat\(struct)d(scml_string)h(*ss\))300
4624 y FC(Concatenate)26 b(an)e(entire)g(scml)p 1286
4624 V 34 w(string)h(onto)f(another)h(one)0 4812 y Fy(int)47
b(cmp\(struct)e(scml_string)g(*ss\))300 4925 y FC(Just)24
b(lik)o(e)g Fy(strcmp)d FC(e)o(xcept)k(it)e(compares)i(scml)p
1810 4925 V 34 w(strings)0 5114 y Fy(char)47 b(*make_chars\(\))300
5227 y FC(T)m(ries)26 b(to)h(mak)o(e)g(a)f(C)f(string)j(from)f(this)g
(scml)p 1749 5227 V 33 w(string,)i(it)d(will)h(f)o(ail)g(if)f(an)o(y)h
(of)f(the)h(components)i(are)e(\223computed)300 5340
y(strings\224)f(\(e.g.,)f Fv(C)t(A)t(S)t(T)h FC(structures\))p
eop
%%Page: 148 148
148 147 bop 0 -165 a FC(148)1317 b Fx(CHAPTER)20 b(8.)51
b(SOURCE)21 b(CODE)g(MARKUP)g(LANGU)l(A)l(GE)f(\(SCML\))0
91 y Fy(void)47 b(print\(\))300 204 y FC(Print)24 b(the)f(string)i
(using)g(w)p 1154 204 28 4 v 32 w(printf)0 463 y FA(8.2.4)99
b(scml)p 499 463 30 4 v 35 w(tok)o(en)0 641 y FC(The)24
b(scml)p 341 641 28 4 v 34 w(tok)o(en)i(class)f(is)g(the)g(primiti)n(v)
o(e)g(used)h(to)e(represent)29 b Fv(S)t(C)t(M)t(L)f FC(code)d(and)h(is)
e(used)h(by)g(almost)h(e)n(v)o(ery)f(class)g(that)g(is)0
754 y(a)h(part)h(of)f(the)h(interpreter)-5 b(.)40 b(A)25
b(tok)o(en)j(can)e(be)h(one)f(of)h(man)o(y)f(kinds)h(which)g(may)f(or)g
(may)h(not)f(ha)n(v)o(e)h(a)f(v)n(alue)h(associated)0
867 y(with)22 b(it.)28 b(An)o(y)21 b(v)n(alues)i(are)f(contained)j
(within)d(the)h Fy(value)c FC(\002eld)j(of)g(scml)p 2319
867 V 33 w(tok)o(en.)30 b(The)21 b(possible)j(v)n(alues)g(it)d(may)h
(hold)h(are:)0 1061 y Fy(b)300 1174 y FC(A)f(boolean)0
1371 y Fy(i)300 1484 y FC(An)h(inte)o(ger)0 1681 y Fy(f)300
1794 y FC(A)f(\003oat)0 1991 y Fy(id)300 2104 y FC(An)h(identi\002er)0
2301 y Fy(str)300 2414 y FC(An)g(scml)p 610 2414 V 33
w(string)0 2611 y Fy(text)300 2723 y FC(Re)o(gular)h(te)o(xt)0
2920 y Fy(escape)300 3033 y FC(The)f(name)h(of)f(an)h(escape)h
(sequence)0 3230 y Fy(ti)300 3343 y FC(A)d(tag)p 503
3343 V 34 w(item)0 3540 y Fy(tl)300 3653 y FC(A)g(tag)p
503 3653 V 34 w(list)0 3850 y Fy(children)300 3963 y
FC(The)h(list)h(of)f(children)j(for)e(a)f(non-terminal)j(tok)o(en)0
4156 y Fy(void)47 b(strip\(\))300 4269 y FC(If)25 b(the)g(tok)o(en)i
(contains)g(a)e(tag)g(this)h(will)e(try)i(to)f(mak)o(e)g(the)g(tok)o
(en)i(the)e(same)g(v)n(alue)h(as)f(the)h(tag.)33 b(It)25
b(can)h(only)g(f)o(ail)300 4381 y(if)f(the)h(tag)g(does)g(not)g(ha)n(v)
o(e)g(a)f(corresponding)31 b Fv(S)t(C)t(M)t(L)e FC(type.)35
b(An)o(y)25 b(other)h(type)h(of)e(demotions,)j(lik)o(e)e(\003oat)f(to)g
(int,)300 4494 y(need)f(to)g(be)f(done)i(e)o(xplicitly)h(by)d(the)h
(user)g(since)h(information)h(can)e(be)f(lost)0 4691
y Fy(void)47 b(promote\(int)d(required_kind\))300 4804
y FC(This)30 b(will)g(promote)i(a)d(literal)j(v)n(alue)f(to)f(a)g(more)
h(comple)o(x)i Fv(S)t(C)t(M)t(L)g FC(type.)50 b(F)o(or)29
b(e)o(xample,)k(it)d(can)h(promote)g(an)300 4917 y(inte)o(ger)25
b(to)e(a)g(\003oat)h(to)f(mak)o(e)h(it)f(easier)i(for)f(later)g(stages)
h(to)e(process.)0 5114 y Fy(int)47 b(is_expr\(\))300
5227 y FC(This)28 b(will)g(return)i(true)f(if)f(the)g(tok)o(en)i
(represents)h(some)d(e)o(xpression.)46 b(F)o(or)28 b(e)o(xample,)i(if)e
(it)g(were)g(an)g(addition,)300 5340 y(subtraction,)e(or)e(just)g(a)f
(plain)i(v)n(alue.)p eop
%%Page: 149 149
149 148 bop 0 -165 a Fx(8.2.)51 b(THE)22 b(SCML)f(INTERPRETER)2497
b FC(149)0 91 y Fy(int)47 b(is_value\(\))300 204 y FC(This)23
b(will)h(return)g(true)g(if)g(the)g(tok)o(en)g(contains)i(a)d(literal)i
(v)n(alue)0 399 y Fy(int)47 b(is_operator\(\))300 511
y FC(This)23 b(will)h(return)g(true)g(if)g(the)g(tok)o(en)g(represents)
j(a)c(mathematical)i(operator)0 706 y Fy(int)47 b(is_container\(\))300
819 y FC(This)36 b(will)g(return)i(true)f(if)f(the)h(tok)o(en)h
(represents)h(some)d(container)l(,)43 b(lik)o(e)37 b(a)f(tag)h(list,)i
(or)e(an)f(e)o(xpression)j(in)300 932 y(parentheses.)0
1126 y Fy(int)47 b(get_prec\(\))300 1239 y FC(If)23 b(the)h(tok)o(en)h
(represents)h(an)e(operator)h(this)f(will)g(return)g(its)g(precedence)0
1433 y Fy(char)47 b(*get_identifier\(\))300 1546 y FC(If)19
b(the)h(tok)o(en)g(represents)i(an)d(identi\002er)i(this)f(will)f
(return)i(a)d(C)h(string)h(v)o(ersion.)29 b(The)19 b(possible)i(type)f
(of)f(identi\002ers)300 1659 y(include)25 b(re)o(gular)g(v)n(ariable)g
(name,)f(escape)h(sequence)h(names,)d(and)h(scoped)i(names.)0
1853 y Fy(void)47 b(print\(\))300 1966 y FC(Used)24 b(for)f(deb)n
(ugging,)k(just)d(prints)h(out)f(the)f(tok)o(en)0 2158
y(Each)g(tok)o(en)i(also)f(has)g(a)f Fy(kind)f FC(member)i(which)g
(indicates)i(what)d(the)h(tok)o(en)h(represents:)0 2349
y Fy(SCML_NONE)300 2462 y FC(A)d(null)j(tok)o(en,)f(often)h(used)f(to)f
(indicate)j(the)e(end)g(of)f(a)g(list)h(of)g(tok)o(ens)0
2656 y Fy(SCML_IGNORE)300 2769 y FC(A)g(null)i(tok)o(en,)g(perhaps)h
(it)e(once)g(contained)j(something)f(meaningful,)h(b)n(ut)d(should)i
(be)e(ignored)i(no)n(w)-6 b(.)32 b(Or)25 b(it)f(is)300
2882 y(used)g(when)g(a)f(tok)o(en)i(must)e(be)h(returned,)h(b)n(ut)f
(nothing)i(meaningful)g(w)o(as)d(done.)0 3076 y Fy(SCML_ERROR)300
3189 y FC(An)g(error)h(tok)o(en,)h(processing)h(has)e(resulted)i(in)d
(an)h(error)0 3384 y Fy(SCML_DONE)300 3496 y FC(Indicates)i(the)e(end)g
(of)f(the)h(stream)0 3691 y Fy(SCML_COL_POS)300 3804
y FC(The)f(column)i(position)g(in)f(the)g(stream)g(is)f(in)g
Fy(i)g FC(so)g(that)i(it)e(can)h(be)f(track)o(ed)j(and)e(used)g(in)f
(error)i(reporting.)0 3998 y Fy(SCML_ROW_POS)300 4111
y FC(The)e(ro)n(w)g(position)j(in)d(the)h(stream)g(is)f(in)h
Fy(i)e FC(so)i(that)g(it)f(can)h(be)g(track)o(ed)h(and)f(used)g(in)g
(error)g(reporting.)0 4305 y Fy(SCML_TERM_BOOL)300 4418
y FC(A)e(literal)j(boolean)h(v)n(alue)e(in)g Fy(b)0 4613
y(SCML_TERM_INT)300 4725 y FC(A)e(literal)j(inte)o(ger)g(v)n(alue)f(in)
g Fy(i)0 4920 y(SCML_TERM_FLOAT)300 5033 y FC(A)e(literal)j(\003oat)f
(v)n(alue)g(in)f Fy(f)0 5227 y(SCML_TERM_STRING)300 5340
y FC(A)f(literal)j(string)g(v)n(alue)f(in)g Fy(str)p
eop
%%Page: 150 150
150 149 bop 0 -165 a FC(150)1317 b Fx(CHAPTER)20 b(8.)51
b(SOURCE)21 b(CODE)g(MARKUP)g(LANGU)l(A)l(GE)f(\(SCML\))0
91 y Fy(SCML_TERM_TAG)300 204 y FC(A)i(tag)i(v)n(alue)h(in)e
Fy(ti)0 396 y(SCML_TERM_TAG_LIST)300 509 y FC(A)f(tag)i(list)g(in)g
Fy(tl)0 701 y(SCML_TERM_TEXT)300 814 y FC(An)o(y)f(te)o(xt)h(from)h
Fv(S)t(C)t(M)t(L)i FC(code)d(that)g(is)g(not)g(an)f(escape)i(sequence)h
(or)d(a)h(command)g(is)f(held)h(in)g Fy(text)0 1006 y(SCML_TERM_ESCAPE)
300 1118 y FC(The)f(name)h(of)f(an)h(escape)h(sequence)h(is)d(in)g
Fy(escape)0 1310 y(SCML_TERM_ID)300 1423 y FC(An)g(identi\002er)i
(string)g(is)e(in)g Fy(id)0 1615 y(SCML_TERM_VERBATIM)300
1728 y FC(An)o(y)g(te)o(xt)h(within)g(a)f(v)o(erbatim)h(command)h(is)e
(in)g Fy(text)0 1920 y(SCML_TERM_LPAREN)300 2033 y FC(A)f(left)i
(parenthesis)0 2225 y Fy(SCML_TERM_RPAREN)300 2337 y
FC(A)e(right)j(parenthesis)0 2529 y Fy(SCML_TERM_LBRACE)300
2642 y FC(A)d(left)i(brack)o(et)i(`[')0 2834 y Fy(SCML_TERM_RBRACE)300
2947 y FC(A)c(right)j(brack)o(et)g(`]')0 3139 y Fy(SCML_TERM_LCURLY)300
3252 y FC(A)d(left)i(curly)h(brace)0 3444 y Fy(SCML_TERM_RCURLY)300
3556 y FC(A)d(right)j(curly)f(brace)0 3748 y Fy(SCML_TERM_SLASH)300
3861 y FC(A)32 b(forw)o(ard)i(slash,)i(`/'.)57 b(This)32
b(tok)o(en)j(is)d(only)i(created)h(for)e(the)g(forw)o(ard)h(slash)g
(immediately)g(after)g(an)f(`)p Fi(<)p FC(',)300 3974
y(otherwise)25 b(an)f(SCML)p 1039 3974 28 4 v 31 w(NT)p
1192 3974 V 32 w(DIV)e(is)i(created.)0 4166 y Fy(SCML_TERM_LT)300
4279 y FC(A)i(single)j(less)e(than)h(sign,)h(`)p Fi(<)p
FC('.)39 b(This)27 b(tok)o(en)i(is)e(used)h(to)f(signify)i(the)e
(opening)j(of)d(a)g(command,)h(it)f(is)g(not)h(the)300
4392 y(same)c(as)f(a)g(less)h(than)g(inside)h(an)f(e)o(xpression)i(in)e
(the)f(command.)0 4584 y Fy(SCML_TERM_GT)300 4697 y FC(A)f(single)j
(greater)g(than)f(sign,)g(`)p Fi(>)p FC('.)k(This)23
b(tok)o(en)i(is)e(used)h(to)g(signify)h(the)e(closing)j(of)d(a)g
(command,)h(it)f(is)g(not)h(the)300 4809 y(same)g(as)f(a)g(greater)i
(than)f(inside)h(an)f(e)o(xpression)i(in)e(the)f(command.)0
5001 y Fy(SCML_NT_COMMAND)300 5114 y FC(A)j(command)h(with)g
Fy(children)d FC(pointing)29 b(to)d(the)h(contents)i(of)e(the)g
(command.)39 b(The)27 b(tok)o(en)h(is)e(a)h(call)g(to)g(a)f(tag)300
5227 y(if)k(the)h(\002rst)f(tok)o(en)i(is)e(a)g Fy(SCML_NT_NAME)d
FC(follo)n(wed)k(by)g(an)g Fy(SCML_NONE)c FC(terminated)32
b(array)g(of)e(e)o(xpressions)300 5340 y(corresponding)i(to)27
b(the)h(ar)n(guments.)42 b(If)27 b(the)h(\002rst)f(tok)o(en)i(is)e(an)g
Fy(SCML_TERM_SLASH)c FC(follo)n(wed)28 b(by)g(an)f Fy(SCML_)p
eop
%%Page: 151 151
151 150 bop 0 -165 a Fx(8.2.)51 b(THE)22 b(SCML)f(INTERPRETER)2497
b FC(151)300 91 y Fy(NT_NAME)22 b FC(then)k(the)f(command)g(is)g(a)f
(terminator)j(for)e(the)g(tag)g(with)g(that)g(name.)33
b(Otherwise)26 b(the)f(tok)o(en)h(can)f(be)300 204 y(just)f(be)g(an)f
(e)o(xpression)j(that)e(will)g(be)f(printed)i(later)-5
b(.)0 396 y Fy(SCML_NT_SET)300 509 y FC(A)17 b(con)l(v)o(erted)k
Fy(SCML_NT_ASSIGN)p FC(.)h(It)c(is)g(a)f(binary)j(e)o(xpression)h(that)
d(indicates)j(that)d(the)h(v)n(alue)g(of)f Fy(children[1])300
622 y FC(should)25 b(be)f(set)f(in)h Fy(children[0])0
814 y(SCML_NT_ASSIGN)300 927 y FC(An)f(equal)i(sign,)f(`='.)29
b(This)23 b(tok)o(en)i(will)f(be)f(con)l(v)o(erted)k(to)c(an)h
Fy(SCML_NT_SET)c FC(for)k(no)f(real)i(reason;)g(it)e(is)h(le)o(gac)o(y)
300 1040 y(and)g(the)g(set)g(should)h(just)f(be)f(killed)i(in)f(f)o(a)n
(v)n(or)h(of)e(this)h(tok)o(en.)0 1231 y Fy(SCML_NT_PLUS)300
1344 y FC(A)f(plus)i(sign,)f(`+'.)30 b(It)24 b(is)g(a)g(binary)h(e)o
(xpression)i(so)d Fy(children[0])c FC(is)k(the)g(left)h(side)f(and)h
Fy(children[1])20 b FC(is)k(the)300 1457 y(right.)0 1649
y Fy(SCML_NT_MINUS)300 1762 y FC(A)e(minus)i(sign,)g(`-'.)29
b(Also)24 b(a)f(binary)i(e)o(xpression)h(so)d(it)h(is)f(structured)j
(lik)o(e)e Fy(SCML_NT_PLUS)0 1954 y(SCML_NT_DIV)300 2067
y FC(A)e(di)n(vision)k(sign,)e(`/'.)29 b(Also)23 b(a)g(binary)i(e)o
(xpression)h(so)e(it)f(is)g(structured)k(lik)o(e)d Fy(SCML_NT_PLUS)0
2259 y(SCML_NT_MOD)300 2371 y FC(A)e(modulus)j(sign,)f(`\045'.)k(Also)c
(a)f(binary)i(e)o(xpression)h(so)e(it)f(is)g(structured)k(lik)o(e)d
Fy(SCML_NT_PLUS)0 2563 y(SCML_NT_MULT)300 2676 y FC(A)e(multiplication)
27 b(sign,)d(`*'.)29 b(Also)24 b(a)f(binary)i(e)o(xpression)h(so)d(it)h
(is)f(structured)j(lik)o(e)f Fy(SCML_NT_PLUS)0 2868 y(SCML_NT_COLON)300
2981 y FC(A)d(colon,)j(`:'.)k(This)23 b(tok)o(en)i(will)e(immediately)i
(be)f(con)l(v)o(erted)i(into)e(an)g Fy(SCML_NT_TAG)19
b FC(when)24 b(parsed.)0 3173 y Fy(SCML_NT_EQUAL)300
3286 y FC(A)e(C)h(style)h(equal)h(sign,)f(`=='.)29 b(Also)23
b(a)g(binary)i(e)o(xpression)i(so)c(it)g(is)h(structured)i(lik)o(e)e
Fy(SCML_NT_PLUS)0 3478 y(SCML_NT_NOT_EQUAL)300 3590 y
FC(A)e(C)h(style)h(not)g(equal)h(sign,)f(`!='.)29 b(Also)23
b(a)g(binary)i(e)o(xpression)h(so)e(it)f(is)h(structured)i(lik)o(e)e
Fy(SCML_NT_PLUS)0 3782 y(SCML_NT_LT)300 3895 y FC(A)g(double)j(less)f
(than)h(sign,)f(`)p Fi(<<)p FC(',)f(used)h(in)g(e)o(xpressions)i(since)
e(a)g(single)g(one)g(is)g(already)h(used)f(to)f(demarcate)300
4008 y(a)e(command.)0 4200 y Fy(SCML_NT_GT)300 4313 y
FC(A)17 b(double)k(greater)f(than)f(sign,)h(`)p Fi(>>)p
FC(',)f(used)g(in)f(e)o(xpressions)k(since)e(a)e(single)i(one)f(is)f
(already)j(used)e(to)f(demarcate)300 4426 y(a)23 b(command.)0
4618 y Fy(SCML_NT_LE)300 4731 y FC(A)f(less)i(than)h(or)e(equal)i
(sign,)f(`)p Fi(<)p Fh(=)p FC('.)k(Also)23 b(a)g(binary)i(e)o
(xpression)h(so)e(it)f(is)h(structured)i(lik)o(e)e Fy(SCML_NT_PLUS)0
4922 y(SCML_NT_GE)300 5035 y FC(A)e(greater)i(than)g(or)e(equal)i
(sign,)g(`)p Fi(>)p Fh(=)p FC('.)j(Also)c(a)f(binary)j(e)o(xpression)g
(so)e(it)g(is)f(structured)k(lik)o(e)d Fy(SCML_NT_PLUS)0
5227 y(SCML_NT_LAND)300 5340 y FC(A)f(C)h(style)h(logical)h(and)f
(sign,)g(`&&'.)k(Also)c(a)f(binary)i(e)o(xpression)h(so)e(it)f(is)g
(structured)j(lik)o(e)f Fy(SCML_NT_PLUS)p eop
%%Page: 152 152
152 151 bop 0 -165 a FC(152)1317 b Fx(CHAPTER)20 b(8.)51
b(SOURCE)21 b(CODE)g(MARKUP)g(LANGU)l(A)l(GE)f(\(SCML\))0
91 y Fy(SCML_NT_OR)300 204 y FC(An)j(or)g(sign,)h(`)p
Fs(j)p FC(',)g(used)g(for)g(doing)g(union)h(operations)i(on)c(tag)h
(lists.)0 393 y Fy(SCML_NT_LOR)300 506 y FC(A)e(C)h(style)h(logical)h
(or)f(sign,)g(`-'.)29 b(Also)23 b(a)g(binary)i(e)o(xpression)h(so)e(it)
f(is)g(structured)k(lik)o(e)d Fy(SCML_NT_PLUS)0 695 y(SCML_NT_NOT)300
808 y FC(A)e(e)o(xclamation)k(mark,)d(`!',)h(that)g(signi\002es)h(a)e
(logical)i(not)f(on)f Fy(children[0])0 997 y(SCML_NT_DOT)300
1110 y FC(A)f(dot,)i(`.)-6 b(',)22 b(used)j(for)e(referencing)k(tags)d
(within)g(a)f(tag)h(list.)0 1299 y Fy(SCML_NT_SCOPE_RES)300
1412 y FC(A)e(C)h(style)h(scope)h(resolution)i(operator)l(,)f(`::'.)j
(Also)23 b(a)h(binary)h(e)o(xpression)h(so)e(it)f(is)h(structured)i
(lik)o(e)e Fy(SCML_NT_)300 1525 y(PLUS)0 1714 y(SCML_NT_NAME)300
1826 y FC(A)e(null)j(tok)o(en)f(that)g(indicates)i(the)e(tok)o(en)h(in)
e Fy(children[0])d FC(can)k(be)g(used)g(as)f(a)h(name.)0
2015 y Fy(SCML_NT_EXPR)300 2128 y FC(A)e(null)j(tok)o(en)f(that)g
(indicates)i(the)e(tok)o(en)h(in)e Fy(children[0])d FC(is)k(some)f
(kind)i(of)e(an)h(e)o(xpression)0 2317 y Fy(SCML_NT_TAG)300
2430 y FC(A)e(tag)i(declaration)j(con)l(v)o(erted)f(from)d(an)h
Fy(SCML_NT_COLON)p FC(.)g(The)g(tag)f(name)h(is)f(contained)k(in)c
Fy(children[0])300 2543 y FC(and)h(the)g(name)f(of)h(the)g(type)g(is)f
(in)h Fy(children[1])0 2732 y(SCML_NT_SEL)300 2845 y
FC(A)17 b(slot)i(selection)h(on)e(an)g(array)h(v)n(ariable.)29
b(This)18 b(tok)o(en)h(is)f(created)i(from)e(a)f(pair)i(of)f(brack)o
(ets)i(with)e Fy(children[0])300 2958 y FC(e)o(xpecting)26
b(to)d(resolv)o(e)i(to)f(a)f(tag)h(and)g Fy(children[1])19
b FC(e)n(v)n(aluating)26 b(to)e(an)f(inte)o(ger)-5 b(.)0
3147 y Fy(SCML_NT_COMMA)300 3260 y FC(A)22 b(comma,)h(`,)-6
b(',)23 b(used)h(when)g(separating)i(the)e(elements)h(of)e(a)g(tag)h
(list.)0 3449 y Fy(SCML_NT_INIT)300 3562 y FC(An)g(initialization)k
(contained)g(in)c(curly)i(braces.)33 b(This)25 b(is)f(a)g(bit)h(hack)o
(y)h(since)f(one)h(can)f(create)g(an)g(array)h(initial-)300
3674 y(izer)l(,)e(or)g(a)f(tag)g(list,)h(depending)j(on)c(what)h(kind)g
(of)f(data)i(is)e(in)g(the)h(initialization.)0 3863 y
Fy(SCML_NT_COND)300 3976 y FC(A)j(conditional)k(e)o(xpression)g
(similar)e(to)f(the)h(one)f(in)g(C,)f(`)p Fi(<)p FC(test)i(e)o(xpr)p
Fi(>)f FC(?)42 b Fi(<)p FC(e)o(xpr)p Fi(>)28 b FC(:)38
b Fi(<)p FC(e)o(xpr)p Fi(>)p FC(',)29 b(e)o(xcept)g(it)f(is)300
4089 y(not)c(implemented)h(yet.)0 4278 y Fy(SCML_NT_AND)300
4391 y FC(An)e(ampersand,)i(`&',)e(used)h(for)g(to)f(do)h(intersection)
j(on)d(a)f(tag)g(list,)h(if)f(it)h(w)o(as)f(implemented.)0
4580 y Fy(SCML_NT_XOR)300 4693 y FC(A)f(carat,)i(`\210',)g(for)f(doing)
i(e)o(xclusi)n(v)o(e)g(ors,)f(e)o(xcept)h(it)e(is)g(not)h(implemented.)
0 4940 y FA(8.2.5)99 b(scml)p 499 4940 30 4 v 35 w(tok)o(en)p
770 4940 V 37 w(sequence)0 5114 y FC(An)26 b Fy(scml_token_sequence)20
b FC(is)27 b(used)g(to)f(reference)j(sections)g(of)f
Fv(S)t(C)t(M)t(L)i FC(code.)38 b(The)26 b(class)i(tracks)f(the)g
(position)i(and)0 5227 y(the)24 b(origin)g(of)g(the)f(code)i(so)e(it)g
(is)g(possible)j(to)d(format)h(the)g(code)g(correctly)-6
b(,)25 b(and)f(point)h(out)e(where)h(an)o(y)g(errors)g(are)g(in)f(the)0
5340 y(source.)p eop
%%Page: 153 153
153 152 bop 0 -165 a Fx(8.2.)51 b(THE)22 b(SCML)f(INTERPRETER)2497
b FC(153)0 91 y Fy(char)47 b(*tag_ref\(\),)i(static)d(struct)g
(scml_token_sequence)c(*ptr\(char)j(*ref\))300 204 y
FC(These)23 b(are)h(used)f(to)g(encode)i(and)e(decode)i(the)e(tok)o(en)
i(sequence)g(as)e(a)g Fy(TAG_REF)d FC(style)k(string.)30
b(This)23 b(allo)n(ws)g(the)300 317 y(sequence)j(to)d(be)h(passed)h
(around)g(and)f(used)h(in)g Fv(S)t(C)t(M)t(L)i FC(code)0
513 y Fy(void)47 b(print\(\))300 626 y FC(Used)24 b(for)f(deb)n
(ugging,)k(just)d(prints)h(the)e(contents)j(of)e(the)f(sequence)j(out)0
821 y Fy(void)47 b(set_value\(struct)c(scml_token)i(*st\),)50
b(struct)d(scml_token)e(*get_value\(\))300 934 y FC(Set/get)24
b(the)g(array)h(of)e(the)h(tok)o(ens)h(that)f(represent)i(the)e(v)n
(alue)g(of)g(this)g(sequence)0 1130 y Fy(void)47 b(set_length\(int)d
(len\),)50 b(int)d(get_length\(\))300 1243 y FC(Set/get)24
b(the)g(length)h(of)f(the)f(array)i(of)e(tok)o(ens)i(in)f(this)g
(sequence)0 1416 y Fy(void)47 b(set_stream_pos\(struct)42
b(scml_stream_pos)h(*ssp\),)50 b(struct)d(scml_stream_pos)0
1529 y(*get_stream_pos\(\))300 1642 y FC(Set/get)22 b(the)f(stream)h
(position)h(object)f(used)g(when)f(parsing)i(the)f(tok)o(ens)g(in)f
(the)h(sequence.)30 b(This)21 b(is)g(mainly)h(here)300
1755 y(for)i(error)g(reporting)i(when)e(the)g(tok)o(ens)h(get)f
(processed)0 1951 y Fy(void)47 b(set_indent\(int)d(offset\),)49
b(int)e(get_indent\(\))300 2064 y FC(Set/get)20 b(the)f(column)h(based)
g(indentation)i(of)d(the)g(tok)o(ens.)29 b(This)19 b(allo)n(ws)g(users)
h(of)h Fv(S)t(C)t(M)t(L)h FC(to)d(structure)j(their)d(code)300
2176 y(with)k(indents)j(without)e(ha)n(ving)i(it)d(af)n(fect)h(the)g(w)
o(ay)f(it)h(will)f(e)n(v)o(entually)j(be)d(printed,)i(e)n(v)o(en)f
(when)g(preformatted.)0 2433 y FA(8.2.6)99 b(scml)p 499
2433 30 4 v 35 w(tok)o(en)p 770 2433 V 37 w(stack)0 2610
y FC(The)23 b Fy(scml_token_stack)18 b FC(is)24 b(a)f(support)i(class)g
(for)f(the)f(parser)i(that)f(just)g(maintains)i(a)d(stack)h(of)g(tok)o
(ens.)0 2803 y Fy(void)47 b(push\(struct)d(scml_token)h(&st\),)51
b(void)46 b(pop\(\))300 2915 y FC(Push/pop)25 b(a)e(tok)o(en)0
3111 y Fy(struct)46 b(scml_token)f(*index\(int)g(offset\))300
3224 y FC(Access)24 b(the)g(tok)o(en)h(at)e(the)h(gi)n(v)o(en)g(of)n
(fset)h(from)e(the)h(top)g(of)f(the)h(stack)0 3419 y
Fy(int)47 b(count\(\))300 3532 y FC(Returns)25 b(the)e(number)i(of)e
(tok)o(ens)i(on)f(the)g(stack)0 3728 y Fy(void)47 b(print\(\))300
3841 y FC(Used)24 b(for)f(deb)n(ugging,)k(just)d(prints)h(out)f(the)f
(contents)j(of)e(the)f(stack)0 4098 y FA(8.2.7)99 b(scml)p
499 4098 V 35 w(str)n(eam)p 825 4098 V 37 w(pos)0 4274
y FC(The)24 b Fy(scml_stream_pos)19 b FC(is)24 b(used)h(to)f(le)o(x)g
(the)i Fv(S)t(C)t(M)t(L)h FC(source)f(and)f(for)f(tracking)i(the)e
(position)j(during)e(e)o(x)o(ecution.)33 b(The)0 4387
y(class)26 b(is)f(slightly)j(dif)n(ferent)f(from)e(a)g(re)o(gular)i(le)
o(xx)o(er)f(since)g(it)f(needs)i(to)e(operate)i(in)f(tw)o(o)f(modes,)h
(one)g(for)f(the)h(ra)o(w)e(te)o(xt,)0 4500 y(and)30
b(one)g(for)g(the)g(command)h(tok)o(ens.)48 b(Additionally)-6
b(,)34 b(the)c(class)h(also)f(needs)h(to)f(return)h(position)h(tok)o
(ens)f(so)f(that)g(it)f(is)0 4613 y(possible)d(to)e(accurately)j(track)
e(position)h(in)e(the)g(source)i(during)f(e)o(x)o(ecution.)33
b(Otherwise,)24 b(the)h(operation)h(of)e(the)g(class)h(is)0
4726 y(lik)o(e)f(one)g(w)o(ould)g(e)o(xpect,)h(it)e(translates)j(te)o
(xt)e(into)g(tok)o(ens)h(for)f(others)h(components)h(to)d(process.)0
4919 y Fy(void)47 b(set_stream\(struct)c(scml_stream)h(*ss\),)51
b(struct)46 b(scml_stream)f(*get_stream\(\))300 5032
y FC(Set/get)24 b(the)g(data)g(stream)g(for)g(le)o(xxing)0
5227 y Fy(void)47 b(set_flags\(unsigned)42 b(int)47 b(the_flags\),)i
(unsigned)d(int)h(get_flags\(\))300 5340 y FC(Set/get)24
b(the)g(\003ags)p eop
%%Page: 154 154
154 153 bop 0 -165 a FC(154)1317 b Fx(CHAPTER)20 b(8.)51
b(SOURCE)21 b(CODE)g(MARKUP)g(LANGU)l(A)l(GE)f(\(SCML\))0
91 y Fy(void)47 b(set_state\(int)d(state\),)50 b(int)d(get_state\(\))
300 204 y FC(Set/get)24 b(the)g(state)0 417 y Fy(void)47
b(set_cursor\(char)c(*cursor\),)50 b(char)c(*get_cursor\(\))300
529 y FC(Set/get)24 b(the)g(current)h(position)h(in)d(the)h
Fy(scml_stream)c FC(b)n(uf)n(fer)0 742 y Fy(void)47 b(set_row\(int)d
(row\),)51 b(int)c(get_row\(\))300 855 y FC(Set/get)24
b(the)g(current)h(ro)n(w)e(in)h(the)f(stream)0 1067 y
Fy(void)47 b(set_column\(int)d(column\),)49 b(int)e(get_column\(\))300
1180 y FC(Set/get)24 b(the)g(current)h(column)g(in)e(the)h(stream)0
1392 y Fy(int)47 b(get_last_row\(\),)h(int)f(get_last_column\(\))300
1505 y FC(Get)28 b(the)h(last)g(ro)n(w/column)h(that)f(w)o(as)g(le)o
(xx)o(ed)g(in)g(the)f(stream.)45 b(This)28 b(is)h(used)g(in)g(error)g
(messages)i(to)d(gi)n(v)o(e)h(the)300 1618 y(user)24
b(a)f(range)i(to)e(look)i(for)e(the)h(error)0 1830 y
Fy(char)47 b(*munge_string\(char)42 b(*str\))300 1943
y FC(Con)l(v)o(ert)25 b(a)e(string)i(with)e(escape)i(sequences)h(into)e
(a)f(standard)j(C)d(string.)0 2156 y Fy(int)47 b(get_number\(struct)c
(scml_token)i(*st\))300 2269 y FC(Con)l(v)o(ert)25 b(a)e(number)h(in)g
(the)f(te)o(xt)h(stream)g(and)g(store)h(its)e(v)n(alue)i(in)e
Fy(st)p FC(.)0 2481 y Fy(int)47 b(scan\(int)e(kind,)51
b(const)46 b(char)h(*str\))300 2594 y FC(Scan)26 b(forw)o(ard)i(in)e
(the)g(stream)h(until)g(the)g(condition)i(is)d(satis\002ed,)i(the)f
(cursor)g(will)f(then)h(be)g(placed)g(one)g(char)n(-)300
2707 y(acter)d(after)h(the)e(cause)i(of)f(the)f(stop.)0
2919 y Fy(struct)46 b(scml_token)f(get_token\(\))300
3032 y FC(This)28 b(is)f(the)h(main)g(function)i(for)e(le)o(xxing,)i
(it)e(will)f(w)o(alk)h(through)h(the)g(stream)f(returning)i(tok)o(ens)f
(until)g(it)f(hits)300 3145 y(the)c(end)g(of)f(the)h(stream)g(and)g
(returns)h Fy(SCML_DONE)0 3430 y FA(8.2.8)99 b(scml)p
499 3430 30 4 v 35 w(parser)0 3616 y FC(The)26 b Fy(scml_parser)c
FC(is)k(a)g(simple)h(\(and)g(not)g(v)o(ery)f(good\))i(parser)f(for)i
Fv(S)t(C)t(M)t(L)g FC(tok)o(ens)f(returned)h(by)d(an)g
Fy(scml_stream_)0 3729 y(pos)p FC(.)h(It)21 b(w)o(orks)i(by)f(gi)n
(ving)h(the)f(class)h(an)f Fy(scml_stream_pos)17 b FC(and)23
b(then)f(calling)i Fy(parse)p FC(.)i(If)c(the)g(parse)h(w)o(as)e
(successful)0 3842 y(a)i(tok)o(en)i(sequence)h(will)d(be)h(returned)h
(which)f(can)g(then)g(be)g(e)o(x)o(ecuted.)0 4032 y Fy(void)47
b(set_stream_pos\(struct)42 b(scml_stream_pos)h(*ssp\),)50
b(struct)d(scml_stream_pos)0 4145 y(*get_stream_pos\(\))300
4258 y FC(Set)23 b(the)h(stream)g(that)g(the)g(parser)h(should)g(get)f
(tok)o(ens)h(from.)0 4470 y Fy(struct)46 b(scml_token_sequence)d
(*parse\(\))300 4583 y FC(The)29 b(main)g(parsing)h(function,)j(it)28
b(will)h(ask)g(the)h(stream)f(position)i(object)g(for)e(tok)o(ens)i
(and)e(then)h(construct)h(an)300 4696 y Fy(scml_token_sequence)18
b FC(from)23 b(them.)0 4887 y Fy(struct)46 b(scml_token)f
(collapse\(struct)f(scml_token_stack)f(*values,)50 b(struct)c
(scml_token)0 5000 y(*oper\))300 5113 y FC(An)38 b(internal)i(function)
h(used)e(when)f(parsing.)75 b(Basically)-6 b(,)44 b(it)38
b(just)h(looks)g(at)g(the)f(operator)j(and)e(pulls)g(an)o(y)300
5226 y(operands)31 b(of)n(f)d(of)g(the)h(stack,)h(and)f(then)g(pushes)h
(the)e(operator)j(connected)g(to)d(the)h(operands)h(onto)f(the)g(v)n
(alues)300 5339 y(stack.)p eop
%%Page: 155 155
155 154 bop 0 -165 a Fx(8.2.)51 b(THE)22 b(SCML)f(INTERPRETER)2497
b FC(155)0 91 y FA(8.2.9)99 b(scml)p 499 91 30 4 v 35
w(handler)0 267 y FC(The)33 b Fy(scml_handler)d FC(is)k(a)g(structure)i
(for)e(binding)i(a)d(name)h(to)g(a)f(C/C++)h(function,)k(making)d(it)f
(easy)g(to)g(bind)h(to)f(a)0 380 y(function)26 b(from)d(an)j
Fv(S)t(C)t(M)t(L)g FC(le)n(v)o(el.)0 633 y FA(8.2.10)99
b(scml)p 549 633 V 35 w(handler)p 915 633 V 37 w(table)0
808 y FC(The)23 b Fy(scml_handler_table)18 b FC(class)24
b(is)g(used)g(for)g(tracking)h(and)f(inde)o(xing)i(all)e(of)f(the)h
(functions)i(a)n(v)n(ailable.)0 998 y Fy(void)47 b(add_handler\(struct)
42 b(scml_handler)j(*sh\),)50 b(void)d(rem_handler\(cosnt)c(char)k
(*name\))300 1111 y FC(Add/remo)o(v)o(e)24 b(a)g(handler)h(in)e(the)h
(table)0 1304 y Fy(struct)46 b(scml_handler)f(*find_handler\(const)d
(char)47 b(*name\))300 1417 y FC(Find)23 b(a)h(handler)h(in)e(the)h
(table)h(with)e(the)h(gi)n(v)o(en)g(name)0 1670 y FA(8.2.11)99
b(scml)p 549 1670 V 35 w(cmd)p 766 1670 V 37 w(de\002nition)0
1845 y FC(The)32 b Fy(scml_cmd_definition)27 b FC(class)34
b(is)e(used)i(for)f(describing)i(an)g Fv(S)t(C)t(M)t(L)h
FC(command,)f(its)e(name,)i(parameters,)i(and)0 1958
y(de\002nition.)0 2148 y Fy(char)47 b(*tag_ref\(\),)i(static)d(struct)g
(scml_cmd_definition)c(*ptr\(char)j(*ref\))300 2261 y
FC(Encode/decode)27 b(the)d(object)h(as)e(a)g(T)-8 b(A)l(G)p
1599 2261 28 4 v 32 w(REF)21 b(compatible)26 b(string)0
2455 y Fy(void)47 b(set_name\(const)d(char)i(*name\),)k(const)c(char)h
(*get_name\(\))300 2568 y FC(Set/get)24 b(the)g(name)g(of)f(the)h
(command)0 2761 y Fy(void)47 b(set_opt_params\(tag_list)41
b(*tl\),)51 b(tag_list)45 b(*get_opt_params\(\))300 2874
y FC(Set/get)24 b(the)g(list)g(of)f(optional)j(parameters)0
3067 y Fy(void)47 b(set_req_params\(tag_list)41 b(*tl\),)51
b(tag_list)45 b(*get_req_params\(\))300 3180 y FC(Set/get)24
b(the)g(list)g(of)f(required)j(parameters)0 3373 y Fy(void)47
b(set_flags\(int)d(flags\),)50 b(int)d(get_flags\(\))300
3486 y FC(Set/get)24 b(the)g(\003ags)g(for)f(the)h(object)0
3679 y Fy(void)47 b(set_handler\(struct)42 b(scml_handler)j(*sh\),)50
b(struct)c(scml_handler)f(*get_handler\(\))300 3792 y
FC(Set/get)24 b(the)g(handler)h(for)f(this)g(command.)0
3964 y Fy(void)47 b(set_token_sequence\(stru)o(ct)42
b(scml_token_sequence)g(*sts\),)50 b(struct)0 4077 y
(scml_token_sequence)43 b(*get_token_sequence\(\))300
4190 y FC(Set/get)24 b(the)g(tok)o(en)h(sequence)h(that)e(de\002nes)g
(this)g(command)0 4383 y Fy(int)47 b(execute\(struct)d(scml_token)h
(*st,)51 b(struct)46 b(scml_context)e(*sc\))300 4496
y FC(Ex)o(ecute)24 b(the)g(handler)h(with)f(the)g(tok)o(en)g(and)g
(conte)o(xt)0 4749 y FA(8.2.12)99 b(scml)p 549 4749 30
4 v 35 w(escape/scml)p 1082 4749 V 36 w(escape)p 1394
4749 V 37 w(table)0 4924 y FC(The)25 b Fy(scml_escape)d
FC(class)27 b(is)f(used)g(for)g(describing)j(an)f Fv(S)t(C)t(M)t(L)h
FC(escape,)e(the)f(name)g(and)g(v)n(alue.)37 b(The)25
b(escapes)i(are)f(then)0 5037 y(track)o(ed)f(in)f(an)f
Fy(scml_escape_table)p FC(.)0 5227 y Fy(void)47 b(add_escape\(struct)c
(scml_escape)h(*se\),)51 b(void)c(rem_escape\(cnst)c(char)k(*name\))300
5340 y FC(Add/remo)o(v)o(e)24 b(an)g(escape)h(de\002nition)g(in)f(the)g
(table)p eop
%%Page: 156 156
156 155 bop 0 -165 a FC(156)1317 b Fx(CHAPTER)20 b(8.)51
b(SOURCE)21 b(CODE)g(MARKUP)g(LANGU)l(A)l(GE)f(\(SCML\))0
91 y Fy(void)47 b(find_escape\(const)c(char)j(*name\))300
204 y FC(Find)23 b(an)h(escape)h(de\002nition)g(with)f(the)f(gi)n(v)o
(en)i(name)0 475 y FA(8.2.13)99 b(scml)p 549 475 30 4
v 35 w(scope)0 657 y FC(The)23 b Fy(scml_scope)d FC(class)k(is)f(used)i
(to)e(represent)j(a)d(scope)h(in)h Fv(S)t(C)t(M)t(L)r
FC(,)g(it)e(holds)h(de\002nitions,)i(child)e(scopes,)h(and)f(escapes.)0
770 y(Static)g(v)n(ariables)h(and)f(command)h(de\002nitions)g(are)f
(held)g(in)g(the)g(v)n(alues)g(tag)g(list,)g(b)n(ut)g(escapes)h(are)f
(held)g(separately)-6 b(.)0 972 y Fy(struct)46 b(scml_scope)f
(*get_parent\(\))300 1085 y FC(Return)24 b(the)g(parent)h(scope)0
1289 y Fy(void)47 b(set_name\(const)d(char)i(*name\),)k(const)c(char)h
(*get_name\(\))300 1402 y FC(Set/get)24 b(the)g(name)g(of)f(the)h
(scope)0 1584 y Fy(void)47 b(set_escape_table\(struct)41
b(scml_escape_table)i(*setable\),)49 b(struct)0 1697
y(scml_escape_table)43 b(*get_escape_table\(\))300 1810
y FC(Set/get)24 b(the)g(escape)h(table)g(associated)h(with)d(this)h
(scope)0 2014 y Fy(void)47 b(add_child\(struct)c(scml_scope)i(*ss\))300
2127 y FC(Add)23 b(a)g(child)i(scope)0 2331 y Fy(struct)46
b(scml_scope)f(*find_child\(const)e(char)k(*name\))300
2443 y FC(Find)23 b(a)h(child)g(scope)0 2626 y Fy(void)47
b(add_cmd_definition\(stru)o(ct)42 b(scml_cmd_definition)g(*scd\),)50
b(void)0 2739 y(rem_cmd_definition\(struc)o(t)42 b(scml_cmd_definition)
g(*scd\))300 2851 y FC(Add/remo)o(v)o(e)24 b(a)g(command)g
(de\002nition)h(in)f(the)f(scope)0 3034 y Fy(struct)46
b(scml_cmd_definition)d(*find_cmd_definition\(st)o(ruct)e(scml_scope)k
(**scope,)50 b(const)0 3147 y(char)d(*name\))300 3259
y FC(Return)24 b(the)g(command)g(de\002nition)h(with)e(the)h(gi)n(v)o
(en)g(name)f(or)g(NULL)e(if)i(it)g(w)o(as)g(not)h(found.)30
b(The)23 b(scope)h(it)g(w)o(as)300 3372 y(actually)i(found)e(in)g(is)f
(set)h(in)f Fy(scope)p FC(.)0 3576 y Fy(tag_list)46 b(*get_values\(\))
300 3689 y FC(Return)24 b(the)g Fy(tag_list)d FC(with)i(the)h(list)g
(of)f(global)i(v)n(ariables)0 3893 y Fy(void)47 b(print\(\))300
4006 y FC(Deb)n(ug)24 b(printf)0 4210 y Fy(static)46
b(struct)g(scml_scope)f(*make_root_scope\(\))300 4323
y FC(Construct)31 b(an)f Fy(scml_scope)c FC(that)k(is)f(suitable)j(for)
e(use)g(as)f(the)h(root)g(scope.)48 b(Basically)-6 b(,)32
b(it)e(just)g(adds)g(all)g(the)300 4436 y(b)n(uiltin)25
b(command)g(de\002nitions)0 4707 y FA(8.2.14)99 b(scml)p
549 4707 V 35 w(context)0 4888 y FC(The)23 b Fy(scml_context)c
FC(class)24 b(is)f(used)h(to)f(e)o(x)o(ecute)k Fv(S)t(C)t(M)t(L)f
FC(code)e(and)g(actually)h(generate)h(the)d(resulting)j(output.)k(The)
23 b(pri-)0 5001 y(mary)c(function)i(is)e Fy(format_sequence)14
b FC(which)20 b(tak)o(es)g(a)e(tok)o(en)i(sequence)i(\(e.g.,)d(from)g
(an)g Fy(scml_parser::parse\(\))p FC(\))0 5114 y(and)34
b(then)f(e)o(x)o(ecutes)i(the)e(contents,)38 b(printing)d(out)f(te)o
(xt)f(tok)o(ens)i(and)e(e)n(v)n(aluating)j(e)o(xpressions.)60
b(Ex)o(ecution)35 b(of)g Fv(S)t(C)t(M)t(L)0 5227 y FC(commands)e(will)f
(create)h(a)f(child)h(conte)o(xt)h(for)e(which)g(the)h(command)f(e)o(x)
o(ecutes)i(in,)g(of)e(course,)j(if)d(the)h(command)f(is)0
5340 y(implemented)25 b(by)f(a)f(C)g(function)i(it)f(can)f(manipulate)j
(its)e(parent)h(conte)o(xt,)f(allo)n(wing)h(for)f(great)g(\003e)o
(xibility)-6 b(.)p eop
%%Page: 157 157
157 156 bop 0 -165 a Fx(8.2.)51 b(THE)22 b(SCML)f(INTERPRETER)2497
b FC(157)0 91 y Fy(void)47 b(set_flags\(int)d(flags\),)50
b(int)d(get_flags\(\))300 204 y FC(Set/get)24 b(the)g(\003ags)g(for)f
(the)h(conte)o(xt)0 405 y Fy(void)47 b(set_parent\(struct)c
(scml_context)h(*parent\),)50 b(struct)c(scml_context)e
(*get_parent\(\))300 517 y FC(Set/get)24 b(the)g(parent)h(conte)o(xt)0
696 y Fy(void)47 b(set_stream_pos\(struct)42 b(scml_stream_pos)h
(*ss\),)51 b(struct)46 b(scml_stream_pos)0 809 y(*get_stream_pos\(\))
300 922 y FC(Set/get)24 b(the)g Fy(scml_stream_pos)19
b FC(object)25 b(which)f(w)o(as)f(used)h(in)g(le)o(xxing)h(the)e(code)0
1101 y Fy(void)47 b(set_cmd_def\(struct)42 b(scml_cmd_definition)h
(*def\),)50 b(struct)c(scml_cmd_definition)0 1214 y(*get_cmd_def\(\))
300 1327 y FC(Set/get)24 b(the)g(command)g(de\002nition)i(associated)g
(with)d(this)h(conte)o(xt)0 1527 y Fy(void)47 b(set_lvalues\(tag_list)
42 b(*tl\),)50 b(tag_list)c(*get_lvalues\(\))300 1640
y FC(Set/get)24 b(the)g(left)g(hand)g(side)h(v)n(alues)0
1840 y Fy(void)47 b(set_rvalues\(tag_list)42 b(*tl\),)50
b(tag_list)c(*get_rvalues\(\))300 1953 y FC(Set/get)24
b(the)g(right)h(hand)f(side)g(v)n(alues)0 2153 y Fy(void)47
b(set_scope\(struct)c(scml_scope)i(*sc\),)50 b(struct)d(scml_scope)e
(*get_scope\(\))300 2266 y FC(Set/get)24 b(the)g(current)h(scope)0
2466 y Fy(void)47 b(set_indent_size\(int)42 b(size\),)50
b(int)d(get_indent_size\(\))300 2579 y FC(Set/get)24
b(the)g(indent)h(size.)30 b(This)23 b(size)h(corresponds)k(to)23
b(ho)n(w)g(much)h(indentation)j(there)d(is)g(before)h(a)e(macro)h
(call,)300 2692 y(so)32 b(that)h(an)o(y)f(preformatted)j(te)o(xt)e(in)f
(the)g(macro)h(will)f(be)g(aligned)i(with)e(the)g(be)o(ginning)j(of)d
(the)h(call)f(instead)300 2805 y(completely)26 b(left)e(justi\002ed.)0
3005 y Fy(void)47 b(set_offset_size\(int)42 b(size\),)50
b(int)d(get_offset_size\(\))300 3118 y FC(Set/get)31
b(the)f(of)n(fset)h(size.)48 b(This)29 b(size)i(corresponds)i(to)d(the)
g(dif)n(ference)i(between)f(the)f(start)h(of)f(a)f(line)i(and)f(the)300
3231 y(position)23 b(of)e(a)f Fy(pre)g FC(command.)28
b(The)21 b(size)g(is)g(then)g(used)h(to)f(determine)i(when)e(to)f
(start)i(printing)h(leading)g(spaces)300 3344 y(in)g(a)h(line,)f(thus,)
h(it)g(is)f(possible)j(to)d(indent)k Fv(S)t(C)t(M)t(L)g
FC(code)d(with)g(ha)n(ving)h(the)f(indentation)j(af)n(fect)d(the)g
(output.)0 3544 y Fy(int)47 b(print_token\(struct)c(scml_token)i(*st\))
300 3657 y FC(Prints)31 b(out)h(the)f(contents)i(of)e(a)f(tok)o(en.)53
b(The)30 b(tok)o(en)i(should)h(already)g(ha)n(v)o(e)e(been)h(e)n(v)n
(aluated)h(so)e(only)h(tok)o(ens)300 3770 y(with)23 b(literal)i(v)n
(alues)g(should)g(be)f(passed)h(to)e(the)h(function.)0
3971 y Fy(void)47 b(print_indent\(int)c(size\))300 4083
y FC(A)22 b(simple)j(function)g(to)f(print)g(an)g(indentation)j(of)c
(the)h(gi)n(v)o(en)g(size.)0 4262 y Fy(void)47 b(locate_scope\(struct)
42 b(scml_token)j(*st,)51 b(struct)46 b(scml_scope)f(**inout_scope,)j
(const)0 4375 y(char)f(**out_id\))0 4575 y(int)g
(equalize_tokens\(struct)42 b(scml_token)j(*dest,)50
b(struct)c(scml_token)f(*src,)50 b(int)d(count\))300
4688 y FC(Con)l(v)o(erts)25 b(the)f Fy(count)d FC(sized)j(array)h(of)e
(tok)o(ens)i(into)f(the)g(simplest)h(common)f(type.)29
b(The)23 b(process)i(is)e(to)h(strip)g(all)300 4801 y(of)d(the)g(tok)o
(ens)h(in)f Fy(src)f FC(and)h(then)h(try)f(to)f(promote)i(them)f(all)g
(to)g(the)g(same)g(type.)29 b(If)20 b(a)h(common)g(type)h(w)o(as)e
(found,)300 4914 y(it)j(will)g(be)h(returned)i(and)e(dest)g(will)f(ha)n
(v)o(e)h(the)g(con)l(v)o(erted)i(tok)o(ens,)f(otherwise)g
Fy(SCML_ERROR)20 b FC(is)k(returned.)0 5114 y Fy(struct)46
b(scml_token)f(eval_token\(struct)e(scml_token)i(*st\))300
5227 y FC(Ev)n(aluate)32 b(a)e(tok)o(en)j(e)o(xpression)g(to)e(produce)
i(a)d(tok)o(en)i(that)g(has)f(a)g(printable)i(v)n(alue,)g(e)o(xcept)f
(for)f(commands,)300 5340 y(which)24 b(ha)n(v)o(e)g(to)g(be)f(handled)j
(by)d Fy(exec_token)p FC(.)p eop
%%Page: 158 158
158 157 bop 0 -165 a FC(158)1317 b Fx(CHAPTER)20 b(8.)51
b(SOURCE)21 b(CODE)g(MARKUP)g(LANGU)l(A)l(GE)f(\(SCML\))0
91 y Fy(void)47 b(token_lvalue\(struct)42 b(scml_token)j(*st,)51
b(tag_item)45 b(**out_ti,)50 b(int)d(*out_index\))300
204 y FC(Get)36 b(the)g(lv)n(alue)i(of)e(a)f(tok)o(en.)69
b(Since)36 b(all)g(v)n(ariables)j(are)d(really)h(just)g(tags,)j(the)d
(result)g(is)f(a)g(pointer)i(to)e(the)300 317 y Fy(tag_item)21
b FC(and,)i(if)h(it)f(is)g(an)h(array)-6 b(,)24 b(the)g(inde)o(x)g
(into)g(the)g(array)-6 b(.)0 505 y Fy(int)47 b(handle_params\(struct)42
b(scml_token)j(*cmd\))300 618 y FC(Processes)25 b(the)f
Fy(SCML_NT_COMMAND)19 b FC(tok)o(en)24 b(to)g(e)n(v)n(aluate)h(each)f
(ar)n(gument)i(and)e(set)f(its)h(v)n(alue)g(in)g(the)g(conte)o(xt.)0
806 y Fy(void)47 b(tag_type\(struct)c(scml_token)i(*t_type,)50
b(tag_data_kind)44 b(*out_kind,)49 b(int)e(*out_size\))300
919 y FC(Determine)24 b(the)i Fv(P)t(R)t(E)t(S)p 1034
919 28 4 v 40 w(C)e FC(tag)g(type)h(needed)g(to)e(hold)i(an)g
Fv(S)t(C)t(M)t(L)i FC(v)n(alue.)0 1085 y Fy(struct)46
b(scml_cmd_definition)d(*find_cmd\(struct)g(scml_scope)i(**cmd_scope,)k
(struct)0 1198 y(scml_token)c(*st\))300 1311 y FC(Find)23
b(the)h(command)h(de\002nition)g(referenced)h(by)e(the)g(tok)o(en)0
1499 y Fy(void)47 b(define\(struct)d(scml_context)g(*sc\))300
1612 y FC(Handles)34 b(the)f Fy(define)d FC(command)k(which)f(is)f
(used)i(to)f(de\002ne)g(other)h(commands,)i(escapes,)g(and)d(v)n
(ariables.)300 1725 y(This)f(is)g(e)o(x)o(ecuted)i(on)e(the)h(parent)g
(conte)o(xt)h(and)f(a)f(child)h(conte)o(xt)g(is)f(passed)i(in)e(which)h
(contains)h(all)f(of)f(the)300 1838 y(ar)n(guments.)h(The)24
b(method)h(will)f(then)h(pull)g(an)o(y)f(ar)n(guments)j(of)d(interest)i
(from)e(the)h Fy(sc)e FC(conte)o(xt)j(and)e(de\002ne)h(the)300
1951 y(object.)0 2139 y Fy(void)47 b(undefine\(struct)c(scml_context)i
(*sc\))300 2252 y FC(Unde\002ne)24 b(an)g(object)g(that)h(w)o(as)e(pre)
n(viously)j(de\002ned.)0 2440 y Fy(void)47 b(rename\(struct)d
(scml_context)g(*sc\))300 2553 y FC(Rename)24 b(an)f(object)0
2741 y Fy(int)47 b(ifdef\(struct)d(scml_context)h(*sc,)51
b(struct)46 b(scml_token_sequence)c(*sub,)51 b(int)c(defined\))300
2854 y FC(Similar)30 b(to)g(the)h Fy(define)d FC(method,)k(this)f(will)
f(handle)i(the)e Fy(ifdef)e FC(and)j Fy(ifndef)d FC(b)n(uiltin)k
(commands.)50 b(If)30 b(the)300 2966 y Fy(defined)k FC(parameter)j(is)f
(true)h(then)g(it)f(will)g(act)g(lik)o(e)h Fy(ifdef)d
FC(and)j(e)o(x)o(ecute)g(the)g(contents)h(if)e(the)h(object)g(is)300
3079 y(de\002ned,)24 b(otherwise)h(it)f(acts)g(lik)o(e)g
Fy(ifndef)d FC(and)j(e)o(x)o(ecutes)h(when)f(it)f(is)g(not)h
(de\002ned.)0 3239 y Fy(struct)46 b(scml_token_sequence)d
(*get_contents\(struct)f(scml_cmd_definition)g(*def,)51
b(struct)0 3352 y(scml_token_sequence)43 b(*sts,)50 b(int)d(start\))300
3465 y FC(Return)21 b(the)g(contents)i(of)d(a)g(brack)o(eted)k(command)
d(in)f(a)g(tok)o(en)i(sequence.)30 b(The)20 b(passed)j(in)d(tok)o(en)i
(sequence)h(and)300 3577 y Fy(start)28 b FC(parameter)k(indicate)g
(where)f(the)f(start)h(of)g(the)f(command)h(contents)i(is)d(located)i
(which)e(the)h(function)300 3690 y(then)f(scans)g(through)h(looking)g
(for)e(the)h(terminator)-5 b(.)47 b(Once)29 b(the)h(terminator)h(is)e
(located)h(it)f(will)g(create)h(a)f(ne)n(w)300 3803 y(tok)o(en)c
(sequence)h(and)e(set)f(it)h(to)f(contain)j(the)d(contents.)0
3970 y Fy(struct)46 b(scml_token_sequence)d(*partition_sequence\(str)o
(uct)e(scml_cmd_definition)i(*def,)0 4082 y(struct)j
(scml_cmd_definition)d(*partition,)48 b(struct)f(scml_token_sequence)42
b(*sts\))300 4195 y FC(P)o(artitions)29 b(a)e(tok)o(en)i(sequence)h
(around)g(a)d(gi)n(v)o(en)h(command.)42 b(The)27 b(passed)j(in)d
(sequence)j(will)e(be)f(adjusted)j(to)300 4308 y(contain)d(the)f
(\002rst)f(part)g(of)g(the)h(partition)i(and)d(a)g(ne)n(w)g(sequence)i
(will)e(be)h(created)g(with)f(the)h(second)h(part.)34
b(This)300 4421 y(is)26 b(useful)i(for)f(brack)o(eted)i(commands)e
(that)g(ha)n(v)o(e)g(se)n(v)o(eral)h(dif)n(ferent)g(sections.)40
b(F)o(or)25 b(e)o(xample,)j(it)e(can)h(be)f(used)300
4534 y(to)d(separate)j(the)e(true)g(and)g(f)o(alse)g(branches)i(of)e
(an)f(if)g(test,)h(or)g(for)f(the)h(cases)h(in)e(a)g(switch.)0
4700 y Fy(int)47 b(exec_token\(struct)c(scml_token_sequence)g(*sts,)50
b(int)d(*index,)j(struct)c(scml_token)0 4813 y(*st\))300
4926 y FC(Ex)o(ecute)23 b(a)e(tok)o(en,)j(if)e(the)g(tok)o(en)i(is)e(a)
f(command)i(it)f(will)g(consume)h(the)g(tok)o(ens)g(of)f(the)h(body)-6
b(,)23 b(if)f(it)g(is)g(brack)o(eted,)300 5039 y(and)i(then)g(call)g
(the)g(handler)h(for)f(the)g(command.)29 b(If)24 b(the)g(tok)o(en)g(is)
g(a)f(simple)h(v)n(alue)g(then)h(it)e(will)g(be)h(printed.)0
5227 y Fy(int)47 b(format_sequence\(struct)42 b(scml_token_sequence)g
(*sts\))300 5340 y FC(Ex)o(ecutes)25 b(the)e(commands)i(and)f(prints)h
(out)f(an)o(y)f(te)o(xt)h(in)g(a)f(tok)o(en)h(sequence.)p
eop
%%Page: 159 159
159 158 bop 0 -165 a Fx(8.2.)51 b(THE)22 b(SCML)f(INTERPRETER)2497
b FC(159)0 91 y Fy(int)47 b(exec_cmd\(const)d(char)i(*cmd_name,)k
(tag_list)45 b(*locals,)50 b(...\))300 204 y FC(Manually)26
b(e)o(x)o(ecute)e(a)g(command.)30 b(The)24 b Fy(locals)d
FC(ar)n(gument)26 b(is)e(set)g(as)g(the)g(parent)h(tag)f(list)g(of)g
(the)g(conte)o(xt)i(that)300 317 y(the)31 b(command)h(is)f(e)o(x)o
(ecuted)h(in)f(so)g(it)f(is)h(possible)i(to)e(get)g(at)g(the)g(v)n
(alues.)52 b(The)30 b(v)n(arar)n(gs)j(portion)g(of)e(the)g(call)300
430 y(is)g(used)g(to)g(add)h(v)n(alues)g(directly)g(to)f(the)g(conte)o
(xt)i(and)e(is)g(a)f(formatted)j(set)e(of)f(v)n(alues.)52
b(The)31 b(\002rst)f(v)n(alue)i(is)f(a)300 543 y(string)26
b(corresponding)k(to)25 b(the)g(name)g(of)g(a)f(v)n(ariable,)j(ne)o(xt)
f(there)g(is)e(a)h Fy(tag_kind)d FC(specifying)28 b(the)d(type)h(of)f
(the)300 656 y(v)n(ariable,)g(and)f(\002nally)g(a)f Fy(tag_data_u)d
FC(which)k(contains)i(the)e(v)n(alue)g(of)f(the)h(v)n(ariable.)0
833 y Fy(static)46 b(void)h(set_handler_table\(struc)o(t)42
b(scml_handler_table)h(*sht\),)50 b(static)c(struct)0
946 y(scml_handler_table)d(*get_handler_table\(\))300
1059 y FC(Set/get)25 b(the)g(handler)h(table)f(where)f(handlers)j
(speci\002ed)e(in)g Fy(define)p FC(s)d(will)i(be)g(found.)32
b(This)24 b(table)h(is)g(global)g(to)300 1172 y(all)f(conte)o(xts)h(so)
f(only)g(one)g(table)g(needs)h(to)f(be)f(constructed.)0
1370 y Fy(void)47 b(print\(int)e(level\))300 1483 y FC(Print)24
b(a)f(stack)h(trace)h(for)e(deb)n(ugging)0 1744 y FA(8.2.15)99
b(Command)25 b(Handler)g(Functions)0 1922 y FC(An)o(y)f(b)n(uiltin)i
(commands)f(not)g(handled)h(by)e(the)h Fy(scml_context)20
b FC(are)k(handled)j(by)d(C)f(functions.)34 b(These)24
b(functions)j(are)0 2035 y(de\002ned)e(in)f Fy(c/pbe/lib/scml_context.)
o(cc)17 b FC(and)25 b(then)f(a)g(number)h(of)f Fy(scml_handler)p
FC(s)c(are)k(created)i(for)e(each)h(and)0 2148 y(added)g(to)e(the)h
(handler)h(table)g(in)e(the)h Fy(scml_context)p FC(.)0
2344 y Fy(int)47 b(c_defvar_handler\(struct)41 b(scml_token)k(*st,)51
b(struct)46 b(scml_context)f(*sc\))300 2457 y FC(Handles)28
b(the)g Fy(defvar)d FC(command)j(by)f(w)o(alking)h(the)g(child)g(tok)o
(ens)h(of)e Fy(st)f FC(and)i(e)n(v)n(aluating)i(them)d(and)h(adding)300
2570 y(the)c(tags)g(the)o(y)g(create)h(to)e(the)h(conte)o(xt.)0
2768 y Fy(int)47 b(c_ignore_handler\(struct)41 b(scml_token)k(*st,)51
b(struct)46 b(scml_context)f(*sc\))300 2881 y FC(Handles)35
b(the)e Fy(ignore)e FC(command)j(by)g(w)o(alking)h(the)e(list)h(of)f
(child)i(tok)o(ens)g(and)f(e)n(v)n(aluating)i(them,)f(without)300
2994 y(doing)25 b(an)o(ything)g(else.)30 b(The)23 b(e)n(v)n(aluated)i
(e)o(xpressions)i(are)d(e)o(xpected)h(to)e(create)i(some)f(kind)g(of)g
(side)g(ef)n(fect.)0 3192 y Fy(int)47 b(c_scope_handler\(struct)42
b(scml_token)j(*st,)50 b(struct)c(scml_context)f(*sc\))300
3305 y FC(Handles)22 b(the)f Fy(scope)e FC(command)j(by)f(changing)i
(to,)e(or)g(creating)i(the)f(scope)g(with)f(the)g(gi)n(v)o(en)g(name.)
28 b(The)21 b(parent)300 3418 y(scope)27 b(is)e(set)h(to)f(the)h(ne)n
(w)f(scope)h(and)g(then)h(the)e(parent)i(conte)o(xt)g(e)o(x)o(ecutes)g
(contents)h(of)d(the)h Fy(scope)d FC(on)j(behalf)300
3531 y(of)d(the)h(child.)0 3729 y Fy(int)47 b(c_macro_handler\(struct)
42 b(scml_token)j(*st,)50 b(struct)c(scml_context)f(*sc\))300
3842 y FC(Handles)36 b(the)f Fy(macro)d FC(command)k(by)f(creating)h(a)
f(ne)n(w)f(command)h(that)g(will)g(e)o(x)o(ecute)g(the)g(contents)i(of)
e(the)300 3955 y Fy(macro)21 b FC(when)j(used.)0 4153
y Fy(int)47 b(c_macro_executer\(struct)41 b(scml_token)k(*st,)51
b(struct)46 b(scml_context)f(*sc\))300 4266 y FC(Handles)20
b(commands)f(that)h(ha)n(v)o(e)f(been)g(created)h(using)g(the)f
Fy(macro)e FC(command.)27 b(It)19 b(will)f(e)n(v)n(aluate)i(the)f(ar)n
(guments)300 4379 y(and)24 b(then)g(get)g(the)g(macro)g(body)g(from)g
(the)g(command)g(de\002nition)h(and)f(e)o(x)o(ecute)h(the)h
Fv(S)t(C)t(M)t(L)g FC(code.)0 4577 y Fy(int)47 b(c_if_handler\(struct)
42 b(scml_token)j(*st,)51 b(struct)46 b(scml_context)f(*sc\))300
4690 y FC(Handles)26 b(the)g Fy(if)d FC(command)j(by)f(e)n(v)n
(aluating)j Fy(children[1])21 b FC(of)k Fy(st)f FC(to)h(get)g(a)g(v)n
(alue)h(to)f(test)g(for)g(being)i(true)e(or)300 4803
y(f)o(alse.)30 b(Then)24 b(it)f(will)h(try)g(to)f(partition)j(the)e
(contents)i(of)e(the)g(command)g(around)i(the)e Fy(else)e
FC(command.)30 b(Finally)-6 b(,)300 4916 y(it)23 b(tests)i(the)e(e)o
(xpression)k(and)d(e)o(x)o(ecutes)h(the)e(true)i(or)e(f)o(alse)h
(branch)i(accordingly)-6 b(.)0 5114 y Fy(int)47 b
(c_else_handler\(struct)42 b(scml_token)j(*st,)51 b(struct)46
b(scml_context)e(*sc\))300 5227 y FC(Handles)25 b(the)f
Fy(else)d FC(command)j(by)g(signalling)j(a)c(runtime)h(error)h(since)f
(the)g(command)g(is)g(only)g(meant)g(for)g(use)300 5340
y(as)f(a)h(partition)h(inside)g(of)f(an)f Fy(if)p FC(.)p
eop
%%Page: 160 160
160 159 bop 0 -165 a FC(160)1317 b Fx(CHAPTER)20 b(8.)51
b(SOURCE)21 b(CODE)g(MARKUP)g(LANGU)l(A)l(GE)f(\(SCML\))0
91 y Fy(int)47 b(c_for_handler\(struct)42 b(scml_token)j(*st,)51
b(struct)46 b(scml_context)e(*sc\))300 204 y FC(Handles)38
b(the)g Fy(for)d FC(command)j(by)f(creating)i(the)f(loop)g(v)n(ariable)
g(in)f(the)h(conte)o(xt)g(and)g(then)g(e)o(x)o(ecuting)h(the)300
317 y(contents)26 b(for)d(ho)n(we)n(v)o(er)h(long)h(has)f(been)g
(speci\002ed.)0 505 y Fy(int)47 b(c_pre_handler\(struct)42
b(scml_token)j(*st,)51 b(struct)46 b(scml_context)e(*sc\))300
618 y FC(Handles)35 b(the)f Fy(pre)e FC(command)i(by)g(setting)i(the)e
Fy(SCF_PREFORMATTED)28 b FC(\003ag)33 b(and)i(the)f(of)n(fset)g(of)g
(size)g(of)g(the)300 731 y(contents)26 b(block)e(in)g(the)g(parent)h
(before)g(using)f(the)g(parent)h(to)e(e)o(x)o(ecute)i(the)f(contents.)0
919 y Fy(int)47 b(c_aliascmd_handler\(struc)o(t)42 b(scml_token)j(*st,)
51 b(struct)46 b(scml_context)e(*sc\))300 1032 y FC(Handles)24
b(the)f Fy(aliascmd)d FC(command)j(by)g(b)n(uilding)i(a)d(ne)n(w)g
(command)i(with)e(the)h(same)g(de\002nition)i(as)d(the)h(com-)300
1145 y(mand)h(speci\002ed)h(by)e(the)h Fl(handler)37
b FC(ar)n(gument.)0 1334 y Fy(int)47 b(c_include_handler\(struct)41
b(scml_token)k(*st,)51 b(struct)46 b(scml_context)e(*sc\))300
1446 y FC(Handles)29 b(the)f Fy(include)c FC(command)29
b(by)e(e)o(x)o(ecuting)j(the)e(\002le)f(speci\002ed)i(by)e(the)h
Fl(file)42 b FC(ar)n(gument.)g(The)27 b(\002le)g(is)300
1559 y(searched)f(for)d(in)h(the)g(include)h(directory)h(list)e(of)f
(the)h(stream)g(the)g(current)h(\002le)e(w)o(as)g(read.)0
1748 y Fy(int)47 b(c_retarget_handler\(struc)o(t)42 b(scml_token)j
(*st,)51 b(struct)46 b(scml_context)e(*sc\))300 1861
y FC(Change)31 b(the)f(output)h(\002le)f(to)f(the)i(one)f(speci\002ed)h
(by)f(the)g(`output')i(parameter)l(,)h(which)e(should)g(resolv)o(e)g
(to)f(an)300 1973 y Fy(scml_stream)p FC(.)0 2162 y Fy(int)47
b(c_create_stream_handler\()o(stru)o(ct)41 b(scml_token)k(*st,)51
b(struct)46 b(scml_context)f(*sc\))300 2275 y FC(Create)23
b(an)g Fy(scml_stream)d FC(object)k(and)g(set)f(its)g(\002le)f(to)h
(the)g(one)h(speci\002ed)g(by)f(the)h(`path')g(ar)n(gument,)h(or)e
(stdout)300 2388 y(if)d(path)i(is)e(empty)-6 b(.)29 b(The)20
b(object)i(will)e(then)h(be)g(added)h(as)f(a)f(static)i(v)n(ariable)g
(to)f(the)g(current)h(scope)g(with)e(the)h(name)300 2500
y(speci\002ed)k(by)f(the)f(`name')i(ar)n(gument.)30 b(This)24
b(is)f(a)g(big)h(hack.)0 2747 y FA(8.2.16)99 b(Miscellaneous)24
b(Functions)0 2921 y FC(These)g(functions)i(are)e(just)g(simple)g
(helper)h(functions)h(to)d(mak)o(e)h(life)g(a)f(little)i(easier)-5
b(.)0 3072 y Fy(void)47 b(scml_alert\(struct)c(scml_stream_pos)g(*ssp,)
51 b(int)c(alert_flags,)h(const)f(char)f(*format,)0 3185
y(...\))300 3298 y FC(A)18 b(printf)j(lik)o(e)f(function)i(for)d
(reporting)j(errors/w)o(arnings)h(when)d(e)o(x)o(ecuting)j
Fv(S)t(C)t(M)t(L)g FC(code.)28 b(The)19 b(stream)h(position)300
3411 y(ar)n(gument)29 b(is)d(optional)j(and)e(currently)i(only)f(used)f
(to)g(print)h(out)f(the)g(column)g(and)h(line)f(number)g(of)g(code)h
(that)300 3524 y(is)i(causing)i(the)f(problem.)50 b(The)30
b Fy(alert_flags)d FC(ar)n(gument)32 b(is)e(a)g(bit\002eld)h(used)g(to)
g(describe)h(the)f(alert.)50 b(The)300 3637 y(possible)26
b(\003ags)d(are:)300 3825 y Fy(SAF_WARNING)600 3938 y
FC(This)g(is)h(a)f(w)o(arning)300 4105 y Fy(SAF_ERROR)600
4218 y FC(This)g(is)h(an)f(error)300 4386 y Fy(SAF_INTERNAL)600
4499 y FC(The)g(problem)i(is)e(internal)300 4666 y Fy(SAF_GENERAL)600
4779 y FC(The)g(problem)i(cannot)g(be)e(classi\002ed)300
4947 y Fy(SAF_IO)600 5060 y FC(The)g(problem)i(is)e(with)h(I/O)300
5227 y Fy(SAF_LEXICAL)600 5340 y FC(The)f(problem)i(is)e(with)h(le)o
(xxing)p eop
%%Page: 161 161
161 160 bop 0 -165 a Fx(8.2.)51 b(THE)22 b(SCML)f(INTERPRETER)2497
b FC(161)300 91 y Fy(SAF_PARSE)600 204 y FC(The)23 b(problem)i(is)e
(with)h(parsing)300 375 y Fy(SAF_TYPE)600 488 y FC(The)f(problem)i(is)e
(with)h(bad/inconsistent)k(types)300 658 y Fy(SAF_RUNTIME)600
771 y FC(The)23 b(problem)i(is)e(with)h(the)f(e)o(x)o(ecution)j(en)l
(vironment)0 962 y Fy(int)47 b(init_scml\(\))300 1075
y FC(Does)26 b(an)o(y)g(initialization)j(of)f Fv(S)t(C)t(M)t(L)h
FC(structures.)39 b(Currently)-6 b(,)27 b(this)g(just)f(initializes)j
(the)d(handler)i(table)e(with)g(all)300 1188 y(of)d(the)h(b)n(uiltin)i
(command)e(handlers.)0 1379 y Fy(const)46 b(char)h
(**scml_std_include_dirs\()o(\))300 1492 y FC(Returns)25
b(an)g(array)g(of)g(strings)h(which)f(are)f(paths)i(that)f(it)f(can)h
(\002nd)f(include)i(\002les.)31 b(The)24 b(array)i(is)e(the)h(same)f
(kind)300 1605 y(that)g Fy(fopen_search)c FC(so)j(it)g(can)h(be)g(used)
g(directly)i(with)d(that)h(functions.)0 1796 y Fy(int)47
b(scml_hash_name\(const)42 b(char)47 b(*name,)j(int)d(table_size\))300
1909 y FC(Produces)25 b(a)e(hash)h(number)h(for)f Fy(name)d
FC(in)j(a)f(table)h(the)g(size)g(of)g Fy(table_size)0
2067 y(int)47 b(scml_parse_cmdline_defin)o(es\(s)o(tru)o(ct)42
b(scml_scope)j(*root_scope,)j(flag_value_seq)0 2180 y(*defs\))300
2293 y FC(Ev)n(aluates)30 b(the)f(\003ag)f(v)n(alue)h(sequence)i(to)d
(create)i(the)f(desired)j Fv(S)t(C)t(M)t(L)g FC(v)n(ariables.)46
b(The)28 b(\003ags)g(are)h(e)o(xpected)h(to)300 2406
y(be)23 b(formatted)i(strings)g(of)e(the)g(form,)g(`v)n(ar=e)o(xpr',)i
(where)e(`v)n(ar')h(is)f(the)h(v)n(ariable)g(name,)f(and)h(e)o(xpr)g
(is)f(the)g(typed)300 2519 y(v)n(alue)h(of)g(the)g(e)o(xpr)-5
b(.)29 b(If)23 b(there)h(is)g(no)f(e)o(xpression)k(then)d(a)f(boolean)j
(v)n(ariable)f(is)e(de\002ned)i(and)f(set)f(to)h(true.)0
2688 y Fy(int)47 b(scml_execute_str\(struct)41 b(scml_scope)k
(*root_scope,)k(char)e(*code_desc,)h(char)f(*code,)0
2801 y(tag_list)f(*tl\))300 2914 y FC(Ex)o(ecute)36 b
Fv(S)t(C)t(M)t(L)h FC(`code')d(in)f(the)h(`root)p 1564
2914 28 4 v 35 w(scope')g(with)g(`tl')f(holding)i(an)o(y)f(implicit)g
(v)n(alues.)60 b(The)33 b(`code)p 3679 2914 V 34 w(desc')300
3027 y(ar)n(gument)h(is)e(used)h(as)f(the)h(description)i(for)e(the)f
Fy(scml_stream)d FC(so)j(that)h(one)f(can)h(\002gure)f(out)h(what)h
Fv(S)t(C)t(M)t(L)300 3140 y FC(code)24 b(caused)h(an)f(error)-5
b(.)0 3291 y Fy(struct)46 b(scml_stream_pos)e(*scml_execute_defs_file)o
(\(str)o(uct)d(scml_scope)k(*root_scope,)0 3404 y(const)h(char)h
(**include_dirs,)h(const)e(char)h(*file_desc,)i(const)d(char)h
(*file_name\))300 3517 y FC(Ex)o(ecute)24 b(a)f(\002le)g(that)h(will)f
(only)i(de\002ne)f(objects)h(and)f(not)g(produce)h(an)o(y)f(output.)0
3708 y Fy(int)47 b(scml_code_cast_handler\(i)o(nt)42
b(indent,)49 b(cast_handler)c(*ch\))300 3821 y FC(A)29
b(routine)k(for)e(e)o(x)o(ecuting)j Fv(S)t(C)t(M)t(L)g
FC(code)d(that)h(is)e(encapsulated)k(by)d(a)f Fy(cast_handler)d
FC(object.)51 b(The)30 b Fy(cast_)300 3934 y(handler)g
FC(is)j(set)h(up)f(with)g(this)h(routine)h(as)e(the)g(handler)i(and)f
(four)g(ar)n(guments)h(for)e(the)j Fv(S)t(C)t(M)t(L)g
FC(code.)59 b(The)300 4046 y(ar)n(guments)22 b(in)d(order)h(are)g(the)g
(code)g(description)i(for)e(the)f Fy(scml_stream)p FC(,)e(the)k
Fv(S)t(C)t(M)t(L)i FC(code)d(itself,)h(a)e(T)-8 b(A)l(G)p
3707 4046 V 31 w(REF)300 4159 y(encoded)26 b(pointer)f(to)e(an)h
Fy(scml_scope)c FC(to)j(e)o(x)o(ecute)i(in,)e(and)h(\002nally)g(a)f
Fy(tag_list)e FC(of)i(implicit)i(ar)n(guments.)p eop
%%Page: 162 162
162 161 bop 0 -165 a FC(162)1317 b Fx(CHAPTER)20 b(8.)51
b(SOURCE)21 b(CODE)g(MARKUP)g(LANGU)l(A)l(GE)f(\(SCML\))p
eop
%%Page: 163 163
163 162 bop 1666 1827 a Fw(P)n(art)45 b(III)687 2242
y FB(The)51 b(Pr)l(ograms)h(and)g(Libraries)1882 5568
y FC(163)p eop
%%Page: 164 164
164 163 bop eop
%%Page: 165 165
165 164 bop 0 718 a Fw(Chapter)44 b(9)0 1138 y FB(Libcompiler)0
1587 y FC(The)21 b(libcompiler)i(library)g(contains)g(a)e(number)h(of)f
(general)i(utility)g(functions)g(that)f(may)f(be)g(used)h(by)g(Flick)f
(in)g(an)o(y)g(com-)0 1700 y(piler)h(stage.)30 b(Some)21
b(of)g(the)h(functionality)j(is)d(only)g(rele)n(v)n(ant)i(to)d(Flick')
-5 b(s)23 b(front)f(ends)h(\(e.g.,)e(calls)i(to)e(the)h(C)f
(preprocessor\),)0 1813 y(mainly)j(because)h(there)f(is)f(no)g(front)h
(end)g(library)g(in)f(which)h(it)f(can)g(be)g(contained.)32
b(It)22 b(w)o(ould)i(be)f(reasonable)j(\(and)e(prob-)0
1926 y(ably)i(tri)n(vial\))g(to)f(combine)i(these)f(front)g(end)f
(speci\002c)h(routines)h(into)f(a)f(front)h(end)f(library)-6
b(,)27 b(lea)n(ving)g(libcompiler)h(a)c(pure)0 2039 y(library)h(of)f
(general)h(utility)g(functions.)0 2358 y Ft(9.1)119 b(Err)n(ors)29
b(and)i(W)-8 b(ar)n(nings)0 2573 y FC(Some)23 b(basic)h(functions)i
(for)e(reportings)j(errors)d(and)g(w)o(arnings:)0 2779
y Fy(void)47 b(panic\(const)d(char)j(*format,)j(...\))300
2892 y FC(Reports)25 b(an)e(internal)j(error)e(and)g(then)g
Fy(exit)p FC(s.)0 3098 y Fy(void)47 b(warn\(const)e(char)h(*format,)k
(...\))300 3211 y FC(Prints)24 b(out)g(a)f(w)o(arning)i(message)f(to)g
(the)g(user)g(and)g(returns.)141 3416 y(Both)g Fy(panic)d
FC(and)j Fy(warn)e FC(use)i Fy(printf)p FC(-style)f(ar)n(guments.)0
3735 y Ft(9.2)119 b(Memory)29 b(and)i(Strings)0 3951
y FC(Memory)23 b(allocation)i(in)d(Flick)h(is)f(just)h(assumed)h(to)e
(w)o(ork,)h(so)g(the)f Fy(must*)f FC(allocators)k(either)e(return)h
(allocated)h(memory)0 4064 y(or)e Fy(panic)f FC(if)h(it)g(f)o(ails.)30
b(Some)23 b(simple)h(string)h(functions)h(are)e(also)g(pro)o(vided:)0
4269 y Fy(void)47 b(*mustmalloc\(long)c(size\))0 4475
y(void)k(*mustcalloc\(long)c(size\))0 4682 y(void)k(*mustrealloc\(void)
c(*orig_buf,)49 b(long)d(new_size\))300 4795 y FC(Memory)23
b(allocators)j(that)d(al)o(w)o(ays)h(return)g(allocated)h(memory)-6
b(.)29 b(If)22 b(no)h(memory)g(is)g(a)n(v)n(ailable,)i(it)e(is)f
(considered)300 4908 y(a)h(f)o(atal)h(error)l(,)h(and)f(the)o(y)g
(internally)i Fy(panic)21 b FC(to)j(pre)n(v)o(ent)h(returning)h(a)d
(NULL)e(pointer)-5 b(.)0 5114 y Fy(char)47 b(*muststrdup\(const)c(char)
j(*str\))300 5227 y FC(Duplicates)37 b(a)e(string)h(into)g(a)f(freshly)
i(allocated)g(b)n(uf)n(fer)l(,)j(or)35 b Fy(panic)p FC(s)e(if)i(it)g
(cannot)i(allocate)g(the)f(necessary)300 5340 y(memory)-6
b(.)1882 5568 y(165)p eop
%%Page: 166 166
166 165 bop 0 -165 a FC(166)2603 b Fx(CHAPTER)20 b(9.)51
b(LIBCOMPILER)0 91 y Fy(char)c(*flick_asprintf\(const)42
b(char)k(*fmt,)51 b(...\))300 204 y FC(Lik)o(e)23 b Fy(sprintf)p
FC(,)e(ho)n(we)n(v)o(er)j(this)g(automatically)i(allocates)g(a)d(suf)n
(\002cient)i(b)n(uf)n(fer)g(for)f(the)f(resulting)j(string.)k(Lik)o(e)
300 317 y(the)24 b(functions)i(abo)o(v)o(e,)e(this)g
Fy(panic)p FC(s)e(if)h(allocation)j(f)o(ails.)0 508 y
Fy(int)47 b(flick_strcasecmp\(const)42 b(char)k(*s1,)51
b(const)46 b(char)h(*s2\))300 621 y FC(Case)23 b(insensiti)n(v)o(e)j
(string)f(comparison;)h(return)f(v)n(alue)g(is)e(similar)h(to)g
Fy(strcmp)p FC(.)0 812 y Fy(ir_strlit\(str\))300 925
y FC(Con)l(v)o(ert)30 b(a)e(string)h(literal)h(for)f(use)g(in)f(an)h
(intermediate)i(representation)h(structure.)46 b(This)29
b(is)f(just)h(a)f Fy(#define)300 1038 y FC(that)c(type)g(casts)h(the)f
(ar)n(gument,)h(helpful)g(for)f(remo)o(ving)h(w)o(arnings/errors)i
(about)e(violating)h(constness.)0 1330 y Ft(9.3)119 b(Files)0
1537 y FC(A)30 b(number)j(of)f(functions)i(are)e(pro)o(vided)h(for)f
(managing)i(and)e(generating)i(\002les.)53 b(All)31 b(\002le)g(output)j
(is)d(generally)j(done)0 1650 y(through)28 b(a)e(set)g(of)g(functions)j
(that)d(refer)h(to)f(a)g(globally)i(set)e(\002le.)36
b(It)26 b(is)g(a)g(little)h(restricti)n(v)o(e,)h(b)n(ut)f(at)f(least)h
(the)f(\002le)f(pointer)0 1763 y(doesn')n(t)h(ha)n(v)o(e)e(to)f(be)h
(passed)h(around)g(e)n(v)o(erywhere.)14 b(.)g(.)0 1950
y Fy(FILE)47 b(*call_c_preprocessor\(co)o(nst)41 b(char)47
b(*filename,)i(const)d(char)h(*flags\))0 2140 y(FILE)g
(*call_cxx_preprocessor\()o(cons)o(t)42 b(char)k(*filename,)j(const)e
(char)f(*flags\))300 2253 y FC(Calls)32 b(the)h(C)e(or)i(C++)e
(preprocessor)l(,)39 b(respecti)n(v)o(ely)-6 b(,)37 b(on)32
b Fy(filename)e FC(using)j(the)g(gi)n(v)o(en)g(set)f(of)h(preprocessor)
300 2366 y(\003ags.)0 2535 y Fy(FILE)47 b(*fopen_search\(const)42
b(char)47 b(*path,)j(const)c(char)h(*)g(const)g(*dir_list,)i(const)d
(char)0 2648 y(*mode,)k(char)d(**out_path\))300 2761
y FC(Opens)25 b(a)e(\002le)h(from)g(a)g(list)h(of)f(source)h
(directories.)34 b(The)24 b Fy(dir_list)d FC(ar)n(gument)26
b(is)e(a)g(null)h(terminated)h(array)f(of)300 2874 y(strings)i
(representing)i(paths)e(to)e(search)i(for)f(the)f(\002le)g(indicated)j
(by)e(the)g Fy(path)d FC(ar)n(gument.)37 b(If)25 b(the)h(\002le)f(is)g
(found)300 2987 y(then)c(it)f(will)g(open)i(it)e(and)h(return)g(the)g
Fy(FILE)e FC(object)i(and)g(set)g(the)f Fy(out_path)e
FC(ar)n(gument)k(to)e(the)h(directory)i(where)300 3100
y(the)h(\002le)f(w)o(as)g(found.)0 3291 y Fy(void)47
b(w_set_fh\(FILE)d(*out_fh\))300 3404 y FC(Sets)23 b(the)g(\002le)g
(handle)i(for)e(writing.)29 b(Each)24 b(of)f(the)g(follo)n(wing)i
Fy(w_*)c FC(commands)k(output)f(to)g(the)f(\002le)g(speci\002ed)h(by)
300 3517 y(the)g(most)f(recent)i Fy(w_set_fh)p FC(.)0
3708 y Fy(void)47 b(w_putc\(char)d(c\))300 3821 y FC(Writes)24
b(out)g(the)g(gi)n(v)o(en)g(character)-5 b(.)0 4012 y
Fy(void)47 b(w_vprintf\(const)c(char)k(*format,)j(va_list)45
b(vl\))300 4125 y(va_list)21 b FC(v)o(ersion)k(of)e Fy(w_printf)p
FC(.)0 4315 y Fy(void)47 b(w_printf\(const)d(char)i(*format,)k(...\))
300 4428 y FC(Writes)24 b(out)g(the)g(formatted)h(string.)0
4619 y Fy(void)47 b(w_indent\(int)d(indent\))300 4732
y FC(Writes)24 b(out)g(an)g(indentation)i(of)e(the)g(gi)n(v)o(en)g
(size.)0 4923 y Fy(void)47 b(w_i_vprintf\(int)c(indent,)50
b(const)d(char)f(*format,)k(va_list)c(vl\))300 5036 y
FC(Indented)26 b(form)d(of)h Fy(w_vprintf)p FC(.)0 5227
y Fy(void)47 b(w_i_printf\(int)d(indent,)50 b(const)c(char)g(*format,)k
(...\))300 5340 y FC(Indented)26 b(form)d(of)h Fy(w_printf)p
FC(.)p eop
%%Page: 167 167
167 166 bop 0 -165 a Fx(9.4.)51 b(COMMAND)21 b(LINE)h(ARGUMENTS)2270
b FC(167)141 91 y(There)35 b(are)g(also)g(se)n(v)o(eral)g(functions)i
(for)e(manipulating)j(\002le)c(names,)j(thus)e(allo)n(wing)h(for)f
(some)f(indirection)k(for)0 204 y(dif)n(ferent)25 b(OS)d(\002le)h(name)
h(formats.)0 399 y Fy(char)47 b(*resuffix\(const)c(char)k(*orig,)j
(const)c(char)h(*newsuffix\))300 512 y FC(Returns)25
b(a)e(ne)n(w)g(string)h(\(\002lename\))h(with)e(the)h(e)o(xtension)i
(portion)f(of)f Fy(orig)d FC(changed)26 b(to)d Fy(newsuffix)p
FC(.)0 709 y Fy(const)46 b(char)h(*file_part\(const)c(char)k
(*filename\))300 822 y FC(Returns)25 b(a)e(pointer)i(into)f
Fy(filename)d FC(that)j(refers)g(to)g(the)g(\002le)f(only)-6
b(.)0 1020 y Fy(const)46 b(char)h(*dir_part\(const)d(char)i
(*filename\))300 1133 y FC(Returns)25 b(a)e(ne)n(w)g(string)h(that)g
(contains)i(the)e(directory)i(part)e(of)f Fy(filename)p
FC(.)0 1330 y Fy(const)46 b(char)h(*add_file_part\(const)42
b(char)47 b(*pathname,)i(const)d(char)h(*filename\))300
1443 y FC(Append)25 b Fy(filename)20 b FC(onto)k Fy(pathname)d
FC(intelligently)27 b(\(i.e.,)c(adds)h(the)g(`/')g(if)f(needed\).)0
1640 y Fy(int)47 b(absolute_path\(const)42 b(char)47
b(*filename\))300 1753 y FC(Returns)25 b(true)f(if)f
Fy(filename)d FC(is)k(an)f(absolute)j(path.)0 1951 y
Fy(int)47 b(current_dir\(const)c(char)k(*filename\))300
2064 y FC(Returns)36 b(true)f(if)f Fy(filename)e FC(refers)k(to)e(the)h
(current)h(directory)-6 b(.)65 b(\(Note:)52 b(This)34
b(just)h(recognizes)j(`.)-6 b(')61 b(at)35 b(the)300
2176 y(moment.\))0 2374 y Fy(void)47 b(filename_to_c_id\(char)42
b(*filename\))300 2487 y FC(Con)l(v)o(ert,)28 b(in)e(place,)h(a)f
(\002lename)g(to)g(a)g(le)o(gal)g(C)f(identi\002er)-5
b(.)38 b(This)26 b(is)g(useful)i(for)e(producing)j(the)e(symbol)g(for)f
(an)300 2600 y Fy(#ifdef)21 b FC(in)j(a)f(header)i(\002le,)d(or)i(for)f
(use)h(in)g(distinguishing)k(a)23 b(function)j(name.)0
2903 y Ft(9.4)119 b(Command)30 b(Line)g(Ar)o(guments)0
3114 y FC(The)g(command)i(line)f(ar)n(guments)i(for)e(a)f(module)h(all)
g(follo)n(w)g(similar)g(forms)g(so)g Fy(libcompiler)c
FC(pro)o(vides)32 b(a)f(\003e)o(xible)0 3226 y(infrastructure)26
b(for)c(dealing)h(with)f(them.)28 b(It)22 b(is)g(really)h(quite)f
(capable)i(and)e(able)h(to)f(handle)h(\003ags,)f(strings,)i(numbers,)f
(and)0 3339 y(arrays)i(of)e(these)i(types.)0 3534 y Fy(flag_value)300
3647 y FC(A)d(union)j(for)f(holding)h(the)f(v)n(alue)h(of)e(a)g
(\003ag,)g(either)i(a)e(boolean,)i(inte)o(ger)l(,)g(or)e(string.)0
3844 y Fy(flag_value_seq)300 3957 y FC(Holds)g(a)g(sequence)i(of)e
Fy(flag_value)p FC(s)d(so)j(that)g(we)f(can)i(store)g(all)f(instances)i
(of)e(a)f(\003ag)h(on)g(the)g(command)h(line.)300 4070
y(If)f(a)g(\003ag)g(can)h(only)h(occur)f(once,)g(or)g(if)f(only)i(the)e
(last)h(one)g(is)g(used,)g(then)g(this)g(sequence)i(will)d(be)h(of)f
(size)h(one.)0 4268 y Fy(flags_in)300 4381 y FC(A)f(structure)k(that)e
(describes)i(a)d(single)h(\003ag.)31 b(An)24 b(array)h(of)f(these)i(is)
e(constructed)k(and)d(then)g(used)g(to)f(\002gure)h(out)300
4494 y(ho)n(w)e(to)g(parse)i(a)e(command)h(line.)0 4691
y Fy(flags_out)300 4804 y FC(Holds)i(the)f(results)i(of)e(a)g(command)h
(line)g(parse.)34 b(The)25 b(\003ag)g(v)n(alues)h(are)g(stored)g(in)f
(an)h(array)g(of)f Fy(flag_value_)300 4917 y(seq)p FC(s)h(that)h(has)g
(the)g(same)g(ordering)i(as)e(the)g Fy(flags_in)d FC(array)-6
b(.)40 b(Extra)27 b(ar)n(guments)i(are)e(stored)h(as)f(an)g(array)g(of)
300 5030 y(strings)e(and)f(an)o(y)g(errors)h(are)e(indicated)j(by)e
(the)g Fy(error)d FC(slot.)0 5227 y Fy(fe_flags)300 5340
y FC(This)i(holds)i(the)f(front)g(end)g(\003ags)g(after)g(the)o(y)g(ha)
n(v)o(e)g(been)h(pulled)g(out)e(of)h(the)g Fy(flags_out)p
FC(.)p eop
%%Page: 168 168
168 167 bop 0 -165 a FC(168)2603 b Fx(CHAPTER)20 b(9.)51
b(LIBCOMPILER)141 91 y FC(There)24 b(are)g(also)g(a)f(number)h(of)g
(functions)i(for)e(manipulating)i(these)f(structures)h(and)e(the)g
(actual)g(ar)n(guments.)0 318 y Fy(flags_out)45 b(parse_args\(int)f
(argc,)51 b(char)46 b(**argv,)k(int)d(flag_count,)i(flags_in)d
(*flags\))300 431 y FC(P)o(arse)23 b(the)h(gi)n(v)o(en)g(ar)n(guments,)
i(based)e(on)g(the)g(input)h(\003ags,)e(into)h(a)f(\003ags)p
2603 431 28 4 v 33 w(out)h(and)g(return.)0 634 y Fy(void)47
b(print_args_usage\(const)41 b(char)47 b(*progname,)i(int)e
(flag_count,)i(flags_in)c(*flgs,)51 b(const)0 747 y(char)c(*cl_extra,)i
(const)d(char)h(*extra\))300 860 y FC(Print)24 b(the)f(usage)i
(statement)g(for)f(a)f(collection)j(of)e(\003ags.)0 1085
y Fy(void)47 b(print_args_flags\(flags_)o(out)41 b(res,)51
b(int)c(flag_count,)i(flags_in)c(*flags\))300 1198 y
FC(Deb)n(ugging)26 b(function)g(that)e(prints)h(out)e(the)h(parsed)h
(\003ags.)0 1423 y Fy(void)47 b(set_def_flags\(flags_in)41
b(*flgs\))300 1536 y FC(Add)23 b(the)h(standard)i(\003ags)d(set)h(to)f
(the)h(passed)h(in)f(array)-6 b(.)0 1740 y Fy(void)47
b(std_handler\(flags_out)42 b(out,)50 b(int)d(flag_count,)i(flags_in)d
(*flgs,)k(const)c(char)0 1853 y(*cl_info,)j(const)e(char)f(*info\))300
1966 y FC(This)23 b(will)h(handle)h(v)o(ersion,)f(usage,)h(and)f
(errors.)0 2191 y Fy(fe_flags)46 b(front_end_args\(int)c(argc,)51
b(char)46 b(**argv,)k(const)d(char)f(*info\))300 2304
y FC(Handle)24 b(the)g(front)h(end)f(ar)n(gs)g(here)g(since)h(we)e(ha)n
(v)o(e)h(no)f(front)i(end)f(library)-6 b(.)0 2654 y Ft(9.5)119
b(Stacks)0 2881 y FC(A)22 b(simple)j(pointer)g(stack)f(is)g(pro)o
(vided)h(to)f(store)g(pointers)i(when)d(dealing)j(with)d(nested)i
(objects)g(and)f(such.)0 3152 y Fy(struct)46 b(ptr_stack)f({)382
3265 y(void)h(**ptrs;)382 3378 y(int)h(top;)382 3491
y(int)g(size;)0 3603 y(};)0 3855 y(struct)f(ptr_stack)f
(*create_ptr_stack\(\))300 3968 y FC(Allocates)25 b(and)f(initializes)i
(a)d Fy(struct)47 b(ptr_stack)p FC(.)0 4193 y Fy(void)g
(delete_ptr_stack\(struct)41 b(ptr_stack)k(*stack\))300
4306 y FC(Frees)24 b(a)f Fy(struct)46 b(ptr_stack)p FC(.)0
4531 y Fy(void)h(push_ptr\(struct)c(ptr_stack)j(*stack,)j(void)e
(*ptr\))300 4644 y FC(Pushes)24 b(a)f(pointer)j(onto)e(the)g(stack.)0
4869 y Fy(void)47 b(pop_ptr\(struct)d(ptr_stack)h(*stack\))300
4982 y FC(Pops)24 b(the)f(top)h(pointer)i(of)n(f)d(the)h(stack.)0
5207 y Fy(void)47 b(*top_ptr\(struct)c(ptr_stack)j(*stack\))300
5320 y FC(Returns)25 b(the)e(top)h(pointer)i(on)d(the)h(stack.)p
eop
%%Page: 169 169
169 168 bop 0 -165 a Fx(9.6.)51 b(HASH)21 b(T)-8 b(ABLES)2969
b FC(169)0 91 y Ft(9.6)119 b(Hash)30 b(T)-11 b(ables)0
303 y FC(A)22 b(simple)j(hash)f(table)g(that)g(hashes)i(on)d(a)g
(string.)0 530 y Fy(struct)46 b(h_entry)g({)382 643 y(struct)g(h_entry)
g(*next;)382 756 y(const)g(char)h(*name;)0 869 y(};)0
1094 y(struct)f(h_table)g({)382 1207 y(int)h(table_size;)382
1320 y(struct)f(h_entry)g(**entries;)0 1433 y(};)0 1655
y(struct)g(h_table)g(*create_hash_table\(int)c(size\))300
1768 y FC(Allocate)25 b(and)f(return)h(a)e(hash)h(table)g(of)g(with)f
(the)h(gi)n(v)o(en)g(table)h(size.)0 1968 y Fy(void)47
b(delete_hash_table\(struc)o(t)42 b(h_table)k(*ht\))300
2081 y FC(Deallocate)25 b(a)f(hash)g(table.)0 2280 y
Fy(void)47 b(add_entry\(struct)c(h_table)j(*ht,)51 b(struct)46
b(h_entry)f(*he\))300 2393 y FC(Add)23 b(an)h(entry)g(to)g(the)g
(table.)0 2592 y Fy(void)47 b(rem_entry\(struct)c(h_table)j(*ht,)51
b(const)46 b(char)h(*name\))300 2705 y FC(Remo)o(v)o(e)23
b(an)h(entry)g(from)g(the)f(table.)0 2905 y Fy(struct)46
b(h_entry)g(*find_entry\(struct)d(h_table)j(*ht,)k(const)d(char)f
(*name\))300 3018 y FC(Find)23 b(and)h(return)h(an)f(entry)g(in)g(the)g
(table,)g(if)f(it)g(couldn')n(t)j(be)e(found)h(it)e(returns)i
Fy(NULL)p FC(.)0 3324 y Ft(9.7)119 b(Link)o(ed)31 b(Lists)0
3536 y FC(A)k(simple)i(doubly)h(link)o(ed)g(list)e(implementation)j(is)
d(pro)o(vided)i(for)f(use)f(by)h(other)g(data)g(structures.)69
b(Simply)36 b(place)0 3649 y(the)30 b Fy(list_node)c
FC(structure)32 b(at)d(the)h(be)o(ginning)i(of)d(another)j(structure)f
(de\002nition)h(and)d(then)i(you)f(can)g(add)g(that)g(lar)n(ger)0
3762 y(structure)c(to)d(an)o(y)h Fy(dl_list)p FC(.)0
3989 y Fy(struct)46 b(list_node)f({)382 4102 y(struct)h(list_node)f
(*succ;)382 4215 y(struct)h(list_node)f(*pred;)0 4328
y(};)0 4553 y(struct)h(dl_list)g({)382 4666 y(struct)g(list_node)f
(*head;)h(/*)h(points)g(to)g(the)g(head)f(node)h(*/)382
4779 y(struct)f(list_node)f(*tail;)h(/*)h(always)g(==)g(0)g(*/)382
4892 y(struct)f(list_node)f(*tail_pred;)g(/*)i(points)f(to)h(the)g
(tail)g(node)g(*/)0 5005 y(};)0 5227 y(void)g(remove_node\(struct)42
b(list_node)k(*ln\))300 5340 y FC(Remo)o(v)o(es)23 b(a)g(node)i(from)e
(a)g(list.)p eop
%%Page: 170 170
170 169 bop 0 -165 a FC(170)2603 b Fx(CHAPTER)20 b(9.)51
b(LIBCOMPILER)0 91 y Fy(void)c(new_list\(struct)c(dl_list)j(*list\))300
204 y FC(Initializes)26 b(a)d(list)h(structure.)0 395
y Fy(void)47 b(add_head\(struct)c(dl_list)j(*list,)k(struct)c
(list_node)g(*ln\))300 508 y FC(Add)23 b(a)g(list)h(node)h(to)e(the)h
(head)g(of)g(a)f(list.)0 700 y Fy(void)47 b(add_tail\(struct)c(dl_list)
j(*list,)k(struct)c(list_node)g(*ln\))300 812 y FC(Add)23
b(a)g(list)h(node)h(to)e(the)h(tail)g(of)f(a)g(list.)0
1004 y Fy(struct)46 b(list_node)f(*rem_head\(struct)f(dl_list)i
(*list\))300 1117 y FC(Remo)o(v)o(e)23 b(and)h(return)h(the)f(list)g
(node)g(at)f(the)h(head)h(of)e(the)h(list.)0 1308 y Fy(struct)46
b(list_node)f(*rem_tail\(struct)f(dl_list)i(*list\))300
1421 y FC(Remo)o(v)o(e)23 b(and)h(return)h(the)f(list)g(node)g(at)f
(the)h(tail)g(of)g(the)f(list.)0 1612 y Fy(int)47 b(empty_list\(struct)
c(dl_list)j(*list\))300 1725 y FC(Returns)25 b(true)f(if)f(the)h(list)g
(is)f(empty)-6 b(.)0 1916 y Fy(void)47 b(insert_node\(struct)42
b(list_node)k(*pred,)k(struct)c(list_node)f(*ln\))300
2029 y FC(Insert)25 b(a)e(node)h(after)h Fy(pred)p FC(.)p
eop
%%Page: 171 171
171 170 bop 0 720 a Fw(Chapter)44 b(10)0 1140 y FB(Fr)l(ont)52
b(Ends)0 1591 y FC(A)19 b(Flick)i(front)h(end)f(is)f(a)h(program)h
(that)f(reads)g(an)i Fv(I)t(D)t(L)h FC(source)e(\002le)e(and)h(from)f
(that)i(produces)h(an)d(internal)j(representation)0 1704
y(of)29 b(the)g(described)i(interf)o(aces.)48 b(There)29
b(is)g(a)f(separate)j(front)f(end)f(for)g(each)j Fv(I)t(D)t(L)g
FC(that)d(Flick)g(understands:)43 b(one)30 b(for)f(the)2
1817 y Fv(C)t(O)t(R)t(B)r(A)d(I)t(D)t(L)r FC(,)e(a)f(second)j(for)d
(the)j Fv(O)t(N)t(C)h(R)t(P)t(C)f FC(\(a.k.a.)i(Sun)e
Fv(R)t(P)t(C)r FC(\))f Fv(I)t(D)t(L)r FC(,)g(and)f(a)f(third)h(for)g
(the)g(Mach)h Fv(M)t(I)t(G)j(I)t(D)t(L)r FC(.)141 1935
y(The)23 b Fv(C)t(O)t(R)t(B)r(A)f FC(and)i Fv(O)t(N)t(C)h(R)t(P)t(C)f
FC(front)e(ends)g(translate)k Fv(I)t(D)t(L)e FC(\002les)d(into)h
(Flick')-5 b(s)25 b Fv(AO)t(I)e FC(representation,)j(whereas)c(the)i
Fv(M)t(I)t(G)0 2048 y FC(front)j(end)g(translates)h(its)f(inputs)g
(into)g(Flick')-5 b(s)29 b Fv(P)t(R)t(E)t(S)p 1720 2048
28 4 v 39 w(C)f FC(representation.)40 b(The)26 b(dif)n(ference)i(is)e
(due)h(to)f(the)g(nature)i(of)e(the)0 2161 y(three)34
b(languages.)58 b(The)34 b Fv(C)t(O)t(R)t(B)r(A)g FC(and)h
Fv(O)t(N)t(C)h(R)t(P)t(C)g(I)t(D)t(L)r FC(s)e(are)f(\223pure\224)h
(interf)o(ace)h(description)h(languages)f(in)e(that)g(the)o(y)0
2274 y(describe)d(interf)o(aces)g(only)e(in)g(abstract)i(terms.)41
b(In)27 b(other)i(w)o(ords,)g(a)g Fv(C)t(O)t(R)t(B)r(A)f
FC(or)i Fv(O)t(N)t(C)h(R)t(P)t(C)h(I)t(D)t(L)e FC(\002le)d(does)h(not)g
(specify)0 2387 y(ho)n(w)19 b(its)i Fv(I)t(D)t(L)i FC(constructs)f(are)
e(to)f(be)g(translated)j(into)e(constructs)j(of)c(another)i
(programming)h(language)g(\(e.g.,)d(C)f(or)i(C++\).)0
2500 y(Because)25 b Fv(C)t(O)t(R)t(B)r(A)e FC(and)i Fv(O)t(N)t(C)h(R)t
(P)t(C)e FC(interf)o(ace)g(descriptions)i(are)d(free)f(from)h
(translation)i(details,)f(a)f Fv(C)t(O)t(R)t(B)r(A)g
FC(or)i Fv(O)t(N)t(C)g(R)t(P)t(C)2 2612 y(I)t(D)t(L)j
FC(\002le)d(can)h(be)g(completely)h(translated)h(\227)d(without)i(loss)
f(of)f(information)j(\227)d(into)h(a)f(representation)30
b(in)25 b(Flick')-5 b(s)28 b Fv(AO)t(I)0 2725 y FC(format.)h(In)22
b(contrast,)j(a)f Fv(M)t(I)t(G)j(I)t(D)t(L)e FC(speci\002cation)h
(commonly)d(describes)i(ho)n(w)e(the)f(interf)o(ace)j(is)e(to)f(be)h
(translated)i(into)e(C)0 2838 y(functions)28 b(and)e(data)g(types.)36
b(F)o(or)25 b(e)o(xample,)h(the)i Fv(M)t(I)t(G)i(I)t(D)t(L)e
FC(k)o(e)o(yw)o(ords)f Fy(cusertype)c FC(and)j Fy(cservertype)21
b FC(specify)28 b(ho)n(w)0 2951 y(a)23 b Fv(M)t(I)t(G)k(I)t(D)t(L)d
FC(type)f(will)f(be)f(translated)k(into)e(the)f(generated)i
(client-side)h(and)e(serv)o(er)n(-side)h(code!)30 b(Because)25
b Fv(M)t(I)t(G)f FC(interf)o(ace)0 3064 y(speci\002cations)38
b(are)d(littered)h(with)f(these)g(kinds)h(of)f(mapping-detail)j
(\223impurities,)-6 b(\224)42 b Fv(M)t(I)t(G)c(I)t(D)t(L)g
FC(cannot)e(generally)h(be)0 3177 y(translated)27 b(into)h
Fv(AO)t(I)e FC(without)g(loss)f(of)g(information.)34
b(Therefore,)27 b(Flick')-5 b(s)27 b Fv(M)t(I)t(G)g FC(front)e(end)h
(skips)f(o)o(v)o(er)g(the)i Fv(AO)t(I)g FC(format)0 3290
y(and)d(generates)k Fv(P)t(R)t(E)t(S)p 714 3290 V 39
w(C)d FC(directly)h(from)f Fv(M)t(I)t(G)j(I)t(D)t(L)r
FC(.)0 3615 y Ft(10.1)119 b(Fr)n(ont)30 b(End)g(Libraries)0
3833 y FC(The)25 b(nature)j(of)d(an)o(y)h(compiler)h(front)g(end)f(is)g
(that)g(it)g(is)f(structured)k(around)e(the)g(compiler')-5
b(s)27 b(input)g(language.)38 b(Because)0 3946 y(input)c(languages)i
(are)e(often)g(quite)g(dif)n(ferent)i(from)d(each)h(other)l(,)j(and)c
(because)j(there)e(are)f(man)o(y)g(tools)i(for)e(creating)0
4059 y(compiler)e(front)f(ends)h(\(e.g.,)f Fy(lex)e FC(and)i
Fy(yacc)p FC(\),)f(Flick)g(does)i(not)f(pro)o(vide)h(an)o(y)e(kind)h
(of)g(shared)h(language-processin)q(g)0 4172 y(library)d(for)e(its)h
(front)g(ends.)38 b(\(The)26 b(situation)j(is)d(quite)h(dif)n(ferent)h
(for)f(later)g(stages)g(of)i Fv(I)t(D)t(L)g FC(compilation.)39
b(As)26 b(described)0 4285 y(in)32 b(Chapters)i(11)e(and)h(12,)h
(Flick')-5 b(s)33 b(separate)h(\223presentation)i(generators\224)f(and)
e(back)g(ends)g(are)f(quite)i(similar)f(to)f(one)0 4398
y(another)l(,)k(and)c(therefore,)k(Flick)c(can)h(pro)o(vide)g(a)f
(great)g(deal)h(of)f(library)h(support)h(for)e(all)g(implementations)j
(of)d(those)0 4511 y(compilation)26 b(steps.\))141 4629
y(The)k(library)j(support)f(for)f(Flick')-5 b(s)32 b(front)f(ends)h(is)
e(therefore)j(limited)f(to)f(manipulation)i(of)e(common)g(data)g
(types,)0 4742 y(command)24 b(line)g(parsing,)h(and)f(a)g(fe)n(w)e
(utility)j(functions:)195 4952 y Fy(libflick-)t(aoi.a)569
b FC(The)33 b Fv(AO)t(I)g FC(library)g(pro)o(vides)h(common)d
(functions)j(for)e(manipulating)k Fv(AO)t(I)1440 5065
y FC(data)24 b(structures,)i(as)e(described)i(in)d(Chapter)i(4.)195
5227 y Fy(libflick-)t(meta.a)521 b FC(This)36 b(library)i(contains)g
(functions)h(for)d(manipulating)j(\002le)d(metadata,)k(as)1440
5340 y(described)26 b(in)e(Chapter)g(3.)1882 5568 y(171)p
eop
%%Page: 172 172
172 171 bop 0 -165 a FC(172)2609 b Fx(CHAPTER)20 b(10.)52
b(FR)l(ONT)21 b(ENDS)195 91 y Fy(libflick-)t(compiler.a)329
b FC(This)33 b(library)i(pro)o(vides)g(general)g(utility)g(functions)h
(that)e(are)f(used)i(by)e(all)1440 204 y(Flick)c(compiler)i(steps.)47
b(Additionally)-6 b(,)33 b(because)e(there)f(is)f(no)h(library)h(just)
1440 317 y(for)26 b(front)h(ends,)g(this)g(library)h(also)e(holds)i(a)d
(fe)n(w)h(functions)i(that)f(are)f(really)1440 430 y(only)31
b(useful)h(to)e(front)h(ends:)43 b(e.g.,)31 b(functions)i(to)d(in)l(v)n
(ok)o(e)j(the)d(C)f(and)i(C++)1440 543 y(preprocessors)22
b(\()p Fy(call_c_preprocessor)12 b FC(and)19 b Fy
(call_cxx_preprocessor)p FC(\))1440 656 y(and)h(a)e(function)k(to)d
(handle)i(common)e(command)h(line)g(ar)n(guments)h(\()p
Fy(front_)1440 769 y(end_args)p FC(\).)39 b(These)28
b(front-end)i(speci\002c)e(functions)j(should)e(probably)h(be)1440
882 y(mo)o(v)o(ed)23 b(into)i(a)e(separate)i(library)g(in)f(the)g
(future.)141 1062 y(Because)c(the)g Fv(M)t(I)t(G)h FC(front)e(end)g
(produces)j Fv(P)t(R)t(E)t(S)p 1645 1062 28 4 v 40 w(C)r
FC(,)c(it)g(must)h(link)g(with)f Fy(libflick-)t(pres_c.a)p
FC(,)c Fy(libflick-)t(mint.)0 1175 y(a)p FC(,)22 b(and)i
Fy(libflick-)t(cast.a)19 b FC(in)k(addition)j(to)e(the)f(libraries)j
(listed)f(abo)o(v)o(e.)141 1287 y(The)e(ne)o(xt)h(three)h(sections)g
(describe)h(each)e(of)g(Flick')-5 b(s)24 b(front)g(ends.)0
1579 y Ft(10.2)119 b(CORB)l(A)31 b(Fr)n(ont)f(End)0 1786
y FC(The)j Fv(C)t(O)t(R)t(B)r(A)g FC(front)f(end,)i(contained)g(in)e
(the)g Fy(fe/newcorba)27 b FC(directory)-6 b(,)36 b(w)o(as)31
b(written)i(especially)h(for)e(Flick.)53 b(It)31 b(is)h(a)0
1898 y(more)e(or)g(less)g(straightforw)o(ard)k Fy(lex)p
FC(-)29 b(and)h Fy(yacc)p FC(-based)h(program)g(that)f(translates)35
b Fv(C)t(O)t(R)t(B)r(A)e(I)t(D)t(L)f FC(speci\002cations)i(into)0
2011 y(their)c Fv(AO)t(I)f FC(equi)n(v)n(alents.)43 b(The)27
b(front)h(end)g(generally)i(parses)g Fv(C)t(O)t(R)t(B)r(A)e
FC(2.0)i Fv(I)t(D)t(L)r FC(,)e(with)f(the)h(addition)i(of)d(the)i
Fv(C)t(O)t(R)t(B)r(A)f FC(2.1)0 2124 y(\223)p Fy(long)47
b(long)p FC(\224)22 b(data)i(type.)141 2237 y(\(Prior)29
b(to)f(August)h(1996,)h(Flick')-5 b(s)31 b Fv(C)t(O)t(R)t(B)r(A)e
FC(front)g(end)g(w)o(as)f(based)h(on)f(Sun')-5 b(s)29
b(freely)g(a)n(v)n(ailable)k Fv(C)t(O)t(R)t(B)r(A)c FC(compiler)0
2350 y(front)c(end.)33 b(The)24 b(Sun-based)k Fv(C)t(O)t(R)t(B)r(A)d
FC(front)h(end)f(w)o(as)f(contained)j(in)e(the)g Fy(fe/corba)c
FC(directory;)28 b(hence,)e(the)e(ne)n(w)g(front)0 2463
y(end)j(went)g(into)g Fy(fe/newcorba)p FC(.)34 b(Although)28
b(the)f(Sun-based)k Fv(C)t(O)t(R)t(B)r(A)c FC(front)g(end)h(is)e(still)
h(a)n(v)n(ailable)i(in)e(the)f(Flick)h(CVS)0 2576 y(archi)n(v)o(es,)e
(it)e(is)g(not)h(distrib)n(uted)j(as)d(part)g(of)f(Flick,)g(and)h(it)g
(has)g(not)g(been)g(maintained)i(since)e(1996.\))141
2689 y(The)34 b(mapping)h(from)h Fv(C)t(O)t(R)t(B)r(A)h(I)t(D)t(L)f
FC(to)g Fv(AO)t(I)g FC(is)e(straightforw)o(ard,)40 b(since)35
b(man)o(y)f(of)g(the)g(notions)i(in)g Fv(AO)t(I)f FC(were)f(in)0
2802 y(f)o(act)i(based)g(on)f(their)j Fv(C)t(O)t(R)t(B)r(A)e
FC(equi)n(v)n(alents.)66 b(T)-7 b(able)35 b(10.1)h(summarizes)g(the)g
(translation)i(of)d(top-le)n(v)o(el)k Fv(C)t(O)t(R)t(B)r(A)e(I)t(D)t(L)
0 2915 y FC(declarations)h(into)e Fv(AO)t(I)h FC(de\002nitions,)h(and)d
(of)f(speci\002c)j Fv(C)t(O)t(R)t(B)r(A)g(I)t(D)t(L)g
FC(types)e(into)i Fv(AO)t(I)f FC(types.)64 b Fv(I)t(D)t(L)37
b FC(constant)f(v)n(alues)0 3028 y(\(e.g.,)23 b Fy(7)p
FC(,)g Fy(TRUE)p FC(\))f(are)i(of)g(course)h(translated)h(into)f(equi)n
(v)n(alent)j Fv(AO)t(I)d FC(literal)g(constants.)32 b(Most)26
b Fv(I)t(D)t(L)h FC(declarations)g(translate)0 3140 y(into)39
b Fv(AO)t(I)e Fy(aoi_def)p FC(s)d(that)i(associate)j(the)d(appropriate)
j(names)d(and)h(de\002nitions.)70 b Fv(I)t(D)t(L)39 b
FC(operations)f(and)f(attrib)n(utes,)0 3253 y(for)30
b(historical)j(reasons,)g(are)d(dif)n(ferent,)k(and)c(are)g(translated)
j(into)e(special)g Fy(aoi_operation)26 b FC(and)31 b
Fy(aoi_attribute)0 3366 y FC(structures.)46 b(Note)28
b(that)h(certain)j Fv(I)t(D)t(L)g FC(constructs)f(and)e(types,)h
(introduced)i(after)f Fv(C)t(O)t(R)t(B)r(A)e FC(2.0,)h(are)e(not)h(yet)
g(supported.)0 3479 y(F)o(or)23 b(further)i(details)g(about)i
Fv(AO)t(I)r FC(,)c(refer)h(to)f(Chapter)i(4.)141 3592
y(A)e(fe)n(w)f(additional)27 b(comments)d(about)h(the)h
Fv(C)t(O)t(R)t(B)r(A)e FC(front)g(end:)0 3795 y Fz(Scoping)o(.)45
b FC(Although)31 b(Flick)e(generally)i(accepted)g(the)h
Fv(C)t(O)t(R)t(B)r(A)d FC(2.0)i Fv(I)t(D)t(L)r FC(,)g(the)e(front)h
(end)g(implements)g(some)f(scoping)227 3908 y(rules)d(from)f(later)h(v)
o(ersions)h(of)e(the)h(language)i(\()r Fv(C)t(O)t(R)t(B)r(A)e
FC(2.3\).)33 b(F)o(or)25 b(instance,)i(the)f(name)f(of)g(an)g(interf)o
(ace)j(cannot)227 4021 y(be)23 b(rede\002ned)h(within)f(the)f
(immediate)i(scope)f(of)g(that)g(interf)o(ace.)30 b(Man)o(y)23
b(other)g(features)h(of)h Fv(C)t(O)t(R)t(B)r(A)e FC(2.3,)f(such)h(as)
227 4134 y(escaped)j(identi\002ers,)f(are)f Fu(not)h
FC(yet)f(supported.)0 4319 y Fy(#pragma)d Fz(Dir)n(ecti)o(v)o(es.)48
b FC(Flick)24 b(does)g(not)g(yet)g(support)h(the)f Fy(pragma)d
FC(directi)n(v)o(es)26 b(de\002ned)e(for)i Fv(C)t(O)t(R)t(B)r(A)g(I)t
(D)t(L)r FC(.)0 4503 y Fy(context)21 b Fz(Clauses.)46
b FC(Flick')-5 b(s)40 b Fv(C)t(O)t(R)t(B)r(A)e FC(front)g(end)f(does)h
(not)g(support)h Fy(context)34 b FC(clauses.)72 b(It)36
b(w)o(ould)i(be)f(relati)n(v)o(ely)227 4616 y(simple)24
b(to)g(e)o(xtend)j Fv(AO)t(I)e FC(to)f(support)h(conte)o(xt)g(v)n
(ariables,)g(b)n(ut)f(nobody)i(uses)e(them)g(an)o(yw)o(ay)-6
b(.)0 4907 y Ft(10.3)119 b(ONC)30 b(RPC)h(\(Sun\))g(Fr)n(ont)f(End)0
5114 y FC(The)22 b Fv(O)t(N)t(C)i(R)t(P)t(C)f FC(front)f(end,)f
(contained)j(in)c(the)h Fy(fe/sun)e FC(directory)-6 b(,)23
b(is)e(deri)n(v)o(ed)g(from)g(the)g(1988)h(\223RPCSRC)c(4.0\224)j(v)o
(ersion)0 5227 y(of)27 b(Sun')-5 b(s)27 b Fy(rpcgen)d
FC(program.)40 b(The)27 b(principal)i(modi\002cation)g(is)e(that)g
(original)i Fy(rpcgen)c FC(back)i(end)h(has)f(been)h(remo)o(v)o(ed)0
5340 y(and)20 b(replaced)h(with)e(a)g(custom)h(\223back)g(end\224)g
(that)g(generates)k Fv(AO)t(I)r FC(.)j(Other)20 b(minor)f
(modi\002cations)j(ha)n(v)o(e)d(updated)j(the)d(1988)p
eop
%%Page: 173 173
173 172 bop 0 -165 a Fx(10.3.)52 b(ONC)21 b(RPC)h(\(SUN\))g(FR)l(ONT)f
(END)2352 b FC(173)p 552 186 2797 4 v 550 285 4 100 v
604 256 a Fr(C)t(O)t(R)t(B)r(A)25 b(I)t(D)t(L)e FE(Declaration)p
1449 285 V 100 w Fr(AO)t(I)g FE(De\002nition)d(\()p Ff(aoi_def)p
FE(\))d(T)-7 b(ype)p 3347 285 V 552 289 2797 4 v 550
388 4 100 v 602 359 a Ff(module)p 1449 388 V 634 w(AOI_NAMESPACE)p
3347 388 V 550 488 V 602 458 a(interface)p 1449 488 V
502 w(AOI_INTERFACE)15 b FE(or)20 b Ff(AOI_FWD_INTRFC)p
3347 488 V 550 588 V 602 558 a Fe(oper)o(ation)p 1449
588 V 574 w FE(an)g Ff(aoi_operation)c FE(within)j(an)i
Ff(AOI_INTERFACE)p 3347 588 V 550 687 V 602 657 a Fe(attrib)n(ute)p
1449 687 V 613 w FE(an)f Ff(aoi_attribute)c FE(within)j(an)i
Ff(AOI_INTERFACE)p 3347 687 V 550 787 V 1449 787 V 3347
787 V 550 887 V 602 857 a(typedef)p 1449 887 V 590 w
Fe(see)g(speci\002c)f(types,)g(below)p 3347 887 V 550
986 V 602 956 a Ff(struct)p 1449 986 V 634 w(AOI_STRUCT)p
3347 986 V 550 1086 V 602 1056 a(union)p 1449 1086 V
678 w(AOI_UNION)p 3347 1086 V 550 1185 V 602 1156 a(enum)p
1449 1185 V 722 w(AOI_ENUM)p 3347 1185 V 550 1285 V 602
1255 a(native)p 1449 1285 V 634 w Fe(not)g(supported)p
3347 1285 V 550 1385 V 1449 1385 V 3347 1385 V 550 1484
V 602 1454 a Ff(const)p 1449 1484 V 678 w(AOI_CONST)p
3347 1484 V 550 1584 V 602 1554 a(exception)p 1449 1584
V 502 w(AOI_EXCEPTION)p 3347 1584 V 552 1587 2797 4 v
552 1690 V 550 1790 4 100 v 604 1760 a Fr(C)t(O)t(R)t(B)r(A)25
b(I)t(D)t(L)e FE(T)-7 b(ype)p 1449 1790 V 324 w Fr(AO)t(I)23
b FE(T)-7 b(ype)p 3347 1790 V 552 1793 2797 4 v 550 1893
4 100 v 602 1863 a Ff(void)p 1449 1893 V 722 w(AOI_VOID)p
3347 1893 V 550 1992 V 602 1962 a(boolean)p 1449 1992
V 590 w(AOI_INTEGER)p FE(,)16 b(min)k Fd(0)p FE(,)g(range)f
Fd(1)p 3347 1992 V 550 2092 V 602 2062 a Ff(char)p 1449
2092 V 722 w(AOI_CHAR)p FE(,)e(8)j(bits,)h(no)f(\003ags)p
3347 2092 V 550 2192 V 602 2162 a Ff(wchar)p 1449 2192
V 678 w Fe(not)g(supported)p 3347 2192 V 550 2291 V 602
2261 a Ff(enum)p 1449 2291 V 722 w Fe(see)h(declar)o(ations,)d(abo)o
(ve)p 3347 2291 V 550 2391 V 1449 2391 V 3347 2391 V
550 2491 V 602 2461 a Ff(octet)p 1449 2491 V 678 w(AOI_INTEGER)p
FE(,)e(min)k Fd(0)p FE(,)g(range)f Fd(2)2501 2430 y Fc(8)2556
2461 y FD(\000)f Fd(1)p 3347 2491 V 550 2590 V 602 2560
a Ff(short)p 1449 2590 V 678 w(AOI_INTEGER)p FE(,)e(min)k
FD(\000)p Fd(2)2278 2530 y Fc(15)2347 2560 y FE(,)h(range)e
Fd(2)2636 2530 y Fc(16)2724 2560 y FD(\000)f Fd(1)p 3347
2590 V 550 2690 V 602 2660 a Ff(unsigned)40 b(short)p
1449 2690 V 286 w(AOI_INTEGER)p FE(,)16 b(min)k Fd(0)p
FE(,)g(range)f Fd(2)2501 2630 y Fc(16)2589 2660 y FD(\000)f
Fd(1)p 3347 2690 V 550 2789 V 602 2760 a Ff(long)p 1449
2789 V 722 w(AOI_INTEGER)p FE(,)e(min)k FD(\000)p Fd(2)2278
2729 y Fc(31)2347 2760 y FE(,)h(range)e Fd(2)2636 2729
y Fc(32)2724 2760 y FD(\000)f Fd(1)p 3347 2789 V 550
2889 V 602 2859 a Ff(unsigned)40 b(long)p 1449 2889 V
330 w(AOI_INTEGER)p FE(,)16 b(min)k Fd(0)p FE(,)g(range)f
Fd(2)2501 2829 y Fc(32)2589 2859 y FD(\000)f Fd(1)p 3347
2889 V 550 2989 V 602 2959 a Ff(long)42 b(long)p 1449
2989 V 504 w(AOI_SCALAR)p FE(,)16 b(64)k(bits,)h(no)e(\003ags)p
3347 2989 V 550 3088 V 602 3058 a Ff(unsigned)40 b(long)i(long)p
1449 3088 V 112 w(AOI_SCALAR)p FE(,)16 b(64)k(bits,)h(unsigned)p
3347 3088 V 550 3188 V 1449 3188 V 3347 3188 V 550 3288
V 602 3258 a Ff(float)p 1449 3288 V 678 w(AOI_FLOAT)p
FE(,)c(32)j(bits)p 3347 3288 V 550 3387 V 602 3357 a
Ff(double)p 1449 3387 V 634 w(AOI_FLOAT)p FE(,)d(64)j(bits)p
3347 3387 V 550 3487 V 602 3457 a Ff(long)42 b(double)p
1449 3487 V 416 w Fe(not)20 b(supported)p 3347 3487 V
550 3586 V 602 3557 a Ff(fixed)p 1449 3586 V 678 w Fe(not)g(supported)p
3347 3586 V 550 3686 V 1449 3686 V 3347 3686 V 550 3786
V 602 3756 a(\002xed-length)d(arr)o(ay)p 1449 3786 V
302 w Ff(AOI_ARRAY)g FE(of)j(element)g(type)p 3347 3786
V 550 3885 V 602 3855 a Ff(sequence)p 1449 3885 V 546
w(AOI_ARRAY)d FE(of)j(element)g(type)p 3347 3885 V 550
3985 V 602 3955 a Ff(string)p 1449 3985 V 634 w(AOI_ARRAY)d
FE(of)j Ff(AOI_CHAR)p FE(,)d(with)k(null-termination)c(\003ag)p
3347 3985 V 550 4085 V 602 4055 a Ff(wstring)p 1449 4085
V 590 w Fe(not)j(supported)p 3347 4085 V 550 4184 V 602
4154 a Ff(struct)p 1449 4184 V 634 w Fe(see)h(declar)o(ations,)d(abo)o
(ve)p 3347 4184 V 550 4284 V 602 4254 a Ff(union)p 1449
4284 V 678 w Fe(see)j(declar)o(ations,)d(abo)o(ve)p 3347
4284 V 550 4383 V 1449 4383 V 3347 4383 V 550 4483 V
602 4453 a Ff(Object)p 1449 4483 V 634 w(AOI_INDIRECT)e
FE(to)k(b)n(uilt-in)g Ff(CORBA::Object)15 b FE(de\002nition)p
3347 4483 V 550 4583 V 602 4553 a Ff(any)p 1449 4583
V 766 w(AOI_TYPED)p 3347 4583 V 550 4682 V 602 4652 a(CORBA::TypeCode)p
1449 4682 V 238 w(AOI_TYPE_TAG)p 3347 4682 V 550 4782
V 1449 4782 V 3347 4782 V 550 4882 V 602 4852 a Fe(use)20
b(of)g(named)f(type)p 1449 4882 V 301 w Ff(AOI_INDIRECT)d
FE(to)k Ff(aoi_def)e FE(that)i(de\002nes)g(the)g(type)p
3347 4882 V 552 4885 2797 4 v 718 5138 a FC(T)-7 b(able)24
b(10.1:)29 b(Mapping)c(of)h Fv(C)t(O)t(R)t(B)r(A)g(I)t(D)t(L)g
FC(Declarations)g(and)e(T)-7 b(ypes)24 b(to)h Fv(AO)t(I)r
FC(.)p eop
%%Page: 174 174
174 173 bop 0 -165 a FC(174)2609 b Fx(CHAPTER)20 b(10.)52
b(FR)l(ONT)21 b(ENDS)0 91 y FC(code)29 b(for)g(ANSI)e(C,)g(\002x)o(ed)h
(b)n(ugs,)j(and)e(so)f(on.)44 b(The)30 b Fv(O)t(N)t(C)i(R)t(P)t(C)e
FC(front)g(end')-5 b(s)29 b(scanner)i(and)e(parser)h(are)e(hand-coded)k
(\227)0 204 y(lar)n(gely)c(unmodi\002ed)g(from)f(the)f(original)j
Fy(rpcgen)24 b FC(code)j(\227)e(and)i(produce)i(a)d(link)o(ed)i(list)f
(of)f Fy(definition)d FC(structures.)0 317 y(The)h(Flick-speci\002c)j
(\223back)g(end,)-6 b(\224)25 b(contained)j(in)c Fy(fe/sun/xlate.c)p
FC(,)d(simply)k(translates)j(this)d(list)h(of)f(de\002nitions)i(into)0
430 y(the)d(equi)n(v)n(alent)k Fv(AO)t(I)d FC(structures.)141
543 y(As)31 b(with)j Fv(C)t(O)t(R)t(B)r(A)h(I)t(D)t(L)r
FC(,)g(the)d(mapping)i(from)f Fv(O)t(N)t(C)j(R)t(P)t(C)g(I)t(D)t(L)f
FC(to)f Fv(AO)t(I)g FC(is)e(more)g(or)g(less)g(straightforw)o(ard,)38
b(and)32 b(is)0 656 y(summarized)38 b(in)e(T)-7 b(able)36
b(10.2.)66 b(Because)37 b(Flick')-5 b(s)39 b Fv(O)t(N)t(C)h(R)t(P)t(C)e
FC(front)f(end)f(is)g(based)h(on)g(a)e(relati)n(v)o(ely)j(old)f(v)o
(ersion)g(of)0 769 y Fy(rpcgen)p FC(,)31 b(it)g(parses)i(an)f(old)g(v)o
(ersion)h(of)e(the)j Fv(I)t(D)t(L)g FC(that)e(predates)i(the)e(current)
h(language)h(de\002ned)e(by)g(RFC)d(1831.)54 b(In)0 882
y(practice,)25 b(this)f(means:)136 1084 y Fs(\017)46
b FC(Flick')-5 b(s)30 b Fv(O)t(N)t(C)f(R)t(P)t(C)g FC(front)f(end)f
(allo)n(ws)f(at)h(most)g(one)g(parameter)h(to)e(be)h(passed)h(to)f(an)o
(y)f(procedure.)41 b(\(The)26 b(ne)n(wer)229 1197 y Fv(I)t(D)t(L)h
FC(allo)n(ws)c(multiple)i(parameters.\))136 1381 y Fs(\017)46
b FC(Flick)23 b(does)g(not)g(recognize)j(the)c Fy(hyper)f
FC(and)i Fy(quadruple)c FC(types,)24 b(which)f(were)f(introduced)k(in)c
(later)i(v)o(ersions)g(of)227 1494 y Fy(rpcgen)p FC(.)141
1696 y(Flick)32 b(accepts)h(the)f(v)n(arious)j Fv(I)t(D)t(L)f
FC(\223e)o(xtensions\224)h(that)d(are)g(generally)i(accepted)g(by)e
Fy(rpcgen)p FC(,)e(as)i(outlined)i(in)d(T)-7 b(a-)0 1809
y(ble)23 b(10.2.)29 b(Flick)23 b(does)h(not,)g(ho)n(we)n(v)o(er)l(,)f
(support)i(`)p Fy(\045)p FC(')e(directi)n(v)o(es)i(in)g
Fv(O)t(N)t(C)h(R)t(P)t(C)h(I)t(D)t(L)f FC(\002les.)j(These)23
b(directi)n(v)o(es)i(tell)f Fy(rpcgen)0 1922 y FC(to)i(pass)i(te)o(xt)e
(directly)j(into)e(the)g(generated)i(output)f(\002le.)37
b(Since)27 b(Flick')-5 b(s)29 b Fv(O)t(N)t(C)h(R)t(P)t(C)f
FC(front)e(end)g(produces)k Fv(AO)t(I)r FC(,)c(there)g(is)0
2035 y(no)n(where)d(to)g(store)g(literal)h(code,)f(and)g(so)g(Flick)f
(simply)i(discards)g(these)g(directi)n(v)o(es.)141 2148
y(Finally)-6 b(,)24 b(here)g(are)g(a)f(fe)n(w)g(interesting)k(observ)n
(ations)g(about)d(the)i Fv(O)t(N)t(C)h(R)t(P)t(C)e FC(front)g(end:)0
2350 y Fy(program)c Fz(and)h Fy(version)f Fz(Declarations.)48
b FC(A)32 b Fy(program)f FC(declaration)36 b(is)e(represented)i(in)g
Fv(AO)t(I)f FC(as)e(an)h(\(empty\))g Fy(AOI_)227 2463
y(INTERFACE)p FC(,)24 b(not)i(as)g(an)g Fy(AOI_NAMESPACE)p
FC(.)33 b(This)26 b(is)g(partly)h(historical)i(\227)c(the)k
Fv(O)t(N)t(C)g(R)t(P)t(C)f FC(front)f(end)g(w)o(as)f(cre-)227
2576 y(ated)j(before)h(namespaces)h(were)d(represented)k(in)e
Fv(AO)t(I)g FC(\227)e(and)h(partly)g(because)i(there)e(is)f(no)n(where)
i(to)e(store)h(an)229 2689 y Fv(O)t(N)t(C)f(R)t(P)t(C)e
FC(program)f(identi\002er)h(in)e(an)g Fy(AOI_NAMESPACE)c
FC(de\002nition.)32 b(A)23 b Fy(version)f FC(declaration)27
b(is)d(represented)227 2802 y(as)g(an)g Fy(AOI_INTERFACE)c
FC(that)k(inherits)i(from)e(the)g(interf)o(ace)i(corresponding)i(to)c
(the)g(containing)j Fy(program)22 b FC(dec-)227 2915
y(laration.)33 b(The)26 b Fv(AO)t(I)h FC(representation)h(of)f
Fv(O)t(N)t(C)g(R)t(P)t(C)g Fy(program)21 b FC(and)k Fy(version)d
FC(declarations)28 b(should)e(be)e(changed)227 3028 y(in)j(the)g
(future;)j(this)d(w)o(ould)h(for)f(e)o(xample)g(allo)n(w)g(one)h(to)e
(mak)o(e)h(a)i Fv(C)t(O)t(R)t(B)r(A)r FC(-style)e(presentation)k(of)26
b(an)j Fv(O)t(N)t(C)h(R)t(P)t(C)229 3141 y(I)t(D)t(L)r
FC(-de\002ned)d(interf)o(ace.)0 3325 y Fy(long)22 b Fz(V)-9
b(ersus)23 b Fy(int)p Fz(.)44 b FC(Although)37 b Fy(long)32
b FC(is)j(not)g(properly)i(part)e(of)f(the)j Fv(O)t(N)t(C)h(R)t(P)t(C)h
(I)t(D)t(L)r FC(,)f Fy(rpcgen)32 b FC(accepts)k Fy(long)d
FC(as)i(a)227 3438 y(b)n(uilt-in)24 b(type)e(and)g(maps)f(it)g(to)h
(the)g(C)e(language)k Fy(long)19 b FC(type.)29 b(Flick,)21
b(ho)n(we)n(v)o(er)l(,)i(is)e(unable)i(to)e(treat)h Fy(long)e
FC(and)i Fy(int)227 3551 y FC(declarations)34 b(separately)-6
b(.)50 b(Flick')-5 b(s)33 b Fv(O)t(N)t(C)g(R)t(P)t(C)f
FC(presentation)i(generator)e(\(described)h(in)d(Section)h(11.3.4\))f
(must)227 3664 y(map)22 b(both)i(of)e(these)i(types)f(to)g(C)e
Fy(int)p FC(,)g(because)j(Flick')-5 b(s)25 b Fv(O)t(N)t(C)h(R)t(P)t(C)e
FC(front)g(end)f(maps)f(both)k Fv(I)t(D)t(L)f FC(types)e(to)g(a)f
(single)229 3777 y Fv(AO)t(I)j FC(type.)k(Fixing)23 b(this)g(w)o(ould)g
(require)h(a)e(change)i(to)g Fv(AO)t(I)r FC(,)e(i.e.,)g(e)o(xtending)j
Fy(AOI_INTEGER)18 b FC(de\002nitions)25 b(to)d(k)o(eep)227
3889 y(track)j(of)e(whether)i(the)f(type)g(w)o(as)f(e)o(xplicitly)j
(long)e(\(or)g(short,)g(or)g(unsigned,)h(or.)14 b(.)g(.)g(\).)0
4074 y Fy(const)21 b Fz(Declarations.)48 b FC(RFC)27
b(1832)j(is)f(unclear)h(about)g(the)f(types)h(of)f(constants;)34
b(more)29 b(recent)j Fv(O)t(N)t(C)e FC(documentation)227
4187 y(states)36 b(that)f(\223symbolic)i(constants)g(may)d(be)h(used)g
(where)n(v)o(er)g(an)g(inte)o(ger)h(constant)g(is)f(used.)-6
b(\224)62 b(Ne)n(v)o(ertheless,)227 4300 y Fy(rpcgen)34
b FC(and)k(Flick')-5 b(s)39 b Fv(O)t(N)t(C)h(R)t(P)t(C)f
FC(front)e(end)g(both)h(allo)n(w)e(literal)i(string)g(constants)h(to)e
(be)g(de\002ned.)68 b(Unlik)o(e)227 4412 y Fy(rpcgen)p
FC(,)21 b(Flick)j(disallo)n(ws)h(forw)o(ard)g(and)f(unde\002ned-b)n
(ut-unus)q(ed)29 b(constant)d(declarations;)i(the)c(v)n(alue)g(of)g(a)f
(con-)227 4525 y(stant)31 b(must)f(be)g(determinable)j(when)d(the)g
(constant)i(is)e(declared.)50 b(Thus,)31 b(the)g(follo)n(wing)g
(declarations)j(will)29 b(be)227 4638 y(accepted)d(by)e
Fy(rpcgen)d FC(b)n(ut)j(rejected)h(by)f(Flick:)370 4876
y Fy(const)47 b(a)g(=)h(b;)f(const)f(b)i(=)f(1;)g(/*)h(``Forward'')c
(declaration)h(of)i(`b'.)95 b(*/)370 4989 y(const)47
b(bar)g(=)g(foo;)g(/*)g(`foo')f(undefined,)f(but)i(`bar')g(is)g(never)f
(used.)h(*/)227 5227 y(rpcgen)27 b FC(accepts)k(these)f(kinds)h(of)e
(weird)g(declarations)k(simply)d(because)h(it)e(doesn')n(t)j(do)d(an)o
(ything)i(interesting)227 5340 y(with)24 b(them.)p eop
%%Page: 175 175
175 174 bop 0 -165 a Fx(10.3.)52 b(ONC)21 b(RPC)h(\(SUN\))g(FR)l(ONT)f
(END)2352 b FC(175)p 466 350 2969 4 v 464 450 4 100 v
517 420 a Fr(O)t(N)t(C)26 b(R)t(P)t(C)f(I)t(D)t(L)e FE(Declaration)p
1587 450 V 260 w Fr(AO)t(I)h FE(De\002nition)19 b(\()p
Ff(aoi_def)p FE(\))e(T)-7 b(ype)p 3433 450 V 466 453
2969 4 v 464 553 4 100 v 515 523 a Ff(program)p 1587
553 V 815 w(AOI_INTERFACE)16 b FE(\()p Fe(not)21 b Ff(AOI_NAMESPACE)p
FE(\))p 3433 553 V 464 653 V 515 623 a Ff(version)p 1587
653 V 815 w(AOI_INTERFACE)p 3433 653 V 464 752 V 515
722 a Fe(pr)l(ocedur)m(e)p 1587 752 V 787 w FE(an)f Ff(aoi_operation)c
FE(within)k(an)g Ff(AOI_INTERFACE)p 3433 752 V 464 852
V 1587 852 V 3433 852 V 464 951 V 515 922 a(typedef)p
1587 951 V 815 w Fe(see)h(speci\002c)f(types,)g(below)p
3433 951 V 464 1051 V 515 1021 a Ff(struct)p 1587 1051
V 859 w(AOI_STRUCT)p 3433 1051 V 464 1151 V 515 1121
a(union)p 1587 1151 V 903 w(AOI_UNION)p 3433 1151 V 464
1250 V 515 1220 a(enum)p 1587 1250 V 947 w(AOI_ENUM)p
3433 1250 V 464 1350 V 1587 1350 V 3433 1350 V 464 1450
V 515 1420 a(const)p 1587 1450 V 903 w(AOI_CONST)p 3433
1450 V 466 1453 2969 4 v 466 1556 V 464 1656 4 100 v
517 1626 a Fr(O)t(N)t(C)26 b(R)t(P)t(C)f(I)t(D)t(L)e
FE(T)-7 b(ype)p 1587 1656 V 484 w Fr(AO)t(I)24 b FE(T)-7
b(ype)p 3433 1656 V 466 1659 2969 4 v 464 1758 4 100
v 515 1729 a Ff(void)p 1587 1758 V 947 w(AOI_VOID)p 3433
1758 V 464 1858 V 515 1828 a(bool)p 1587 1858 V 947 w(AOI_INTEGER)p
FE(,)16 b(min)k Fd(0)p FE(,)g(range)f Fd(1)p 3433 1858
V 464 1958 V 515 1928 a Ff(char)691 1898 y Fb(a)p 1587
1958 V 1638 1928 a Ff(AOI_CHAR)p 3433 1958 V 464 2058
V 515 2028 a(unsigned)41 b(char)1084 1997 y Fb(a)1115
2028 y FE(,)21 b Ff(u_char)1421 1997 y Fb(b)p 1587 2058
V 1638 2028 a Ff(AOI_CHAR)p FE(,)c(with)k(unsigned)d(\003ag)p
3433 2058 V 464 2157 V 515 2127 a Ff(enum)p 1587 2157
V 947 w Fe(see)j(declar)o(ations,)d(abo)o(ve)p 3433 2157
V 464 2257 V 1587 2257 V 3433 2257 V 464 2356 V 515 2326
a Ff(int)p 1587 2356 V 991 w(AOI_INTEGER)p FE(,)e(min)k
FD(\000)p Fd(2)2416 2296 y Fc(31)2486 2326 y FE(,)g(range)f
Fd(2)2774 2296 y Fc(32)2862 2326 y FD(\000)g Fd(1)p 3433
2356 V 464 2456 V 515 2426 a Ff(unsigned)41 b(int)p FE(,)19
b Ff(u_int)1300 2396 y Fb(b)p 1587 2456 V 1638 2426 a
Ff(AOI_INTEGER)p FE(,)d(min)k Fd(0)p FE(,)g(range)f Fd(2)2639
2396 y Fc(32)2728 2426 y FD(\000)f Fd(1)p 3433 2456 V
464 2556 V 515 2526 a Ff(short)735 2496 y Fb(b)p 1587
2556 V 1638 2526 a Ff(AOI_INTEGER)p FE(,)e(min)k FD(\000)p
Fd(2)2416 2496 y Fc(15)2486 2526 y FE(,)g(range)f Fd(2)2774
2496 y Fc(16)2862 2526 y FD(\000)g Fd(1)p 3433 2556 V
464 2656 V 515 2626 a Ff(unsigned)41 b(short)1128 2596
y Fb(b)1159 2626 y FE(,)20 b Ff(u_short)1508 2596 y Fb(b)p
1587 2656 V 1638 2626 a Ff(AOI_INTEGER)p FE(,)c(min)k
Fd(0)p FE(,)g(range)f Fd(2)2639 2596 y Fc(16)2728 2626
y FD(\000)f Fd(1)p 3433 2656 V 464 2756 V 515 2726 a
Ff(long)691 2696 y Fb(b)p 1587 2756 V 1638 2726 a Ff(AOI_INTEGER)p
FE(,)e(min)k FD(\000)p Fd(2)2416 2696 y Fc(31)2486 2726
y FE(,)g(range)f Fd(2)2774 2696 y Fc(32)2862 2726 y FD(\000)g
Fd(1)p 3433 2756 V 464 2855 V 515 2825 a Ff(unsigned)41
b(long)1084 2795 y Fb(b)1115 2825 y FE(,)21 b Ff(u_long)1421
2795 y Fb(b)p 1587 2855 V 1638 2825 a Ff(AOI_INTEGER)p
FE(,)16 b(min)k Fd(0)p FE(,)g(range)f Fd(2)2639 2795
y Fc(32)2728 2825 y FD(\000)f Fd(1)p 3433 2855 V 464
2955 V 515 2925 a Ff(hyper)p 1587 2955 V 903 w Fe(not)i(supported)p
3433 2955 V 464 3055 V 515 3025 a Ff(unsigned)41 b(hyper)p
1587 3055 V 510 w Fe(not)20 b(supported)p 3433 3055 V
464 3154 V 1587 3154 V 3433 3154 V 464 3254 V 515 3224
a Ff(float)p 1587 3254 V 903 w(AOI_FLOAT)p FE(,)d(32)j(bits)p
3433 3254 V 464 3353 V 515 3324 a Ff(double)p 1587 3353
V 859 w(AOI_FLOAT)p FE(,)d(64)j(bits)p 3433 3353 V 464
3453 V 515 3423 a Ff(quadruple)p 1587 3453 V 727 w Fe(not)g(supported)p
3433 3453 V 464 3553 V 1587 3553 V 3433 3553 V 464 3652
V 515 3622 a(\002xed-length)e(arr)o(ay)p 1587 3652 V
526 w Ff(AOI_ARRAY)f FE(of)j(element)g(type)p 3433 3652
V 464 3752 V 515 3722 a Fe(variable-length)e(arr)o(ay)p
1587 3752 V 406 w Ff(AOI_ARRAY)f FE(of)j(element)g(type)p
3433 3752 V 464 3852 V 515 3822 a Fe(\002xed-length)e
Ff(opaque)p 1587 3852 V 446 w(AOI_ARRAY)f FE(of)j Ff(AOI_INTEGER)c
FE(\(min)k Fd(0)p FE(,)g(range)f Fd(2)3149 3792 y Fc(8)3204
3822 y FD(\000)f Fd(1)p FE(\))p 3433 3852 V 464 3951
V 515 3921 a Fe(variable-length)g Ff(opaque)p 1587 3951
V 326 w(AOI_ARRAY)f FE(of)j Ff(AOI_INTEGER)c FE(\(min)k
Fd(0)p FE(,)g(range)f Fd(2)3149 3891 y Fc(8)3204 3921
y FD(\000)f Fd(1)p FE(\))p 3433 3951 V 464 4051 V 515
4021 a Ff(string)p 1587 4051 V 859 w(AOI_ARRAY)f FE(of)j
Ff(AOI_CHAR)p FE(,)d(with)k(null-termination)c(\003ag)p
3433 4051 V 464 4151 V 515 4121 a Fe(pointer)j(\(a.k.a.)f(optional\))p
1587 4151 V 324 w Ff(AOI_OPTIONAL)d FE(of)k(member)f(type)p
3433 4151 V 464 4250 V 515 4220 a Ff(struct)p 1587 4250
V 859 w Fe(see)i(declar)o(ations,)d(abo)o(ve)p 3433 4250
V 464 4350 V 515 4320 a Ff(union)p 1587 4350 V 903 w
Fe(see)j(declar)o(ations,)d(abo)o(ve)p 3433 4350 V 464
4449 V 1587 4449 V 3433 4449 V 464 4549 V 515 4519 a(use)j(of)f(named)f
(type)p 1587 4549 V 525 w Ff(AOI_INDIRECT)d FE(to)k Ff(aoi_def)e
FE(that)i(de\002nes)g(the)h(type)p 3433 4549 V 466 4552
2969 4 v 0 4614 1560 4 v 105 4668 a Fa(a)134 4699 y Fp(This)e(type)g
(is)g(not)g(part)g(of)g(the)i Fn(O)t(N)t(C)h(R)t(P)t(C)f(I)t(D)t(L)f
Fp(de\002ned)f(by)h(RFC)e(1831,)i(b)o(ut)e(is)h(recognized)h(as)f(a)g
(k)o(e)o(yw)o(ord)i(by)e Fo(rpcgen)p Fp(.)105 4761 y
Fa(b)134 4793 y Fp(This)g(type)g(is)g(not)g(part)g(of)g(the)i
Fn(O)t(N)t(C)h(R)t(P)t(C)f(I)t(D)t(L)f Fp(de\002ned)f(by)h(RFC)e(1831,)
i(b)o(ut)e(is)h(recognized)h(as)f(a)g(b)o(uilt-in)f(alias)h(by)g
Fo(rpcgen)p Fp(.)683 4973 y FC(T)-7 b(able)24 b(10.2:)29
b(Mapping)c(of)h Fv(O)t(N)t(C)g(R)t(P)t(C)i(I)t(D)t(L)e
FC(Declarations)g(and)e(T)-7 b(ypes)24 b(to)h Fv(AO)t(I)r
FC(.)p eop
%%Page: 176 176
176 175 bop 0 -165 a FC(176)2609 b Fx(CHAPTER)20 b(10.)52
b(FR)l(ONT)21 b(ENDS)0 91 y Fy(opaque)g Fz(Array)j(Flags.)46
b FC(The)29 b(front)g(end)g(sets)h(the)e Fy(AOI_ARRAY_FLAG_OPAQUE)23
b FC(\003ag)28 b(on)h Fy(opaque)d FC(arrays,)31 b(although)227
204 y(this)24 b(\003ag)f(is)h(obsolete)i(in)d(the)h(current)h(v)o
(ersion)g(of)e(Flick.)0 496 y Ft(10.4)119 b(MIG)29 b(Fr)n(ont)h(End)0
703 y FC(The)22 b Fv(M)t(I)t(G)h FC(front)e(end,)g(contained)i(in)e
(the)g Fy(fe/mig)d FC(directory)-6 b(,)23 b(is)d(deri)n(v)o(ed)i(from)e
(the)h(original)k Fv(M)t(I)t(G)f(I)t(D)t(L)g FC(compiler)d(written)0
816 y(by)j(Carne)o(gie)g(Mellon)h(Uni)n(v)o(ersity)-6
b(.)30 b(Man)o(y)23 b(\002les)g(are)h(cop)o(yrighted)j(by)d(CMU:)0
1022 y Fy(/*)48 1135 y(*)47 b(Mach)g(Operating)e(System)48
1248 y(*)i(Copyright)e(\(c\))i(1991,1990)f(Carnegie)f(Mellon)h
(University)48 1361 y(*)h(All)g(Rights)f(Reserved.)48
1474 y(*)48 1587 y(*)h(Permission)e(to)i(use,)g(copy,)f(modify)g(and)h
(distribute)e(this)i(software)f(and)g(its)48 1699 y(*)h(documentation)d
(is)k(hereby)e(granted,)f(provided)h(that)g(both)h(the)g(copyright)48
1812 y(*)g(notice)f(and)h(this)g(permission)e(notice)h(appear)g(in)h
(all)g(copies)f(of)h(the)48 1925 y(*)g(software,)e(derivative)g(works)i
(or)g(modified)f(versions,)f(and)i(any)g(portions)48
2038 y(*)g(thereof,)f(and)h(that)f(both)h(notices)f(appear)g(in)h
(supporting)e(documentation.)48 2151 y(*)48 2264 y(*)i(CARNEGIE)f
(MELLON)g(ALLOWS)g(FREE)h(USE)f(OF)i(THIS)e(SOFTWARE)g(IN)h(ITS)48
2377 y(*)g(CONDITION.)93 b(CARNEGIE)45 b(MELLON)i(DISCLAIMS)e(ANY)i
(LIABILITY)e(OF)i(ANY)g(KIND)g(FOR)48 2490 y(*)g(ANY)g(DAMAGES)f
(WHATSOEVER)f(RESULTING)g(FROM)i(THE)g(USE)g(OF)g(THIS)f(SOFTWARE.)48
2603 y(*)48 2716 y(*)h(Carnegie)f(Mellon)g(requests)f(users)i(of)g
(this)g(software)e(to)i(return)f(to)48 2829 y(*)48 2941
y(*)95 b(Software)45 b(Distribution)g(Coordinator)92
b(or)j(Software.Distribution@CS.)o(CMU.)o(EDU)48 3054
y(*)g(School)46 b(of)h(Computer)f(Science)48 3167 y(*)95
b(Carnegie)45 b(Mellon)i(University)48 3280 y(*)95 b(Pittsburgh)45
b(PA)i(15213-3890)48 3393 y(*)48 3506 y(*)g(any)g(improvements)e(or)i
(extensions)e(that)h(they)h(make)g(and)g(grant)f(Carnegie)f(the)48
3619 y(*)i(rights)f(to)h(redistribute)e(these)h(changes.)48
3732 y(*/)141 3938 y FC(Flick')-5 b(s)36 b Fv(M)t(I)t(G)f
FC(front)e(end)h(w)o(as)e(created)i(by)f(replacing)38
b Fv(M)t(I)t(G)r FC(')-5 b(s)33 b(original)i(back)f(end)f(with)f(a)h
(ne)n(w)f(\223back)i(end\224)g(that)0 4051 y(produces)26
b Fv(P)t(R)t(E)t(S)p 543 4051 28 4 v 40 w(C)d FC(\002les)f(instead)i
(of)d(C)g(language)k(stubs.)k(As)21 b(described)k(pre)n(viously)-6
b(,)25 b(Flick')-5 b(s)24 b Fv(M)t(I)t(G)g FC(front)f(end)g(produces)2
4164 y Fv(P)t(R)t(E)t(S)p 194 4164 V 39 w(C)34 b FC(instead)g(of)g
Fv(AO)t(I)g FC(because)h(the)f Fv(M)t(I)t(G)j(I)t(D)t(L)e
FC(allo)n(ws)d(a)g(programmer)i(to)e(specify)i(ho)n(w)g
Fv(I)t(D)t(L)h FC(constructs)h(should)0 4277 y(be)29
b(mapped)h(onto)g(the)f(C)f(language.)47 b(In)29 b(essence,)i(this)f
(means)f(that)h(Flick')-5 b(s)31 b Fv(M)t(I)t(G)g FC(front)f(end)g(is)e
(also)i(a)e(\223presentation)0 4390 y(generator\224)e(as)e(described)i
(in)d(Chapter)i(11.)141 4503 y(Except)h(for)f(minor)g(maintenance)i
(\(e.g.,)e(updates)i(for)e(ANSI)e(C\),)g(the)j(basic)f(scanning)j(and)d
(parsing)i(functions)g(are)0 4616 y(essentially)k(unchanged)h(from)c
(the)h(original)j Fv(M)t(I)t(G)f FC(source)f(code.)44
b(The)28 b(presentation)k(generator)f(functions)g(of)d(Flick')-5
b(s)2 4728 y Fv(M)t(I)t(G)26 b FC(front)e(end)g(are)g(described)i(in)d
(Section)i(11.3.6.)0 5020 y Ft(10.5)119 b(Summary)29
b(and)i(Comments)0 5227 y FC(The)i(dif)n(ferences)k(between)e(Flick')-5
b(s)36 b Fv(C)t(O)t(R)t(B)r(A)r FC(,)h Fv(O)t(N)t(C)g(R)t(P)t(C)r
FC(,)g(and)f Fv(M)t(I)t(G)g FC(front)f(ends)f(illustrate)i(an)e
(important)i(strength:)0 5340 y(namely)-6 b(,)26 b(that)g(by)f(pro)o
(viding)j(multiple)f(intermediate)g(representations)j(with)25
b(dif)n(fering)j(le)n(v)o(els)d(of)h(detail,)g(Flick)f(is)h(able)p
eop
%%Page: 177 177
177 176 bop 0 -165 a Fx(10.5.)52 b(SUMMAR)-6 b(Y)20 b(AND)i(COMMENTS)
2307 b FC(177)0 91 y(to)35 b(accommodate)j(se)n(v)o(eral)e(v)o(ery)g
(dif)n(ferent)j Fv(I)t(D)t(L)r FC(s.)65 b(The)35 b(dif)n(ferences)j
(also)e(highlight)i(a)d(potential)j(impro)o(v)o(ement)e(to)0
204 y(Flick:)42 b(in)30 b(particular)l(,)k(the)c(need)g(to)g(e)o(xtend)
j Fv(AO)t(I)f FC(to)e(accommodate)h(some)f(sort)h(of)e
(\223annotation\224)34 b(f)o(acility)e(that)e(could)0
317 y(e)o(xpress)d Fv(M)t(I)t(G)r FC(')-5 b(s)25 b(\223impure\224)g
(constructs.)33 b(The)26 b Fv(AO)t(I)f FC(format)g(is)f(critical)h(in)f
(order)h(for)f(Flick)g(to)g(pro)o(vide)i(a)d(lar)n(ge,)i(reusable)0
430 y(infrastructure)31 b(for)d(presentation)j(generation,)f(the)e
(second)h(stage)f(of)h Fv(I)t(D)t(L)i FC(compilation.)42
b(The)27 b(common)h(presentation)0 543 y(generator)c(library)e(is)f
(designed)j(to)d(read)g(and)h(process)j Fv(AO)t(I)e FC(descriptions.)31
b(Since)22 b(Flick')-5 b(s)23 b Fv(M)t(I)t(G)h FC(front)e(end)f(does)h
(not)g(pro-)0 656 y(duce)27 b Fv(AO)t(I)r FC(,)d(it)g(cannot)h
(directly)h(bene\002t)f(from)f(Flick')-5 b(s)25 b(common)f
(presentation)k(generation)f(library)-6 b(,)25 b(and)g(therefore,)h
(the)2 769 y Fv(M)t(I)t(G)j FC(front)e(end)g(has)g(its)f(o)n(wn,)h
(mostly)g(separate)h(infrastructure)j(for)26 b(producing)32
b Fv(P)t(R)t(E)t(S)p 2834 769 28 4 v 39 w(C)r FC(.)37
b(This)26 b(duplication)k(of)c(ef)n(fort)0 882 y(could)i(be)f(greatly)h
(reduced)h(if)d(it)h(were)f(possible)j(to)e(di)n(vide)h(the)f(current)j
Fv(M)t(I)t(G)f FC(front)f(end)f(into)g(tw)o(o)g(programs:)37
b(a)26 b(front)0 995 y(end)d(producing)j(some)d(sort)g(of)g(annotated)k
Fv(AO)t(I)r FC(,)c(and)g(a)g(separate)h(presentation)j(generator)e
(\(based)f(on)f(Flick')-5 b(s)24 b(common)0 1108 y(library\))j(that)g
(read)f(and)g(processed)i(the)e(annotations.)39 b(An)25
b(annotatable)30 b Fv(AO)t(I)e FC(format)e(w)o(ould)g(also)h(be)e
(useful)i(for)f(other)0 1220 y(purposes,)g(such)e(as)f(attaching)j
(quality-of-service)j(attrib)n(utes)e(to)c(normally)i(\223pure\224)i
Fv(C)t(O)t(R)t(B)r(A)d FC(interf)o(ace)i(descriptions.)p
eop
%%Page: 178 178
178 177 bop 0 -165 a FC(178)2609 b Fx(CHAPTER)20 b(10.)52
b(FR)l(ONT)21 b(ENDS)p eop
%%Page: 179 179
179 178 bop 0 715 a Fw(Chapter)44 b(11)0 1131 y FB(Pr)l(esentation)52
b(Generators)0 1577 y FC(Presentation)30 b(generation)g(is)e(an)f
(intermediate)j(stage)f(of)e(the)h(Flick)h Fv(I)t(D)t(L)i
FC(compiler)d(process.)43 b(Presentation)30 b(generator)0
1690 y(modules)24 b(\(typically\))h(tak)o(e)e(as)g(input)g(an)h
Fv(AO)t(I)h FC(interf)o(ace)g(representation,)h(and)d(output)h(an)e
(interf)o(ace)j(representation)i(that)0 1803 y(is)h(speci\002c)h(to)f
(a)g(programming)j(language.)45 b(The)28 b(output)i(also)e(speci\002es)
i(a)e(def)o(ault)i(presentation)i(\(see)c(Section)i(11.1\))0
1916 y(for)d(stubs)g(and)h(data)f(types.)39 b(This)26
b(chapter)i(e)o(xplains)h(the)e(Flick)f(presentation)31
b(generation)e(system)e(in)g(detail)h(for)e(the)h(C)0
2029 y(and)d(C++)f(languages.)141 2143 y(The)34 b(translation)j(from)g
Fv(AO)t(I)f FC(to)g Fv(P)t(R)t(E)t(S)p 1414 2143 28 4
v 40 w(C)f FC(mo)o(v)o(es)f(the)h(interf)o(ace)i(representation)h(to)n
(w)o(ard)d(stub)g(code)g(generation)0 2255 y(by)29 b(introducing)k(a)c
(message)h(format)g(\()r Fv(M)t(I)t(N)t(T)r FC(\))g(and)g(a)f
(language-speci\002c)k(representation)h(\()r Fv(C)t(A)t(S)t(T)r
FC(\))d(of)e(data)g(types)i(and)0 2368 y(functions)26
b(in)e(the)g(interf)o(ace.)32 b(As)23 b(described)j(in)e(Chapter)g(7,)i
Fv(P)t(R)t(E)t(S)p 2143 2368 V 39 w(C)f FC(structures)h(contain)i
Fv(M)t(I)t(N)t(T)f FC(and)f Fv(C)t(A)t(S)t(T)h FC(structures.)0
2481 y(Utilizing)e(these)i Fv(M)t(I)t(N)t(T)f FC(and)g
Fv(C)t(A)t(S)t(T)h FC(structures)f(is)d(a)g(third)i(part)f(of)h
Fv(P)t(R)t(E)t(S)p 2336 2481 V 40 w(C)r FC(,)d(an)i(array)g(of)g(stub)g
(de\002nitions.)0 2780 y Ft(11.1)119 b(Pr)n(esentation)30
b(of)f(an)h(Interface)0 2988 y FC(The)20 b Fu(pr)m(esentation)j
FC(of)d(an)g(interf)o(ace)i(encompasses)h(e)n(v)o(erything)f(the)e
(application)k(programmer)d(must)f(kno)n(w)g(to)g(program)0
3101 y(to)i(and)g(implement)h(the)f(interf)o(ace.)30
b(This)22 b(includes)i(the)e(stub)h(signatures,)h(data)f(type)f(names)h
(and)f(structure)i(\(if)e(transpar)n(-)0 3214 y(ent\),)g(and)f
(specialized)j(support)e(functions)i(directly)e(related)h(to)d(the)h
(interf)o(ace.)30 b(This)21 b(also)g(includes)i(an)o(y)e(semantics)i
(that)0 3327 y(may)h(be)g(associated)j(with)d(passing)i(v)n(alues)f(in)
f(the)g(system)h(\(by)g(reference)h(or)e(v)n(alue\),)h(runtime)g
(routines)h(for)f(initializa-)0 3440 y(tion/destruction)g(of)20
b(the)g(data)h(types,)g(and)g(when/where/ho)n(w)h(allocation)g(and)f
(deallocation)i(is)d(e)o(xpected)i(to)e(tak)o(e)g(place.)0
3553 y(The)i(presentation)27 b(generator)e(is)e(responsible)j(for)d
(completely)i(describing)h(these)d(requirements)j(without)e(dictating)h
(an)0 3666 y(implementation)j(for)c(them.)32 b(The)25
b(implementation)i(is)e(left)g(to)f(the)h(back)g(end)h(which)f(tak)o
(es)g(into)h(account)g(the)f(message)0 3779 y(encoding,)h(link-layer)g
(details,)f(and)f(the)g(tar)n(get)h(runtime')-5 b(s)25
b(API.)0 4034 y FA(11.1.1)99 b(Standard)26 b(RPC)f(Pr)n(esentation)0
4210 y FC(The)g(typical)k Fv(R)t(P)t(C)e FC(presentation)h(follo)n(ws)e
(a)f(general)i(pattern,)g(re)o(gardless)g(of)e(the)g(speci\002c)h
(presentation.)38 b(This)25 b(pattern)0 4323 y(is)e(a)g(set)g(of)g
(automatically-generat)q(ed)29 b(stubs)24 b(that)g(e)o(x)o(ecute)g
(communication)i(between)e(a)e(client)j(program)f(and)g(a)e(serv)o(er)0
4436 y(program.)36 b(Each)25 b(operation)j(includes)g(a)d(request,)j
(or)d(message)i(sent)f(by)f(the)h(client)h(to)e(the)h(serv)o(er)h(with)
e(an)o(y)h(data)g(to)f(be)0 4549 y(acted)30 b(upon,)i(and)e(a)f(reply)
-6 b(,)32 b(or)d(message)i(sent)f(by)g(the)f(serv)o(er)i(back)f(to)f
(the)h(client)h(with)e(an)o(y)h(data)g(that)g(resulted)h(from)0
4662 y(the)g(action)g(performed.)51 b(There)31 b(is)f(almost)h(al)o(w)o
(ays)g(some)g(sort)g(of)f(object)i(model,)g(where)e(the)h(operations)i
(belong)f(to)0 4774 y(a)27 b(speci\002c)i(object)g(\(or)g(serv)o(er)f
(entity\),)j(and)d(the)o(y)g(are)g(in)l(v)n(ok)o(ed)j(as)d(methods)h
(on)f(an)g(object)h(instance)h(\(via)e(a)g(reference)0
4887 y(to)e(the)h(object)g(instance\).)40 b(These)26
b(object)i(references)h(contain)f(the)f(information)i(necessary)f(for)f
(the)f(runtime)i(to)e(direct)0 5000 y(messages)f(to)f(the)f
(appropriate)k(object)e(for)f(in)l(v)n(ocation.)141 5114
y(In)g(general,)h(there)f(are)g(four)g(major)g(types)g(of)g(parameters)
h(that)f(may)g(be)f(a)g(part)h(of)g(the)g(request)h(or)e(reply)i
(messages.)0 5227 y(Note)30 b(that)h(not)g(all)f(presentation)k(use)d
(all)f(of)g(these)i(major)e(parameter)i(types.)51 b(The)29
b(follo)n(wing)j(list)f(brie\003y)g(describes)0 5340
y(each)24 b(type.)1882 5568 y(179)p eop
%%Page: 180 180
180 179 bop 0 -165 a FC(180)1893 b Fx(CHAPTER)20 b(11.)52
b(PRESENT)-8 b(A)e(TION)18 b(GENERA)-10 b(T)n(ORS)136
91 y Fs(\017)46 b FC(IN)29 b(-)f(Describes)j(a)e(parameter)h(that)g(is)
f(sent)h(in)f(the)g(request)i(message)g(from)e(the)g(client)i(to)e(the)
g(serv)o(er)h(for)g(pro-)227 204 y(cessing.)136 402 y
Fs(\017)46 b FC(OUT)22 b(-)i(Describes)h(a)f(parameter)h(that)g(is)f
(sent)g(in)g(the)g(reply)h(message)g(from)f(the)h(serv)o(er)f(to)g(the)
g(client)i(as)d(a)h(result)227 515 y(of)g(processing.)136
713 y Fs(\017)46 b FC(INOUT)22 b(-)h(Describes)i(a)e(single)i
(parameter)g(whose)f(data)g(is)f(sent)h(in)g(the)g(request)h(to)e(the)h
(serv)o(er)l(,)h(and)f(whose)g(data)227 826 y(is)g(o)o(v)o(erwritten)h
(with)e(data)h(from)g(the)g(reply)g(message)h(from)e(the)h(serv)o(er)-5
b(.)136 1024 y Fs(\017)46 b FC(RETURN)30 b(-)j(Describes)i(the)e
(return)i(v)n(alue)f(of)f(an)g(operation,)38 b(sent)c(in)f(the)g(reply)
i(message)f(from)f(the)h(serv)o(er)-5 b(.)227 1137 y(This)26
b(is)g(similar)h(to)f(an)h(OUT)d(parameter)l(,)k(e)o(xcept)g(for)e(the)
h(semantic)g(distinction:)38 b(it)26 b(is)g(the)g(return)i(v)n(alue)f
(of)f(the)227 1250 y(operation)g(rather)f(than)f(a)f(formal)i
(parameter)-5 b(.)141 1475 y(In)24 b(addition)j(to)d(the)g(major)h
(types)g(of)f(parameters,)i(there)f(are)f(a)g(set)g(of)h(communication)
h(stubs)g(produced)g(for)f(e)n(v)o(ery)0 1588 y(function)h(declared)f
(in)f(the)g(input)i Fv(I)t(D)t(L)h FC(\002le.)h(These)c(include:)136
1813 y Fs(\017)46 b Fu(Client)29 b(stubs)h FC(to)e(marshal)i(the)f
(request,)i(send)e(it)f(to)h(the)g(tar)n(get)h(object,)g(w)o(ait)f(for)
g(a)f(reply)-6 b(,)30 b(and)f(unmarshal)i(into)227 1926
y(the)24 b(out)g(parameters)i(and)e(return)g(v)n(alue.)136
2124 y Fs(\017)46 b Fu(Server)29 b(sk)o(eletons)h FC(to)d(demultiple)o
(x)j(a)c(message)j(on)e(the)h(serv)o(er)g(side,)h(unmarshal)g(the)f
(request,)h(dispatch)h(to)d(the)227 2237 y(w)o(ork)d(function,)h(and)f
(marshal)h(and)f(send)g(the)g(reply)h(to)e(the)h(client.)136
2435 y Fs(\017)46 b Fu(Mar)o(shaling)32 b(stubs)e FC(to)f(marshal)i
(speci\002c)f(data)g(types)g(into)g(the)f(message)i(stream.)46
b(These)29 b(are)h(only)g(generated)227 2548 y(and)20
b(called)h(from)e(client)i(stubs)g(and)f(serv)o(er)g(sk)o(eletons)i(if)
d(the)h(code)g(cannot)i(be)d(directly)i(inlined)h(\(e.g.,)d(a)g
(recursi)n(v)o(e)227 2661 y(data)24 b(type\).)136 2859
y Fs(\017)46 b Fu(Unmar)o(shaling)31 b(stubs)e FC(to)f(unmarshal)i
(speci\002c)f(data)g(types)g(from)f(a)f(message)i(stream.)43
b(Again,)29 b(these)g(are)f(only)227 2972 y(generated)e(and)e(called)h
(when)f(their)g(code)h(cannot)g(be)e(inlined)i(directly)-6
b(.)141 3197 y(In)27 b(addition)i(to)d(these)i(generated)h(functions,)h
(there)d(are)g(prototypes)j(generated)f(for)e(the)g Fu(work)f
(functions)k FC(that)d(im-)0 3310 y(plement)e(the)e(operations)k
(de\002ned)d(in)g(the)i Fv(I)t(D)t(L)r FC(.)0 3575 y
FA(11.1.2)99 b(Decomposed)25 b(Stubs)h(Pr)n(esentation)0
3754 y FC(Some)e(w)o(ork)g(has)h(been)h(done)f(on)g(specializing)j
(Flick)d(to)f(generate)j(non-traditional)i(communication)e(stubs)f(for)
e(a)h(spe-)0 3867 y(ci\002c)i(class)i(of)e(distrib)n(uted)k
(applications.)44 b(These)28 b(stubs)g(re\003ect)g(a)f(message-passing)
32 b(methodology)e(rather)f(than)h Fv(R)t(P)t(C)0 3980
y FC(or)i Fv(R)t(M)t(I)r FC(,)f(ho)n(we)n(v)o(er)f(the)o(y)h(still)f
(ha)n(v)o(e)h(notions)g(of)f(requests)i(and)e(replies.)50
b(W)-7 b(e)29 b(call)h(them)g(\223decomposed\224)j(because)f(we)0
4093 y(ha)n(v)o(e)27 b(split)h(apart)f(the)g(separate)i(main)e(tasks)g
(of)g(a)f(typical)31 b Fv(R)t(P)t(C)d FC(stub)g(into)f(their)h(o)n(wn)e
(stubs,)i(namely)f(marshaling,)j(un-)0 4206 y(marshaling,)25
b(sending,)g(and)e(recei)n(ving.)30 b(Note)23 b(that)h(while)f(the)g
(presentation)j(of)d(these)g(stubs)h(is)f(signi\002cantly)j(dif)n
(ferent,)0 4319 y(the)k(de\002nition)h(of)f(the)f(interf)o(aces)k(and)c
(operations)k(\(e.g.,)f Fv(C)t(O)t(R)t(B)r(A)h(I)t(D)t(L)r
FC(\))d(has)g(not)g(been)g(modi\002ed.)48 b(W)-7 b(e)28
b(can)i(produce)0 4432 y(either)25 b(re)o(gular)i Fv(R)t(P)t(C)e
FC(stubs)g(or)e(our)h(decomposed)i(stubs)f(from)e(a)h(single)g
Fy(.IDL)e FC(\002le.)141 4547 y(By)27 b(decomposing)k(the)d(separate)i
(tasks)e(of)g(an)i Fv(R)t(P)t(C)f FC(call,)g(we)e(gain)h(\002ner)g
(grain)h(control)g(o)o(v)o(er)f(when)g(and)g(ho)n(w)f(the)0
4660 y(system)g(creates)g(and)g(e)o(xchanges)h(messages.)38
b(F)o(or)25 b(e)o(xample,)j(one)e(could)h(construct)i(a)c(single)j
(message)f(and)g(send)f(it)g(to)0 4773 y(multiple)h(serv)o(ers)g
(without)g(paying)h(for)e(the)g(marshaling)i(cost)f(multiple)g(times.)
36 b(Further)l(,)27 b(when)f(a)g(message)h(is)f(sent,)g(it)0
4886 y(is)g(not)g(necessary)i(to)e(idly)h(w)o(ait)e(for)h(its)g(reply)h
(\(thus)g(allo)n(wing)g(for)f(asynchronous)k(communications\).)39
b(Messages)28 b(can)0 4999 y(be)23 b(forw)o(arded)i(\(by)e(resending)i
(them\))e(to)g(another)i(serv)o(er)f(without)f(paying)i(the)e(cost)h
(of)e(decoding)k(and)d(reencoding)j(the)0 5112 y(message)e(contents.)30
b(Finally)-6 b(,)24 b(the)e(handling)j(of)e(a)f(recei)n(v)o(ed)i
(message)f(\(on)g(either)h(side\))f(can)g(be)g(postponed)i(until)e(a)f
(later)0 5225 y(time)h(\(e.g.,)g(if)h(other)g(data)g(is)g(not)g(yet)f
(a)n(v)n(ailable\).)141 5340 y(The)g(decomposed)j(stubs)f(presentation)
i(generates)f(the)e(follo)n(wing)h(types)g(of)e(communication)j(stubs:)
p eop
%%Page: 181 181
181 180 bop 0 -165 a Fx(11.2.)52 b(A)-5 b(OI)22 b(T)n(O)g(PRES)p
778 -165 28 4 v 31 w(C)h(TRANSLA)-10 b(TION)2246 b FC(181)136
91 y Fs(\017)46 b Fu(Messa)o(g)o(e)27 b(mar)o(shaling)h(stubs)f
FC(to)f(marshal)g(an)g(entire)h(message)f(for)g(an)g(operation.)37
b(T)-7 b(w)o(o)24 b(are)i(generated:)36 b(one)26 b(to)227
204 y(marshal)g(the)f(request,)i(and)e(one)h(to)f(marshal)g(the)h
(reply)-6 b(.)34 b(The)o(y)24 b(tak)o(e)i(the)f(operations)j
(parameters)f(and)e(return)h(an)227 317 y(opaque)g(marshaled)f(message)
g(that)f(can)g(later)g(be)f(sent.)136 502 y Fs(\017)46
b Fu(Messa)o(g)o(e)32 b(unmar)o(shaling)j(stubs)c FC(to)g(unmarshal)i
(an)e(entire)g(message)h(for)f(an)g(operation.)53 b(T)-7
b(w)o(o)29 b(are)i(generated:)227 615 y(one)d(to)f(unmarshal)i(the)f
(request,)h(and)f(one)g(to)f(unmarshal)i(the)f(reply)-6
b(.)41 b(These)27 b(tak)o(e)h(a)f(marshaled)i(message)f(as)g(a)227
728 y(parameter)l(,)e(and)e(unmarshal)h(it)e(into)h(the)g(appropriate)j
(parameter)e(set)f(de\002ned)g(by)g(the)g(operation.)136
913 y Fs(\017)46 b Fu(Send)21 b(stubs)g FC(to)f(send)h(a)e(message)j
(to)d(an)h(appropriate)k(destination.)30 b(T)-7 b(w)o(o)19
b(are)h(generated:)30 b(one)21 b(to)e(send)i(the)f(request)227
1025 y(message)26 b(to)e(a)g(serv)o(er)l(,)i(and)f(one)g(to)f(send)h
(the)g(reply)g(message)h(to)e(the)h(client.)33 b(Both)24
b(tak)o(e)h(the)g(tar)n(get)h(reference,)h(a)227 1138
y(marshaled)f(message)e(to)g(be)f(sent,)h(an)g(in)l(v)n(ocation)j
(identi\002er)l(,)e(and)f(the)g(client)h(reference.)136
1323 y Fs(\017)46 b Fu(Continuation)27 b(stubs)e FC(to)e(postpone)j
(computation)g(for)e(a)f(recei)n(v)o(ed)i(message.)30
b(T)-7 b(w)o(o)22 b(are)i(generated:)32 b(one)24 b(to)f(setup)227
1436 y(a)f(request)h(to)f(be)f(continued,)k(and)d(one)g(to)g(setup)g(a)
g(reply)g(to)g(be)g(continued.)31 b(One)21 b(can)h(think)h(of)e(these)i
(as)f(a)f(type)h(of)227 1549 y(send-to-self)31 b(stub,)e(e)o(xcept)g
(that)f(the)g(application)j(has)c(control)j(o)o(v)o(er)d(when)h(the)g
(system)g(\223notices\224)i(it)d(has)h(been)227 1662
y(\223recei)n(v)o(ed\224)23 b(\(again\).)29 b(These)21
b(stubs)g(also)h(allo)n(w)e(the)h(application)j(to)c(sa)n(v)o(e)h
(arbitrary)i(state)e(with)g(the)g(continuation.)227 1775
y(The)30 b(parameters)i(are)e(the)g(same)g(as)g(those)h(for)g(a)e(send)
i(stub,)h(with)e(the)g(addition)i(of)e(a)g Fy(void)46
b(*)29 b FC(pointer)j(to)e(the)227 1888 y(state)25 b(to)e(sa)n(v)o(e.)
136 2073 y Fs(\017)46 b Fu(Mar)o(shaling)26 b(stubs)f
FC(and)f Fu(unmar)o(shaling)j(stubs)e FC(are)e(generated)j(as)e(in)f
(the)h(standard)i(presentation.)141 2277 y(As)34 b(in)g(the)g(def)o
(ault)i(presentation,)k(there)35 b(are)g(prototypes)i(generated)g(for)d
(the)g Fu(work)h(functions)h FC(that)f(implement)0 2390
y(the)27 b(operations)i(described)g(in)e(the)h Fv(I)t(D)t(L)r
FC(.)39 b(The)26 b(prototypes)k(are)c(signi\002cantly)j(dif)n(ferent,)g
(ho)n(we)n(v)o(er)l(,)f(in)e(that)i(the)o(y)e(tak)o(e)i(a)0
2502 y(marshaled)f(message)g(rather)f(than)g(the)g(unmarshaled)i
(parameters.)36 b(This)25 b(allo)n(ws)h(the)f(application)k(control)e
(o)o(v)o(er)e(when)0 2615 y(\(or)g(e)n(v)o(en)h(if\))f(the)h(message)g
(is)f(unmarshaled.)37 b(Another)26 b(dif)n(ference)h(is)e(that)h(w)o
(ork)g(function)h(prototypes)h(are)e(generated)0 2728
y(for)37 b Fu(r)m(eplies)h FC(\(on)g(the)f(client)h(side\))g(in)f
(addition)i(to)d(the)i(e)o(xpected)g(ones)g(for)f(requests)i(\(on)f
(the)f(serv)o(er)h(side\).)69 b(This)0 2841 y(completes)26
b(the)f(symmetric)h(handling)g(of)f(requests)h(and)f(replies)h(on)f
(each)g(side)g(of)g(communication)i(\(thus)f(the)e(relation)0
2954 y(to)f(message-passing)28 b(v)o(ersus)d(standard)j
Fv(R)t(P)t(C)r FC(\))23 b(and)h(allo)n(ws)g(for)g(complete)h
(asynchronous)j(communication.)3520 2921 y Fr(1)141 3067
y FC(The)g(decomposed)j(stub)e(presentation)j(is)c(currently)j(only)e
(supported)i(in)d(the)j Fv(C)t(O)t(R)t(B)r(A)e FC(C)e(presentation)32
b(generator)0 3180 y(and)22 b(the)h Fv(I)t(I)t(O)t(P)i
FC(back)d(end)g(and)f(runtime.)29 b(The)21 b(Khazana)i(runtime,)f(when)
f(\002nished,)i(will)e(fully)h(support)h(the)f(decomposed)0
3293 y(presentation)40 b(as)c(well.)66 b(Support)37 b(e)o(xists)h(\(in)
e(f)o(act,)k(much)c(is)g(implemented\))i(in)e(the)h(main)f
(presentation)k(generator)0 3406 y(library)-6 b(,)24
b(b)n(ut)f(the)g(presentation)j(itself)e(w)o(as)e(a)g(modi\002cation)j
(of)d(the)h(C)e(mapping)j(for)h Fv(C)t(O)t(R)t(B)r(A)r
FC(,)c(and)i(thus)g(w)o(as)g(not)g(carried)0 3519 y(into)33
b(other)h(presentations.)60 b(T)-7 b(o)32 b(try)g(them)h(out,)i(issue)f
(the)f(command-line)i(option)f(\223-a\224)f(\(for)g(asynchronous\))k
(to)c(the)0 3632 y(presentation)27 b(generator)-5 b(.)141
3744 y(Finally)f(,)22 b(it)f(w)o(as)g(intended)i(that)f(the)f
(resulting)i(stubs)g(for)e(the)g(decomposed)j(stubs)e(presentation)i
(be)e(compatible)h(and)0 3857 y(interchangeable)i(with)20
b(the)g(standard)25 b Fv(C)t(O)t(R)t(B)r(A)c FC(presentation)j(stubs.)k
(Unfortunately)-6 b(,)24 b(our)d(goal)g(could)g(not)g(be)f(fully)h
(met,)0 3970 y(as)26 b(the)g(decomposed)i(stubs)f(required)g(some)f
(additional)j(information)f(be)d(sent)i(in)e(both)i(request)g(and)f
(reply)h(messages,)0 4083 y(and)e(the)g(communication)j(model)d(is)f
(slightly)j(dif)n(ferent)f(\(the)g(serv)o(er)f(contacts)i(the)e(client)
h(to)e(send)i(the)f(reply)g(message,)0 4196 y(rather)j(than)g(replying)
h(on)f(the)f(communication)j(sock)o(et)f(initiated)g(by)e(the)h
(client.)40 b(A)26 b(suf)n(\002ciently)j(intelligent)h(runtime)0
4309 y(system)20 b(w)o(ould)f(iron)h(out)f(the)g(details)h(and)g(allo)n
(w)f(a)f(standard/decomposed)25 b(stub)20 b(mismatch)f(between)h
(client)g(and)g(serv)o(er)-5 b(.)0 4600 y Ft(11.2)119
b(A)-5 b(OI)29 b(to)h(PRES)p 1021 4600 36 4 v 43 w(C)g(T)-9
b(ranslation)0 4807 y FC(The)24 b(process)i(of)f(translating)k
Fv(AO)t(I)e FC(to)f Fv(P)t(R)t(E)t(S)p 1419 4807 28 4
v 39 w(C)g FC(in)l(v)n(olv)o(es)h(the)e(generation)i(of)g
Fv(M)t(I)t(N)t(T)r FC(,)g Fv(C)t(A)t(S)t(T)h FC(and)d(stub)g
(de\002nitions.)33 b(This)0 4920 y(section)24 b(discusses)g(these)f
(data)f(translation)j(steps)e(in)e(more)h(detail.)29
b(F)o(or)21 b(detailed)j(information)g(re)o(garding)g(the)e(structure)p
0 4979 1560 4 v 105 5034 a Fq(1)134 5066 y Fp(Although)29
b(the)f(presentation)h(allo)n(ws)f(for)f(complete)i(asynchron)o(y)-5
b(,)31 b(the)d(runtime)g(system)g(thus)g(f)o(ar)g(de)n(v)o(eloped)i
(only)e(supports)h(a)e(polling)0 5157 y(interf)o(ace)19
b(for)f(handling)h(operation)g(replies.)k(T)-6 b(o)18
b(gain)h(full)e(asynchron)o(y)-5 b(,)21 b(it)c(w)o(ould)i(be)g
(necessary)g(to)f(ha)o(v)o(e)h(a)f(separate)h(thread)f(w)o(aiting)h
(for)f(replies)0 5249 y(to)k(be)g(recei)n(v)o(ed)h(\(much)g(as)f(the)h
(serv)o(er)f(w)o(aits)g(for)g(requests\),)h(or)f(at)g(least)g(suf)n
(\002ciently)g(frequent)h(hooks)g(into)f(the)h(runtime)f(to)g(allo)n(w)
g(for)g(prompt)0 5340 y(detection)e(and)f(dispatch)h(of)f(reply)g
(messages.)p eop
%%Page: 182 182
182 181 bop 0 -165 a FC(182)1893 b Fx(CHAPTER)20 b(11.)52
b(PRESENT)-8 b(A)e(TION)18 b(GENERA)-10 b(T)n(ORS)0 91
y FC(of)23 b(the)h(internal)i(representations)i(themselv)o(es,)d(see)f
(their)g(respecti)n(v)o(e)i(chapters)f(in)f(this)g(guide.)0
370 y FA(11.2.1)99 b(Ov)o(er)o(view)24 b(of)h(the)h(T)-7
b(ranslation)24 b(Algorithm)0 555 y FC(T)m(ranslation)36
b(of)f Fv(AO)t(I)h FC(to)g Fv(P)t(R)t(E)t(S)p 1022 555
28 4 v 39 w(C)f FC(in)l(v)n(olv)o(es)h(the)e(translation)j(of)d(each)g
(element)h(of)e Fy(aoi.defs<)t(>)t FC(,)g(the)h(sequence)i(of)2
667 y Fv(AO)t(I)d FC(de\002nitions.)53 b(This)31 b(is)f(accomplished)k
(in)d(tw)o(o)g(main)g(stages.)52 b(The)31 b(\002rst)f(stage)i(is)f(b)n
(uilding)i(the)g Fv(M)t(I)t(N)t(T)r FC(.)52 b(The)31
b(PG)0 780 y(starts)e(by)e(creating)j(a)d(list)h(of)g(\223primiti)n(v)o
(e\224)j Fv(M)t(I)t(N)t(T)g FC(de\002nitions,)f(corresponding)i(to)c
(the)f(primiti)n(v)o(e)i(types)g(supported)h(by)0 893
y(the)i(presentation)i(\(those)f(that)f(are)f(e)o(xpected)i(to)e(e)o
(xist)h(without)g(being)h(de\002ned,)g(such)f(as)g(\223int\224)g(or)f
(\223\003oat\224\).)52 b(It)31 b(then)0 1006 y(mak)o(es)22
b(an)f(optional)i(initial)g(\223preprocess\224)i(of)c(the)i
Fv(AO)t(I)r FC(,)f(possibly)h(translating)h(or)e(modifying)h
(information)g(to)f(mak)o(e)f(the)2 1119 y Fv(P)t(R)t(E)t(S)p
194 1119 V 39 w(C)k FC(con)l(v)o(ersion)h(easier)e(or)f(more)g
(straightforw)o(ard.)33 b(F)o(or)22 b(e)o(xample,)k Fv(C)t(O)t(R)t(B)r
(A)r FC(')-5 b(s)22 b(interf)o(ace)k(attrib)n(utes)f(are)f(presented)0
1232 y(as)j(accessor)h(functions,)i(so)d(the)g(preprocess)j(phase)e(in)
e(the)j Fv(C)t(O)t(R)t(B)r(A)f FC(PGs)d(translate)k(these)f(attrib)n
(utes)h(into)f(operations,)0 1345 y(so)f(the)h(second)h(stage)f(can)f
(do)h(the)f(ob)o(vious)i(translation)i(on)c(an)g(operation.)43
b(Finally)-6 b(,)28 b(it)f(tra)n(v)o(erses)j(the)d(entire)k
Fv(AO)t(I)e FC(tree)0 1458 y(making)24 b(a)g(one-to-one)i(translation)h
(of)c(the)j Fv(AO)t(I)f FC(de\002nitions)h(into)e(their)j
Fv(M)t(I)t(N)t(T)f FC(counterparts.)141 1576 y(The)h(second)h(stage)g
(requires)h(b)n(uilding)h(the)d(necessary)32 b Fv(C)t(A)t(S)t(T)e
FC(and)d(linking)i(it)e(to)g(the)i Fv(M)t(I)t(N)t(T)h
FC(through)f(the)h Fv(P)t(R)t(E)t(S)p 3817 1576 V 39
w(C)0 1689 y FC(structures.)35 b(This)24 b(is)h(\(broadly\))i(the)e
(function)i(of)e Fy(pg_state::gen)p FC(.)j(First,)c(the)j
Fv(C)t(A)t(S)t(T)h FC(is)d(initialized)i(similar)f(to)g
Fv(M)t(I)t(N)t(T)0 1802 y FC(with)34 b(the)h(primiti)n(v)o(e)h
(de\002nitions)h(that)e(are)g(e)o(xpected)h(to)f(e)o(xist)g(by)g(def)o
(ault)h(in)f(the)g(presentation.)65 b(Second,)38 b(the)f
Fv(AO)t(I)0 1914 y FC(de\002nitions)26 b(are)d(w)o(alk)o(ed,)i(b)n
(uilding)h(the)f Fv(P)t(R)t(E)t(S)p 1498 1914 V 40 w(C)g
FC(de\002nitions)g(hierarchically)-6 b(.)141 2032 y(The)30
b Fv(P)t(R)t(E)t(S)p 504 2032 V 39 w(C)f FC(de\002nitions)h(generated)g
(are)e(speci\002c)h(to)f(either)h(the)f(client)h(or)f(serv)o(er)g(side)
h(of)f(the)g(communication,)0 2145 y(based)35 b(on)f(parameters)h(gi)n
(v)o(en)f(to)g(the)g(presentation)j(generator)-5 b(.)61
b(Currently)36 b(the)d(infrastructure)38 b(is)33 b(not)h(suf)n
(\002cient)h(to)0 2258 y(generate)26 b(both)e(the)g(client)h(and)f
(serv)o(er)g(presentations)k(at)23 b(the)h(same)f(time.)29
b(Perhaps)24 b(this)h(is)e(a)g(future)i(direction)h(that)e(can)0
2371 y(be)g(e)o(xplored.)141 2489 y(Other)e(parameters)i(that)f(can)f
(pro)o(vide)i(information,)g(direction,)h(and)d(guidance)j(to)c(a)h(PG)
e(belong)k(to)e(the)g Fy(pg_flags)0 2602 y FC(class,)38
b(which)c(is)g(shared)i(by)e(all)g(presentation)k(generators.)64
b(These)34 b(include)i(the)f(\003ags)f(to)g(choose)i(client)f(or)f
(serv)o(er)0 2715 y(presentation)27 b(\(as)d(described)j(abo)o(v)o
(e\),)d(those)h(for)f(inhibiting)i(generation)h(of)d(inherited)i
(operations)h(\(for)d(when)g(the)o(y)g(are)0 2828 y(generated)33
b(separately\),)i(one)c(to)f(enable)i(the)e(use)h(of)g(security)h
(identi\002ers,)i(and)c(\002nally)h(one)g(to)f(enable)i(the)f
(\223decom-)0 2941 y(posed\224)d(stub)e(presentation)k(style.)37
b(In)26 b(addition)i(to)e(the)g Fy(pg_flags)p FC(,)e(there)j(is)f(a)f
(lar)n(ge)i(set)g(of)e(options)j(that)f(can)f(modify)0
3054 y(the)e(naming)g(con)l(v)o(ersion)j(between)e(the)g
Fv(I)t(D)t(L)i FC(and)d(the)g(generated)i(code.)0 3333
y FA(11.2.2)99 b(Naming)0 3517 y FC(One)25 b(of)h(the)g(dif)n(ferences)
i(between)f(presentations)j(is)25 b(the)h(names)g(assigned)i(to)e(data)
g(types)h(and)f(operations)j(de\002ned)d(in)0 3630 y(the)d
Fv(I)t(D)t(L)r FC(.)28 b(There)21 b(is)f(typically)j(a)d(well)g
(de\002ned)h(pattern)h(which)f(can)g(be)f(used)i(to)e(determine)i(the)f
(name)f(of)h(an)f(operation)j(or)0 3743 y(data)j(type)h(one)f(can)g
(use)h(in)e(the)h(implementation)j(from)d(that)g(described)i(in)e(the)i
Fv(I)t(D)t(L)h FC(speci\002cation.)38 b(F)o(or)25 b(e)o(xample,)i(the)2
3856 y Fv(C)t(O)t(R)t(B)r(A)20 b FC(C)f(mapping)h(dictates)i(that)e(a)f
(data)h(type)g Fy(bar)e FC(inside)j(of)e(an)h(interf)o(ace)h
Fy(foo)d FC(can)i(be)g(used)g(by)g(the)f(implementation)0
3968 y(as)g Fy(foo_bar)p FC(.)25 b(Under)20 b(the)i Fv(C)t(O)t(R)t(B)r
(A)e FC(C++)f(mapping,)i(this)f(becomes)h Fy(foo::bar)p
FC(.)j(Flick)c(has)g(a)f(relati)n(v)o(ely)i(simple)f(method)0
4081 y(of)j(describing)k(and)d(handling)i(these)e(name)g(con)l(v)o
(ersions,)j(v)o(ery)d(similar)g(to)f(C')-5 b(s)23 b Fy(printf)p
FC(:)k Fy(calc_name)p FC(.)141 4199 y(F)o(or)f(more)h(information)j(on)
d(ho)n(w)f(to)h(rede\002ne)h(or)f(de\002ne)h(ne)n(w)e
Fy(calc_name)e FC(mappings,)29 b(see)e(the)h(code)f(documen-)0
4312 y(tation)i(a)n(v)n(ailable)g(in)f Fy(mom/c/pfe.hh)23
b FC(and)28 b Fy(c/pfe/lib/p_calc_name.cc)o FC(.)34 b(The)27
b(def)o(ault)i(set)f(of)f(name)g(mappings)0 4425 y(can)d(be)f(found)h
(in)f Fy(c/pfe/lib/pg_state.cc)17 b FC(\(and)24 b(lik)o(e)n(wise)g(the)
g(sets)f(of)h(mappings)h(for)e(each)h(presentation)j(can)c(be)0
4538 y(found)i(in)e(the)h(presentation')-5 b(s)28 b Fy(.cc)22
b FC(\002le\).)0 4817 y FA(11.2.3)99 b(Operations)0 5001
y FC(Another)29 b(common)f(dif)n(ference)h(between)g(presentations)j
(is)27 b(the)h(mapping)h(from)e(the)h(IDL-de\002ned)g(operations)i(to)e
(the)0 5114 y(actual)20 b(functions)i(that)d(are)g(created)i(for)e(use)
g(by)g(the)i Fv(I)t(D)t(L)h FC(compiler)-5 b(.)29 b(In)18
b(general,)k(there)d(is)g(a)g(one-to-one)j(correspondence)0
5227 y(between)37 b(the)e(tw)o(o)h(sets;)42 b(ho)n(we)n(v)o(er)36
b(that)g(need)g(not)g(be)g(the)g(case)g(\(e.g.,)i(the)e(decomposed)i
(stubs)f(presentation\).)68 b(In)0 5340 y(addition,)22
b(there)d(are)g(often)h(\223special\224)h(parameters)g(that)e(need)h
(to)e(be)h(added)h(before)g(and/or)g(after)g(the)f(normal)g(parameters)
p eop
%%Page: 183 183
183 182 bop 0 -165 a Fx(11.2.)52 b(A)-5 b(OI)22 b(T)n(O)g(PRES)p
778 -165 28 4 v 31 w(C)h(TRANSLA)-10 b(TION)2246 b FC(183)0
91 y(gi)n(v)o(en)24 b(in)g(the)h Fv(I)t(D)t(L)i FC(\(e.g.,)e
Fv(C)t(O)t(R)t(B)r(A)r FC(')-5 b(s)23 b(object)i(reference)g(and)f(en)l
(vironment)j(parameters\).)k(These)24 b(dif)n(ferences)i(cannot)f(be)0
204 y(e)o(xpressed)h(solely)f(by)e(name)h(translation.)141
325 y(There)k(are)g(high-le)n(v)o(el)i(generation)h(functions)g(that)d
(allo)n(w)g(one)g(to)g(control)i(the)e(stubs)h(or)e(sk)o(eletons)k
(that)d(are)g(gen-)0 438 y(erated.)37 b Fy(p_client_stubs)21
b FC(handles)28 b(all)e(of)g(the)g(client-side)i(stubs)f(that)g(are)f
(to)f(be)h(generated.)38 b(F)o(or)25 b(the)i(decomposed)0
551 y(stubs,)37 b(this)e(is)e(modi\002ed)i(to)e(produce)j(a)d(request)j
(marshaler)g(and)e(reply)h(unmarshaler)h(for)e(e)n(v)o(ery)g
(operation,)39 b(rather)0 664 y(than)26 b(just)g(a)f(single)h(client)h
(stub)l(.)34 b Fy(p_skel)23 b FC(is)i(the)h(counterpart)i(that)e
(produces)h(a)e(sk)o(eleton,)j(or)d(dispatch)i(routine,)h(again)0
777 y(modi\002ed)33 b(for)g(the)g(decomposed)i(stubs)f(to)e(also)h
(produce)i(request)f(unmarshalers)i(and)d(reply)g(marshalers)i(for)e(e)
n(v)o(ery)0 890 y(operation)i(on)e(the)f(serv)o(er)i(side.)56
b(The)32 b(decomposed)j(presentation)h(also)d(uses)h
Fy(p_skel)c FC(to)i(generate)j(the)d(client-side)0 1003
y(dispatch)26 b(routine)f(for)f(replies.)141 1124 y(Other)33
b(high-le)n(v)o(el)j(generation)g(function)f(include)g
Fy(p_marshal_stub)29 b FC(and)k Fy(p_unmarshal_stub)28
b FC(to)33 b(generate)0 1237 y(marshal)f(and)f(unmarshal)h(functions)h
(for)e(a)f(speci\002c)i(data)f(type,)i(and)e Fy(p_server_func)26
b FC(to)31 b(generate)i(the)e(prototype)0 1349 y(for)24
b(a)g(serv)o(er)h(w)o(ork)f(function.)32 b(More)24 b(e)o(xist)g(that)h
(are)f(currently)j(speci\002c)d(to)g(the)h(decomposed)h(presentation,)i
(including)0 1462 y Fy(p_continue_stub)p FC(,)18 b Fy(p_send_stub)p
FC(,)i(and)k Fy(p_receive_func)p FC(.)141 1583 y(Each)37
b(of)g(the)g(high-le)n(v)o(el)i(functions)g(are)f(similar)f(in)g(that)g
(the)o(y)h(create)g(a)e(ne)n(w)g(stub)i(description)i(in)d(the)i
Fv(C)t(A)t(S)t(T)0 1696 y FC(and)31 b Fv(P)t(R)t(E)t(S)p
353 1696 V 40 w(C)f FC(\(simultaneously\))i(and)e(establish)h(the)e
(link)g(between)h(the)f(the)g(description)j(and)d(the)i
Fv(M)t(I)t(N)t(T)r FC(.)45 b(As)28 b(part)h(of)0 1809
y(creating)22 b(the)f(function)h(description,)i(one)c(of)g(the)h
Fy(process_*_params)15 b FC(functions)23 b(is)d(used)h(to)f(create)h
(and)g(handle)g(each)0 1922 y(parameter)k(of)f(the)g(function,)i
(including)g(special)f(parameters)h(\(ones)f(that)f(must)g(e)o(xist)g
(for)g(the)g(presentation)j(b)n(ut)d(do)g(not)0 2035
y(appear)e(e)o(xplicitly)g(in)e(the)j Fv(I)t(D)t(L)r
FC(\))e(such)g(as)f(the)h(object)g(reference)i(or)d(the)j
Fv(C)t(O)t(R)t(B)r(A)e FC(en)l(vironment.)30 b(From)20
b(there,)h(parameters)0 2148 y(are)j(handled)h(indi)n(vidually)i(by)d
Fy(p_param)p FC(,)c(and)k(dispatched)j(to)c(a)g(speci\002c)i(data)f
(type)g(presentation)j(via)d Fy(p_type)p FC(.)141 2269
y(Most)k(parameters)h(are)e(e)o(xplicit,)j(meaning)e(the)o(y)g(appear)h
(in)e(the)h(presentation.)43 b(Ho)n(we)n(v)o(er)l(,)28
b(there)g(are)g(some)f(cases)0 2382 y(where)h(a)g(parameter)h(is)f
(implicit,)i(meaning)f(it)f(may)g(be)g(constant)i(or)e(e)o(xist)g(at)g
(the)g(global)i(le)n(v)o(el,)f(b)n(ut)f(it)g(isn')n(t)h(a)f(formal)0
2495 y(parameter)38 b(to)f(the)g(stub)l(.)70 b(An)36
b(e)o(xample)i(of)f(this)g(is)g Fy(errno)d FC(in)j(the)i
Fv(O)t(N)t(C)h(R)t(P)t(C)f FC(presentation:)59 b(it)37
b(is)g(a)f(global)i(error)0 2608 y(property)23 b(that)f(must)f(be)h
(set)f(within)h(the)f(stub,)h(b)n(ut)g(from)f(the)h(standpoint)i(of)d
(the)h(stubs,)g(it)f(can)h(be)f(vie)n(wed)h(as)f(an)g(implicit)0
2721 y(parameter)-5 b(.)0 3018 y FA(11.2.4)99 b(Data)24
b(T)-7 b(ypes)26 b(and)f(T)-7 b(ype)25 b(Collections)0
3208 y FC(Data)30 b(types)h(are)f(generated)j(by)d(the)h
Fy(p_*_type)c FC(f)o(amily)k(of)f(functions,)k(some)c(of)g(which)g(may)
g(recursi)n(v)o(ely)j(call)d(each)0 3321 y(other)d(to)e(construct)j
(more)d(comple)o(x)i(types.)36 b(Each)25 b(operates)j(on)d(a)g
Fu(type)h(collection)j FC(that)d(potentially)i(holds)f(more)e(than)0
3434 y(a)e(single)h(\(def)o(ault\))j Fv(C)t(A)t(S)t(T)g
FC(and)e Fv(P)t(R)t(E)t(S)p 1210 3434 V 40 w(C)f FC(mapping)g(tree)g
(for)f(the)h(type.)29 b(This)23 b(is)g(particularly)j(necessary)g(for)d
(the)i Fv(C)t(O)t(R)t(B)r(A)0 3547 y FC(C++)h(presentation)k(that)d
(yields)h(multiple)f(presentation)j(types)e(from)e(a)g(single)k
Fv(I)t(D)t(L)g FC(type.)38 b(In)26 b(general,)j(ho)n(we)n(v)o(er)l(,)e
(only)0 3659 y(the)d(def)o(ault)h(type)f(is)g(used.)141
3780 y(F)o(ollo)n(wing)g(are)g(brief)g(descriptions)j(of)d(the)f
Fy(p_type_collection)c FC(and)24 b(related)h(interf)o(aces.)0
4074 y Fz(p)p 56 4074 V 32 w(type)p 254 4074 V 34 w(collection)0
4264 y Fy(void)47 b(set_id\(const)d(char)j(*id\),)j(const)d(char)f
(*get_id\(\))300 4377 y FC(Set/get)24 b(the)g(identi\002er)h(for)f
(this)i Fv(I)t(D)t(L)g FC(type.)k(Also)23 b(adds)i(the)e(\223id\224)i
(tag)e(to)h(the)g(tag)f(list.)0 4597 y Fy(void)47 b
(set_included\(inclusion)41 b(included\),)49 b(inclusion)d
(get_included\(\))300 4710 y FC(Set/get)26 b(the)f(inclusion)j(for)e
(this)f(collection,)j(this)e(is)f(then)h(passed)h(do)n(wn)e(to)g(be)g
(used)h(as)f(the)h(def)o(ault)h(for)e(other)300 4822
y(inclusions.)0 5001 y Fy(void)47 b(set_protection\(cast_def)o(_pro)o
(tec)o(tion)41 b(protection\),)49 b(cast_def_protection)0
5114 y(get_protection\(\))300 5227 y FC(Set/get)23 b(the)i
Fv(C)t(A)t(S)t(T)g FC(protection)g(for)e(this)f(collection,)j(this)e
(is)f(then)h(passed)h(do)n(wn)f(to)f(be)g(used)h(as)f(the)h(def)o(ault)
h(for)300 5340 y(other)h(protections.)p eop
%%Page: 184 184
184 183 bop 0 -165 a FC(184)1893 b Fx(CHAPTER)20 b(11.)52
b(PRESENT)-8 b(A)e(TION)18 b(GENERA)-10 b(T)n(ORS)0 91
y Fy(void)47 b(set_ref\(aoi_ref)c(ref\),)51 b(aoi_ref)46
b(get_ref\(\))300 204 y FC(Set/get)24 b(the)i Fv(AO)t(I)g
FC(reference)f(from)f(which)g(this)g(collection)i(w)o(as)d(created.)0
410 y Fy(void)47 b(set_attr_index\(int)42 b(idx\),)51
b(int)c(get_attr_index\(\))300 523 y FC(Set/get)24 b(the)g(inde)o(x)g
(used)h(to)e(\002nd)g(the)h Fy(tag_list)d FC(in)i(the)h(presentation)j
(attrib)n(utes.)0 729 y Fy(void)47 b(set_name\(const)d(char)i(*name\),)
k(const)c(char)h(*get_name\(\))300 842 y FC(Set/get)24
b(the)g(name)g(of)f(the)h(type.)0 1048 y Fy(void)47 b
(set_tag_list\(tag_list)42 b(*tl\),)50 b(tag_list)c(*get_tag_list\(\))
300 1161 y FC(Set/get)24 b(the)g Fy(tag_list)d FC(used)j(to)f(store)i
(an)o(y)f(type)g(information.)0 1345 y Fy(void)47 b
(set_collection_ref\(stru)o(ct)42 b(p_type_collection)h(*ptc\),)50
b(struct)c(p_type_collection)0 1458 y(*get_collection_ref\(\))300
1571 y FC(Set/get)24 b(the)g(collection)i(reference)g(for)e(this)g
(type.)0 1777 y Fy(void)47 b(define_types\(\))300 1890
y FC(De\002ne)23 b(all)h(of)f(the)h(types)h(in)e(the)h(collection.)0
2096 y Fy(struct)46 b(p_type_node)f(*find_type\(const)e(char)k(*name\))
300 2208 y FC(Find)23 b(a)h(type)g(with)f(the)h(gi)n(v)o(en)g(name.)0
2414 y Fy(struct)46 b(p_scope_node)f(*find_scope\(const)e(char)j
(*name\))300 2527 y FC(Find)23 b(a)h(scope)g(with)g(the)f(gi)n(v)o(en)i
(name.)0 2711 y Fy(struct)46 b(p_type_node)f(*add_type\(const)e(char)k
(*name,)j(struct)c(p_type_node)f(*ptn,)51 b(int)0 2824
y(add_to_tail)45 b(=)i(1,)52 b(int)46 b(add_to_ref)f(=)j(1\))300
2937 y FC(Add)25 b(a)f(type)i(to)f(the)g(collection)j(in)d(the)g(scope)
i(gi)n(v)o(en)e(by)g Fy(name)p FC(.)31 b(The)25 b Fy(add_to_tail)c
FC(\003ag)k(indicates)i(whether)300 3050 y(the)e(type)g(should)h(be)f
(added)g(to)g(the)g(head)g(or)f(tail)h(of)g(the)f(list)h(of)g(types,)g
(which)g(allo)n(ws)g(you)g(to)f(add)h(de\002nitions)300
3163 y(before)j(the)e(other)i(rest)e(will)g(be)h(de\002ned.)37
b(The)26 b Fy(add_to_ref)d FC(\003ag)j(indicates)j(whether)e(the)g
(type)g(should)h(also)300 3276 y(be)e(added)i(to)e(the)h(referenced)i
(collection,)g(which)e(allo)n(ws)f(you)h(to)f(add)h(types)g(that)g(are)
g(only)g(to)f(be)g(de\002ned)h(in)300 3389 y(the)d(referencer)i
(collection.)0 3595 y Fy(void)47 b(add_scope\(struct)c(p_scope_node)h
(*psn\))300 3708 y FC(Add)23 b(a)g(scope)i(to)f(the)f(collection.)0
3892 y Fy(static)46 b(p_type_collection)d(*find_collection\(struct)f
(dl_list)j(*list,)51 b(aoi_ref)45 b(ref\),)0 4004 y(static)h
(p_type_collection)d(*find_collection\(struct)f(dl_list)j(*list,)51
b(const)46 b(char)h(*name,)0 4117 y(cast_scope)e(*scope\))300
4230 y FC(Find)20 b(a)g(collection)j(in)d(a)f(link)o(ed)j(list)e(based)
i(on)e(its)i Fv(AO)t(I)g FC(reference)h(or)d(by)g(matching)h(the)g
(name)f(of)g(the)g(collection)300 4343 y(and)k(the)g(def)o(ault)j
Fv(C)t(A)t(S)t(T)g FC(scope.)0 4614 y Fz(p)p 56 4614
28 4 v 32 w(scope)p 299 4614 V 34 w(node)0 4797 y FC(The)36
b Fy(p_scope_node)c FC(class)38 b(is)e(used)h(with)f(the)h
Fy(p_type_collection)31 b FC(class)37 b(to)g(allo)n(w)f(type)h
(declarations)j(to)c(be)0 4910 y(separated)c(into)e(separate)h(C++)d
(scopes.)48 b(The)29 b(scope)h(node)g(holds)h(a)e(reference)i(to)e(the)
h Fy(cast_scope)25 b FC(and)30 b(the)g(list)f(of)0 5023
y(types)c(in)e(this)h(scope.)0 5227 y Fy(void)47 b
(set_collection\(p_type_c)o(olle)o(cti)o(on)42 b(*ptc\),)50
b(p_type_collection)43 b(*get_collection\(\))300 5340
y FC(Set/get)24 b(the)g(collection)i(that)e(holds)h(this)f(scope)h
(node.)p eop
%%Page: 185 185
185 184 bop 0 -165 a Fx(11.2.)52 b(A)-5 b(OI)22 b(T)n(O)g(PRES)p
778 -165 28 4 v 31 w(C)h(TRANSLA)-10 b(TION)2246 b FC(185)0
91 y Fy(void)47 b(set_name\(const)d(char)i(*name\),)k(const)c(char)h
(*get_name\(\))300 204 y FC(Set/get)24 b(the)g(semantic)h(name)f(of)f
(this)h(scope.)0 404 y Fy(void)47 b(set_prefix\(const)c(char)k
(*prefix\),)i(const)d(char)h(*get_prefix\(\))300 517
y FC(Set/get)28 b(the)g(pre\002x)g(string.)43 b(This)28
b(string)h(is)e(prepended)k(to)c(the)h(formatted)i(name)d(of)h(an)o(y)g
(types)h(if)e(this)h(is)g(the)300 630 y(root)c(scope.)30
b(Otherwise,)24 b(the)g(pre\002x)g(is)f(assumed)i(to)e(already)j(be)d
(a)g(part)h(of)g(the)g(scoped)h(name.)0 830 y Fy(void)47
b(set_scope_name\(cast_sco)o(ped_)o(nam)o(e)42 b(name\),)50
b(cast_scoped_name)43 b(get_scope_name\(\))300 943 y
FC(Set/get)24 b(the)g(actual)h(C/C++)e(name)g(of)h(this)g(scope.)0
1143 y Fy(void)47 b(set_scope\(cast_scope)42 b(*scope\),)50
b(cast_scope)45 b(*get_scope\(\))300 1256 y FC(Set/get)24
b(the)i Fv(C)t(A)t(S)t(T)h FC(scope.)0 1456 y Fy(void)47
b(add_type\(struct)c(p_type_node)i(*ptn\))300 1569 y
FC(Add)23 b(a)g(type)i(to)e(the)h(scope.)0 1768 y Fy(struct)46
b(p_type_node)f(*find\(const)g(char)h(*name\))300 1881
y FC(Find)23 b(a)h(type)g(in)f(the)h(scope)h(with)e(the)h(gi)n(v)o(en)g
(name.)0 2081 y Fy(void)47 b(ref_types\(struct)c(p_scope_node)h(*psn\))
300 2194 y FC(Add)23 b(references)j(to)e(this)g(scope)h(node)f(to)g
(the)f(types)i(in)f(the)f(gi)n(v)o(en)h(scope)h(node.)0
2394 y Fy(void)47 b(add_defs\(\))300 2507 y FC(Add)23
b(de\002nitions)j(of)d(the)h(types)h(to)e(the)h(scope.)0
2707 y Fy(void)47 b(set_included\(inclusion)41 b(the_included\),)48
b(inclusion)e(get_included\(\))300 2820 y FC(Set/get)24
b(the)g(inclusion)i(for)e(this)g(scope.)0 3081 y Fz(p)p
56 3081 V 32 w(type)p 254 3081 V 34 w(node)0 3260 y FC(The)31
b Fy(p_type_node)d FC(class)k(is)f(used)h(to)g(hold)g(an)o(y)f
(information)j(about)f(a)e(type)h(in)f(the)h(presentation)j(generator)
-5 b(.)55 b(The)0 3373 y(types)27 b(it)e(represents)k(can)d(be)f(real)h
(\(i.e.,)g(the)o(y)g(end)g(up)g(de\002ned)g(in)i Fv(C)t(A)t(S)t(T)r
FC(\))f(or)e(just)h(a)g(dif)n(ferent)h(v)o(ersion)g(of)f(another)h
(type)0 3486 y(\(i.e.,)c(it)g(has)h(a)f(dif)n(ferent)j(interpretation)h
(than)d(the)g(standard)i(v)o(ersion\).)0 3684 y Fy(void)47
b(set_flags\(unsigned)42 b(int)47 b(flags\),)j(unsigned)c(int)h
(get_flags\(\))300 3796 y FC(Set/get)24 b(the)g(\003ags)g(for)f(this)h
(type:)300 3996 y Fy(PTF_NAME_REF)600 4109 y FC(F)o(orces)18
b(the)h(name)f(in)g(an)o(y)g(reference)i(to)e(just)h(be)f(a)g(plain)h
(name)f(rather)h(than)g(one)g(with)f(struct/union/etc.)300
4286 y Fy(PTF_REF_ONLY)600 4399 y FC(This)35 b(\003ag)g(is)g(set)g
(when)g(a)g(type)h(is)f(added)h(to)f(a)g(collection)i(without)g(adding)
f(it)f(to)g(its)g(referenced)600 4512 y(collection.)h(It)25
b(signi\002es)h(that)g(the)f(type)h(is)f(de\002ned)h(only)g(for)f(the)h
(referencer)h(collection)h(and)e(should)600 4625 y(be)e(de\002ned)g
(alongside)i(the)e(referenced)i(types.)300 4801 y Fy(PTF_NO_REF)600
4914 y FC(This)20 b(\003ag)f(is)h(also)h(usually)h(set)e(when)g(a)f
(type)i(is)f(added)h(only)g(to)f(a)f(referencer)k(collection)f(and)f
(signi\002es)600 5027 y(that)j(it)f(shouldn')n(t)k(be)c(referenced)k
(when)c(the)h(collection)i(is)e(referenced.)0 5227 y
Fy(void)47 b(set_name\(const)d(char)i(*name\),)k(const)c(char)h
(*get_name\(\))300 5340 y FC(Set/get)24 b(the)g(semantic)h(name)f(of)f
(the)h(type.)p eop
%%Page: 186 186
186 185 bop 0 -165 a FC(186)1893 b Fx(CHAPTER)20 b(11.)52
b(PRESENT)-8 b(A)e(TION)18 b(GENERA)-10 b(T)n(ORS)0 91
y Fy(void)47 b(set_format\(const)c(char)k(*name\),)j(const)c(char)h
(*get_format\(\))300 204 y FC(Set/get)24 b(the)g(format)g(of)g(the)f
(type)i(name.)0 400 y Fy(void)47 b(set_type\(cast_type)42
b(type\),)51 b(cast_type)45 b(get_type\(\))300 513 y
FC(Set/get)24 b(the)i Fv(C)t(A)t(S)t(T)h FC(type.)0 708
y Fy(void)47 b(set_mapping\(pres_c_mapp)o(ing)41 b(map\),)51
b(pres_c_mapping)44 b(get_mapping\(\))300 821 y FC(Set/get)24
b(the)g(mapping)h(for)f(the)g(type.)0 1016 y Fy(void)47
b(set_included\(inclusion)41 b(included\),)49 b(inclusion)d
(get_included\(\))300 1129 y FC(Set/get)24 b(the)g(inclusion)i(for)e
(the)g(type.)0 1325 y Fy(const)46 b(char)h(*format_name\(struct)c
(p_scope_node)h(*psn\))300 1438 y FC(F)o(ormat)23 b(the)h(name)f(of)h
(the)g(type)g(as)f(it)h(will)f(be)g(in)h(the)g(gi)n(v)o(en)g(scope.)0
1633 y Fy(void)47 b(add_def\(struct)d(p_scope_node)g(*psn\))300
1746 y FC(De\002ne)23 b(the)h(type)g(in)g(the)f(gi)n(v)o(en)i(scope.)0
1941 y Fy(struct)46 b(p_type_node)f(*ref_type\(struct)e(p_scope_node)i
(*psn\))300 2054 y FC(Return)24 b(a)f(ne)n(w)g(type)h(that)h
(references)h(this)e(type.)0 2250 y Fy(void)47 b(remove\(struct)d
(p_scope_node)g(*psn\))300 2363 y FC(Remo)o(v)o(e)23
b(this)h(type)g(from)g(the)g(gi)n(v)o(en)g(scope.)0 2619
y FA(11.2.5)99 b(Metadata)25 b(Associations)0 2796 y
FC(An)f(additional)k(aspect)e(of)f(presentation)j(generation)g(is)c
(the)i(semantic)g(relationship)i(between)e(the)f(entities)i(of)e(the)g
(pre-)0 2909 y(sentation)f(\(at)d(least)h(as)f(f)o(ar)g(as)h(or)n
(ganization\).)31 b(F)o(or)21 b(e)o(xample,)h(an)h Fv(I)t(D)t(L)h
FC(\002le)d(may)g(include)i(other)h Fv(I)t(D)t(L)g FC(\002les)d(for)g
(de\002nitions)0 3022 y(of)i(common)g(data)h(types)g(or)e(interf)o
(aces)k(from)d(which)g(to)g(inherit.)30 b(Because)24
b(the)o(y)f(are)g(de\002ned,)h(the)f(presentation)k(gener)n(-)0
3135 y(ator)d(creates)g(the)g(necessary)k Fv(P)t(R)t(E)t(S)p
1142 3135 28 4 v 39 w(C)c FC(for)g(them.)k(Ho)n(we)n(v)o(er)l(,)23
b(it)g(may)g(be)g(useful)i(to)e(kno)n(w)g(the)g(origin)i(of)e(these)h
(inherited)0 3247 y(operations)h(or)e(included)h(data)f(structures,)i
(especially)g(if)e(the)o(y)f(are)h(compiled)h(separately)h(and)e
(should)h(not)f(be)f(included)0 3360 y(with)h(the)h(nati)n(v)o(e)g
(interf)o(aces.)141 3475 y(F)o(or)35 b(this)g(purpose,)40
b(the)c Fu(metadata)h FC(pro)o(vided)g(in)e(the)j Fv(AO)t(I)f
FC(is)e(copied)i(into)f(the)i Fv(P)t(R)t(E)t(S)p 3001
3475 V 39 w(C)r FC(,)f(and)f(associations)j(be-)0 3587
y(tween)26 b Fv(AO)t(I)f FC(entities)g(and)f(the)f(metadata)i(are)e
(preserv)o(ed)j(when)d(generating)j(corresponding)k Fv(P)t(R)t(E)t(S)p
3194 3587 V 39 w(C)25 b FC(entities.)30 b(Further)l(,)0
3700 y(presentation-only)40 b(entities)c(\(necessary)h(constructions)h
(that)d(are)f(not)h(based)g(on)f(the)h(input\))g(can)g(be)f(link)o(ed)i
(appro-)0 3813 y(priately)d(to)f(the)g(metadata)g(structures)i(by)e
(the)g(presentation)j(generator)-5 b(.)55 b(F)o(or)30
b(more)i(information)i(on)d(metadata,)k(see)0 3926 y(Chapter)25
b(3.)0 4226 y Ft(11.3)119 b(Flick)31 b(Pr)n(esentation)f(Generator)g
(Ar)n(chitectur)n(e)0 4435 y FC(Presentation)g(generation)h(programs)e
(in)f(Flick)f(are)h(b)n(uilt)h(using)g(a)e(base)h(library)h(containing)
i(the)d(main)g(procedure)i(for)0 4548 y(the)i(program)h(and)g(a)e(C++)g
(class,)k Fy(pg_state)p FC(,)c(which)h(maintains)i(the)e(presentation)j
(generation)g(state)e(information.)0 4661 y(The)23 b(top-le)n(v)o(el)i
(member)f(function)h(in)f Fy(pg_state)c FC(is)j Fy(gen)p
FC(,)f(which)h(starts)i(presentation)i(generation)f(for)e(the)i
Fv(AO)t(I)f FC(stored)0 4774 y(in)e(the)h(class)h(member)e
Fy(in_aoi)e FC(\(input)27 b Fv(AO)t(I)f FC(data)e(structure\).)141
4888 y(IDL-speci\002c)37 b(presentation)i(generation)g(functionality)h
(is)35 b(achie)n(v)o(ed)j(through)g(inheritance)h(of)d
Fy(pg_state)d FC(and)0 5001 y(o)o(v)o(erriding)26 b(some)e(or)f(all)h
(of)g(its)g(virtual)h(functions)i(as)c(needed.)31 b(T)-7
b(w)o(o)23 b(additional)j(libraries)g(e)o(xist)e(that)h(ha)n(v)o(e)f
(specialized)0 5114 y(the)30 b(base)h(presentation)j(generator)e
(library)g(to)e(the)g(standard)k Fv(C)t(O)t(R)t(B)r(A)d
FC(C)e(and)i(C++)e(mappings,)k(pro)o(viding)g(a)c(starting)0
5227 y(ground)i(for)e(generators)i(that)f(implement)g(or)e(e)o(xtend)j
(these)g Fv(C)t(O)t(R)t(B)r(A)f FC(standards.)47 b(These)29
b(are)g(named)h Fy(pg_corba)c FC(and)0 5340 y Fy(pg_corbaxx)p
FC(,)20 b(respecti)n(v)o(ely)-6 b(.)p eop
%%Page: 187 187
187 186 bop 0 -165 a Fx(11.3.)52 b(FLICK)21 b(PRESENT)-8
b(A)e(TION)18 b(GENERA)-10 b(T)n(OR)19 b(ARCHITECTURE)1308
b FC(187)141 91 y(Presentation)41 b(generation)g(code)f(can)e(mak)o(e)h
(use)f(of)h(library)h(routines)g(in)e(the)h Fy(libaoi)p
FC(,)g Fy(libmeta)p FC(,)g Fy(libmint)p FC(,)0 204 y
Fy(libcompiler)p FC(,)19 b Fy(c/libcast)p FC(,)h(and)k
Fy(c/libpres_c)c FC(directories.)0 454 y FA(11.3.1)99
b(Base)25 b(Pr)n(esentation)h(Generator)f(Library)0 629
y FC(The)k(base)i(Presentation)h(Generator)f(Library)g(for)f(the)g(C)e
(language)k(is)e(in)f(the)h(directory)i Fy(c/pfe/lib)p
FC(,)c(and)i(the)g(class)0 742 y(declaration)24 b(can)d(be)f(found)i
(in)f Fy(mom/c/pfe.hh)p FC(.)i(T)-7 b(o)20 b(e)o(xtend)h(the)g(base)h
(library)-6 b(,)22 b(one)f(must)g(inherit)h(from)e(the)h
Fy(pg_state)0 855 y FC(and)29 b(write)f(a)g(simple)g
Fy(getGenerator)c FC(function)31 b(to)d(return)h(an)g(instance)h(of)e
(the)g(ne)n(w)g(class.)44 b(By)27 b(o)o(v)o(erriding)j(the)f
Fy(p_*)0 968 y FC(methods,)34 b(one)d(can)g(change)i(the)e(structure)i
(of)e(the)g(generated)k Fv(P)t(R)t(E)t(S)p 2281 968 28
4 v 40 w(C)r FC(.)49 b(The)31 b(other)h(methods)g(are)f(higher)n(-le)n
(v)o(el)j(and)0 1081 y(either)e(create)g(or)e(return)i(additional)i
(state)d(information)i(or)e(guide)h(the)h Fv(P)t(R)t(E)t(S)p
2558 1081 V 39 w(C)f FC(generation)i(at)c(a)h(higher)h(le)n(v)o(el)f
(\(e.g.,)0 1194 y Fy(process_client_params)17 b FC(guides)25
b(the)f(generation)i(of)e(all)f(the)h(parameters)i(of)d(a)g(client)i
(stub\).)141 1307 y(In)32 b(general,)k(this)c(base)h(library)g(and)g
(other)g(presentation)i(generators)g(are)d(speci\002c)h(to)f(the)h(C)d
(language)35 b(\(the)d(e)o(x-)0 1420 y(ception)k(being)g(the)g
Fv(C)t(O)t(R)t(B)r(A)f FC(C++)f(PG)f(library\).)63 b(T)-7
b(ypically)h(,)38 b(support)e(for)f(a)e(language)k(other)e(than)g(C)f
(will)g(require)0 1532 y(the)25 b(de)n(v)o(elopment)j(of)d(a)g
(language-speci\002c)k(abstract)e(syntax)g(tree)f(\(analogous)i(to)f
Fv(C)t(A)t(S)t(T)r FC(\))g(and)e(presentation)k(structure)0
1645 y(\(analogous)e(to)f Fv(P)t(R)t(E)t(S)p 710 1645
V 40 w(C)r FC(\).)k(Since)24 b(C++)g(is)g(not)g(f)o(ar)h(distant)h
(\(structurally\))i(from)c(C,)f(it)g(w)o(as)h(possible)j(to)d(e)o
(xtend)h(parts)g(of)2 1758 y Fv(C)t(A)t(S)t(T)30 b FC(and)f
Fv(P)t(R)t(E)t(S)p 581 1758 V 39 w(C)f FC(to)f(include)i(the)e
(necessary)i(information)g(to)e(describe)i(and)e(generate)i(C++)d
(code.)39 b(Ho)n(we)n(v)o(er)l(,)27 b(it)f(is)0 1871
y(not)e(in)f(harmon)o(y)i(with)e(the)h(original)i(intention)g(of)d
(either)k Fv(C)t(A)t(S)t(T)f FC(or)g Fv(P)t(R)t(E)t(S)p
2394 1871 V 39 w(C)f FC(to)e(be)h(e)o(xtended)i(in)d(this)h(w)o(ay)-6
b(.)0 2121 y FA(11.3.2)99 b(CORB)m(A)24 b(C)h(Pr)n(esentation)h
(Generator)0 2296 y FC(The)f Fv(C)t(O)t(R)t(B)r(A)f FC(C)f(PG)f
(implements)j(the)e(standard)28 b Fv(C)t(O)t(R)t(B)r(A)c
FC(mapping)h(for)f(the)g(C)e(language.)0 2543 y Fz(CORB)m(A)f(C)i(PG)f
(Or)o(ganization)0 2717 y FC(As)36 b(mentioned)i(abo)o(v)o(e,)i(the)f
Fv(C)t(O)t(R)t(B)r(A)f FC(C)d(mapping)j(is)e(implemented)j(as)d(a)h
(library)h(and)f(can)g(be)f(found)i(in)f Fy(c/pfe/)0
2830 y(libcorba)p FC(.)26 b(The)c(class)i(declaration)j(is)c(in)g
Fy(mom/c/pg_corba.hh)p FC(.)g(The)i Fv(C)t(O)t(R)t(B)r(A)f
FC(C)e(PG)f(implements)k(the)e Fy(pg_corba)0 2943 y FC(class.)0
3190 y Fz(Notes)2 3365 y Fv(C)t(O)t(R)t(B)r(A)r FC(-style)i(typed)h
(allocators)h(are)e(not)g(yet)f(implemented)j(in)d(the)j
Fv(C)t(O)t(R)t(B)r(A)e FC(C)e(language)k(presentation.)35
b(The)26 b Fv(C)t(O)t(R)t(B)r(A)0 3478 y FC(C)g(language)k
(presentation)i(generator)e(creates)f(presentations)i(in)d(which)g
(heap)h(memory)e(is)h(allocated)i(with)d(the)h(type-)0
3590 y(independent)34 b(functions)e Fy(CORBA_flick_alloc)25
b FC(and)31 b Fy(CORBA_flick_free)p FC(.)43 b(\()p Fy(CORBA_alloc)27
b FC(and)k Fy(CORBA_free)0 3703 y FC(are)g(aliases)i(for)e(these)h
(functions.\))54 b(T)-7 b(o)30 b(release)j(an)e(object)h(reference,)j
(one)d(must)f(e)o(xplicitly)i(call)f Fy(CORBA_object_)0
3816 y(release)p FC(.)0 4066 y FA(11.3.3)99 b(CORB)m(A)24
b(C++)h(Pr)n(esentation)h(Generator)0 4241 y FC(The)21
b Fv(C)t(O)t(R)t(B)r(A)f FC(C++)f(PG)e(implements)k(the)f(standard)j
Fv(C)t(O)t(R)t(B)r(A)d FC(mapping)h(for)f(the)f(C++)g(language.)30
b(It)19 b(should)i(be)e(noted)i(that)0 4354 y(e)o(xception)g(handling)h
(is)c(performed)j(as)e(in)g(the)i Fv(C)t(O)t(R)t(B)r(A)f
FC(C)e(mapping,)j(rather)f(than)f(using)i(C++)d(e)o(xceptions.)30
b(Since)19 b(the)g(C-)0 4467 y(style)24 b(mapping)f(for)i
Fv(C)t(O)t(R)t(B)r(A)f FC(e)o(xceptions)h(is)d(permitted)j(by)d(the)j
Fv(C)t(O)t(R)t(B)r(A)e FC(C++)f(mapping)i(speci\002cation,)i(it)c(w)o
(as)g(decided)0 4580 y(to)j(reuse)h(the)f(current)h(infrastructure)j
(rather)d(than)f(spend)h(the)f(time)g(de)n(v)o(eloping)i(ne)n(w)e
(infrastructure)j(to)d(perform)h(C++)0 4693 y(e)o(xception)g(handling.)
0 4940 y Fz(CORB)m(A)21 b(C++)h(PG)g(Or)o(ganization)0
5114 y FC(Lik)o(e)e(the)j Fv(C)t(O)t(R)t(B)r(A)e FC(C)e(mapping,)j(the)
f(C++)e(mapping)j(is)e(also)h(implemented)h(as)e(a)g(library)i(in)e
Fy(c/pfe/libcorbaxx)p FC(.)j(The)0 5227 y(class)30 b(declaration)i(is)d
(in)g Fy(mom/c/pg_corbaxx.hh)p FC(.)39 b(The)31 b Fv(C)t(O)t(R)t(B)r(A)
e FC(C++)g(PG)e(implements)k(the)e Fy(pg_corbaxx)d FC(class,)0
5340 y(and)i(is)g(currently)i(the)e(only)h(generator)h(that)f(handles)g
(C++.)41 b(At)27 b(a)h(high)g(le)n(v)o(el,)h(this)g(PG)d(modi\002es)i
(the)g(base)h(library)g(in)p eop
%%Page: 188 188
188 187 bop 0 -165 a FC(188)1893 b Fx(CHAPTER)20 b(11.)52
b(PRESENT)-8 b(A)e(TION)18 b(GENERA)-10 b(T)n(ORS)0 91
y FC(much)23 b(the)f(same)h(w)o(ay)f(that)h(the)h Fv(C)t(O)t(R)t(B)r(A)
f FC(C)f(PG)e(does,)j(since)h(the)f(tw)o(o)f(presentations)k(are)c
(closely)i(related.)30 b(The)22 b(speci\002c)0 204 y(details,)j(ho)n
(we)n(v)o(er)l(,)f(are)f(dif)n(ferent)j(for)e(C++,)e(and)i(are)g(thus)g
(re\003ected)h(in)e(the)h(speci\002c)j Fv(C)t(A)t(S)t(T)f
FC(and)g Fv(P)t(R)t(E)t(S)p 3336 204 28 4 v 40 w(C)e
FC(generated.)0 492 y Fz(Notes)0 681 y FC(Ideally)-6
b(,)32 b(a)d(presentation)k(generator)e(should)g(not)f(be)f(speci\002c)
h(to)f(or)h(customized)h(for)f(an)o(y)f(particular)j(runtime;)h(that')
-5 b(s)0 794 y(the)21 b(job)h(of)f(the)g(back)h(end.)28
b(Ho)n(we)n(v)o(er)l(,)22 b(there)g(may)e(be)h(a)g(fe)n(w)f(things)j
(we)d(ha)n(v)o(e)i(o)o(v)o(erlook)o(ed)h(that)f(are)f(speci\002c)h(to)f
(the)h(T)-8 b(A)j(O)0 906 y(runtime,)24 b(since)h(we)e(support)i(no)f
(other)g(C++)f(runtime.)141 1027 y(As)c(mentioned)i(abo)o(v)o(e,)f(C++)
f(e)o(xception)j(handling)f(cannot)g(currently)h(be)d(e)o(xpressed)j
(in)d(Flick.)28 b(Adding)20 b(this)g(infras-)0 1139 y(tructure)25
b(is)e(not)h(tri)n(vial,)g(b)n(ut)g(may)f(simplify)h(some)g(of)f(the)g
(other)i(code)f(generation,)i(such)e(as)f(handling)i(communication)0
1252 y(or)f(allocation)i(errors.)31 b(It)24 b(w)o(ould)g(be)g(nice,)h
(in)f(the)g(future,)h(to)e(mak)o(e)i(use)f(of)g(C++)f(e)o(xceptions,)j
(not)e(only)h(for)f(the)g(presen-)0 1365 y(tation,)h(b)n(ut)f(in)f(the)
h(stub)g(and)g(runtime)h(layers)g(as)e(well.)0 1657 y
FA(11.3.4)99 b(ONC)24 b(RPC)h(\()p FF(rpcgen)p FA(\))h(Pr)n(esentation)
g(Generator)0 1845 y Fz(ONC)c(RPC)f(PG)h(Or)o(ganization)0
2033 y FC(The)31 b Fv(O)t(N)t(C)i(R)t(P)t(C)e FC(presentation)j(is)29
b(pro)o(vided)j(by)d Fy(pg_sun)e FC(that)j(specializes)j
Fy(pg_state)p FC(.)44 b(The)29 b(class)h(declaration)j(is)c(in)0
2146 y Fy(c/pfe/sun)p FC(.)c(This)e(is)g(a)f(relati)n(v)o(ely)j(simple)
e(PG)f(in)g(that)i(all)f(operations)j(tak)o(e)d(at)g(most)g(one)g
(\223in\224)h(parameter)l(,)h(and)e(return)0 2259 y(at)h(most)g(one)h
(v)n(alue.)32 b(The)24 b(only)h(errors)g(possible)h(are)f(those)g
(de\002ned)g(by)g(the)f(system)h(and)g(allocation)i(and)e(deallocation)
0 2372 y(are)f(straightforw)o(ard.)0 2660 y Fz(Notes)0
2849 y FC(The)36 b Fv(O)t(N)t(C)j(R)t(P)t(C)e FC(presentation)h
(generator)f(does)f(not)f(produce)i Fy(rpcgen)p FC(-lik)o(e)e(marshal)h
(and)f(unmarshal)i(stubs)f(\()r Fv(X)t(D)t(R)0 2961 y
FC(translation)29 b(routines\).)39 b(It)25 b(w)o(ould)i(lik)o(ely)g
(not)g(be)f(hard)g(to)g(implement)h(such)g(stubs,)h(b)n(ut)e(it)g(has)g
(not)h(been)g(a)e(priority)j(for)0 3074 y(the)c(de)n(v)o(elopment)i
(team.)822 3041 y Fr(2)0 3366 y FA(11.3.5)99 b(Fluk)o(e)25
b(Pr)n(esentation)h(Generator)0 3554 y FC(Fluk)o(e)f(is)g(the)g
(operating)j(system)d(being)h(de)n(v)o(eloped)i(by)d(the)g(Flux)g
(project)h(at)f(the)g(Uni)n(v)o(ersity)h(of)f(Utah.)33
b(All)24 b(of)h(Fluk)o(e')-5 b(s)0 3667 y(communication)26
b(stubs)f(are)f(produced)i(by)d(Flick.)0 3955 y Fz(Fluk)o(e)f(PG)g(Or)o
(ganization)0 4143 y FC(The)29 b(class)i(declaration)i(for)d(the)h
(Fluk)o(e)f(presentation)j(generator)g(is)d(in)g Fy
(c/pfe/fluke/pg_fluke.h)o(h)p FC(.)41 b(The)30 b(Fluk)o(e)0
4256 y(PG)22 b(specializes)k(the)e Fy(pg_corba)d FC(class)j(to)g
(produce)h Fy(pg_fluke)p FC(\).)0 4544 y Fz(Notes)0 4733
y FC(The)i(Fluk)o(e)h(\(MOM\))e(presentation)31 b(generator)f(may)d
(produce)j(bad)e(code)g(for)g(recursi)n(v)o(e)h(data)f(types.)42
b(This)27 b(is)g(because)0 4846 y(all)f(references)j(are)e
(\223unquali\002ed\224;)j(for)d(e)o(xample,)g(we)f(al)o(w)o(ays)h
(refer)f(to)h Fy(struct)46 b(foo)24 b FC(as)i Fy(foo)p
FC(,)f(ne)n(v)o(er)i Fy(struct)46 b(foo)p FC(.)0 4959
y(W)-7 b(e)21 b(do)h(this)g(for)g(esoteric)i(reasons.)30
b(Ev)o(entually)-6 b(,)24 b(we)d(can)h(\002x)f(self-referential)26
b(data)d(types)g(by)f(changing)i(the)e(PG)f(library)0
5071 y(to)i(separate)j(the)e(name)f(de\002nition)j(from)d(the)h
(structure)i(de\002nition:)p 0 5161 1560 4 v 105 5217
a Fq(2)134 5249 y Fp(It)17 b(has)g(been)h(noted)f(that)g(if)f(Flick)h
(could)g(produce)i(such)e(stubs,)h(we)f(could)g(then)h(use)f(Flick)f
(instead)h(of)g Fo(rpcgen)h Fp(to)f(b)o(uild)g(the)g(storage)g
(routines)0 5340 y(for)i(Flick')l(s)f(IRs.)p eop
%%Page: 189 189
189 188 bop 0 -165 a Fx(11.3.)52 b(FLICK)21 b(PRESENT)-8
b(A)e(TION)18 b(GENERA)-10 b(T)n(OR)19 b(ARCHITECTURE)1308
b FC(189)95 91 y Fy(typedef)46 b(struct)g(foo)h(foo;)95
204 y(struct)g(foo)f({)191 317 y(...)95 430 y(};)0 672
y FA(11.3.6)99 b(MIG)24 b(Pr)n(esentation)i(Generator)0
846 y FC(The)32 b(Mach)h(Interf)o(ace)h(Generator)g(\()r
Fv(M)t(I)t(G)r FC(\))f(for)g(the)g(Mach)f(OS)f(pro)o(vides)k(a)d
(special)i(presentation)i(that)d(is)f(closely)i(re-)0
959 y(lated)29 b(to)e(the)h(input)j Fv(I)t(D)t(L)r FC(.)41
b(Or)27 b(rather)l(,)j(the)g Fv(I)t(D)t(L)g FC(allo)n(ws)e(the)g(user)g
(some)g(control)h(o)o(v)o(er)f(the)g(presentation)j(in)c(addition)j(to)
0 1072 y(de\002ning)g(interf)o(aces.)48 b(As)29 b(such,)i(it)d(is)h
(not)h(possible)h(to)e(simulate)j Fv(M)t(I)t(G)r FC(')-5
b(s)30 b(beha)n(vior)i(through)f(the)e(normal)h(function)h(of)0
1185 y(the)g(presentation)j(generator)-5 b(.)53 b(F)o(or)29
b(this)j(reason,)h(Flick')-5 b(s)34 b Fv(M)t(I)t(G)e
FC(PG)d(is)i(implemented)h(as)f(a)f(combined)j(front-end)g(and)0
1298 y(presentation)26 b(generator)e(to)e(enable)i(the)e(presentation)k
(control)e(the)g Fv(M)t(I)t(G)i(I)t(D)t(L)f FC(allo)n(ws.)k(Rather)22
b(than)h(cluttering)i(our)f Fv(AO)t(I)0 1410 y FC(representation)29
b(with)c(hints)h(and)f(hacks)h(to)f(allo)n(w)f(for)j
Fv(M)t(I)t(G)r FC(,)e(the)i Fv(M)t(I)t(G)g FC(PG)d(directly)i
(translates)i(a)c(representation)29 b(of)c(the)0 1523
y(input)i Fv(I)t(D)t(L)f FC(\()p Fy(.defs)p FC(\))c(\002le)h(to)g(a)i
Fv(P)t(R)t(E)t(S)p 1178 1523 28 4 v 40 w(C)g FC(\002le.)j(The)d
Fv(M)t(I)t(G)g FC(presentation)i(generator)f(can)e(be)g(found)h(in)e
Fy(fe/mig)p FC(.)0 1762 y Fz(MIG)g(PG)f(Or)o(ganization)0
1936 y FC(The)32 b Fv(M)t(I)t(G)h FC(PG)28 b(is)j(based)g(on)i
Fv(M)t(I)t(G)r FC(')-5 b(s)31 b Fy(lex)p FC(-)e(and)i
Fy(yacc)e FC(based)i(parser)h(that)f(con)l(v)o(erts)j
Fv(M)t(I)t(G)h(I)t(D)t(L)e FC(into)e(an)g(internal)h(parse)0
2049 y(tree.)d(The)22 b(Flick-speci\002c)j(\223back)f(end\224)g(then)f
(w)o(alks)h(o)o(v)o(er)e(this)i(parse)g(tree)f(in)g(order)h(to)e
(produce)j(the)e(appropriate)28 b Fv(M)t(I)t(N)t(T)0
2162 y FC(representations)33 b(of)c(the)g(messages)h(and)h
Fv(P)t(R)t(E)t(S)p 1545 2162 V 40 w(C)e FC(representations)34
b(of)28 b(the)h(to-be-generated)34 b(client)29 b(stubs)h(and)f(serv)o
(er)0 2275 y(sk)o(eletons.)i(The)23 b(Flick-speci\002c)j(code)e(is)g
(contained)i(in)d(the)h(follo)n(wing)h(\002les:)195 2424
y Fy(main.c)957 b FC(Contains)30 b(the)f Fy(main)d FC(function)31
b(that)e(one)g(w)o(ould)g(e)o(xpect:)40 b(parse)29 b(the)g(com-)1440
2537 y(mand)19 b(line,)i(in)l(v)n(ok)o(e)g(the)f Fy(yacc)p
FC(-generated)h(parser)l(,)g(in)l(v)n(ok)o(e)h(the)d
Fy(translate)1440 2650 y FC(function)26 b(to)d(produce)28
b Fv(P)t(R)t(E)t(S)p 2369 2650 V 39 w(C)r FC(,)23 b(and)h(then)g
(output)h(the)h Fv(P)t(R)t(E)t(S)p 3414 2650 V 39 w(C)f
FC(\002le.)195 2803 y Fy(xlate.c)909 b FC(Contains)24
b(the)f Fy(translate)d FC(function,)25 b(which)e(sets)g(up)g(the)g
(standard)k Fv(M)t(I)t(N)t(T)1440 2916 y FC(de\002nitions)e(and)e(then)
h(in)l(v)n(ok)o(es)h Fy(translate_routines)p FC(.)e(That)f(function,)
1440 3029 y(also)34 b(contained)i(in)d(this)g(\002le,)i(is)e(the)g
(top-le)n(v)o(el)i(iterator)g(o)o(v)o(er)e(the)h(parsed)1442
3142 y Fv(M)t(I)t(G)28 b(I)t(D)t(L)e FC(statements.)195
3296 y Fy(xlate_pres.c)669 b FC(Contains)20 b(the)e(functions)j(that)d
(process)i(speci\002c)h Fv(M)t(I)t(G)h(I)t(D)t(L)f FC(constructs.)30
b(This)1440 3409 y(is)c(by)g(f)o(ar)g(the)g(lar)n(gest)i(\002le)e(in)g
(Flick')-5 b(s)28 b Fv(M)t(I)t(G)g FC(front)f(end.)37
b(The)26 b(general)h(or)n(ga-)1440 3522 y(nization)f(and)e(design)h(of)
e(these)i(functions)h(is)d(described)j(belo)n(w)-6 b(.)195
3676 y Fy(xlate_util.c)669 b FC(Contains)20 b(a)e(fe)n(w)g(utility)i
(functions)h(to)e(aid)g(in)g(the)g(translation)i(process,)g(such)1440
3789 y(as)36 b(one)g(to)g(emit)g(a)g Fy(#include)d FC(statement,)41
b(one)36 b(to)g(b)n(uild)h(up)f(the)h(initial)1442 3901
y Fv(C)t(A)t(S)t(T)r FC(,)26 b(and)g(a)e(deb)n(ugging)k
Fy(printf)23 b FC(that)i(indicates)j(the)d(\002lename)g(and)h(line)1440
4014 y(number)e(\(used)h(for)f(error)g(reporting\).)195
4168 y Fy(iheader.c)813 b FC(Contains)32 b(a)d(function)k(to)d(produce)
i(a)e(header)h(\002le)f(rede\002ning)i(the)e(routine)1440
4281 y(names)24 b(to)f Fy(\\emph{routine}_external)p
FC(.)195 4435 y Fy(mom_routines.c)573 b FC(Contains)25
b(small)f(utility)h(functions)h(for)e(accessing)i(and)e(generating)k
Fv(M)t(I)t(N)t(T)r FC(.)195 4589 y Fy(gen_error_mappings.c)285
b FC(Contains)26 b(the)f(mapping)h(of)e(Flick')-5 b(s)26
b(error)f(codes)h(to)f(the)f(named)i(constants)1440 4702
y(e)o(xpected)e(in)d(the)k Fv(M)t(I)t(G)e FC(presentation.)32
b(This)22 b(is)f(analogous)k(to)d(the)g(\002le)f(of)h(the)1440
4815 y(same)i(name)f(in)h(the)f(other)i(presentation)i(generator)f
(directories.)0 5053 y Fz(T)-7 b(ranslation)25 b(fr)n(om)f(MIG)e(IDL)h
(to)g(PRES)p 1420 5053 V 31 w(C)0 5227 y FC(Presentation)g(generation)h
(for)f Fv(M)t(I)t(G)f FC(is)f(or)n(ganized)i(dif)n(ferently)g(from)e
(the)f(other)i(presentation)i(generators,)g(although)f(the)0
5340 y(algorithm)h(is)f(the)f(similar)-5 b(.)29 b(The)23
b(main)f(dif)n(ference)j(is)d(that)h(we)f(generate)27
b Fv(P)t(R)t(E)t(S)p 2535 5340 V 39 w(C)d FC(and)h Fv(M)t(I)t(N)t(T)g
FC(simultaneously)h(from)d(the)p eop
%%Page: 190 190
190 189 bop 0 -165 a FC(190)1893 b Fx(CHAPTER)20 b(11.)52
b(PRESENT)-8 b(A)e(TION)18 b(GENERA)-10 b(T)n(ORS)0 91
y FC(special)29 b Fv(M)t(I)t(G)g(I)t(D)t(L)f FC(parse)e(tree,)f(rather)
i(than)e(separately)j(from)d(an)i Fv(AO)t(I)g FC(tree.)34
b(The)24 b(b)n(ulk)i(of)f(this)h(translation)i(is)d(coded)h(in)0
204 y Fy(xlate_pres.c)p FC(.)141 317 y(The)d(guiding)i(function)g(is)e
Fy(make_routine)c FC(which)k(handles)i(the)e(creation)i(of)e(the)i
Fv(M)t(I)t(N)t(T)h FC(and)g Fv(P)t(R)t(E)t(S)p 3405 317
28 4 v 39 w(C)f FC(for)e(e)o(xactly)0 430 y(one)38 b
Fv(R)t(P)t(C)g FC(routine.)68 b(It)36 b(\002lls)f(in)h(se)n(v)o(eral)h
(\223out\224)g(data)g(structures)h(that)f(are)f(used)h(by)f(the)g
(higher)n(-le)n(v)o(el)j Fy(translate_)0 543 y(routines)21
b FC(to)i(create)i(a)e Fy(pres_c_stub)p FC(.)141 656
y(The)32 b(high-le)n(v)o(el)k Fv(M)t(I)t(N)t(T)f FC(and)g
Fv(P)t(R)t(E)t(S)p 1302 656 V 40 w(C)e FC(is)f(constructed)j(by)e
Fy(make_top_inlines)p FC(,)c(which)j(produces)j(e)n(v)o(erything)0
769 y(from)d(the)g(union)i(of)e(all)i Fv(I)t(D)t(L)r
FC(')-5 b(s)34 b(\(the)f(top-most)i Fv(M)t(I)t(N)t(T)g
FC(union\))f(do)n(wn)e(to)g(the)h(union)g(of)f(the)h(operation')-5
b(s)35 b(request)f(and)0 882 y(reply)-6 b(,)34 b(and)d(returns)i(the)f
(necessary)h(hooks)g(to)e(produce)i(the)f(request)g(or)f(reply)i
(parameters)g(for)e(the)h(operation.)54 b(The)2 995 y
Fv(P)t(R)t(E)t(S)p 194 995 V 39 w(C)32 b FC(for)f(each)g(parameter)h
(is)e(then)h(processed)i(by)e Fy(make_arg_inlines)p FC(,)c(which)j(is)h
(in)f(char)n(ge)i(of)f(e)o(xpanding)i(a)0 1108 y(single)h
Fv(I)t(D)t(L)f FC(ar)n(gument)f(into)f(multiple)g(presented)i(ar)n
(guments)g(if)d(needed,)j(e.g.,)e(an)g(array)g(and)g(its)f(length.)50
b(Note)31 b(that)0 1221 y(these)22 b(multiple)g(presented)i(ar)n
(guments)f(are)e(still)h(contained)i(within)d(a)g(single)h(inline)g
(because)h(the)o(y)e(are)h(related)g(in)f(some)0 1334
y(f)o(ashion.)46 b(The)30 b Fv(M)t(I)t(G)h FC(presentation)h(is)c
(unique)i(in)f(this)g(re)o(gard,)h(where)h Fv(I)t(D)t(L)g
FC(entities)g(are)d(e)o(xpressed)j(through)g(multiple)0
1447 y(ar)n(guments)j(\(as)f(opposed)h(to)g Fv(C)t(O)t(R)t(B)r(A)e
FC(or)i Fv(O)t(N)t(C)i(R)t(P)t(C)e FC(where)e(the)o(y)h(are)f
(encapsulated)j(within)e(a)f(single)h(C)e(structure\).)0
1560 y(Finally)-6 b(,)24 b Fy(make_arg)d FC(guides)k(the)f(speci\002c)i
Fv(P)t(R)t(E)t(S)p 1590 1560 V 40 w(C)e FC(construction)j(for)d(a)f
(single)i(presented)h(parameter)-5 b(.)141 1673 y(There)23
b(are)g(three)h(routines)h(which)f(mak)o(e)f(the)g(lo)n(west-le)n(v)o
(el)i Fy(pres_c_mapping)18 b FC(for)23 b(a)g(particular)i(parameter)g
(type,)0 1786 y(as)e(follo)n(ws:)0 1974 y Fy(make_ref_arg\(\))300
2087 y FC(Creates)h(the)g(appropriate)j(mapping)e(for)f(a)f(port)h
(reference)i(\(similar)e(to)g(a)h Fv(C)t(O)t(R)t(B)r(A)f
FC(object)h(reference\).)0 2279 y Fy(make_string_arg\(\))300
2392 y FC(Creates)f(the)g(appropriate)j(mapping)e(for)f(a)f(string)h
(parameter)-5 b(.)0 2584 y Fy(make_simple_arg\(\))300
2697 y FC(Creates)24 b(the)g(appropriate)j(mapping)e(for)f(a)f(simple,)
h(nati)n(v)o(e)h(data)f(type)g(\(e.g.,)g(an)f(inte)o(ger)l(,)i
(\003oating)g(point,)f(char)l(,)300 2810 y(or)f(boolean\).)141
2998 y(If)18 b(the)h(parameter)h(type)f(is)f(an)g(array)-6
b(,)20 b(the)f(element)g(type)g(will)f(be)g(created,)j(and)e(an)f
(array)h(will)f(be)g(\223interposed\224)k(on)d(top)0
3111 y(of)k(the)h(element')-5 b(s)25 b(mapping.)30 b(Other)24
b(things)h(may)e(be)g(interposed)k(on)c(the)h(mapping,)h(such)f(as)f
(the)h(parameter)h(direction,)0 3224 y(translation)34
b(\(between)d(user)n(-de\002ned)j(and)d(compatible)h(nati)n(v)o(e)g
(types\),)h(allocation)g(semantics,)h(and)d(the)g(parameter')-5
b(s)0 3337 y(root)22 b(tag.)28 b(These)22 b(functions)i(are)d(named)h
Fy(interpose_*)c FC(or)j Fy(pres_c_interpose_*)p FC(,)16
b(depending)24 b(on)d(whether)i(or)e(not)0 3450 y(the)o(y)j(belong)h
(to)f(the)h Fv(P)t(R)t(E)t(S)p 869 3450 V 40 w(C)g FC(library)-6
b(.)141 3563 y(T)f(w)o(o)34 b(important)j(functions)h(re)o(garding)f
(allocation)h(and)e(deallocation)j(are)c Fy(make_arg_server_dealloc_i)o
(n)0 3676 y FC(\(to)d(deallocate)j(\223in\224)e(parameters)h(on)e(the)h
(serv)o(er)g(side\))g(and)f Fy(make_arg_server_alloc_out)25
b FC(\(to)32 b(allocate)i(\223out\224)0 3789 y(parameters)c(on)e(the)g
(serv)o(er)g(side\).)43 b(The)27 b(latter)i(corresponds)i(directly)f
(to)d Fy(pg_state::p_param_server_a)o(lloc)o(_)0 3902
y(out)g FC(from)j(the)f(PG)e(library)-6 b(.)48 b(There)29
b(should)i(be)e(a)f(corresponding)34 b Fy(pg_state::p_param_server)o
(_de)o(allo)o(c_in)o FC(,)0 4015 y(ho)n(we)n(v)o(er)28
b(most)g(other)h(presentations)j(rely)d(on)f(stack-based)j(allocation)g
(of)d(\223in\224)h(parameters)h(on)e(the)g(serv)o(er)h(side)g(and)0
4128 y(thus)34 b(require)h(no)f(e)o(xplicit)g(deallocation.)64
b Fv(M)t(I)t(G)36 b FC(ho)n(we)n(v)o(er)d(has)h(the)g(capability)i(to)d
(send)h(data)g Fu(out-of-line)p FC(,)39 b(and)33 b(such)0
4241 y(data)28 b(will)f(be)g(allocated)j(automatically)g(by)d(the)h
(system)g(in)f(the)h(recei)n(ving)h(process')-5 b(s)30
b(address)f(space.)41 b(In)27 b(some)g(cases)0 4353 y(the)j
Fv(R)t(P)t(C)g FC(system)e(determines)i(whether)f(data)f(should)i(be)e
(sent)g(inline)h(or)f(out-of-line,)j(b)n(ut)e(must)f(properly)h
(deallocate)0 4466 y(it)h(to)g(preserv)o(e)h(a)f(consistent)j
(presentation.)51 b(There)31 b(are)f(also)h(a)e(fe)n(w)g
Fy(get_*_allocation)c FC(functions)33 b(to)d(return)h(the)0
4579 y(common)24 b Fy(pres_c_allocation)18 b FC(structures)26
b(describing)j Fv(M)t(I)t(G)r FC(')-5 b(s)24 b(allocation)i(semantics.)
0 4827 y Fz(Notes)0 5001 y FC(Flick')-5 b(s)29 b Fv(M)t(I)t(G)f
FC(PG)c(still)j(cannot)h(handle)f(e)n(v)o(erything)k
Fv(M)t(I)t(G)d FC(itself)f(supports.)38 b(Most)26 b(of)g(the)g
(unsupported)k(features,)e(ho)n(w-)0 5114 y(e)n(v)o(er)l(,)37
b(shouldn')n(t)g(tak)o(e)e(long)g(to)f(implement;)41
b(it)34 b(simply)h(hasn')n(t)h(been)f(a)e(high)i(priority)h(for)f(the)f
(de)n(v)o(elopment)j(team.)0 5227 y(F)o(ollo)n(wing)f(is)f(a)f(list)i
(of)f(unsupported)41 b Fv(M)t(I)t(G)r FC(isms,)e(and)d(a)e(brief)i
(description)j(of)c(ho)n(w)g(Flick)g(might)h(be)f(e)o(xtended)i(to)0
5340 y(implement)31 b(them.)49 b(Note)30 b(that)h(man)o(y)f(of)h(the)f
(unsupported)k(features)e(will)e(lik)o(ely)i(require)g(modi\002cation)g
(to)e(both)h(the)p eop
%%Page: 191 191
191 190 bop 0 -165 a Fx(11.3.)52 b(FLICK)21 b(PRESENT)-8
b(A)e(TION)18 b(GENERA)-10 b(T)n(OR)19 b(ARCHITECTURE)1308
b FC(191)2 91 y Fv(M)t(I)t(G)28 b FC(PG)d(and)i(the)g(Mach3/)r
Fv(M)t(I)t(G)j FC(back)d(end.)38 b(This)26 b(list)h(is)f(also)h
(contained)i(\(brie\003y\))f(in)e(the)h(\002le)e Fy(doc/BUGS)p
FC(.)35 b(F)o(or)25 b(more)0 204 y(information)h(re)o(garding)f(these)g
(concepts,)g(refer)g(to)e(the)h(MIG)e(Serv)o(er)i(Writer')-5
b(s)25 b(guide)136 437 y Fs(\017)46 b Fy(waittime)23
b FC(and)k Fy(nowaittime)22 b FC(are)27 b(properties)i(at)d(the)g
(global)h(le)n(v)o(el)g(of)f(the)i Fv(I)t(D)t(L)h FC(\002le,)d(af)n
(fecting)i(all)e(operations)227 550 y(after)e(their)g(use)f(\(the)o(y)g
(can)h(be)f(used)g(multiple)h(times\).)29 b(It)23 b(seems)g(the)h
(easiest)g(w)o(ay)f(to)f(implement)i(this)g(is)f(add)g(the)227
663 y(property)30 b(to)e(the)g(internal)i(representation,)i(and)c(pick)
h(it)e(out)h(when)g(generating)j(the)d(operation.)44
b(F)o(or)27 b(functions)227 776 y(that)f(do)g(not)g(ha)n(v)o(e)g(their)
g(o)n(wn)f(special)i Fy(waittime)22 b FC(parameter)27
b(\(which)f(is)g(currently)h(supported\),)i(an)c(\223implied\224)227
889 y(parameter)f(may)e(be)h(used)g(for)f(the)h(same)f(purpose.)30
b(The)22 b(mapping)i(w)o(ould)f(be)f(similar)h(to)f(the)h(supported)i
(e)o(xplicit)227 1002 y Fy(waittime)e FC(parameter:)36
b(a)26 b Fy(PRES_C_MAPPING_MESSAGE_)o(ATTR)o(IBU)o(TE)19
b FC(with)26 b(the)g(kind)h Fy(PRES_C_MESSAGE_)227 1115
y(ATTRIBUTE_TIMEOUT)p FC(.)136 1318 y Fs(\017)46 b Fy(msgoption)31
b FC(is)k(another)h(global)g(property)h(af)n(fecting)f(all)f
(operations)i(that)e(can)g(be)g(implemented)h(similar)f(to)227
1431 y Fy(waittime)17 b FC(and)j Fy(nowaittime)15 b FC(abo)o(v)o(e.)28
b(Again,)20 b(the)g(parameter)h(option)g(v)o(ersion)g(of)e(this)h(is)f
(currently)j(supported.)136 1635 y Fs(\017)46 b Fy(serversecid)21
b FC(and)k Fy(usersecid)c FC(indicate)27 b(security)g(identi\002er)f
(parameters.)33 b(These)25 b(can)g(most)g(lik)o(ely)h(be)e(sup-)227
1748 y(ported)36 b(in)e(the)g(same)g(manner)h(that)f(security)i
(identi\002ers)g(are)e(supported)j(in)d(the)i Fv(C)t(O)t(R)t(B)r(A)f
FC(presentation.)64 b(See)227 1861 y Fy(process_params)28
b FC(from)33 b(the)g(base)g(library)i(and)e Fy(p_client_stub_special_p)
o(aram)o(s)26 b FC(from)32 b(the)j Fv(C)t(O)t(R)t(B)r(A)227
1974 y FC(PG)22 b(for)i(more)f(information.)136 2178
y Fs(\017)46 b Fy(countinout)17 b FC(can)k(be)g(implemented)h(by)f
(adding)h(the)f(array)h(count)g(parameter)g(to)e(the)h(request)i
(message)h Fv(P)t(R)t(E)t(S)p 3817 2178 28 4 v 39 w(C)227
2291 y FC(structure.)40 b(The)25 b(catch)j(is)e(that)h(the)f(array)i
(in)e(the)g(reply)i(must)e(be)g(rejected)j(if)d(it)g(e)o(xceeds)i(the)e
(count)i(passed)g(into)227 2404 y(the)f(stub)l(.)40 b(It)26
b(may)g(be)h(possible)i(to)e(accomplish)i(this)e(in)f(the)h(allocation)
j(conte)o(xt)e(structure,)h(b)n(ut)f(it)e(may)h(require)227
2516 y(more)d(infrastructure)k(to)c(allo)n(w)g(data)h(to)f(be)g(passed)
h(between)h(the)e Fy(mu_state)p FC(s)d(of)j(the)h(request)g(and)g
(reply)g(in)f(the)227 2629 y(back)h(end.)136 2833 y Fs(\017)46
b Fy(samecount)23 b FC(should)28 b(be)e(relati)n(v)o(ely)i
(straightforw)o(ard;)k(the)27 b(pre)n(vious)h(array')-5
b(s)28 b(count)f(parameter)h(can)e(be)h(reused)227 2946
y(in)d(the)g(allocation)i(conte)o(xt.)136 3150 y Fs(\017)46
b Fy(physicalcopy)23 b FC(and)28 b Fy(overwrite)23 b
FC(w)o(ould)28 b(lik)o(ely)g(be)f(handled)i(as)e(a)g(properties)j(of)d
(the)g(out-of-line)j(allocator)l(,)227 3263 y(or)24 b(part)g(of)f(the)h
(allocation)i(semantics.)136 3467 y Fs(\017)46 b Fy(retcode)31
b FC(probably)37 b(w)o(ould)d(cause)h(the)g(associated)h(parameter)g
(to)e(be)g(ordered)h(\002rst)f(in)g(the)g(list)g(of)g(parame-)227
3580 y(ters,)27 b(re)o(gardless)h(of)e(its)g(actual)h(position.)38
b(Ideally)-6 b(,)28 b(it)d(w)o(ould)i(indicate)h(that)e(the)g(message)h
(w)o(as)f(actually)i(a)d(reply)227 3693 y(message)k(instead)g(of)e(a)g
(request,)i(and)f(place)g(the)g(return)h(code)f(in)f(the)g(proper)i
(location;)j(ho)n(we)n(v)o(er)l(,)e Fv(M)t(I)t(G)r FC(')-5
b(s)28 b(mes-)227 3805 y(sage)33 b(formats)h(for)f(requests)h(and)f
(replies)h(are)f(similar)g(enough)h(it)f(could)g(be)g(simulated)h(by)e
(just)i(a)e(parameter)227 3918 y(reordering.)136 4122
y Fs(\017)46 b FC(Asynchronous)32 b Fv(R)t(P)t(C)c FC(is)e(possible)i
(using)f(tw)o(o)f Fy(simpleroutine)p FC(s,)c(one)27 b(with)f(a)g
Fy(retcode)d FC(parameter)l(,)28 b(and)f(ap-)227 4235
y(propriate)22 b(numbering)g(of)d(the)h(\223reply\224)h(operation.)30
b(Once)19 b Fy(retcode)e FC(is)j(implemented,)h(this)f(should)i
(\223just)e(w)o(ork\224,)227 4348 y(b)n(ut)k(it)g(has)g(ne)n(v)o(er)g
(been)g(tested)h(or)e(thoroughly)k(thought)e(out.)136
4552 y Fs(\017)48 b Fv(M)t(I)t(G)31 b FC(allo)n(ws)e(one)g(to)g(pass)g
(in)g(b)n(uf)n(fers)h(for)f(`out')g(parameters,)j(so)c(the)h(data)h
(may)e(be)h(copied)h(directly)g(into)g(pre-)227 4665
y(allocated)e(space)f(\(if)f(the)g(b)n(uf)n(fer)h(isn')n(t)g(lar)n(ge)g
(enough,)h(it)e(will)f(be)h(reallocated)j(to)c(an)h(appropriate)j
(size\).)36 b(Unfor)n(-)227 4778 y(tunately)-6 b(,)28
b(Flick)d(doesn')n(t)i(currently)h(support)f(this)f(notion)h(of)e(b)n
(uf)n(fer)h(management.)36 b(A)24 b(similar)h(situation)j(arises)227
4891 y(in)e(the)j Fv(C)t(O)t(R)t(B)r(A)e FC(presentation)j(with)c
(`inout')i(sequences,)h(where)d(we)g(deallocate)j(the)d(`in')h(v)o
(ersion)h(and)e(allocate)227 5004 y(for)e(the)g(`out')g(v)o(ersion)h
(instead)h(of)d(reusing)i(the)f(space)h(or)e(reallocating)k(as)d
(needed.)136 5207 y Fs(\017)46 b FC(P)o(assing)28 b(arrays)g(of)f
(polymorphic)i(types)f(hasn')n(t)h(been)f(tested)g(much.)39
b(At)26 b(one)h(point)h(it)f(w)o(as)f(belie)n(v)o(ed)j(to)d(w)o(ork,)
227 5320 y(so)e(use)g(at)f(your)h(o)n(wn)f(risk.)p eop
%%Page: 192 192
192 191 bop 0 -165 a FC(192)1893 b Fx(CHAPTER)20 b(11.)52
b(PRESENT)-8 b(A)e(TION)18 b(GENERA)-10 b(T)n(ORS)0 91
y Ft(11.4)119 b(Summary)29 b(and)i(Comments)0 298 y FC(Presentation)c
(generation)g(is)e(only)g(half)g(of)f(the)h(story)-6
b(.)33 b(In)24 b(man)o(y)h(instances,)h(a)e(gi)n(v)o(en)h(presentation)
j(is)d Fu(almost)i FC(what)d(the)0 411 y(user)31 b(w)o(ants,)g(with)f
(the)g(e)o(xception)j(of)d(only)g(a)g(fe)n(w)f(minor)i(tweaks,)h(such)e
(as)g(name)g(changes)i(or)e(slight)i(v)n(ariations)g(on)0
524 y(semantics.)e(F)o(or)20 b(e)o(xample,)i(a)g Fv(C)t(O)t(R)t(B)r(A)r
FC(-lik)o(e)f(presentation)k(might)c(be)g(desired,)i(b)n(ut)e(with)g
(the)g(allocation)j(semantics)e(such)0 637 y(that)28
b(a)g(zero-cop)o(y)j(en)l(vironment)g(is)c(possible)k(\(e.g.,)d(out)g
(parameters)i(are)e(al)o(w)o(ays)h(preallocated)j(by)c(the)g(caller)h
(on)f(the)0 750 y(client)k(side,)g(so)e(the)h(data)g(can)g(be)f(placed)
i(e)o(xactly)g(where)f(it)f(needs)h(to)g(be)f(rather)i(than)f(in)f
(freshly)i(allocated)h(space\).)0 863 y(While)d(it)g(is)g(relati)n(v)o
(ely)i(simple)f(to)e(implement)j(this)e(functionality)k(by)c(deri)n
(ving)i(a)e(ne)n(w)f(class)i(from)f(the)i Fv(C)t(O)t(R)t(B)r(A)f
FC(PG)0 976 y(library)-6 b(,)32 b(it)d(w)o(ould)h(be)f(f)o(ar)h(easier)
g(and)g(more)f(useful)i(to)e(ha)n(v)o(e)h(a)f(presentation)k
Fu(modi\002cation)f FC(system,)f(where)f(\(at)f(least)0
1089 y(some\))22 b(pieces)h(of)f(the)g(presentation)j(can)e(be)e(tweak)
o(ed)i(according)i(to)d(some)g(description.)31 b(Ideally)-6
b(,)23 b(e)n(v)o(en)f(more)g(comple)o(x)0 1202 y(presentations)27
b(such)e(as)e(decomposed)j(stubs)f(could)g(be)e(e)o(xpressible)k(in)c
(a)g(presentation)k(modi\002cation)f(language.)141 1315
y(At)i(one)h(time,)h(Flick)e(had)i(such)f(a)f(utility)-6
b(,)32 b(named)d Fy(pdl)p FC(,)f(which)h(can)g(be)g(found)h(in)e(the)h
Fy(c/pdl)e FC(directory)-6 b(.)47 b(It)28 b(e)n(v)o(en)0
1427 y(serv)o(ed)k(as)f(a)f(dri)n(ving)i(utility)-6 b(,)34
b(in)l(v)n(oking)g(the)d(other)h(stages)g(of)f(Flick)g(as)g(needed)h
(to)f(produce)i(stubs)f(in)e(a)h(single)h(step.)0 1540
y(The)i(code)h(is)f(se)n(v)o(erely)i(out-of-date,)j(ho)n(we)n(v)o(er)l
(,)f(and)d(has)f(been)h(lar)n(gely)h(ignored)h(as)d(adv)n(ancements)j
(in)d(Flick)h(ha)n(v)o(e)0 1653 y(been)29 b(made.)44
b(In)28 b(the)h(future,)h(it)f(is)f(intended)i(to)f(resurrect)h(this)f
(relic)h(\(or)e(at)g(least)i(its)e(intention\))j(to)e(pro)o(vide)h(a)e
(simple)0 1766 y(means)23 b(whereby)h(application)i(writers)d(may)f
(modify)i(a)e(presentation)k(to)d(their)g(needs)h(and)f(liking,)h
(rather)g(than)f(limiting)0 1879 y(e)o(xtension)j(only)e(to)g(de)n(v)o
(elopers)i(f)o(amiliar)e(with)g(Flick')-5 b(s)24 b(internal)h(design.)p
eop
%%Page: 193 193
193 192 bop 0 716 a Fw(Chapter)44 b(12)0 1134 y FB(Back)51
b(Ends)0 1581 y FC(The)30 b(presentation)j(created)f(by)e(the)h
(presentation)i(generators)g(contains)f(only)f(the)g(outside)h(vie)n(w)
-6 b(,)31 b(the)f(language)j(pre-)0 1694 y(sentation)27
b(and)d(beha)n(vior)l(,)j(of)d(a)g(series)i(of)e(functions.)33
b(T)-7 b(o)23 b(create)i(the)g(actual)g(implementations)j(of)c(these)h
(presentations)0 1807 y(the)o(y)30 b(need)g(to)f(be)h(fed)f(into)h(a)f
(back)i(end)e(code)i(generator)-5 b(.)48 b(There)30 b(are)g(se)n(v)o
(eral)g(distinct)h(back)f(ends)h(which)e(are)h(based)0
1920 y(on)d(a)g(common)g(library)i(that)e(does)h(most)f(of)g(the)g(w)o
(ork.)40 b(The)26 b(library)j(and)e(speci\002c)h(back)g(ends)g(are)f
(located)i(under)f(the)0 2033 y Fy(c/pbe)21 b FC(directory)-6
b(.)0 2339 y Ft(12.1)119 b(The)30 b(Back)g(End)g(Library)0
2551 y FC(The)19 b(back)h(end)g(library)h(is)e(the)h(base)g
(implementation)i(for)d(code)i(generation)h(which)d(is)h(then)g
(specialized)i(to)d(an)h(encoding)0 2664 y(scheme)25
b(and)f(runtime.)31 b(The)23 b(library)j(pro)o(vides)f(a)f(great)h
(deal)f(of)g(infrastructure)k(for)c(dealing)h(with)f(v)n(arious)h
(things,)h(lik)o(e)0 2777 y(command)i(line)g(ar)n(guments,)i(and)e
(loading)h(the)h Fv(P)t(R)t(E)t(S)p 1764 2777 28 4 v
39 w(C)f FC(input)f(\002le.)39 b(Ho)n(we)n(v)o(er)l(,)28
b(the)g(primary)g(job)g(of)f(the)g(library)i(is)e(to)0
2890 y(handle)i(the)e(translation)j(and)d(optimization)j(of)d(the)h
(input)i Fv(P)t(R)t(E)t(S)p 2106 2890 V 39 w(C)e FC(descriptions)j
(into)d(C)d(or)i(C++)g(code.)40 b(The)26 b(process)0
3003 y(of)c(interpreting)j(the)g Fv(P)t(R)t(E)t(S)p 869
3003 V 39 w(C)e FC(tree)g(f)o(alls)g(to)f(the)g Fy(mu_state)d
FC(f)o(amily)k(of)f(classes)h(which)g(pro)o(vide)g(a)f(number)h(of)f
(functions)0 3116 y(for)i(w)o(alking)g(the)g(tree)g(and)f(interpreting)
k(its)c(nodes.)30 b(The)23 b Fy(mu_state)e FC(can)i(then)h(be)g(o)o(v)o
(erridden)h(by)f(speci\002c)g(back)g(ends)0 3228 y(to)i(implement)g
(their)h(o)n(wn)e(functionality)-6 b(.)39 b(In)26 b(addition)i(to)e
(generating)i(code)f(from)e(the)j Fv(P)t(R)t(E)t(S)p
3052 3228 V 40 w(C)f FC(description)i(of)c(stubs,)0 3341
y(the)e(back)h(end)f(can)g(also)h(emplo)o(y)i Fv(S)t(C)t(M)t(L)g
FC(code)e(to)e(generate)j(formatted)g(C)d(and)h(C++)f(source)j(code.)k
(This)c Fv(S)t(C)t(M)t(L)h FC(code)d(is)0 3454 y(usually)28
b(de\002ned)f(e)o(xternally)i(and)d(then)h(called)h(e)o(xplicitly)g(by)
f(the)f(back)h(end.)37 b(The)26 b(process)i(of)e(calling)k
Fv(S)t(C)t(M)t(L)f FC(macros)0 3567 y(can)c(be)g(done)h(manually)h(as)d
(it)h(is)g(for)g(creating)i(the)e(header)i(and)e(footer)h(for)f(output)
i(\002les,)e(or)f(through)j(the)f(presentation)0 3680
y(implementation)g(and)e(collection)j(classes)e(described)h(later)-5
b(.)141 3795 y(The)28 b(declarations)k(for)c(the)g(library)i(classes)g
(and)f(functions)i(can)d(be)g(found)i(in)e(the)g Fy(mom/c/be)e
FC(directory)k(and)f(the)0 3908 y(source)c(in)e Fy(c/pbe/lib)p
FC(.)0 4171 y FA(12.1.1)99 b(Back)25 b(End)i(State)0
4350 y FC(The)j(\002rst)g(set)g(of)g(classes)i(we')o(ll)e(look)h(at)g
(are)f(used)h(for)f(maintaining)j(state)e(in)f(the)h(back)g(end)g(and)f
(managing)i(the)f(top)0 4463 y(le)n(v)o(el)26 b(\003o)n(w)e(of)h
(control.)36 b(The)25 b(classes)i(and)f(functions)i(w)o(ork)e(together)
h(based)g(on)f(a)f(simple)h(e)n(v)o(ent)g(based)g(methodology)0
4576 y(to)34 b(allo)n(w)h(for)g(easy)g(e)o(xpansion.)64
b(The)34 b(core)h(of)g(this)g(model)g(is)f(a)g(handler)i(object)g
(which)f(can)g(process)h(an)f(e)n(v)o(ent,)i(it)0 4689
y(does)30 b(not)f(necessarily)k(ha)n(v)o(e)c(to)g(process)i(e)n(v)o
(ery)f(e)n(v)o(ent,)h(just)e(the)h(ones)g(it)e(is)h(interested)j(in.)45
b(These)30 b(handlers)h(are)e(then)0 4802 y(prioritized)e(and)d
(collected)i(into)f(an)e(object)i(which)g(is)e(able)i(to)e(distrib)n
(ute)k(a)c(single)i(e)n(v)o(ent)g(amongst)g(its)f(set)g(of)f(handlers.)
0 4915 y(The)29 b(resulting)i(system)f(allo)n(ws)f(for)g(easy)h
(addition)h(of)e(code)h(into)g(the)f(root)h(control)h(path)f(without)g
(ha)n(ving)h(to)e(tamper)0 5028 y(directly)c(with)f(the)g(library)-6
b(.)141 5143 y(T)f(ypes:)0 5340 y Fy(be_event)1882 5568
y FC(193)p eop
%%Page: 194 194
194 193 bop 0 -165 a FC(194)2658 b Fx(CHAPTER)20 b(12.)51
b(B)m(A)l(CK)22 b(ENDS)300 91 y FC(A)h(simple)h(structure)i(which)e
(has)g(an)g(e)n(v)o(ent)g(identi\002er)h(and)f(can)g(be)g(subclassed)i
(to)e(contain)i(e)o(xtra)e(information)300 204 y(about)h(an)e(e)n(v)o
(ent.)0 398 y Fy(be_handler)300 511 y FC(Contains)i(a)e(function)j
(pointer)f(which)f(is)f(e)o(xpected)j(to)d(handle)i(an)o(y)f
Fy(be_event)p FC(s)d(passed)k(to)e(it.)0 705 y Fy(be_looper)300
818 y FC(A)d(subclass)j(of)e Fy(be_handler)d FC(that)k(maintains)h(a)d
(list)i(of)f(tar)n(get)i Fy(be_handler)p FC(s.)i(Whene)n(v)o(er)d(an)f
(e)n(v)o(ent)h(is)f(gi)n(v)o(en)300 931 y(to)i(the)h(looper)h(it)f
(will)f(distrib)n(ute)j(it)d(to)h(the)g(tar)n(get)h(handlers.)0
1125 y Fy(be_file)300 1238 y FC(A)k(subclass)k(of)d Fy(be_looper)d
FC(that)k(is)f(used)h(to)g(track)g(an)o(y)f(\002les)g(in)h(the)f(back)h
(end)g(as)g(well)f(as)g(generate)i(their)300 1351 y(output.)41
b(The)26 b(handlers)k(that)d(are)g(added)i(to)e(the)g
Fy(be_file)d FC(object)29 b(are)e(e)o(xpected)i(to)e(generate)i(the)e
(output)i(for)300 1464 y(that)24 b(\002le.)0 1658 y Fy(be_state)300
1771 y FC(A)g(subclass)k(of)e Fy(be_looper)c FC(that)27
b(acts)f(as)f(the)h(primary)h(e)n(v)o(ent)f(handler)i(and)e(dumping)h
(ground)g(for)f(an)o(ything)300 1884 y(a)j(back)h(end)g(might)g(be)f
(interested)j(in.)46 b(Handlers)31 b(added)f(to)g(a)f
Fy(be_state)d FC(object)31 b(are)e(used)h(for)g(initializing)300
1997 y(v)n(ariables,)25 b(reacting)g(to)d(command)i(line)f(ar)n
(guments)i(and)f(directing)h(the)e Fy(be_files)d FC(to)j(generate)i
(themselv)o(es.)141 2188 y(Functions:)0 2379 y Fy(be_state)46
b(*get_be_state\(\))300 2492 y FC(Retrie)n(v)o(e)24 b(the)g
Fy(be_state)c FC(object)25 b(for)f(a)f(speci\002c)i(back)f(end)0
2686 y Fy(int)47 b(main\(int)e(argc,)51 b(char)c(**argv\))300
2799 y FC(The)29 b(library)h(pro)o(vided)h Fy(main)c
FC(simply)j(gets)g(a)e Fy(be_state)f FC(from)i Fy(get_be_state\(\))24
b FC(and)29 b(then)h(installs)h(an)o(y)300 2912 y(handlers.)g(Ne)o(xt,)
22 b(the)h(command)g(line)g(ar)n(guments)i(are)e(passed)i(to)d(the)h
Fy(be_state)d FC(for)j(processing)i(and)f(\002nally)300
3024 y(it)34 b(is)h(all)g(set)g(in)f(motion)i(by)f(sending)i(the)e
(initialize,)k(command)d(line)f(ar)n(gs,)j(and)d(shutdo)n(wn)i(e)n(v)o
(ents)e(to)g(the)300 3137 y Fy(be_state)p FC(.)141 3328
y(The)g(current)i(set)f(of)f(handler)j(functions)g(can)e(be)f(found)i
(in)e Fy(c/pbe/lib/arg_handlers.cc)o FC(,)d Fy(c/pbe/lib/)0
3441 y(state_handlers.cc)p FC(,)23 b(and)29 b Fy
(c/pbe/lib/file_handlers)o(.cc)o FC(.)35 b(The)28 b(handlers)i(are)e
(all)g(relati)n(v)o(ely)i(simple,)f(the)o(y)0 3554 y(just)20
b(react)g(to)f(whate)n(v)o(er)h(e)n(v)o(ents)g(the)o(y)g(are)f
(interested)j(in)d(and)h(can)g(then)g(choose)h(what)e(to)g(do)g(from)h
(there.)28 b(Currently)-6 b(,)21 b(only)0 3667 y(the)26
b(IIOPXX)d(back)j(end)g(installs)h(its)e(o)n(wn)g(handler:)35
b(it)25 b(squelches)j(the)d(output)i(of)e(an)o(y)h(de\002nitions)h
(from)e(the)h Fy(orb.idl)0 3780 y FC(\002le)d(after)h(the)i
Fv(P)t(R)t(E)t(S)h FC(has)d(been)h(read)f(in)f(by)h(the)g(earlier)h
(handlers.)0 4034 y FA(12.1.2)99 b(Stub)26 b(Generators)0
4210 y FC(Once)h(the)h(\003o)n(w)e(of)h(control)i(comes)f(do)n(wn)f
(from)g(the)g(high)h(le)n(v)o(el)g(handler)h(functions,)i(we)26
b(\002nally)i(get)f(to)h(generate)h(the)0 4323 y(contents)24
b(of)d(a)g(\002le.)27 b(The)21 b(handlers)j(in)d Fy(file_handlers.cc)c
FC(tak)o(e)22 b(care)g(of)f(this)h(by)g(calling)h(stub)f(generation)j
(functions)0 4436 y(for)30 b(each)h(stub)f(described)j(in)d(the)i
Fv(P)t(R)t(E)t(S)p 1323 4436 28 4 v 39 w(C)r FC(.)47
b(The)30 b(functions)i(pro)o(vided)g(by)e(the)g(back)h(end)f(library)h
(are)g(empty)f(for)g(the)0 4549 y(most)22 b(part)h(since)h(the)o(y)f
(are)f(e)o(xpected)i(to)f(be)f(implemented)j(by)d(the)h(speci\002c)g
(back)g(end:)29 b(information)c(is)e(required)h(about)0
4662 y(the)g(runtime)g(in)g(order)g(to)g(generate)h(correct)h(code.)141
4775 y(T)-7 b(ype)34 b(marshaling)i(and)e(unmarshaling)j(stubs)e(are)g
(generated)h(a)e(bit)g(dif)n(ferent)i(from)d(re)o(gular)j(client)f(and)
f(serv)o(er)0 4888 y(stubs.)h(Since)25 b(the)o(y)g(are)h(rarely)g
(used,)g(we)f(generate)i(them)e(on)g(demand)h(to)f(pre)n(v)o(ent)i(e)o
(xcessi)n(v)o(e)f(output.)35 b(Whene)n(v)o(er)27 b(one)0
5001 y(of)32 b(these)g(stubs)h(is)e(needed)j(\(a)d(call)h(to)g(the)g
(stub)g(is)f(generated)k(in)c(the)h(code\),)i(we)d(create)i(an)f
Fy(mu_stub_info_node)0 5114 y FC(and)f(store)h(a)f(reference)i(to)e
(the)g(stub)h(and)f(ho)n(w)g(it)g(is)f(going)j(to)e(be)g(used)g
(\(parameter)i(direction)h(and)d(bytesw)o(ap)i(\003ag\).)0
5227 y(This)25 b(node)g(is)g(then)h(put)f(into)g(a)g(list)g(k)o(ept)g
(by)g(the)h Fy(be_state)p FC(.)j(After)c(all)g(other)h(stubs)g(ha)n(v)o
(e)f(been)h(generated,)h(the)e(set)g(of)0 5340 y(required)h
(marshal/unmarshal)h(stubs)e(are)f(generated)i(by)d(tra)n(v)o(ersing)j
(the)e(list.)p eop
%%Page: 195 195
195 194 bop 0 -165 a Fx(12.1.)52 b(THE)21 b(B)m(A)l(CK)h(END)f(LIBRAR)
-6 b(Y)2459 b FC(195)0 91 y Fy(void)47 b(w_stub\(pres_c_1)c(*pres,)51
b(int)46 b(idx\))300 204 y FC(This)23 b(will)f(dispatch)j(to)e(one)h
(of)f(the)g(functions)i(belo)n(w)e(depending)j(on)d(the)g(type)h(of)f
(stub)l(.)29 b(The)23 b(stubs)h(belo)n(w)f(are)300 317
y(meant)h(to)f(be)h(o)o(v)o(erridden)i(by)d(the)h(back)h(end)f(since)g
(the)o(y)g(tend)g(to)g(be)f(speci\002c)i(to)e(the)h(runtime.)0
509 y Fy(void)47 b(w_marshal_stub\(pres_c_1)41 b(*pres,)50
b(int)d(idx\))300 622 y FC(Writes)24 b(out)g(a)f(marshaling)j(stub)e
(for)g(a)f(speci\002c)h(data)h(type.)k(The)23 b(base)h(library)h
(de\002nes)g(this)f(to)f(do)h(nothing.)0 814 y Fy(void)47
b(w_unmarshal_stub\(pres_c)o(_1)42 b(*pres,)50 b(int)d(idx\))300
927 y FC(Writes)22 b(out)g(an)f(unmarshaling)k(stub)d(for)g(a)f
(speci\002c)h(data)g(type.)29 b(The)21 b(base)h(library)h(de\002nes)f
(this)h(to)e(do)g(nothing.)0 1119 y Fy(void)47 b
(w_client_stub\(pres_c_1)41 b(*pres,)51 b(int)46 b(stub_idx\))300
1232 y FC(Writes)30 b(out)g(a)e(client)33 b Fv(R)t(P)t(C)e
FC(stub)l(.)47 b(This)29 b(is)h(left)f(unde\002ned)i(in)f(the)f(base)h
(library;)k(the)c(responsibility)j(belongs)300 1345 y(entirely)25
b(to)f(the)g(speci\002c)g(back)h(end)f(ho)n(w)f(a)g(client)h(stub)h(is)
e(generated.)0 1537 y Fy(void)47 b(w_skel\(pres_c_1)c(*pres,)51
b(int)46 b(stub_idx\))300 1650 y FC(Writes)26 b(out)f(a)g(serv)o(er)h
(or)f(client)h(sk)o(eleton)i(\(dispatch)g(function\).)36
b(This)25 b(is)g(left)g(unde\002ned)i(in)e(the)g(base)h(library;)300
1763 y(the)e(responsibility)k(belongs)d(entirely)h(to)d(the)h
(speci\002c)g(back)h(end)f(ho)n(w)f(a)g(sk)o(eleton)j(is)d(generated.)0
1955 y Fy(void)47 b(w_send_stub\(pres_c_1)42 b(*pres,)50
b(int)d(stub_idx\))300 2068 y FC(Writes)34 b(out)h(a)e(stub)i(meant)f
(only)h(for)f(sending)i(a)d(speci\002c)i(message)g(type)g(\(part)g(of)f
(the)g(decomposed)i(stub)300 2181 y(model\).)29 b(The)24
b(base)g(library)h(v)o(ersion)g(causes)g(a)e(w)o(arning)i(to)e(be)h
(emitted,)g(and)g(no)g(code)g(is)f(generated.)0 2373
y Fy(void)47 b(w_recv_stub\(pres_c_1)42 b(*pres,)50 b(int)d(stub_idx\))
300 2486 y FC(Writes)31 b(out)g(a)f(stub)i(meant)f(only)g(for)g(recei)n
(ving)i(a)d(speci\002c)h(message)h(type)f(\(part)h(of)e(the)h
(decomposed)i(stub)300 2599 y(model\).)c(The)24 b(base)g(library)h(v)o
(ersion)g(causes)g(a)e(w)o(arning)i(to)e(be)h(emitted,)g(and)g(no)g
(code)g(is)f(generated.)0 2791 y Fy(void)47 b(w_msg_marshal_stub\(pres)
o(_c_1)41 b(*pres,)50 b(int)d(idx\))300 2904 y FC(Writes)26
b(out)f(a)g(stub)h(meant)f(for)h(marshaling)h(a)e(complete,)i
(speci\002c)f(message)g(type)g(\(part)g(of)f(the)h(decomposed)300
3017 y(stub)e(model\).)30 b(The)23 b(base)h(library)h(v)o(ersion)g
(causes)g(a)e(w)o(arning)i(to)e(be)h(emitted,)g(and)g(no)g(code)g(is)g
(generated.)0 3209 y Fy(void)47 b(w_msg_unmarshal_stub\(pr)o(es_c)o(_1)
41 b(*pres,)51 b(int)c(idx\))300 3322 y FC(Writes)20
b(out)f(a)g(stub)h(meant)f(for)g(unmarshaling)j(a)d(complete,)i
(speci\002c)f(message)g(type)g(\(part)g(of)f(the)h(decomposed)300
3435 y(stub)k(model\).)30 b(The)23 b(base)h(library)h(v)o(ersion)g
(causes)g(a)e(w)o(arning)i(to)e(be)h(emitted,)g(and)g(no)g(code)g(is)g
(generated.)0 3627 y Fy(void)47 b(w_continue_stub\(pres_c_)o(1)42
b(*pres,)50 b(int)d(idx\))300 3740 y FC(Writes)32 b(out)f(a)g(stub)h
(meant)g(for)f(continuing)k(a)30 b(delayed)k(message)e(\(part)g(of)f
(the)h(decomposed)i(stub)e(model\).)300 3853 y(The)23
b(base)h(library)h(v)o(ersion)g(causes)g(a)f(w)o(arning)g(to)g(be)f
(emitted,)h(and)g(no)g(code)g(is)g(generated.)0 4045
y Fy(void)47 b(do_main_output\(pres_c_1)41 b(*pres\))300
4158 y FC(This)23 b(can)h(be)g(used)g(to)g(write)f(out)h(a)f(main)h
(function)h(for)f(a)f(serv)o(er)-5 b(.)30 b(By)23 b(def)o(ault,)i
(nothing)g(is)f(generated.)0 4350 y Fy(void)47 b
(make_interface_graph\(pr)o(es_c)o(_1)41 b(*pres\))300
4463 y FC(This)21 b(is)g(a)f(bit)h(of)g(a)g(hack)h(used)g(to)e(get)i
(information)h(about)f(runtime)g(type)g(information)i(into)d(source)i
(code.)28 b(This)300 4576 y(is)e(only)h(really)h(used)f(to)f(help)h
(implement)j Fv(C)t(O)t(R)t(B)r(A)r FC(')-5 b(s)25 b
Fy(is_a)g FC(operation.)39 b(The)26 b(function)j(will)d(write)g(out)h
(a)f(data)300 4689 y(structure)d(containing)i(information)e(about)f
(interf)o(ace)i(inheritance)g(which)e(is)f(then)g(used)h(by)g(the)f
(runtime)h Fy(is_a)300 4802 y FC(function.)0 5052 y FA(12.1.3)99
b(mu)p 493 5052 30 4 v 36 w(state)0 5227 y FC(The)30
b Fy(mu_state)d FC(C++)i(class)i(is)f(the)h(primary)g(mechanism)g(for)f
(creating)j(marshaling)f(and)e(unmarshaling)k(code.)49
b(An)0 5340 y(object)31 b(of)f(this)g(class)h(is)e(created)j(and)e
(initialized)i(with)e(the)g(necessary)i(data)f(structures)h(from)e(the)
i Fv(P)t(R)t(E)t(S)p 3471 5340 28 4 v 39 w(C)f FC(and)f(then)p
eop
%%Page: 196 196
196 195 bop 0 -165 a FC(196)2658 b Fx(CHAPTER)20 b(12.)51
b(B)m(A)l(CK)22 b(ENDS)0 91 y FC(set)29 b(in)f(motion)i(to)e(create)i
(the)f(code.)45 b(Basically)-6 b(,)31 b(this)e(code)h(creation)g(is)f
(done)g(by)g(interpreting)j(the)d(intentions)i(of)e(the)2
204 y Fv(P)t(R)t(E)t(S)p 194 204 28 4 v 39 w(C)34 b FC(nodes)g(in)e
(the)h(presence)i(of)d(speci\002c)i(state)f(options,)k(set)32
b(at)h(initialization)j(or)c(by)h(conte)o(xt,)j(to)c(produce)j(the)0
317 y(actual)29 b(code.)41 b(The)27 b(class)h(itself)h(is)e(simply)h
(made)f(up)h(of)f(a)g(set)h(of)f(functions,)k(each)d(handling)i(a)d
(single)j Fv(P)t(R)t(E)t(S)p 3590 317 V 40 w(C)f FC(node.)0
430 y(Each)g(function)j(does)e(some)f(processing)j(on)e(the)f(node,)j
(which)d(may)g(include)i(using)g(the)f Fy(mu_state)c
FC(to)j(process)i(an)o(y)0 543 y(child)h(nodes.)51 b(Thus,)33
b(\003e)o(xibility)f(comes)f(from)g(o)o(v)o(erriding)i(these)e
(functions)j(to)c(specialize)k(them)c(to)h(the)g(needs)h(of)f(a)0
656 y(back)i(end.)56 b(An)o(y)31 b(code)i(produced)i(is)d(stored)i(in)g
Fv(C)t(A)t(S)t(T)i FC(blocks)d(rather)h(than)f(directly)h(writing)f(to)
g(the)f(\002le,)i(since)f(we)0 769 y(we)c(may)g(w)o(ant)h(to)f(perform)
i(some)f(post-processing)k(on)c(the)g(generated)i(code.)48
b(Finally)-6 b(,)32 b(the)d(user)i(of)e(the)h Fy(mu_state)0
882 y FC(tak)o(es)d(whate)n(v)o(er)i Fv(C)t(A)t(S)t(T)h
FC(is)c(left)g(after)h(processing)j(and)c(wraps)h(it)f(with)g(whate)n
(v)o(er)h(boilerplate)i(code)e(is)f(necessary)j(for)e(a)0
995 y(complete)e(construct.)0 1249 y Fz(W)-6 b(alking)23
b(the)g(PRES)p 733 1249 V 31 w(C)g(tr)n(ee)0 1426 y FC(Processing)37
b(a)g Fv(P)t(R)t(E)t(S)p 697 1426 V 40 w(C)f FC(node)g(usually)h
(requires)g(more)e(information)j(than)e(is)f(contained)j(in)d(the)h
(node)g(itself.)64 b(This)0 1539 y(is)31 b(due)g(to)f(the)h(structure)i
(of)e(the)i Fv(P)t(R)t(E)t(S)p 1282 1539 V 39 w(C)f FC(tree;)j(since)d
(it)e(does)i(not)f(al)o(w)o(ays)g(encode)h(references)i(to)e
Fv(C)t(A)t(S)t(T)i FC(and)f Fv(M)t(I)t(N)t(T)0 1652 y
FC(structures,)k(these)c(need)g(to)g(be)f(w)o(alk)o(ed)h(in)f
(parallel.)57 b(This)32 b(is)g(why)g(some)g(functions)j(require)f(ar)n
(guments)h(for)f Fv(C)t(A)t(S)t(T)0 1765 y FC(and)j Fv(M)t(I)t(N)t(T)h
FC(structures,)i(ho)n(we)n(v)o(er)l(,)f(a)d Fv(P)t(R)t(E)t(S)p
1448 1765 V 39 w(C)h FC(node)e(does)h(not)f(necessarily)j(ha)n(v)o(e)e
(to)f(tra)n(v)o(erse)h(the)g(structures.)65 b(F)o(or)0
1878 y(e)o(xample,)31 b(a)d Fy(PRES_C_MAPPING_POINTER)22
b FC(will)29 b(pass)g(do)n(wn)g(the)g(C)f(type)i(that)f(the)g(pointer)i
(is)e(referring)i(to,)e(b)n(ut)h(the)2 1991 y Fv(M)t(I)t(N)t(T)c
FC(structure)g(is)d(not)g(descended)j(since)e(it)f(has)h(no)f
(representation)28 b(of)23 b(pointers.)30 b(The)23 b(functions)j(that)e
(do)f(not)h(require)0 2104 y(a)30 b Fv(C)t(A)t(S)t(T)h
FC(object)e(instead)h(w)o(ork)e(of)n(f)g(of)g(a)g(collection)j(of)f
Fv(C)t(A)t(S)t(T)h FC(objects)f(accessed)g(through)g(an)e
Fy(inline_state)p FC(.)39 b(The)0 2217 y Fy(inline_state)24
b FC(is)29 b(used)g(to)g(map)f(indices)i(from)e(a)g Fy
(PRES_C_INLINE_ATOM)23 b FC(to)29 b(a)f(C)f(structure,)32
b(union,)f(or)d(function)0 2329 y(encoded)g(in)f Fv(C)t(A)t(S)t(T)r
FC(.)36 b(Once,)26 b(the)g Fy(PRES_C_INLINE_ATOM)20 b
FC(is)25 b(e)o(x)o(ecuted)i(the)f Fy(mu_state)d FC(goes)j(into)g
(\223mapping\224)i(mode)0 2442 y(and)h(the)g(selected)j
Fv(C)t(A)t(S)t(T)g FC(object)d(is)g(passed)h(do)n(wn)e(to)g(the)h
(mapping)h(nodes.)45 b(Once)28 b(we')-5 b(v)o(e)29 b(\002gured)g(out)g
(what)f(objects)0 2555 y(we')-5 b(re)22 b(trying)g(to)f(process)i(we)d
(need)i(to)f(kno)n(w)g(what)g(we')-5 b(re)21 b(supposed)j(to)d(do)g
(with)g(them.)28 b(The)21 b Fy(op)e FC(slot)j(in)f(the)g
Fy(mu_state)0 2668 y FC(is)j(used)h(for)f(this;)i(it)e(can)g(be)g(set)h
(with)f(se)n(v)o(eral)h(\003ags)f(that)h(will)f(in\003uence)h(the)g
(code)g(to)f(do)g(what)g(is)g(needed)i(by)e(the)h(user)-5
b(.)0 2781 y(The)23 b(current)i(set)f(of)f(\003ags)h(is:)0
2974 y Fy(MUST_ALLOCATE)300 3087 y FC(Memory)e(should)g(be)g(allocated)
h(whene)n(v)o(er)f(it)f(is)h(needed.)29 b(F)o(or)20 b(a)h(serv)o(er)h
(stub,)h(the)e(space)h(for)g(the)f(unmarshaled)300 3200
y(`in')k(parameters)i(and)e(\223root\224)h(space)f(for)g(the)g(`out')h
(parameters)g(that)g(will)e(be)g(\002lled)h(in)g(by)f(the)h(w)o(ork)g
(function)300 3313 y(should)k(be)e(allocated)i(at)e(this)h(point.)40
b(F)o(or)27 b(a)f(client)i(stub,)h(the)e(results)i(contained)h(in)d
(the)g(reply)h(message)g(may)300 3426 y(need)d(to)f(ha)n(v)o(e)h(space)
g(allocated)i(so)d(the)o(y)g(can)h(be)f(returned)i(to)e(the)h(client)g
(program.)32 b(In)24 b(addition,)i(this)e(iterator)300
3539 y(should)h(deal)f(with)g(an)o(y)f(setup)i(necessary)h(to)e(be)o
(gin)g(an)h Fv(R)t(P)t(C)r FC(.)0 3735 y Fy(MUST_ENCODE)300
3848 y FC(Appropriate)h(v)n(alues)e(should)h(be)e(marshaled)i(into)f
(the)f(message)h(stream.)30 b(Gi)n(v)o(en)23 b(the)g(data)h(v)n(alues)g
(as)f(parame-)300 3961 y(ters)i(to)f(the)g(client)h(stub)g(or)f(as)g
(return)h(parameters)h(from)e(the)h(w)o(ork)f(function,)i(the)o(y)e
(are)h(serialized)h(into)f(a)f(data)300 4074 y(stream)g(according)i(to)
e(the)g(requirements)i(of)d(the)h(message)h(format)f(and)g(data)g
(encoding)i(scheme)f(in)e(use.)0 4270 y Fy(MUST_DECODE)300
4383 y FC(Appropriate)28 b(v)n(alues)f(should)g(be)f(unmarshaled)i
(from)e(the)g(message)h(stream.)35 b(The)26 b(serialized)i(data)e
(stream)g(is)300 4496 y(con)l(v)o(erted)e(into)e(the)g(data)h(v)n
(alues)f(that)g(can)g(be)g(returned)i(by)d(the)h(client)h(stub)f(or)g
(handed)h(to)f(the)g(w)o(ork)f(function,)300 4609 y(according)26
b(to)e(the)f(message)i(format)f(and)g(data)g(encoding)i(scheme)f(in)e
(use.)0 4805 y Fy(MUST_DEALLOCATE)300 4918 y FC(Memory)29
b(should)i(be)e(deallocated)k(when)c(it)g(is)g(no)g(longer)h(needed)h
(\(where)f(appropriate\).)49 b(More)29 b(generally)-6
b(,)300 5031 y(this)24 b(is)f(for)h(an)o(y)g(type)g(of)g(cleanup)h
(necessary)h(to)e(complete)h(an)g Fv(R)t(P)t(C)r FC(.)0
5227 y Fy(MUST_REQUEST,)48 b(MUST_REPLY)300 5340 y FC(These)37
b(indicate)h(that)f(the)g(current)h(state)g(is)e(handling)j(a)d
(request)i(or)f(reply)g(message,)k(respecti)n(v)o(ely)-6
b(.)70 b(This)p eop
%%Page: 197 197
197 196 bop 0 -165 a Fx(12.1.)52 b(THE)21 b(B)m(A)l(CK)h(END)f(LIBRAR)
-6 b(Y)2459 b FC(197)300 91 y(kno)n(wledge)24 b(is)d(implicitly)j(held)
f(by)f(the)g(other)h(\003ags)e(and)i(whether)f(client)h(or)f(serv)o(er)
h(code)g(is)e(being)i(generated;)300 204 y(ho)n(we)n(v)o(er)l(,)30
b(it)e(is)h(more)f(con)l(v)o(enient)k(to)c(ha)n(v)o(e)i(an)e(e)o
(xplicit)i(\003ag)e(to)h(represent)i(this.)44 b(Naturally)-6
b(,)31 b(these)f(\003ags)e(are)300 317 y(mutually)d(e)o(xclusi)n(v)o
(e.)0 575 y Fz(Marshaling)f(Buffer)f(Management)0 754
y FC(Stubs)k(generated)j(for)e(non-tri)n(vial)j Fv(R)t(P)t(C)r
FC(s)d(generally)i(need)e(some)f(kind)h(of)f Fu(mar)o(shaling)j(b)n(uf)
n(fer)h FC(or)c Fu(str)m(eam)p FC(,)h(into)g(which)0
867 y(messages)f(are)e(marshaled)j(or)d(from)g(which)h(messages)h(are)e
(unmarshaled.)37 b(Sometimes)26 b(a)f(message)h(can)g(use)g(multiple)0
979 y(marshaling)d(b)n(uf)n(fers.)29 b(The)20 b(format)h(of)f(the)h
(marshaled)h(data)f(in)f(the)h(b)n(uf)n(fer\(s\))h(depends)h(on)d(the)h
(encoding)i(scheme)e(being)0 1092 y(used)i(by)g(the)f(back)h(end)g
(\(e.g.,)h Fv(X)t(D)t(R)g FC(is)e(an)g(encoding)j(scheme\),)e(and)g(by)
f(the)j Fv(M)t(I)t(N)t(T)g FC(interf)o(ace)g(de\002nition)f(for)e(the)j
Fv(R)t(P)t(C)f FC(in)0 1205 y(question.)31 b(The)23 b(format)h(of)g
(the)f(marshaled)j(data)e(does)g Fu(not)i FC(usually)f(depend)h(on)d
(an)o(y)h(aspects)h(of)f(presentation.)141 1320 y(Some)g(transport)j
(mechanisms)f(can)f(transfer)i(an)e(\223unlimited\224)i(amount)e(of)g
(data)g(in)g(one)g(message)h(\(e.g.,)e(Mach)h(3\);)0
1433 y(others)30 b(impose)f(some)f(arbitrary)j(limit)d(\(e.g.,)h(Mach)f
(4\).)43 b(Flick)28 b(stubs)i(are)e(generally)j(e)o(xpected)f(to)e(be)h
(able)f(to)h(handle)0 1546 y(an)c(unlimited)i(amount)f(of)f(data,)h(re)
o(gardless)h(of)e(an)o(y)g(limitations)j(of)d(the)g(transport)j
(mechanism.)34 b(Fix)o(ed-length)28 b(arrays)0 1659 y(are)33
b(generally)i(handled)g(as)e(merely)g(a)g(de)o(generate)i(case)f(of)e
(v)n(ariable-length)37 b(arrays:)50 b(the)33 b(tw)o(o)f(types)i(of)f
(arrays)h(are)0 1772 y(identical)d(e)o(xcept)e(that)g(\002x)o
(ed-length)i(arrays)e(use)g(a)f(\223de)o(generate)j(inte)o(ger\224)f
(data)f(type)h(with)e(only)h(one)g(possible)h(v)n(alue)0
1885 y(as)i(their)h(length)g(data)f(type.)55 b(Thus,)34
b(\002x)o(ed)d(and)i(v)n(ariable-length)j(arrays)d(can)f(usually)i(be)e
(marshaled)i(in)e(e)o(xactly)h(the)0 1998 y(same)21 b(w)o(ay;)h(the)g
(simple-inte)o(ger)n(-marshalin)q(g)27 b(code)22 b(will)f
(automatically)j(handle)f(the)f(de)o(generate)i(length)e(\223v)n
(ariable\224)i(in)0 2111 y(\002x)o(ed-length)i(arrays)f(\(see)f
Fy(mu_mapping_direct.cc)p FC(\).)141 2226 y(The)g(back)g(end)g(support)
i(library)g(assumes)f(that)f(code)h(generation)h(can)f(be)e(done)i(by)f
(tra)n(v)o(ersing)j(the)d(type)g(trees)h(in)f(a)0 2338
y(certain)h(\223natural)h(order\224:)0 2534 y Fy(MINT_STRUCT)300
2647 y FC(Marshal)f(each)g(element)h(of)e(the)g(struct)i(in)e(the)h
(same)f(order)h(in)f(which)h(the)g(elements)g(appear)h(in)e(the)h
(presented)300 2760 y(structure.)55 b(Note)32 b(that)g(the)g(element)h
(ordering)h(in)d(the)h Fy(MINT_STRUCT)c FC(may)j(be)h(dif)n(ferent)i
(from)d(that)h(in)g(the)300 2873 y(presented)26 b(structure,)g(which)e
(may)f(in)g(turn)h(be)g(dif)n(ferent)h(from)f(that)g(which)g(is)f
(encoded)j(on)e(the)f(wire.)0 3071 y Fy(MINT_UNION)300
3184 y FC(Marshal)i(the)e(union)i(discriminator)i(\002rst,)c(then)h
(marshal)h(the)e(selected)j(union)f(case.)0 3383 y Fy(MINT_ARRAY)300
3496 y FC(First)39 b(marshal)h(the)g(array')-5 b(s)40
b(length)h(\(if)e(non-constant\),)47 b(then)39 b(marshal)i(each)e
(element)i(in)e(order)l(,)44 b(lo)n(west-)300 3609 y(inde)o(x)o(ed)25
b(element)f(\002rst.)141 3804 y(This)j(ordering)h(is)f(not)g(mandated;)
j(it)d(is)f(the)h(responsibility)k(of)26 b(the)h(back)h(end)f(to)g
(choose)h(an)f(appropriate)i(on-the-)0 3917 y(wire)23
b(layout)i(for)e(the)g(data,)h(as)f(the)g(needs)i(of)e(a)g(particular)i
(transport)h(mechanism)e(dictate.)30 b(F)o(or)23 b(e)o(xample,)h(just)f
(because)0 4030 y(the)32 b(type)g(graphs)i(are)d(tra)n(v)o(ersed)j(in)e
(the)g(order)g(speci\002ed)h(abo)o(v)o(e)g(does)f(not)g(mean)g(the)g
(data)g(must)g(al)o(w)o(ays)g(appear)h(in)0 4143 y(memory)g(or)g(on)g
(the)h(wire)e(in)h(e)o(xactly)i(this)e(order;)39 b(ho)n(we)n(v)o(er)l
(,)d(it)d(is)g(generally)i(easier)f(to)f(write)g(the)h(back)g(end)f(if)
g(the)0 4256 y(layouts)25 b(match.)0 4514 y Fz(Generated)f(Code)0
4692 y FC(The)e(actual)i(stub)f(code)h(that)f(gets)g(generated)i(is)e
(made)g(up)f(of)h(a)f(number)h(of)g(macro)g(calls)g(and)g(some)g
(control)h(\003o)n(w)e(code.)0 4805 y(The)29 b(macros)i(are)f(all)g
(de\002ned)g(in)g(the)g(runtime)h(header)g(\002les)f(and)g(follo)n(w)g
(similar)g(naming)h(and)f(calling)i(con)l(v)o(entions)0
4918 y(across)25 b(implementations.)195 5114 y Fy
(runtime/headers/flick/)195 5227 y(pres)1440 5114 y FC(These)h(headers)
h(are)f(speci\002c)h(to)e(the)h(presentation)j(implementation;)h(the)o
(y)1440 5227 y(pro)o(vide)42 b(macros)f(for)g(things)h(lik)o(e)f
(handling)i(e)o(xceptions)g(and)e(memory)1440 5340 y(management.)30
b(This)24 b(is)f(also)h(where)g(an)o(y)i Fv(S)t(C)t(M)t(L)h
FC(\002les)c(should)i(be)f(located.)p eop
%%Page: 198 198
198 197 bop 0 -165 a FC(198)2658 b Fx(CHAPTER)20 b(12.)51
b(B)m(A)l(CK)22 b(ENDS)195 91 y Fy(runtime/headers/flick/)195
204 y(encode)1440 91 y FC(These)27 b(headers)h(pro)o(vide)g(macros)f
(for)f(encoding)j(and)e(decoding)i(data)e(into)1440 204
y(and)d(out)g(of)f(the)h(message)h(b)n(uf)n(fer)-5 b(.)195
364 y Fy(runtime/headers/flick/)195 477 y(link)1440 364
y FC(These)19 b(headers)h(pro)o(vide)g(macros)f(for)f(managing)j(the)d
(message)i(b)n(uf)n(fers)g(and)1440 477 y(adding)25 b(an)o(y)f(link)g
(le)n(v)o(el)g(message)h(data.)141 681 y(When)19 b(the)g
Fy(mu_state)d FC(generates)22 b(these)e(macros)f(it)g(uses)g(the)g
Fy(op)f FC(\003ags)h(and)g(names)g(for)h(the)f(presentation,)k
(encoding)0 794 y(scheme,)40 b(and)c(protocol)i(\(link\))f(to)f
(determine)i(the)e(names)g(of)g(the)g(macros.)67 b(F)o(or)35
b(e)o(xample,)k(the)d(macro)h(to)f(encode)0 907 y(an)f(8-bit)h
(character)i(in)f Fv(C)t(D)t(R)g FC(w)o(ould)e(be)h Fy
(flick_cdr_encode_char8\()o(\))p FC(,)31 b(and)36 b(the)g(macro)f(to)g
(decode)i(w)o(ould)f(be)0 1020 y Fy(flick_cdr_decode_char8\(\))o
FC(.)28 b(Unfortunately)-6 b(,)29 b(this)d(approach)i(can)e(cause)g
(some)g(problems)h(because)g(it)e(restricts)0 1133 y(what)e(parameters)
j(we)d(can)h(pass)g(to)f(the)h(macros,)g(especially)i(presentation)i
(speci\002c)c(macros)g(which)g(can)g(v)n(ary)g(greatly)-6
b(.)141 1250 y(Also)22 b(note)g(that)g(much)g(of)f(Flick')-5
b(s)22 b(\003e)o(xibility)h(is)f(actually)h(due)f(to)g(the)f
(implementation)k(of)c(the)h(macro)g(calls.)29 b(While)0
1363 y(the)e(names)g(change)h(between)g(back)f(ends,)h(often)g(the)f
(series)h(of)e(macro)h(calls)h(is)e(v)o(ery)h(similar)l(,)i(and)e(thus)
g(a)f(signi\002cant)0 1476 y(amount)e(of)g(the)g(implementation)i
(comes)e(from)g(the)f(de\002nitions)j(of)e(the)f(macros.)0
1749 y FA(12.1.4)99 b(client)p 587 1749 30 4 v 36 w(mu)p
761 1749 V 36 w(state)25 b(and)h(tar)o(get)p 1460 1749
V 36 w(mu)p 1634 1749 V 36 w(state)0 1932 y FC(The)34
b Fy(client_mu_state)29 b FC(and)35 b Fy(target_mu_state)30
b FC(C++)k(classes)i(inherit)g(from)e(the)h(base)g Fy(mu_state)c
FC(class)36 b(and)0 2045 y(describe)24 b(ho)n(w)d(to)h(marshal)h(the)f
(client)h(and)f(tar)n(get)h(object)g(references,)i(respecti)n(v)o(ely)
-6 b(.)31 b(Most)22 b(presentations)k(do)21 b(not)i(ha)n(v)o(e)0
2158 y(a)i(client)i(reference,)i(and)d(most)g(protocols)i(do)e(not)g
(ha)n(v)o(e)h(an)f(e)o(xplicit)h(representation)j(for)c(them.)36
b(The)25 b(client)i(reference)0 2270 y(is)f(necessary)j(in)d(the)h
(decomposed)i(stub)e(presentation,)j(and)d(thus)g(must)f(be)g(handled)i
(by)f(the)f(protocols)j(and)e(runtimes)0 2383 y(that)d(support)i
(decomposed)g(stubs.)141 2500 y(The)h(reason)i(these)f(are)g(special)h
(states)g(is)e(that)h(the)g(client)g(and)g(tar)n(get)h(references)h
(are)e(often)g(encoded)i(dif)n(ferently)0 2613 y(than)23
b(other)g(object)h(references;)i(for)c(instance,)j(the)o(y)d(may)h(be)f
(placed)i(at)e(a)g(kno)n(wn)h(location)h(within)f(the)f(message)i
(rather)0 2726 y(than)d(encoded)h(in)e(the)g(midst)h(of)f(other)h
(parameter)h(data.)28 b(Since)20 b(a)g(single)h Fy(mu_state)c
FC(can)k(only)g(specify)g(one)g(method)g(for)0 2839 y(handling)29
b(object)e(references)i(\(e.g.,)d(the)g(handling)j(of)d(an)g(arbitrary)
i(object)g(reference)g(parameter\),)h(the)d(special)i(client)0
2952 y(and)f(serv)o(er)g(states)g(pro)o(vide)h(the)e(mechanism)i(in)e
(which)g(the)h(client)g(and)g(tar)n(get)g(references)i(can)e(be)f
(handled)i(specially)0 3065 y(and)c(separately)-6 b(.)0
3339 y FA(12.1.5)99 b(mem)p 565 3339 V 36 w(mu)p 739
3339 V 36 w(state)0 3521 y FC(The)21 b Fy(mem_mu_state)16
b FC(class)22 b(is)f(an)g(e)o(xtension)j(of)c(the)i(basic)g
Fy(mu_state)c FC(class,)k(intended)h(for)e(use)h(by)f(typical)i(back)e
(ends)0 3634 y(where)j(parameters)i(are)e(marshaled)h(\(at)f(least)g
(partly\))i(into)e(v)n(ariable-length)k(memory)c(b)n(uf)n(fers)h(of)f
(some)g(kind.)30 b(It)23 b(deals)0 3747 y(with)g(things)i(lik)o(e)g(b)n
(uf)n(fer)f(management,)h(alignment,)g(endian)g(con)l(v)o(ersion,)i
(etc.)141 3864 y(F)o(or)g(code)i(optimization)h(purposes,)h(marshaled)f
(messages)f(are)f(logically)i(di)n(vided)g(into)e Fu(globs)p
FC(,)i(then)e(subdi)n(vided)0 3977 y(into)c Fu(c)o(hunks)p
FC(.)141 4094 y(A)j(chunk)j(is)e(a)g(sequence)i(of)e(bytes)i(in)e(the)g
(marshaled)j(message)e(whose)g(length)g(and)g(internal)h(format)f(is)f
(kno)n(wn.)0 4207 y(F)o(or)h(e)o(xample,)i(a)e(\002x)o(ed-length)i
(array)g(of)e(bytes)i(could)f(be)g(one)f(big)h(chunk;)k(an)c(array)g
(with)f(v)n(ariably)i(sized)g(elements)0 4320 y(w)o(ould)g(not)f(be)g
(a)g(chunk,)j(b)n(ut)d(each)h(indi)n(vidual)i(element)e(in)f(that)g
(array)h(could)h(be.)48 b(Chunks)31 b(are)f(used)h(primarily)h(for)0
4433 y(optimization)40 b(of)d(data)g(packing/unpackin)q(g)43
b(code:)57 b(once)37 b(a)g(chunk)h(is)f(started,)42 b(no)37
b(alignment)i(checks)g(or)d(pointer)0 4546 y(adjustments)26
b(need)e(to)g(be)f(done)i(between)g(successi)n(v)o(e)g(primiti)n(v)o
(es)g(in)f(the)f(chunk.)141 4663 y(A)d(glob)j(is)e(part)h(of)f(a)h
(message)g(whose)g Fu(maximum)f(possible)j(length)f FC(is)e(a)g
(\223smallish\224)j(compile-time)f(constant,)h(e)n(v)o(en)0
4775 y(though)d(the)f Fu(actual)i FC(length)f(may)e(not)h(be)g
(constant.)30 b(F)o(or)18 b(e)o(xample,)j(a)f(v)n(ariable-length)k
(array)c(of)g(bytes)h(with)e(a)g(maximum)0 4888 y(length)30
b(of)f(32)g(bytes)h(w)o(ould)g(be)f(a)f(good)i(candidate)i(for)d(being)
h(lumped)g(into)f(a)g(single)h(glob,)h(whereas)f(an)f(array)g(with)0
5001 y(v)n(ariably)e(sized)f(elements)h(and)e(an)g(unlimited)i(length)g
(w)o(ould)e(not)h(be:)32 b(instead)27 b(each)f(indi)n(vidual)i(element)
e(of)f(the)g(array)0 5114 y(could)30 b(be)e(a)g(separate)i(glob)g(in)e
(that)h(case.)44 b(\(The)28 b(de\002nition)i(of)f(\223smallish\224)h
(is)e(de\002ned)h(by)g(the)g(back)g(end:)39 b(each)29
b(back)0 5227 y(end)d(de\002nes)g(some)f(maximum)g(glob)h(size,)g
(usually)h(on)e(the)h(order)g(of)f(a)g(fe)n(w)f(kilobytes.\))37
b(Globs)25 b(are)h(used)g(to)f(optimize)0 5340 y(marshaling)30
b(b)n(uf)n(fer)e(management:)39 b(once)28 b(\223enough\224)i(b)n(uf)n
(fer)e(memory)g(is)f(allocated)i(at)f(the)f(be)o(ginning)j(of)d(a)g
(glob,)i(the)p eop
%%Page: 199 199
199 198 bop 0 -165 a Fx(12.1.)52 b(THE)21 b(B)m(A)l(CK)h(END)f(LIBRAR)
-6 b(Y)2459 b FC(199)0 91 y(marshaling)33 b(code)f(within)g(the)f(glob)
h(can)g(simply)g(b)n(ump)f(through)j(with)d(a)f(pointer)j(without)f(ha)
n(ving)h(to)e(w)o(orry)h(about)0 204 y(b)n(uf)n(fer)25
b(space)f(again)h(until)f(the)g(ne)o(xt)g(glob)l(.)0
476 y FA(12.1.6)99 b(mu)p 493 476 30 4 v 36 w(state)p
728 476 V 36 w(ar)o(glist)0 658 y FC(The)24 b Fy(mu_state_arglist)19
b FC(class)25 b(is)f(used)h(to)g(help)g(process)h(some)g
Fv(P)t(R)t(E)t(S)p 2406 658 28 4 v 40 w(C)f FC(nodes)h(by)e(coalescing)
k(information)e(from)0 771 y(their)g(children.)35 b(F)o(or)24
b(e)o(xample,)i(an)f(allocation)i(conte)o(xt)g(node)f(has)f(children)i
(representing)i(the)c(length,)h(b)n(uf)n(fer)g(pointer)l(,)0
884 y(and)f(possibly)i(other)f(attrib)n(utes)h(which)e(need)g(to)g(be)f
(used)i(together)h(in)d(order)i(to)e(do)h(the)g(correct)h(allocation.)
35 b(Ho)n(we)n(v)o(er)l(,)0 996 y(since)26 b(this)f(information)i(is)e
(only)h(kno)n(wn)f(by)g(the)g(children,)i(the)e(ar)n(glist)h(pro)o
(vides)h(a)d(w)o(ay)h(of)g(passing)h(it)f(back)g(up)g(to)g(the)0
1109 y(parent)d(\(and/or)h(subsequently)h(do)n(wn)d(to)g(other)h
(siblings\))h(so)e(it)f(can)i(be)e(used.)29 b(The)20
b(actual)j(\002lling)e(of)g(the)g(ar)n(glist)h(is)f(tak)o(en)0
1222 y(care)g(of)g(by)g(a)g Fy(PRES_C_MAPPING_ARGUMENT)14
b FC(node)21 b(on)g(the)h(path)f(to)g(the)g(child)h(which)f(will)g
(capture)h(the)g(current)i Fv(C)t(A)t(S)t(T)0 1335 y
FC(e)o(xpression)i(and)e(type)g(and)g(store)h(it)e(in)h(a)f(particular)
j(ar)n(glist)f(and)f(ar)n(gument.)0 1538 y Fy(mu_state_arglist\(const)
42 b(char)k(*name,)51 b(mu_state_arglist)43 b(*aparent)i(=)j(0\))300
1651 y FC(Constructs)26 b(an)e(ar)n(glist)i(with)d(a)h(name)g(and)g
(optionally)j(connected)f(to)e(a)g(parent)h(\(the)f(ne)n(w)g(ar)n
(glist)h(must)f(ha)n(v)o(e)h(a)300 1764 y(unique)g(name)f(\(it)f
(cannot)i(clash)g(with)e(a)g(parent,)i(grandparent,)i(etc.\).)0
1968 y Fy(~mu_state_arglist\(\))300 2081 y FC(Destructs)e(the)f(ar)n
(glist)h(by)f(freeing)h(the)f(list)g(of)f(ar)n(guments)j(and)e(an)o(y)g
(other)g(information.)0 2285 y Fy(void)47 b(add\(const)e(char)i
(*aname,)j(const)c(char)g(*arg\))300 2398 y FC(Adds)24
b(an)f(ar)n(gument)j(to)d(the)h(named)g(list.)0 2603
y Fy(void)47 b(remove\(const)d(char)j(*aname,)j(const)c(char)h(*arg\))
300 2716 y FC(Remo)o(v)o(es)23 b(an)h(ar)n(gument)h(from)f(the)g(named)
g(list.)0 2920 y Fy(int)47 b(getargs\(const)d(char)j(*aname,)j(const)c
(char)h(*arg,)j(cast_expr)45 b(*expr,)51 b(cast_type)45
b(*type\))300 3033 y FC(This)33 b(will)g(attempt)h(to)f(\002nd)g(the)g
(ar)n(gument,)k Fy(arg)32 b FC(in)h(the)g(ar)n(glist,)38
b Fy(aname)p FC(.)55 b(If)33 b(the)g(ar)n(gument)i(is)e(found,)k(the)
300 3146 y(associated)31 b Fv(C)t(A)t(S)t(T)f FC(e)o(xpression)f(and)e
(type)h(are)f(returned)h(with)f(a)f(nonzero)j(result.)39
b(If)26 b(the)h(ar)n(gument)i(or)d(ar)n(glist)300 3259
y(cannot)f(be)f(found,)g(the)g(method)g(will)g(return)g(zero,)g(and)g
Fy(*expr)e FC(and)i Fy(*type)d FC(will)i(be)h(set)g(to)f
Fy(NULL)p FC(.)0 3463 y Fy(int)47 b(setargs\(const)d(char)j(*aname,)j
(const)c(char)h(*arg,)j(cast_expr)45 b(expr,)51 b(cast_type)45
b(type\))300 3576 y FC(Similar)37 b(to)g Fy(getargs)e
FC(e)o(xcept)j(this)f(will)g(set)h(the)f(v)n(alue)h(of)f(ar)n(gument.)
71 b(The)37 b(return)h(v)n(alue)g(is)f(true)h(if)f(the)300
3689 y(ar)n(gument)25 b(w)o(as)f(found)g(and)g(set,)g(zero)g
(otherwise.)0 3893 y Fy(argument)46 b(*findarg\(const)d(char)k(*arg\))
300 4006 y FC(This)22 b(is)h(a)f(pri)n(v)n(ate)h(function)i(used)e(to)g
(locate)h(an)e(ar)n(gument)i(inside)g(a)e(single)i(list)f(\(it)g(does)g
(not)g(look)g(at)f(parents\).)0 4278 y FA(12.1.7)99 b(mu)p
493 4278 30 4 v 36 w(abort)p 761 4278 V 36 w(block)0
4460 y FC(The)27 b Fy(mu_abort_block)22 b FC(class)28
b(is)f(used)g(for)h(tracking)h(an)o(y)e(error)h(handling)h(code)f(in)f
(a)f(stub)l(.)40 b(Thus,)28 b(we')-5 b(re)28 b(able)f(to)g(do)0
4573 y(a)h(proper)i(reco)o(v)o(ery)g(from)f(an)o(y)f(possible)j(errors)
f(that)f(occur)h(during)g(stub)f(e)o(x)o(ecution,)j(such)d(as)g(a)f
(lack)h(of)g(memory)f(or)0 4686 y(runtime)j(error)-5
b(.)51 b(T)-7 b(o)29 b(accomplish)k(this)e(task)g(the)g(class)g(pro)o
(vides)h(functionality)j(to)30 b(add)h(code)g(for)g(handling)i(an)d
(error)l(,)0 4798 y(and)24 b(then)h(getting)g(an)f(\223abort)h
(label\224)g(which)f(the)g(stub)h(can)f(jump)g(to)f(during)i(e)o(x)o
(ecution)h(if)e(the)g(error)g(occurs.)31 b(The)23 b(abort)0
4911 y(handling)j(code)e(is)g(then)g(dumped)h(at)e(the)h(end)g(of)g
(blocks)h(and)f(then)g(link)o(ed)h(together)h(with)d
Fy(goto)p FC(s.)28 b(Finally)-6 b(,)24 b(the)g(code)g(is)0
5024 y(reduced)h(to)f(only)g(contain)i(those)e(blocks)h(that)f(are)g
(reachable.)0 5227 y Fy(void)47 b(set_kind\(int)d(kind\),)50
b(int)d(get_kind\(\))300 5340 y FC(Set/get)24 b(the)g(kind)g(of)g(this)
g(abort)h(block.)k(The)24 b(possible)h(kinds)g(are:)p
eop
%%Page: 200 200
200 199 bop 0 -165 a FC(200)2658 b Fx(CHAPTER)20 b(12.)51
b(B)m(A)l(CK)22 b(ENDS)300 91 y Fy(MABK_NONE)600 204
y FC(No)h(kind,)h(this)g(is)f(ille)o(gal.)300 369 y Fy(MABK_THREAD)600
481 y FC(The)g(abort)i(block)f(is)g(a)f(simple)h(thread)h(of)e(e)o(x)o
(ecution,)j(one)e(statement)h(after)f(another)-5 b(.)300
646 y Fy(MABK_CONTROL)600 759 y FC(The)23 b(block)i(has)f(a)f(unique)i
(control)g(\003o)n(w)d(amongst)j(its)f(children.)300
923 y Fy(MABK_CONTROL_IF)600 1036 y FC(The)f(block)i(is)e(an)h(if)f
(statement,)i(with)e(the)h(only)g(child)h(representing)i(the)d(true)g
(branch.)300 1200 y Fy(MABK_CONTROL_IF_ELSE)600 1313
y FC(The)e(block)i(is)e(an)h(if/else)h(statement,)g(where)f(the)g
(child)g(with)g(an)f(e)o(xpression)j(is)e(the)g(true)g(arm)f(and)h(the)
600 1426 y(one)h(without)h(is)e(the)h(f)o(alse)g(arm.)300
1590 y Fy(MABK_CONTROL_SWITCH)600 1703 y FC(The)f(block)i(is)e(a)g
(switch)h(statement)i(with)d(each)h(child)h(representing)i(a)c(case.)0
1888 y Fy(void)47 b(set_expr\(cast_expr)42 b(expr\),)51
b(cast_expr)45 b(get_expr\(\))300 2001 y FC(Set/get)22
b(the)f(e)o(xpression)j(associated)g(with)d(this)h(block.)29
b(The)21 b(e)o(xpression)j(is)d(used)h(by)f(the)h(parent)g(control)h
(block)300 2114 y(to)g(mak)o(e)h(a)f(link)h(to)g(this)g(child)h(\(for)f
(e)o(xample,)g(the)f(e)o(xpression)k(used)d(in)f(a)h(case\).)0
2299 y Fy(void)47 b(set_reaper_label\(cast_s)o(tmt)41
b(reaper_label\),)48 b(cast_stmt)e(get_reaper_label\(\))300
2412 y FC(Set/get)33 b(the)g(reaper)g(label)h(for)e(this)h(block.)56
b(The)32 b(reaper)i(label)f(is)f(the)h(label)g(to)f(jump)h(to)f(at)g
(the)h(end)g(of)f(the)300 2525 y(control)25 b(\003o)n(w)d(for)i(an)g
(abort)g(block.)0 2710 y Fy(cast_stmt)45 b(get_block_label\(\))300
2823 y FC(Get)24 b(the)h Fy(cast_label)c FC(associated)27
b(with)d(the)h(abort)g(block')-5 b(s)27 b Fy(cast_block)p
FC(.)h(The)c(label')-5 b(s)26 b(statement)g(is)e(actu-)300
2936 y(ally)j(the)f(block,)i(and)e(is)g(used)h(for)g(e)o(xternal)h
(references)g(to)e(the)h(start)g(of)f(the)g(block.)38
b(An)o(y)25 b(internal)k(references)300 3049 y(will)23
b(just)h(be)g(the)g(\002rst)f(label)h(in)g(the)g(block.)0
3234 y Fy(char)47 b(*use_block_label\(\))300 3347 y FC(Use)21
b(the)h(block)g(label,)h(this)f(will)f(increment)i(the)e(use)h(count)h
(in)e(the)h Fy(cast_label)c FC(and)k(return)g(the)g(label)g(string.)0
3532 y Fy(void)47 b(drop_block_label\(\))300 3645 y FC(The)23
b(opposite)j(of)d Fy(use_block_label)p FC(,)c(this)24
b(will)f(decrement)i(the)f(use)g(count)h(in)e(the)h Fy(cast_label)p
FC(.)0 3830 y Fy(void)47 b(add_stmt\(cast_stmt)42 b(stmt\))300
3943 y FC(Add)23 b(a)g(statement)j(to)d(the)h(abort)g(block.)0
4128 y Fy(int)47 b(stmt_count\(\))300 4241 y FC(Return)25
b(the)f(number)h(of)f(statements)i(in)e(the)g(block.)31
b(This)24 b(is)g(really)h(meant)f(for)g(internal)i(use)e(to)g(\002gure)
h(out)f(if)g(a)300 4354 y(child)h(block)f(really)h(does)f(an)o(ything)i
(and)e(needs)h(to)e(be)h(link)o(ed)h(to)e(by)h(the)g(parent.)0
4539 y Fy(void)47 b(add_child\(struct)c(mu_abort_block)h(*mab,)50
b(int)d(connection\))300 4652 y FC(Add)23 b(a)g(child)i(to)e(the)h
(abort)h(block)f(using)h(a)e(certain)i(type)g(of)e(connection,)j(which)
e(can)g(be:)300 4837 y Fy(MABF_INLINE)600 4950 y FC(This)f(indicates)j
(that)e(the)g(child')-5 b(s)27 b Fv(C)t(A)t(S)t(T)g FC(block)e(should)g
(be)e(inlined)j(directly)f(inside)g(the)f(parents.)300
5114 y Fy(MABF_OUT_OF_LINE)600 5227 y FC(This)d(indicates)j(that)e(the)
f(child')-5 b(s)25 b Fv(C)t(A)t(S)t(T)f FC(block)f(is)e(located)i(some)
n(where)f(else)g(in)f(the)g(code)i(and)e(a)g Fy(goto)600
5340 y FC(should)k(be)f(used)g(to)g(reach)g(the)g(block.)p
eop
%%Page: 201 201
201 200 bop 0 -165 a Fx(12.1.)52 b(THE)21 b(B)m(A)l(CK)h(END)f(LIBRAR)
-6 b(Y)2459 b FC(201)0 91 y Fy(struct)46 b(mu_abort_block)e
(*find_child\(char)f(*child_label\))300 204 y FC(This)23
b(will)h(locate)g(the)g(child)h(with)e(the)h(gi)n(v)o(en)g(label.)0
410 y Fy(cast_stmt)45 b(get_current_label\(\))300 523
y FC(Returns)25 b(the)e(current)j(label)e(string.)0 729
y Fy(char)47 b(*use_current_label\(\))300 842 y FC(This)27
b(will)h(return)h(the)e(string)i(corresponding)j(to)c(the)g(current)h
(label)f(name)g(and)g(increment)i(the)d(use)h(count)h(in)300
955 y(the)24 b Fy(cast_label)p FC(.)0 1161 y Fy(void)47
b(grab_label\(char)c(*label\))300 1274 y FC(Locates)24
b(the)g(gi)n(v)o(en)g(label)h(name)e(and)h(increments)i(its)e(use)g
(count.)0 1481 y Fy(void)47 b(drop_label\(char)c(*label\))300
1593 y FC(Locates)24 b(the)g(gi)n(v)o(en)g(label)h(name)e(and)h
(decrements)i(its)e(use)g(count.)0 1800 y Fy(void)47
b(begin\(\),)i(void)e(end\(\))300 1913 y FC(These)24
b(perform)g(initialization)k(and)c(\002nalization)i(around)f(an)o(y)e
(additions)j(of)e(statements)h(and)f(children.)0 2119
y Fy(int)47 b(rollback\(int)d(has_path)i(=)h(0\))300
2232 y FC(This)30 b(function)i(will)d(w)o(alk)h(through)i(the)e(abort)h
(block)g(and)g(all)f(of)f(its)h(children)i(trying)g(to)d(remo)o(v)o(e)h
(an)o(y)g(dead)300 2344 y(code.)46 b(The)29 b Fy(has_path)d
FC(ar)n(gument)31 b(signi\002es)g(whether)f(or)f(not)g(a)g(path)h(be)o
(gins)g(with)f(a)g(\003o)n(w)f(of)h(control,)j(and)300
2457 y(should)e(almost)f(al)o(w)o(ays)g(be)g(left)g(at)f(zero)h(when)g
(called)g(e)o(xternally)-6 b(.)46 b(Basically)-6 b(,)31
b(this)e(function)i(goes)e(through)300 2570 y(each)e(statement)h(and)e
(tries)h(to)g(\002gure)f(out)h(if)f(there)h(is)f(a)g(path)g(to)h(that)f
(statement.)39 b(If)26 b(there)h(is)f(no)g(path,)i(then)e(it)300
2683 y(turns)g(the)f(statement)h(to)f(a)g Fy(CAST_STMT_EMPTY)p
FC(;)c(otherwise)26 b(the)f(statement)i(is)d(left)i(alone.)33
b(Determining)27 b(the)300 2796 y(possibility)k(of)c(a)g(path)h(is)g
(done)g(by)g(looking)h(for)f(an)o(y)g Fy(cast_label)p
FC(s)c(that)k(are)g(used,)h(a)e(prior)h(statement)i(that)300
2909 y(has)24 b(a)f(path,)h(or)f(a)h(path)g(from)f(a)g(parent.)0
3115 y Fy(int)47 b(rollback_block\(cast_bloc)o(k)42 b(*block,)50
b(int)d(start,)j(int)d(len,)k(int)c(has_path\))300 3228
y FC(This)21 b(is)f(a)h(helper)h(function)h(for)e Fy(rollback)p
FC(;)e(this)i(just)g(w)o(orks)g(on)g Fy(cast_block)p
FC(s.)k(The)20 b(return)i(v)n(alue)g(indicates)300 3341
y(the)i(possibility)i(of)e(a)f(control)i(\003o)n(w)d(path.)0
3547 y Fy(int)47 b(rollback_stmt\(cast_block)41 b(*block,)50
b(int)d(pos,)k(cast_stmt)45 b(curr_stmt,)k(int)e(has_path\))300
3660 y FC(This)26 b(is)g(another)i(helper)f(function)i(for)d
Fy(rollback)p FC(,)d(and)k(w)o(orks)f(on)h Fy(cast_stmt)p
FC(s.)33 b(Again,)27 b(the)f(return)h(v)n(alue)300 3773
y(indicates)f(the)e(possibility)i(of)e(a)f(control)i(\003o)n(w)d(path.)
0 3979 y Fy(void)47 b(make_dispatch\(\))300 4092 y FC(This)28
b(is)h(a)f(pri)n(v)n(ate)i(function)h(used)e(to)g(create)h(an)o(y)f
(code)g(for)g(MABK)p 2561 4092 28 4 v 31 w(CONTR)l(OL)p
3020 4092 V 31 w(*)f(kinds.)45 b(Depending)31 b(on)300
4205 y(the)24 b(kind)g(it)f(will)h(produce)h(the)f(statements)i(needed)
f(to)e(do)h(the)g(test)g(and)g(dispatch)h(to)f(the)g(correct)h(child)f
(block.)0 4480 y FA(12.1.8)99 b(mu)p 493 4480 30 4 v
36 w(msg)p 701 4480 V 35 w(span)0 4663 y FC(The)19 b
Fy(mu_msg_span)d FC(class)21 b(is)f(used)g(for)g(putting)i(b)n(uf)n
(fer)f(space)g(checks)g(into)g(the)f(stub)g(code)h(so)f(it)f(does)i
(not)f(try)g(to)g(decode)0 4775 y(something)32 b(that)e(is)g(not)g
(there.)48 b(The)29 b(term)h(\223span\224)h(is)f(used)g(to)g(describe)i
(a)d(message)i(se)o(gment)g(of)e(an)h(e)o(xact)g(size)h(that)0
4888 y(can)25 b(be)g(lar)n(ger)h(than)f(a)g(chunk,)h(b)n(ut)f(not)g(an)
g(approximation)j(lik)o(e)d(a)g(glob)l(.)33 b(The)24
b(class)i(is)e(used)i(to)f(describe)h(each)g(span)f(in)0
5001 y(the)h(message)h(and)f(join)h(them)e(together)j(into)f(a)e(tree)h
(which)g(can)h(then)f(be)g(reduced)h(in)f(a)f(second)j(pass.)36
b(This)26 b(reduction)0 5114 y(pass)g(is)g(used)g(to)g(mer)n(ge)g
(checks)i(together)f(and)g(to)e(lift)h(them)g(out)g(of)g(array)g
(loops,)h(if)f(possible.)37 b(F)o(or)25 b(e)o(xample,)i(a)e(union)0
5227 y(where)d(each)g(arm)f(is)g(the)h(same)g(size)g(can)g(be)f
(reduced)j(to)d(a)g(single)i(check)g(before)f(unmarshaling)j(the)d
(union,)h(rather)f(than)0 5340 y(a)h(check)i(for)f(each)g(arm.)p
eop
%%Page: 202 202
202 201 bop 0 -165 a FC(202)2658 b Fx(CHAPTER)20 b(12.)51
b(B)m(A)l(CK)22 b(ENDS)141 91 y FC(Using)j(the)f(spans)h(depends)h(on)e
(the)h(format)f(of)g(the)h(message)g(that)g(is)e(being)j(unmarshaled)g
(at)e(the)h(time.)30 b(Normally)-6 b(,)0 204 y(simple)28
b(message)g(se)o(gments)g(are)f(handled)j(automatically)g(by)d
(piggy-backing)k(on)c(the)h(chunk)g(functions)i(in)d(the)g
Fy(mem_)0 317 y(mu_state)p FC(.)f(This)d(allo)n(ws)g(us)g(to)g
(\002gure)h(out)f(ho)n(w)g(big)g(a)g(se)o(gment)h(is,)f(b)n(ut)h(we)e
(do)h(not)h(necessarily)i(kno)n(w)d(ho)n(w)g(to)g(join)g(it)0
430 y(into)h(the)f(rest)h(of)f(the)h(message.)30 b(This)23
b(mer)n(ging)i(is)e(done)h(by)f(creating)j(another)f
Fy(mu_msg_span)19 b FC(which)24 b(acts)g(as)f(a)g(parent)0
543 y(to)g(a)h(set)f(of)h(se)o(gments,)g(and)g(then)g(setting)i(the)d
(kind)i(of)e(the)h(span)g(to)g(one)g(of)f(the)h(formats)h(described)h
(belo)n(w)-6 b(.)0 711 y Fy(void)47 b(set_flags\(int)d(flags\),)50
b(int)d(get_flags\(\))300 824 y FC(Set/get)30 b(an)o(y)f(\003ags.)46
b(Currently)-6 b(,)31 b(the)f(only)g(\003ag)f(is)g Fy(MSF_ALIGN)c
FC(which)30 b(indicates)h(that)f(the)f(span)h(follo)n(ws)g(an)300
936 y(alignment)25 b(so)f(it)f(cannot)i(be)f(absorbed)i(by)d(an)o(y)h
(pre)n(vious)i(spans.)0 1124 y Fy(void)47 b(set_kind\(int)d(kind\),)50
b(int)d(get_kind\(\))300 1237 y FC(Set/get)24 b(the)g(kind.)30
b(The)23 b(possible)i(kinds)g(are:)300 1424 y Fy(MSK_NONE)600
1537 y FC(These)f(contain)h(the)f(actual)h(lengths)g(of)f(a)f(span)h
(and)g(are)g(usually)h(added)g(to)e(one)h(of)g(the)g(other)g(kinds.)300
1703 y Fy(MSK_SEQUENTIAL)600 1816 y FC(These)g(contain)h(other)g(spans)
f(which)g(are)g(or)n(ganized)i(in)e(a)f(sequential)j(f)o(ashion.)300
1982 y Fy(MSK_UNION)600 2095 y FC(These)g(contain)h(other)g(spans)g
(which)f(are)g(or)n(ganized)i(in)e(a)f(union,)i(so)f(each)g(child)h(is)
f(a)f(dif)n(ferent)i(pos-)600 2208 y(sibility)g(in)e(the)g(union.)35
b(Usually)-6 b(,)26 b(the)f(children)i(are)f Fy(MSK_SEQUENTIAL)20
b FC(spans)26 b(which)g(then)f(contain)600 2321 y(the)f(actual)h(span)f
(lengths.)300 2488 y Fy(MSK_ARRAY)600 2600 y FC(These)29
b(contain)i(another)f(span)g(which)f(indicates)i(the)e(size)g(of)g
(each)g(element)h(in)f(the)g(array)-6 b(,)31 b(and)e(the)600
2713 y(size)24 b(of)g(the)f(array)i(itself)f(is)g(contained)i(in)d(the)
h(this)g(object')-5 b(s)26 b Fy(size_expr)p FC(.)0 2901
y Fy(void)47 b(set_block\(cast_stmt)42 b(block\),)50
b(cast_stmt)45 b(get_block\(\))300 3013 y FC(Set/get)24
b(the)g(block)h(where)f(an)o(y)f(checks)i(should)h(be)d(added.)0
3201 y Fy(void)47 b(set_abort\(struct)c(mu_abort_block)h(*mab\),)50
b(struct)c(mu_abort_block)e(*get_abort\(\))300 3314 y
FC(Set/get)24 b(the)g(abort)h(block)f(to)g(use)g(for)f(getting)j
(labels.)0 3501 y Fy(void)47 b(grow\(int)e(size\))300
3614 y FC(Gro)n(w)22 b(the)i(size)g(of)g(the)g(span)g(by)g(a)f(\002x)o
(ed)g(size.)0 3801 y Fy(void)47 b(shrink\(int)e(size\))300
3914 y FC(Shrink)24 b(the)g(size)g(of)g(the)f(span)i(by)e(a)g(\002x)o
(ed)h(size.)0 4101 y Fy(void)47 b(set_size\(cast_expr)42
b(size\))300 4214 y FC(Set)31 b(the)h(size)h(of)e(the)h(span,)j(which)d
(may)-6 b(,)33 b(or)f(may)g(not)g(be)g(\002x)o(ed)f(size.)54
b(If)32 b(this)g(is)f(a)h Fy(MSK_ARRAY)p FC(,)e(then)j(this)300
4327 y(e)o(xpression)26 b(is)e(used)g(as)f(the)h(length)h(of)f(the)f
(array)-6 b(.)0 4514 y Fy(void)47 b(add_child\(struct)c(mu_msg_span)i
(*mms\))300 4627 y FC(Add)23 b(a)g(child)i(span)f(to)g(this)g(one.)0
4814 y Fy(void)47 b(begin\(\),)i(void)e(end\(\))300 4927
y FC(These)36 b(perform)h(initialization)i(and)d(\002nalization)i
(around)f(an)o(y)f(size)g(modi\002cations)i(\(gro)n(wing,)i(shrinking,)
300 5040 y(adding)25 b(children\).)0 5227 y Fy(void)47
b(drop\(\))300 5340 y FC(Remo)o(v)o(es)23 b(the)h(check)h(and)f(drops)h
(the)e(used)i(abort)f(label.)p eop
%%Page: 203 203
203 202 bop 0 -165 a Fx(12.2.)52 b(SPECIFIC)20 b(B)m(A)l(CK)i(ENDS)2612
b FC(203)0 91 y Fy(void)47 b(collapse\(\))300 204 y FC(This)30
b(is)g(called)h(on)f(the)g(root)h(span)g(object)g(to)f(go)g(back)h
(through)h(all)e(of)g(the)h(children)h(to)e(optimize)h(the)f(sizes)300
317 y(of)d(the)g(spans.)40 b(F)o(or)26 b(sequential)k(spans)e(it)e
(will)h(w)o(alk)g(backw)o(ards)i(through)f(its)f(children)i(trying)g
(to)d(absorb)j(the)300 430 y(sizes)f(into)g(the)f(pre)n(vious)i(span)f
(nodes,)g(until)g(it)f(hits)h(a)e(v)n(ariable)j(sized)f(node)g(which)f
(cannot)i(be)e(absorbed)i(by)300 543 y(the)24 b(pre)n(vious)h(child.)30
b(F)o(or)22 b(unions,)j(it)e(will)g(\002nd)g(the)h(minimum)f(size)h(of)
f(all)h(the)g(cases)g(and)g(use)g(that)g(as)f(the)h(size)300
656 y(for)f(the)h(entire)g(union.)30 b(F)o(or)22 b(arrays,)j(if)e(the)g
(length)i(is)e(constant)i(it)e(will)g(pull)h(all)f(the)g(checks)i(out)f
(of)f(the)g(body)h(of)300 769 y(the)j(loop)g(and)g(do)g(a)f(check)h(at)
g(the)f(start,)i(otherwise)g(it)e(will)g(just)h(lea)n(v)o(e)h(the)e
(checks)i(in)f(the)g(body)-6 b(.)38 b(An)o(y)26 b(check)300
882 y(statements)g(that)e(reduce)h(to)e(zero)h(are)g(changed)i(to)d
Fy(CAST_STMT_EMPTY)p FC(.)0 1083 y Fy(void)47 b(commit\(\))300
1196 y FC(This)26 b(is)g(done)h(after)g(the)f(call)g(to)g(collapse,)j
(it)d(basically)i(does)f(the)f(\002nal)g(lock-do)n(wn,)j(an)o(y)d
(checks)h(that)g(ha)n(v)o(e)g(a)300 1309 y(size)d(are)g(set,)f(empty)h
(checks)h(are)f(dropped.)0 1510 y Fy(static)46 b(void)h
(set_be_name\(const)c(char)j(*name\))300 1623 y FC(This)23
b(sets)h(the)g(back)h(end)f(name)f(that)h(the)g(spans)h(will)e(use)h
(when)g(producing)i(macro)e(calls.)0 1890 y FA(12.1.9)99
b(Implementing)25 b(Pr)n(esentation)h(Functions)0 2070
y FC(The)19 b(presentation)j(generator)g(is)d(able)g(to)g(create)i
(\223presentation)i(functions\224)f(which)d(ha)n(v)o(e)h(simple)f
(implementations)k(and)0 2183 y(do)h(not)h(require)g(optimization.)33
b(Ho)n(we)n(v)o(er)l(,)24 b(the)g(presentation)k(generator)e(cannot)g
(pro)o(vide)g(the)e(implementations)j(since)0 2296 y(the)o(y)c(may)g
(be)f(dependent)k(on)d(the)g(runtime)h(or)e(other)i(things)g
(speci\002c)g(to)f(a)f(back)h(end.)29 b(The)23 b(current)h(solution)h
(is)e(to)f(store)0 2409 y(a)h(simple)i(description)i(of)c(the)h
(presentation)k(function,)d(a)f(semantically)i(loaded)g(string,)e(in)g
(the)g(presentation)j(attrib)n(utes)0 2522 y(tag)20 b(lists.)28
b(These)20 b(tag)g(lists)h(can)f(then)h(be)f(processed)i(by)e(the)g
(back)h(end)f(to)g(produce)h(the)g(needed)g(code.)28
b(Ho)n(we)n(v)o(er)l(,)20 b(writing)0 2635 y Fy(printf)p
FC(s)26 b(for)j(each)f(function)j(can)d(become)i(complicated)g(and)f
(tedious,)i(so)d(the)h(back)g(end)f(library)i(pro)o(vides)g(a)e(set)g
(of)0 2748 y(classes)d(for)f(semi-automatically)k(passing)d(this)f(w)o
(ork)g(of)n(f)f(to)j Fv(S)t(C)t(M)t(L)r FC(.)0 2947 y
Fy(presentation_impl)300 3060 y FC(This)31 b(class)h(is)g(used)g(to)f
(bind)h(a)f(tag)h(in)f(the)h(presentation)j(attrib)n(utes)f(to)d(a)g
(set)g(of)h(C++)e(functions)k(and/or)f(an)302 3173 y
Fv(S)t(C)t(M)t(L)d FC(macro.)37 b(The)28 b Fv(S)t(C)t(M)t(L)i
FC(macro)d(is)f(determined)j(by)d(the)h Fy(idl_type)c
FC(and)k Fy(pres_type)c FC(which)k(are)g(nested)300 3286
y(scopes)36 b(in)g Fv(S)t(C)t(M)t(L)r FC(,)i(and)c(\002nally)h(the)g
(macro)f(is)g(selected)j(based)e(on)f(the)h(string)g(used)g(to)f
(describe)j(it)d(in)g(the)300 3399 y(presentation)27
b(generator)-5 b(.)0 3600 y Fy(presentation_collection)300
3713 y FC(This)18 b(class)h(w)o(alks)f(o)o(v)o(er)g(the)h(tag)f(lists)h
(in)f(the)g(presentation)k(attrib)n(utes)f(and)d(then)h(asks)g(a)f(set)
g(of)g Fy(presentation_)300 3826 y(impl)k FC(objects)j(to)e(implement)i
(whate)n(v)o(er)f(is)g(described.)141 4025 y(This)d(approach)j(is)d
(not)h(al)o(w)o(ays)g(necessary)i(since)e(the)h Fv(S)t(C)t(M)t(L)i
FC(interpreter)f(can)e(also)g(be)f(called)h(e)o(xplicitly)i(to)d(e)o(x)
o(ecute)0 4138 y(macro')-5 b(s.)30 b(See)23 b(\002le)g(prologue)j(and)e
(epilogue)h(handlers)h(in)e Fy(file_handlers.cc)18 b
FC(for)24 b(an)f(e)o(xample.)0 4448 y Ft(12.2)119 b(Speci\002c)32
b(Back)d(Ends)0 4661 y FC(The)g(back)h(end)g(library)h(is)e(not)h(able)
g(to)g(produce)h(w)o(orking)g(code)f(by)g(itself,)h(so)f(a)f(separate)i
(back)g(end)f(program)g(must)0 4774 y(be)35 b(created)i(which)f(pro)o
(vides)h(its)e(o)n(wn)g(functionality)k(in)c(addition)i(to)e(the)h
(library)-6 b(,)39 b(specializing)g(the)c(generic)i(code)0
4887 y(generated)e(by)d(the)h(library)g(into)g(the)g(speci\002c)g(code)
g(necessary)i(to)d(implement)h(the)g(encoding)i(and)d(transport)j
(layers)0 5000 y(required)25 b(by)f(a)e(speci\002c)j(protocol)g(and)f
(runtime)g(system.)29 b(These)24 b(back)g(ends)g(are)f(located)i(in)f
(the)f Fy(c/pbe)e FC(directory)26 b(and)0 5113 y(are)e(all)f
(structured)k(v)o(ery)d(similarly)-6 b(.)136 5340 y Fs(\017)46
b FC(Fluk)o(e)24 b(-)f(Produces)i(stubs)g(for)f(the)f(Fluk)o(e)h
(operating)i(system.)p eop
%%Page: 204 204
204 203 bop 0 -165 a FC(204)2658 b Fx(CHAPTER)20 b(12.)51
b(B)m(A)l(CK)22 b(ENDS)136 91 y Fs(\017)46 b FC(IIOP)23
b(-)g(Produces)k Fv(C)t(O)t(R)t(B)r(A)f(I)t(I)t(O)t(P)h
FC(stubs)e(for)e(the)h(Flick-pro)o(vided)j(C)22 b(runtime.)136
307 y Fs(\017)46 b FC(IIOPXX)22 b(-)h(Produces)k Fv(C)t(O)t(R)t(B)r(A)f
(I)t(I)t(O)t(P)h FC(stubs)e(for)f(the)g(T)-8 b(A)j(O)21
b(C++)i(runtime.)136 523 y Fs(\017)46 b FC(Khazana)25
b(-)e(Produces)i(stubs)g(for)e(use)h(with)g(the)f(Khazana)i(distrib)n
(uted)i(memory)d(system.)136 739 y Fs(\017)46 b FC(Mach3Mig)23
b(-)e(Produces)h(stubs)h(for)e(use)h(in)f(the)h(Mach)f(3)g(operating)j
(system)e(using)g(MIG-compatible)i(messages.)136 955
y Fs(\017)46 b FC(Sun)23 b(-)g(Produces)k Fv(O)t(N)t(C)g(R)t(P)t(C)f
FC(stubs)e(that)h(can)e(replace)j(those)e(generated)i(by)e
Fy(rpcgen)p FC(.)136 1171 y Fs(\017)46 b FC(T)m(rapeze)37
b(-)e(Produces)i(stubs)g(for)e(the)h(Flick-pro)o(vided)j(T)m(rapeze)e
(based)f(runtime)h(using)g(either)i Fv(X)t(D)t(R)d FC(or)i
Fv(C)t(D)t(R)227 1284 y FC(encoding)26 b(\(based)f(on)f(the)g
(originating)i(presentation)1952 1251 y Fr(1)1994 1284
y FC(\).)0 1575 y FA(12.2.1)99 b(The)26 b(Basics)0 1763
y FC(The)21 b(common)g(tasks)h(done)h(in)e(a)f(back)i(end)g(are)f(to)h
(create)g(subclasses)i(for)d(the)h Fy(be_state)c FC(and)k(the)f(v)n
(arious)i Fy(mu_state)p FC(s)0 1876 y(that)h(implement)h(the)f(correct)
i(beha)n(vior)g(for)e(the)g(back)g(end')-5 b(s)25 b(encoding)h(and)f
(runtime.)30 b(Once)24 b(these)h(classes)g(ha)n(v)o(e)f(been)0
1989 y(\002lled)i(out)h(the)f(stub)h(writers)g(are)f(o)o(v)o(erridden)j
(to)d(do)g(some)g(actual)i(w)o(ork.)37 b(Coding)27 b(these)g(stub)g
(generators)i(is)d(simply)h(a)0 2102 y(matter)20 b(of)g(using)h(the)g
Fy(mu_state)p FC(s)c(to)j(generate)k Fv(C)t(A)t(S)t(T)f
FC(blocks)e(which)f(are)h(then)f(brack)o(eted)j(by)d(the)g(appropriate)
j(runtime)0 2215 y(code.)65 b(Unfortunately)-6 b(,)42
b(since)36 b(all)g(of)f(this)h(is)f(relati)n(v)o(ely)j(similar)e
(across)h(all)e(back)h(ends,)j(it)d(has)f(become)i(common)0
2328 y(practice)23 b(to)e(cop)o(y)h(an)f(e)o(xisting)i(back)f(end)f
(and)h(then)g(change)g(all)f(the)h(names)f(and)h Fy(printf)p
FC(s)d(to)i(your)h(needs.)29 b(This)21 b(results)0 2441
y(in)i(a)f(f)o(ast)h(start)h(up)e(time;)i(ho)n(we)n(v)o(er)l(,)f(this)g
(quickly)i(turns)e(into)h(a)e(maintenance)j(nightmare.)31
b(Hopefully)24 b(in)f(the)g(future)h(the)0 2554 y(redundant)i(code)f
(in)e(the)h(back)g(ends)h(will)e(be)g(consolidated)28
b(so)23 b(that)h(maintenance)i(will)e(be)f(easier)-5
b(.)0 2845 y FA(12.2.2)99 b(Decomposed)25 b(Stubs)h(in)f(IIOP)f(and)i
(Khazana)0 3033 y FC(Decomposed)32 b(stub)g(generation)h(is)e(an)g
(option)h(of)e(the)h(presentation)j(generator)f(that)f(causes)g(re)o
(gular)g(client)g(stubs)f(to)0 3146 y(be)f(split)h(into)g(separate)h
(stubs)f(\(see)g(Section)g(11.1.2)g(for)f(more)g(information\).)51
b(Handling)32 b(this)f(kind)g(of)f(presentation)0 3259
y(is)k(done)i(simply)f(through)i(implementation)h(of)c(the)h
(appropriate)j(stub)e(writers)f(\(for)g(a)f(detailed)j(list,)g(refer)f
(back)f(to)0 3372 y(Section)25 b(12.1.2,)f(assuming)i(the)e(runtime)h
(can)f(support)i(it.)j(The)o(y)24 b(w)o(ork)g(basically)i(the)e(same)g
(as)g(the)g(re)o(gular)i(client)f(and)0 3485 y(serv)o(er)31
b(stubs,)i(with)d(the)g(functionality)k(of)c(the)h(stubs)g(split)g
(into)g(separate)h(functions.)51 b(Ho)n(we)n(v)o(er)l(,)32
b(only)f(the)h Fv(I)t(I)t(O)t(P)i FC(and)0 3598 y(Khazana)25
b(back)f(ends)g(are)g(currently)i(able)e(to)g(handle)h(this)f
(presentation.)0 3889 y FA(12.2.3)99 b(Pr)n(esentation)26
b(Implementation)f(in)g(IIOPXX)0 4077 y FC(The)19 b(IIOPXX)f(back)j
(end)f(is)f(responsible)k(for)d(generating)j(code)d(speci\002c)h(to)e
(T)-8 b(A)j(O,)17 b(so)j(an)o(ything)i(that)e(is)f(implementation)0
4190 y(dependent)33 b(must)d(be)g(handled)i(before)f(outputting)i(an)o
(y)d(code.)48 b(F)o(or)29 b(e)o(xample,)k(a)c(string)i(inside)g(of)f(a)
g(structure)i(needs)0 4303 y(to)f(be)g(of)f(the)i(\223T)-8
b(A)j(O)p 684 4303 28 4 v 31 w(Managed)p 1051 4303 V
35 w(String\224)32 b(type)f(and)h(not)f(a)f(\223String)p
2204 4303 V 35 w(v)n(ar\224)h(lik)o(e)h(the)f(PG)e(will)i(create)h
(since)f(it)g(does)h(not)0 4416 y(kno)n(w)21 b(the)g(implementation.)31
b(The)21 b(solution)i(is)e(to)g(use)h(the)f(presentation)k
(implementation)f(f)o(acilities)f(to)e(do)g(an)o(y)g(prepro-)0
4529 y(cessing.)43 b(This)27 b(type)i(of)e(code)i(has)f(all)g(been)g
(dumped)h(in)f(the)g(\002le)f Fy(c/pbe/iiopxx/tao_impl.c)o(c)p
FC(.)34 b(Currently)-6 b(,)31 b(this)0 4642 y(code)23
b(ranges)h(from)e(generating)j Fy(CORBA::TypeCode)18
b FC(to)k(modifying)i(the)f(structs)h(and)f(classes)g(created)h(by)f
(the)f(presen-)0 4755 y(tation)27 b(generator)-5 b(.)37
b(An)o(y)25 b(associated)31 b Fv(S)t(C)t(M)t(L)e FC(code)d(is)f
(located)j(in)d Fy(runtime/headers/flick/pres)o(/ta)o(o_*.)o(scml)o
FC(.)0 4867 y(Ev)o(entually)-6 b(,)28 b(it)d(w)o(ould)h(be)g(nice)g(to)
f(or)n(ganize)j(the)e(mess)g(present)h(in)e Fy(tao_impl.cc)p
FC(,)d(b)n(ut)27 b(e)o(xactly)g(ho)n(w)e(best)h(to)f(do)h(it)f(is)0
4980 y(unkno)n(wn.)p 0 5070 1560 4 v 105 5126 a Fq(1)134
5157 y Fp(Basing)e(the)e(encoding)j(scheme)e(on)h(the)e(originating)i
(presentation)g(is)e(certainly)h(not)g(an)g(ideal)g(solution:)29
b(the)22 b(choice)g(of)i Fn(X)t(D)t(R)f Fp(v)o(ersus)h
Fn(C)t(D)t(R)0 5249 y Fp(should)29 b(be)g(independent)h(of)e(which)h
(presentation)g(is)f(desired.)51 b(See)28 b(Section)g(12.3)h(for)f(a)g
(more)h(detailed)g(description)g(of)f(the)g(problem)h(and)0
5340 y(proposed)21 b(solution.)p eop
%%Page: 205 205
205 204 bop 0 -165 a Fx(12.3.)52 b(SUMMAR)-6 b(Y)20 b(AND)i(COMMENTS)
2307 b FC(205)0 91 y Ft(12.3)119 b(Summary)29 b(and)i(Comments)0
298 y FC(The)21 b(back)i(end)f(code)g(generators)i(are)e(one)g(of)g
(the)f(most)h(comple)o(x)g(pieces)h(of)f(Flick,)g(mainly)g(because)h
(of)f(the)g(number)g(of)0 411 y(choices)k(that)f(must)g(\(\002nally\))g
(be)g(made.)31 b(While)25 b(the)g(current)h(suite)f(of)g(back)g(ends)g
(is)f(impressi)n(v)o(e,)i(particularly)i(in)c(their)0
524 y(v)n(ariety)f(and)f(capabilities,)j(there)e(are)f(a)f(fe)n(w)g
(design)i(changes)h(that)e(might)g(mak)o(e)g(them)g(e)n(v)o(en)g(more)g
(\003e)o(xible)g(and)g(useful.)0 637 y(F)o(ollo)n(wing)i(are)g(a)f(fe)n
(w)f(ideas)j(for)f(impro)o(v)o(ement:)0 850 y Fz(Reduce/Remo)o(v)o(e)g
(Dependence)e(on)h(Macr)n(os.)47 b FC(Although)31 b(a)e(lot)g(of)g
(\003e)o(xibility)h(arises)g(through)h(our)f(use)f(of)g(macros,)227
963 y(the)f(macros)g(themselv)o(es)h(can)f(be)f(hard)h(to)g(write)f
(and)h(become)g(a)f(b)n(urden)i(to)f(maintain.)41 b(Ideally)-6
b(,)30 b(the)e(back)g(end)227 1075 y(should)d(generate)h
Fu(code)e FC(and)g(not)g(a)f(list)h(of)g(macro)g(calls.)0
1263 y Fz(Split)f(the)g(Encoding)f(Mechanism,)h(the)g(Pr)n(otocol,)i
(and)d(the)h(T)-7 b(ransport)24 b(Mechanism.)46 b FC(Ideally)-6
b(,)20 b(these)f(could)h(all)e(be)227 1376 y(independently)39
b(chosen)e(\(and)f(independent)i(of)d(the)g(presentation)j(as)d(well\))
g(for)g(maximum)g(\003e)o(xibility)-6 b(.)64 b(F)o(or)227
1489 y(e)o(xample,)45 b(it)39 b(w)o(ould)h(be)g(concei)n(v)n(able)j(to)
c(w)o(ant)j Fv(O)t(N)t(C)h(R)t(P)t(C)r FC(-style)f(messages)f(using)i
Fv(C)t(D)t(R)e FC(encoding)h(o)o(v)o(er)e(a)227 1602
y(T)m(rapeze/Myrinet)32 b(link.)44 b(T)-7 b(o)28 b(some)h(e)o(xtent,)h
(the)f(current)h(design)h(allo)n(ws)e(some)f(\003e)o(xibility:)41
b(the)29 b(T)m(rapeze)g(back)227 1715 y(end)h(and)g(runtime)h(support)g
(either)i Fv(I)t(I)t(O)t(P)r FC(-style)g(messages)e(with)e(the)j
Fv(C)t(D)t(R)f FC(encoding)h(or)f Fv(O)t(N)t(C)i(R)t(P)t(C)r
FC(-style)e(mes-)227 1828 y(sages)25 b(with)f(the)i Fv(X)t(D)t(R)f
FC(encoding.)31 b(Ho)n(we)n(v)o(er)l(,)24 b(most)g(of)f(the)h(details)h
(are)f(tak)o(en)h(care)g(of)e(through)j(macro)e(magic)g(in)227
1941 y(the)29 b(runtime)h(header)g(\002les,)g(and)f(the)g
(encoding/message)34 b(format)29 b(binding)i(is)e(still)g(\002x)o(ed.)
44 b(It)29 b(may)f(be)h(possible)227 2053 y(in)k(some)h(cases)g(to)f
(change)h(the)g(encoding)h(or)e(transport)j(protocol)f(simply)f(by)f
(rede\002ning)i(the)e(macros)h(for)g(a)227 2166 y(particular)26
b(back)e(end.)29 b(Ho)n(we)n(v)o(er)l(,)23 b(this)g(is)g(a)g(rather)h
(daunting)i(task)e(and)f(often)h(requires)h(at)e(least)h(some)g(tweaks)
f(to)227 2279 y(the)h(back)h(end)f(code)g(generator)-5
b(.)32 b(In)24 b(the)g(future,)g(it)g(w)o(ould)g(be)g(nice)g(to)g(ha)n
(v)o(e)g(each)g(aspect)i(of)d(the)h(generated)i(code)227
2392 y(in)f(some)g(form)f(of)h(encapsulated)j(module)e(that)f(could)h
(be)e(either)i(statically)h(link)o(ed)g(in)d(as)h(part)g(of)g(the)g
(back)g(end,)227 2505 y(or)f(perhaps)h(e)n(v)o(en)f(chosen)h(at)e
(runtime)i(by)f(the)f(user)-5 b(.)0 2693 y Fz(Better)24
b(De\002ne)e(the)h(Separation)h(of)g(Pr)n(esentation)g(Fr)n(om)g
(Implementation.)46 b FC(While)22 b(it)g(is)f(clear)i(ho)n(w)e(a)j
Fv(C)t(O)t(R)t(B)r(A)e FC(e)o(x-)227 2806 y(ception)30
b(might)f(be)g(encoded)h(using)h Fv(I)t(I)t(O)t(P)h FC(and)f
Fv(C)t(D)t(R)r FC(,)e(it)f(is)g(not)h(de\002ned)g(ho)n(w)f(such)h(a)f
(construct)i(might)f(be)g(sent)227 2919 y(in)f(an)i Fv(O)t(N)t(C)i(R)t
(P)t(C)r FC(-style)e(message.)43 b(Some)28 b(sort)g(of)g(con)l(v)o
(ersion)j(must)e(be)f(done)h(between)g(the)f(presentation)k(and)227
3031 y(the)f(encoding)i(or)e(message)h(format)f(layers)h(to)f(allo)n(w)
f(for)h(the)g(abstract)i(presentation)h(entities)f(to)d(be)h(encoded)
227 3144 y(according)d(to)c(the)h(link-layer)j(requirements.)35
b(See)24 b(Section)i(13.4)f(for)f(more)h(discussion)j(on)d(this)g(as)g
(it)f(relates)i(to)227 3257 y(the)e(runtime.)p eop
%%Page: 206 206
206 205 bop 0 -165 a FC(206)2658 b Fx(CHAPTER)20 b(12.)51
b(B)m(A)l(CK)22 b(ENDS)p eop
%%Page: 207 207
207 206 bop 0 729 a Fw(Chapter)44 b(13)0 1159 y FB(Runtime)0
1619 y FC(The)28 b(Flick)h(compiler)g(cannot)h(stand)g(on)e(its)h(o)n
(wn,)g(it)f(needs)h(a)f(runtime)i(to)e(implement)i(some)e(basic)i
(functionality)i(for)0 1732 y(the)25 b(stubs.)33 b(This)25
b(functionality)j(includes)f(things)f(lik)o(e)g(transmitting)h
(messages,)f(recei)n(ving)h(messages,)f(and)f(managing)0
1845 y(objects.)51 b(In)31 b(se)n(v)o(eral)g(cases,)i(Flick')-5
b(s)32 b(back)f(ends)g(use)g(Flick')-5 b(s)31 b(minimal)g(runtime)h
(systems)f(\227)f(the)o(y)h(are)f(designed)j(to)0 1958
y(get)27 b(the)g(job)f(done,)i(b)n(ut)f(usually)i(do)d(not)h(implement)
h(the)e(full)h(range)h(of)e(features)j(that)e(a)f(commercial)i(runtime)
f(might.)0 2071 y(Ho)n(we)n(v)o(er)l(,)22 b(a)h(fe)n(w)f(of)g(Flick')-5
b(s)24 b(back)f(ends)h(are)f(geared)h(to)n(w)o(ard)f(e)o(xternally)i
(de)n(v)o(eloped)g(runtime)f(systems,)g(such)f(as)g(T)-8
b(A)j(O.)0 2452 y Ft(13.1)119 b(Flick)31 b(Runtimes)0
2689 y FC(The)26 b(set)g(of)g(runtimes)i(located)g(in)e(the)h
Fy(runtime/libraries/link)19 b FC(are)26 b(minimal)h(in)f
(functionality)-6 b(.)41 b(The)o(y)26 b(pro)o(vide)0
2802 y(the)c(absolute)i(bare-bones)g(infrastructure)i(needed)d(to)f
(get)g(an)f(object/serv)o(er)k(and)d(send)h(messages)g(back)g(and)f
(forth.)29 b(The)0 2915 y(v)n(arious)g(back)f(ends)h(pro)o(vided)g
(with)e(Flick)h(are)g(k)o(e)o(yed)g(to)f(use)h(these)h(libraries;)i(ho)
n(we)n(v)o(er)l(,)e(one)f(can)g(al)o(w)o(ays)g(adapt)h(the)0
3028 y(back)24 b(ends)h(to)e(one')-5 b(s)25 b(needs.)141
3156 y(Flick')-5 b(s)29 b(runtime)g(libraries)i(are)d(contained)j
(under)e(the)g Fy(runtime/libraries)22 b FC(directory)31
b(of)d(the)g(Flick)h(distrib)n(u-)0 3269 y(tion:)195
3516 y Fy(libflick-)t(iiop.a)521 b FC(The)29 b Fv(I)t(I)t(O)t(P)j
FC(runtime)d(library)g(for)f(C)f(stubs,)i(to)f(be)g(using)h(with)f
(stubs)h(gener)n(-)1440 3629 y(ated)24 b(by)g(Flick')-5
b(s)26 b Fv(I)t(I)t(O)t(P)h FC(back)e(end,)e Fy(flick-)t(c-)t(pbe-)t
(iiop)p FC(.)195 3805 y Fy(libflick-)t(suntcp.a)425 b
FC(The)34 b Fv(O)t(N)t(C)t FC(/)t Fv(T)t(C)t(P)i FC(runtime)d(library)
-6 b(,)36 b(to)c(be)h(used)g(with)f(stubs)h(generated)i(by)1440
3918 y(Flick')-5 b(s)26 b Fv(O)t(N)t(C)t FC(/)t Fv(T)t(C)t(P)i
FC(back)c(end,)g Fy(flick-)t(c-)t(pbe-)t(sun)p FC(.)195
4094 y Fy(libflick-)t(mach3mig.a)329 b FC(The)37 b(Mach)h(3)f(runtime)i
(library)-6 b(,)42 b(to)c(be)f(used)i(with)e(stubs)i(generated)h(by)
1440 4207 y(Flick')-5 b(s)24 b(Mach)g(3)f(back)i(end,)e
Fy(flick-)t(c-)t(pbe-)t(mach3mig)p FC(.)195 4383 y Fy(libflick-)t
(trapeze.a)377 b FC(The)37 b(T)m(rapeze)h(runtime)h(library)-6
b(,)42 b(to)c(be)g(used)g(with)f(stubs)i(generated)h(by)1440
4496 y(Flick')-5 b(s)24 b(T)m(rapeze)h(back)f(end,)g
Fy(flick-)t(c-)t(pbe-)t(trapeze)p FC(.)0 4877 y Ft(13.2)119
b(Khazana,)30 b(Fluk)o(e)0 5114 y FC(Khazana)e(and)g(Fluk)o(e)g(are)f
(separate)i(projects)g(that)f(maintain)h(their)f(o)n(wn)e(runtimes,)k
(so)d(the)o(y)g(are)h(included)h(directly)g(in)0 5227
y(Flick.)45 b(See)28 b Fy(http://www.cs.utah.edu/flu)o(x/)22
b FC(for)29 b(information)i(about)f(Fluk)o(e)g(and)f
Fy(http://www.cs.utah.)0 5340 y(edu/flux/)20 b FC(for)k(information)i
(about)f(Khazana.)1882 5568 y(207)p eop
%%Page: 208 208
208 207 bop 0 -165 a FC(208)2753 b Fx(CHAPTER)20 b(13.)52
b(R)l(UNTIME)0 91 y Ft(13.3)119 b(The)30 b(A)-7 b(CE)31
b(ORB)f(\(T)-11 b(A)-5 b(O\))0 305 y FC(The)26 b(IIOPXX)e(back)j(end)g
(tar)n(gets)h(the)f(T)-8 b(A)j(O)24 b(real-time)29 b
Fv(O)t(R)t(B)f FC(from)e(W)-7 b(ashington)29 b(Uni)n(v)o(ersity)e(in)g
(St.)e(Louis.)37 b(This)28 b Fv(O)t(R)t(B)0 418 y FC(implements)21
b(the)e(majority)i(of)e(the)i Fv(C)t(O)t(R)t(B)r(A)f
FC(spec;)i(ho)n(we)n(v)o(er)l(,)e(the)g(spec)g(doesn')n(t)h(include)g
(requirements)h(for)e(transmitting)0 531 y(a)25 b(ra)o(w)f(message)i
(to)f(another)h(object)h(and)e(other)h(lo)n(w)f(le)n(v)o(el)g
(functionality)-6 b(.)37 b(F)o(ortunately)-6 b(,)27 b(T)-8
b(A)j(O)22 b(e)o(xports)27 b(enough)g(of)e(this)0 643
y(functionality)g(for)d(Flick)f(to)g(do)h(its)f(job)l(.)29
b(Unfortunately)-6 b(,)24 b(this)e(is)f(not)h(part)g(of)f(the)h(public)
g(interf)o(ace)i(and)e(lik)o(e)g(the)f(internal)0 756
y(implementation)28 b(details)e(of)f(an)o(y)g(system,)h(it)f(is)g(is)g
(lik)o(ely)h(to)f(change)h(o)o(v)o(er)f(time.)33 b(As)24
b(such,)i(Flick)f(must)g(be)g(adapted)i(to)0 869 y(these)k(changes)g
(as)f(the)o(y)f(occur)i(to)f(tak)o(e)g(adv)n(antage)i(of)d(ne)n(wer)h
(v)o(ersions)h(of)f(T)-8 b(A)j(O.)26 b(As)j(of)h(this)g(writing,)h(the)
f(IIOPXX)0 982 y(back)24 b(end)g(has)g(been)h(designed)h(for)d(and)h
(tested)h(with)e(with)h(T)-8 b(A)j(O)21 b(v)o(ersion)k(1.0)q(.)0
1294 y Ft(13.4)119 b(Logical)29 b(Runtime)i(and)g(Header)f(Separation)h
(f)m(or)f(Flick)0 1508 y FC(Flick')-5 b(s)24 b(support)i(of)d(multiple)
i(presentations)i(o)o(v)o(er)d(multiple)h(\223transports\224)i(brings)e
(with)e(it)g(man)o(y)h(real)g(problems:)136 1736 y Fs(\017)46
b FC(What)24 b(interf)o(ace)i(to)d(the)h(\223runtime\224)h(does)g(the)e
(user)i(e)o(xpect?)136 1937 y Fs(\017)46 b FC(What)24
b(interf)o(ace)i(does)e(Flick)g(need)g(to)g(the)f(link)i(layer?)136
2137 y Fs(\017)46 b FC(At)23 b(what)g(le)n(v)o(el)h(is)g(the)f
(presentation)k(independent)h(of)23 b(the)h(link)g(layer?)136
2338 y Fs(\017)46 b FC(Where)24 b(should)h(we)e(separate)j(the)e(link)g
(layer)g(from)g(the)f(message)i(format?)141 2567 y(This)34
b(section)i(is)e(an)g(attempt)h(to)f(deal)h(with)f(those)h(problems)g
(in)f(a)g(manner)h(that)g(will)e(allo)n(w)h(Flick)g(to)g(gro)n(w)g(to)0
2680 y(support)g(additional)g(link)e(layers,)j(message)e(formats,)h
(and)f(presentation)i(without)d(serious)i(changes)g(to)d(the)h(runtime)
0 2793 y(interf)o(ace.)0 3061 y FA(13.4.1)99 b(De\002nitions)0
3242 y FC(Here)23 b(are)h(the)g(terms)g(I'm)f(going)h(to)g(be)f(using,)
i(and)f(what)f(I)g(mean)h(by)g(them:)0 3471 y Fz(Pr)n(esentation)48
b FC(The)19 b(w)o(ay)i(an)h Fv(I)t(D)t(L)h FC(maps)d(to)h(a)e(gi)n(v)o
(en)i(language.)30 b(This)20 b(includes)j(e)n(v)o(erything)f(the)f
(user)g(of)f(the)h(stubs)g(must)227 3583 y(kno)n(w)j(in)f(order)i(to)e
(use)h(them)g(properly)-6 b(.)0 3784 y Fz(Message)25
b(F)n(ormat)46 b FC(The)20 b(w)o(ay)g(the)h(bits)g(look)g(in)g(the)g(b)
n(uf)n(fer)g(being)h(transmitted.)32 b Fv(X)t(D)t(R)22
b FC(and)h Fv(C)t(D)t(R)e FC(are)g(message)h(formats.)0
3985 y Fz(Link)g(Lay)o(er)47 b FC(The)23 b(w)o(ay)g(a)g(b)n(uf)n(fer)i
(is)e(transmitted)j(between)f(client)f(and)g(serv)o(er;)h(the)f(interf)
o(ace)i(to)d(the)h(netw)o(ork.)141 4213 y(T)m(rouble)33
b(occurs)h(when)e(you)h(really)g(try)g(and)f(di)n(vide)i(these)f(three)
g(things)g(as)g(completely)h(independent)i(entities.)0
4326 y(Link)28 b(Layer)h(in\003uences)h(message)f(format)g(and)g
(presentation.)47 b(Presentation)31 b(in\003uences)f(Link)e(Layer)h
(\(and)g(to)f(some)0 4439 y(small)c(de)o(gree,)g(message)h(format\),)f
(etc.)29 b(That)23 b(is)h(the)f(real)h(problem.)0 4708
y FA(13.4.2)99 b(Pr)n(esentation)26 b(Issues)0 4888 y
FC(Presentation)d(primarily)e(consists)h(of)e(the)g(basic)h(language)h
(mapping.)29 b(Exception/error)24 b(mapping)d(is)f(a)g(presentation)j
(is-)0 5001 y(sue.)28 b(All)21 b(errors)h(that)g(occur)g(in)f(stubs)h
(generated)i(by)d(Flick)h(should)g(call)g(presentation)j(dependent)f
(code)e(that)f(deals)h(with)0 5114 y(the)31 b(error)g(accordingly)-6
b(.)53 b(This)31 b(code)g(should)h(be)f(found)h(in)e(the)h(header)h
Fy(<flick/pres/)p Fl(presentation)o Fy(.h>)o FC(.)43
b(This)0 5227 y(header)28 b(DOES)23 b(concern)28 b(the)f(user)l(,)g
(because)h(it)e(should)i(contain)g(all)e(information)j(about)e(ho)n(w)e
(to)h(e)o(xtract)i(information)0 5340 y(about)d(e)o(xceptions)h(and)e
(errors.)p eop
%%Page: 209 209
209 208 bop 0 -165 a Fx(13.4.)52 b(LOGICAL)20 b(R)l(UNTIME)i(AND)f
(HEADER)g(SEP)-8 b(ARA)e(TION)18 b(FOR)k(FLICK)1032 b
FC(209)0 91 y FA(13.4.3)99 b(Link)26 b(Lay)o(er)f(Issues)0
266 y FC(The)h(link)i(layer)g(is)f(primarily)h(used)g(by)f(Flick)g
(internally)i(\227)d(send)i(request)h(to)d(serv)o(er)l(,)j(get)e
(request)i(from)e(client,)h(send)0 379 y(reply)c(to)g(client,)g(get)g
(request)h(from)e(serv)o(er)-5 b(.)29 b(The)23 b(link)h(layer)h(also)f
(speci\002es)g(what)f(the)h Fu(object)h(r)m(efer)m(ence)g
FC(data)f(structure)0 491 y(should)h(be.)j(F)o(or)22
b(e)o(xample,)i(Sun')-5 b(s)25 b Fv(R)t(P)t(C)g FC(link)f(layer)g(\()r
Fv(T)t(C)t(P)r FC(/)r Fv(U)t(D)t(P)r FC(\))i(speci\002es)e(that)f(the)h
(object)g(reference)h(needs)f(to)f(contain)0 604 y(an)j(IP)g(address,)j
(and)d(a)g(port)h(number)h(to)e(be)h(created.)39 b(Once)26
b(the)h(object)h(reference)g(is)e(created,)j(it)d(only)h(really)h
(needs)g(a)0 717 y(sock)o(et)d(number)l(,)g(though.)141
830 y(This)h(is)f(not)i(as)e(separable)k(as)c(it)h(may)f(initially)j
(seem,)f(though.)37 b(Object)26 b(reference)i(construction)i(and)c
(destruction)0 943 y(is)g(the)g(job)g(of)g(the)g(user)l(,)h(generally)i
(\(e)o(xcept)e(for)f(object)i(references)g(as)e(parameters\),)i(so)e
(this)h(needs)g(to)f(be)g(e)o(xposed)h(to)0 1056 y(the)g(user)-5
b(.)37 b(The)26 b(code)h(for)g(the)g(normal)g(\223Create)g(a)f(client)h
(object)h(reference\224)h(or)d(\223Destro)o(y)i(a)e(Client)h(object)h
(reference\224)0 1169 y(function)i(should)g(be)e(k)o(ept)h(separate)h
(from)e(the)g(code)h(that)f(Flick)g(uses)h(internally)-6
b(.)45 b(So,)28 b(as)g(a)f(user/presentation)33 b(issue,)0
1282 y(these)21 b(functions)i Fu(should)h FC(be)c(found)i(in)e(the)h
(header)g Fy(<flick/pres/)p Fl(presentation)p Fy(.)o(h>)p
FC(.)g(The)o(y)e(are)i(not,)g(at)f(this)h(time.)0 1395
y(Continue)k(reading.)14 b(.)g(.)141 1508 y(W)-7 b(e)18
b(should)i(ha)n(v)o(e)e(presentation)k(le)n(v)o(el)d(object)h
(references)h(that)d(translate)j(to)d(link)h(layer)g(object)h
(references.)30 b(This)18 b(can)0 1621 y(be)26 b(accomplished)i(f)o
(airly)f(ef)n(\002ciently)h(by)d(simply)i(tagging)g(the)f(presentation)
j(object)e(reference)h(with)e(an)g(intermediate)0 1733
y(object)d(reference)g(representation,)j(then)c(a)f(con)l(v)o(ersion)j
(to)e(the)f(link)h(layer)g(object)h(reference)h(w)o(ould)e(be)f(made)g
(when)h(the)0 1846 y(connection)32 b(is)c(actually)j(created.)46
b(The)28 b(user)i(w)o(ould)f(simply)h(link)f(their)h(\002les)e(to)h
(the)g(appropriate)j(link)d(layer)h(library)-6 b(,)0
1959 y(which)21 b(w)o(ould)g(implement)h Fy(flick_create_obj_ref)p
FC(.)g(This)e(w)o(ould)i(pre)n(v)o(ent)g(the)f(N)e(by)i(M)f(pairing)j
(of)d(presentations)0 2072 y(and)28 b(link)h(layers.)43
b(When)28 b(the)h(information)h(supplied)g(is)e(simply)h(insuf)n
(\002cient)g(to)f(create)h(a)f(v)n(alid)h(object)g(reference)h(on)0
2185 y(the)h(selected)h(link)f(layer)l(,)j(an)c(alternati)n(v)o(e)j
(call)e(could)h(be)e(made,)i(using)g(speci\002c)f(information.)52
b(An)30 b(e)o(xample)h(of)g(this)0 2298 y(problem)23
b(might)f(be)g(attempting)j(to)c(use)i(the)f(Sun)i Fv(R)t(P)t(C)g
FC(presentation)h(with)d(the)g(Mach)g(3)g(link)h(layer)-5
b(.)29 b(An)21 b(IP)g(address)j(and)0 2411 y(a)c(serv)o(er)i
(identi\002er)g(are)e(insuf)n(\002cient)j(to)e(actually)h(\002nd)e(the)
h(correct)h(Mach)f(port.)29 b(In)20 b(this)h(case,)h(the)f(user)g
(could)h(manually)0 2524 y(call)i Fy(flick_create_obj_ref)17
b FC(with)24 b(the)f(Mach)h(port)g(the)o(y')-5 b(re)26
b(using.)141 2637 y(This)h(approach)j(should)f(be)f(suf)n(\002cient)h
(for)e(the)h(problem,)h(b)n(ut)g(w)o(ould)f(require)h(more)e(time)g(to)
h(implement.)42 b(As)26 b(an)0 2750 y(initial)21 b(pass,)g(there)g
(will)e(be)h(a)f(header)l(,)j(found)f(in)f(the)g Fy(flick/pres)c
FC(directory)22 b(that)f(is)e(named)i Fl(pres)p 3239
2750 29 4 v 49 w Fy(on)p 3370 2750 V 34 w Fl(link)p 3596
2750 V 33 w(layer)14 b FC(.)0 2863 y(The)26 b(link)g(layer)h(object)g
(reference)i(information,)f(as)e(well)g(as)g(the)g(information)j(for)d
(using)h(the)f(link)h(layer)g(from)f(within)0 2975 y(Flick)e(stubs)g
(and)g(sk)o(eletons)i(will)e(be)f(located)i(in)f Fy(<flick/runtime/)p
Fl(link)p 2503 2975 V 29 w(layer)p Fy(.h>)p FC(.)0 3225
y FA(13.4.4)99 b(Message)24 b(F)n(ormat)h(Issues)0 3399
y FC(The)f(message)i(format)e(is)h(almost)g(completely)h(separable)h
(from)d(the)h(link)g(layer)-5 b(.)32 b(The)24 b Fy(flick/format/)p
Fl(encoding)p Fy(.h)0 3512 y FC(header)36 b(should)h(implement)f(the)f
(macros)h(for)f(globbing,)k(chunking,)h(and)c(bit)f(layout.)64
b(While)35 b(there)h(are)f(plenty)h(of)0 3625 y(ar)n(guments)24
b(against)f(this)g(di)n(vision)h(\(we)d(really)i(do)f(need)h(a)e
(USC-lik)o(e)h(IR)f(for)h(this)h(thing.)14 b(.)g(.)g(\))27
b(this)c(is)f(the)g(w)o(ay)g(it)f(is)h(going)0 3738 y(to)30
b(be)g(for)g(no)n(w)-6 b(.)48 b(The)30 b(header)h(may)f(contain)i(some)
e(assumptions)j(about)e(the)f(b)n(uf)n(fer)i(layout,)h(at)c(least)i
(for)g(no)n(w)-6 b(.)47 b(This)0 3851 y(b)n(uf)n(fer)33
b(information)h(should)f(e)n(v)o(entually)h(be)e(encoded)i(and)e(dealt)
g(with)g(appropriately)-6 b(,)37 b(b)n(ut)32 b(for)g(the)g(initial)h
(cut,)h(this)0 3963 y(o)o(v)o(erlap)25 b(is)e(acceptable.)p
eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
